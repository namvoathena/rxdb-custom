!function n(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return s(i[t][1][e]||e)},r,r.exports,n,i,o,a)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MissingRefError=r.ValidationError=r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=void 0;var n=e("./core");const i=e("./vocabularies/draft7"),o=e("./vocabularies/discriminator"),a=e("./refs/json-schema-draft-07.json"),s=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){var e;super._addDefaultMetaSchema(),this.opts.meta&&(e=this.opts.$data?this.$dataMetaSchema(a,s):a,this.addMetaSchema(e,u,!1),this.refs["http://json-schema.org/schema"]=u)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.exports=r=c,Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var l=e("./compile/validate"),d=(Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}}),e("./compile/codegen")),f=(Object.defineProperty(r,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}}),e("./runtime/validation_error")),p=(Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return f.default}}),e("./compile/ref_error"));Object.defineProperty(r,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},{"./compile/codegen":3,"./compile/ref_error":8,"./compile/validate":16,"./core":19,"./refs/json-schema-draft-07.json":21,"./runtime/validation_error":25,"./vocabularies/discriminator":47,"./vocabularies/draft7":49}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.regexpCode=r.getEsmExportName=r.getProperty=r.safeStringify=r.stringify=r.strConcat=r.addCodeArg=r.str=r._=r.nil=r._Code=r.Name=r.IDENTIFIER=r._CodeOrName=void 0;class n{}r._CodeOrName=n,r.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class a extends n{constructor(e){if(super(),!r.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}r.Name=a;class s extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){var e;return!(1<this._items.length||""!==(e=this._items[0])&&'""'!==e)}get str(){var e;return null!=(e=this._str)?e:this._str=this._items.reduce((e,t)=>""+e+t,"")}get names(){var e;return null!=(e=this._names)?e:this._names=this._items.reduce((e,t)=>(t instanceof a&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){var r=[e[0]];let n=0;for(;n<t.length;)c(r,t[n]),r.push(e[++n]);return new s(r)}r._Code=s,r.nil=new s(""),r._=i;const u=new s("+");function o(e,...t){var r=[l(e[0])];let n=0;for(;n<t.length;)r.push(u),c(r,t[n]),r.push(u,l(e[++n]));{var i=r;let e=1;for(;e<i.length-1;){if(i[e]===u){var o=function(e,t){return'""'===t?e:'""'===e?t:"string"!=typeof e?"string"!=typeof t||'"'!==t[0]||e instanceof a?void 0:'"'+e+t.slice(1):t instanceof a||'"'!==e[e.length-1]?void 0:"string"!=typeof t?""+e.slice(0,-1)+t+'"':'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}(i[e-1],i[e+1]);if(void 0!==o){i.splice(e-1,3,o);continue}i[e++]="+"}e++}}return new s(r)}function c(e,t){t instanceof s?e.push(...t._items):t instanceof a?e.push(t):e.push("number"==typeof(e=t)||"boolean"==typeof e||null===e?e:l(Array.isArray(e)?e.join(","):e))}function l(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}r.str=o,r.addCodeArg=c,r.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:o`${e}${t}`},r.stringify=function(e){return new s(l(e))},r.safeStringify=l,r.getProperty=function(e){return"string"==typeof e&&r.IDENTIFIER.test(e)?new s("."+e):i`[${e}]`},r.getEsmExportName=function(e){if("string"==typeof e&&r.IDENTIFIER.test(e))return new s(""+e);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},r.regexpCode=function(e){return new s(e.toString())}},{}],3:[function(e,T,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.or=r.and=r.not=r.CodeGen=r.operators=r.varKinds=r.ValueScopeName=r.ValueScope=r.Scope=r.Name=r.regexpCode=r.stringify=r.getProperty=r.nil=r.strConcat=r.str=r._=void 0;const a=e("./code"),s=e("./scope");var t=e("./code"),n=(Object.defineProperty(r,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(r,"strConcat",{enumerable:!0,get:function(){return t.strConcat}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(r,"getProperty",{enumerable:!0,get:function(){return t.getProperty}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(r,"regexpCode",{enumerable:!0,get:function(){return t.regexpCode}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return t.Name}}),e("./scope"));Object.defineProperty(r,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(r,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(r,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(r,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),r.operators={GT:new a._Code(">"),GTE:new a._Code(">="),LT:new a._Code("<"),LTE:new a._Code("<="),EQ:new a._Code("==="),NEQ:new a._Code("!=="),NOT:new a._Code("!"),OR:new a._Code("||"),AND:new a._Code("&&"),ADD:new a._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class o extends i{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){var e=e?s.varKinds.var:this.varKind,r=void 0===this.rhs?"":" = "+this.rhs;return`${e} ${this.name}${r};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof a._CodeOrName?this.rhs.names:{}}}class u extends i{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof a.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,t),this}get names(){return M(this.lhs instanceof a.Name?{}:{...this.lhs.names},this.rhs)}}class c extends u{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class l extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return this.label+":"+e}}class d extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?" "+this.label:""};`+e}}class f extends i{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends i{constructor(e){super(),this.code=e}render({_n:e}){return this.code+";"+e}optimizeNodes(){return""+this.code?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof a._CodeOrName?this.code.names:{}}}class h extends i{constructor(e=[]){super(),this.nodes=e}render(r){return this.nodes.reduce((e,t)=>e+t.render(r),"")}optimizeNodes(){var e=this["nodes"];let t=e.length;for(;t--;){var r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return 0<e.length?this:void 0}optimizeNames(e,t){var r=this["nodes"];let n=r.length;for(;n--;){var i=r[n];if(!i.optimizeNames(e,t)){a=o=void 0;var o=e,a=i.names;for(const s in a)o[s]=(o[s]||0)-(a[s]||0);r.splice(n,1)}}return 0<r.length?this:void 0}get names(){return this.nodes.reduce((e,t)=>A(e,t.names),{})}}class m extends h{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends h{}class b extends m{}b.kind="else";class v extends m{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();var e,t=this.condition;if(!0===t)return this.nodes;let r=this.else;return r&&(e=r.optimizeNodes(),r=this.else=Array.isArray(e)?new b(e):e),r?!1===t?r instanceof v?r:r.nodes:this.nodes.length?this:new v(R(t),r instanceof v?[r]:r.nodes):!1!==t&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null==(r=this.else)?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){var e=super.names;return M(e,this.condition),this.else&&A(e,this.else.names),e}}v.kind="if";class g extends m{}g.kind="for";class _ extends g{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return A(super.names,this.iteration.names)}}class w extends g{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){var{name:t,from:r,to:n}=this;return`for(${e.es5?s.varKinds.var:this.varKind} ${t}=${r}; ${t}<${n}; ${t}++)`+super.render(e)}get names(){var e=M(super.names,this.from);return M(e,this.to)}}class O extends g{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return A(super.names,this.iterable.names)}}class S extends m{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return(this.async?"async ":"")+`function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class E extends h{render(e){return"return "+super.render(e)}}E.kind="return";class x extends m{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e;return super.optimizeNodes(),null!=(e=this.catch)&&e.optimizeNodes(),null!=(e=this.finally)&&e.optimizeNodes(),this}optimizeNames(e,t){var r;return super.optimizeNames(e,t),null!=(r=this.catch)&&r.optimizeNames(e,t),null!=(r=this.finally)&&r.optimizeNames(e,t),this}get names(){var e=super.names;return this.catch&&A(e,this.catch.names),this.finally&&A(e,this.finally.names),e}}class P extends m{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}P.kind="catch";class j extends m{render(e){return"finally"+super.render(e)}}j.kind="finally";function A(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function M(e,t){return t instanceof a._CodeOrName?A(e,t.names):e}function I(e,r,n){var t;return e instanceof a.Name?i(e):(t=e)instanceof a._Code&&t._items.some(e=>e instanceof a.Name&&1===r[e.str]&&void 0!==n[e.str])?new a._Code(e._items.reduce((e,t)=>((t=t instanceof a.Name?i(t):t)instanceof a._Code?e.push(...t._items):e.push(t),e),[])):e;function i(e){var t=n[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function R(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,a._)`!${D(e)}`}r.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){e=this._extScope.value(e,t);return(this._values[e.prefix]||(this._values[e.prefix]=new Set)).add(e),e}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){t=this._scope.toName(t);return void 0!==r&&n&&(this._constants[t.str]=r),this._leafNode(new o(e,t,r)),t}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new u(e,t,r))}add(e,t){return this._leafNode(new c(e,r.operators.ADD,t))}code(e){return"function"==typeof e?e():e!==a.nil&&this._leafNode(new p(e)),this}object(...e){var t,r,n=["{"];for([t,r]of e)1<n.length&&n.push(","),n.push(t),t===r&&!this.opts.es5||(n.push(":"),(0,a.addCodeArg)(n,r));return n.push("}"),new a._Code(n)}if(e,t,r){if(this._blockNode(new v(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new v(e))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(v,b)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,r,n,i=this.opts.es5?s.varKinds.var:s.varKinds.let){const o=this._scope.toName(e);return this._for(new w(i,o,t,r),()=>n(o))}forOf(e,t,r,n=s.varKinds.const){const i=this._scope.toName(e);if(this.opts.es5){const o=t instanceof a.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,a._)`${o}.length`,e=>{this.var(i,(0,a._)`${o}[${e}]`),r(i)})}return this._for(new O("of",n,i,t),()=>r(i))}forIn(e,t,r,n=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,a._)`Object.keys(${t})`,r);const i=this._scope.toName(e);return this._for(new O("in",n,i,t),()=>r(i))}endFor(){return this._endBlockNode(g)}label(e){return this._leafNode(new l(e))}break(e){return this._leafNode(new d(e))}return(e){var t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,r){var n;if(t||r)return n=new x,this._blockNode(n),this.code(e),t&&(e=this.name("e"),this._currNode=n.catch=new P(e),t(e)),r&&(this._currNode=n.finally=new j,this.code(r)),this._endBlockNode(P,j);throw new Error('CodeGen: "try" without "catch" and "finally"')}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=a.nil,r,n){return this._blockNode(new S(e,t,r)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;0<e--;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){var r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?e.kind+"/"+t.kind:e.kind}"`)}_elseNode(e){var t=this._currNode;if(t instanceof v)return this._currNode=t.else=e,this;throw new Error('CodeGen: "else" without "if"')}get _root(){return this._nodes[0]}get _currNode(){var e=this._nodes;return e[e.length-1]}set _currNode(e){var t=this._nodes;t[t.length-1]=e}},r.not=R;const C=$(r.operators.AND);r.and=function(...e){return e.reduce(C)};const k=$(r.operators.OR);function $(r){return(e,t)=>e===a.nil?t:t===a.nil?e:(0,a._)`${D(e)} ${r} ${D(t)}`}function D(e){return e instanceof a.Name?e:(0,a._)`(${e})`}r.or=function(...e){return e.reduce(k)}},{"./code":2,"./scope":4}],4:[function(e,t,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ValueScope=u.ValueScopeName=u.Scope=u.varKinds=u.UsedValueState=void 0;const c=e("./code");class l extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var d;(e=d=u.UsedValueState||(u.UsedValueState={}))[e.Started=0]="Started",e[e.Completed=1]="Completed",u.varKinds={const:new c.Name("const"),let:new c.Name("let"),var:new c.Name("var")};class r{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof c.Name?e:this.name(e)}name(e){return new c.Name(this._newName(e))}_newName(e){return""+e+(this._names[e]||this._nameGroup(e)).index++}_nameGroup(e){var t;if(null!=(t=null==(t=this._parent)?void 0:t._prefixes)&&t.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}u.Scope=r;class n extends c.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=(0,c._)`.${new c.Name(t)}[${r}]`}}u.ValueScopeName=n;const i=(0,c._)`\n`;u.ValueScope=class extends r{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?i:c.nil}}get(){return this._scope}name(e){return new n(e,this._newName(e))}value(e,t){if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var e=this.toName(e),r=e["prefix"],n=null!=(n=t.key)?n:t.ref;let i=this._values[r];if(i){var o=i.get(n);if(o)return o}else i=this._values[r]=new Map;i.set(n,e);o=this._scope[r]||(this._scope[r]=[]),n=o.length;return o[n]=t.ref,e.setValue(t,{property:r,itemIndex:n}),e}getValue(e,t){e=this._values[e];if(e)return e.get(t)}scopeRefs(t,e=this._values){return this._reduceValues(e,e=>{if(void 0===e.scopePath)throw new Error(`CodeGen: name "${e}" has no value`);return(0,c._)`${t}${e.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,n,t={},i){let o=c.nil;for(const a in e){var r=e[a];if(r){const s=t[a]=t[a]||new Map;r.forEach(e=>{if(!s.has(e)){s.set(e,d.Started);var t=n(e);if(t){var r=this.opts.es5?u.varKinds.var:u.varKinds.const;o=(0,c._)`${o}${r} ${e} = ${t};${this.opts._n}`}else{if(!(t=null==i?void 0:i(e)))throw new l(e);o=(0,c._)`${o}${t}${this.opts._n}`}s.set(e,d.Completed)}})}}return o}}},{"./code":2}],5:[function(e,t,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.extendErrors=u.resetErrorsCount=u.reportExtraError=u.reportError=u.keyword$DataError=u.keywordError=void 0;const p=e("./codegen"),h=e("./util"),m=e("./names");function c(e,t){const r=e.const("err",t);e.if((0,p._)`${m.default.vErrors} === null`,()=>e.assign(m.default.vErrors,(0,p._)`[${r}]`),(0,p._)`${m.default.vErrors}.push(${r})`),e.code((0,p._)`${m.default.errors}++`)}function l(e,t){var{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw((0,p._)`new ${e.ValidationError}(${t})`):(r.assign((0,p._)`${n}.errors`,t),r.return(!1))}u.keywordError={message:({keyword:e})=>(0,p.str)`must pass "${e}" keyword validation`},u.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,p.str)`"${e}" keyword must be ${t} ($data)`:(0,p.str)`"${e}" keyword is invalid ($data)`},u.reportError=function(e,t=u.keywordError,r,n){var i=e["it"],{gen:o,compositeRule:a,allErrors:s}=i,e=d(e,t,r);(null!=n?n:a||s)?c(o,e):l(i,(0,p._)`[${e}]`)},u.reportExtraError=function(e,t=u.keywordError,r){var n=e["it"],{gen:i,compositeRule:o,allErrors:a}=n;c(i,d(e,t,r)),o||a||l(n,m.default.vErrors)},u.resetErrorsCount=function(e,t){e.assign(m.default.errors,t),e.if((0,p._)`${m.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,p._)`${m.default.vErrors}.length`,t),()=>e.assign(m.default.vErrors,null)))},u.extendErrors=function({gen:t,keyword:r,schemaValue:n,data:i,errsCount:e,it:o}){if(void 0===e)throw new Error("ajv implementation error");const a=t.name("err");t.forRange("i",e,m.default.errors,e=>{t.const(a,(0,p._)`${m.default.vErrors}[${e}]`),t.if((0,p._)`${a}.instancePath === undefined`,()=>t.assign((0,p._)`${a}.instancePath`,(0,p.strConcat)(m.default.instancePath,o.errorPath))),t.assign((0,p._)`${a}.schemaPath`,(0,p.str)`${o.errSchemaPath}/${r}`),o.opts.verbose&&(t.assign((0,p._)`${a}.schema`,n),t.assign((0,p._)`${a}.data`,i))})};const y={keyword:new p.Name("keyword"),schemaPath:new p.Name("schemaPath"),params:new p.Name("params"),propertyName:new p.Name("propertyName"),message:new p.Name("message"),schema:new p.Name("schema"),parentSchema:new p.Name("parentSchema")};function d(e,t,r){var n,i,o,a,s,u,c,l,d,f=e.it["createErrors"];return!1===f?(0,p._)`{}`:([f,e,t={}]=[e,t,r],{gen:r,it:n}=f,n=[function({errorPath:e},{instancePath:t}){t=t?(0,p.str)`${e}${(0,h.getErrorPath)(t,h.Type.Str)}`:e;return[m.default.instancePath,(0,p.strConcat)(m.default.instancePath,t)]}(n,t),function({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,p.str)`${t}/${e}`;r&&(i=(0,p.str)`${i}${(0,h.getErrorPath)(r,h.Type.Str)}`);return[y.schemaPath,i]}(f,t)],[t,{params:f,message:e},i]=[f,e,n],{keyword:o,data:a,schemaValue:s,it:u}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=u,i.push([y.keyword,o],[y.params,"function"==typeof f?f(t):f||(0,p._)`{}`]),u.messages&&i.push([y.message,"function"==typeof e?e(t):e]),u.verbose&&i.push([y.schema,s],[y.parentSchema,(0,p._)`${l}${d}`],[m.default.data,a]),c&&i.push([y.propertyName,c]),r.object(...n))}},{"./codegen":3,"./names":7,"./util":11}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveSchema=r.getCompilingSchema=r.resolveRef=r.compileSchema=r.SchemaEnv=void 0;const d=e("./codegen"),f=e("../runtime/validation_error"),p=e("./names"),h=e("./resolve"),u=e("./util"),m=e("./validate");class c{constructor(e){var t;this.refs={},this.dynamicAnchors={};let r;"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!=(t=e.baseId)?t:(0,h.normalizeId)(null===r||void 0===r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null===r||void 0===r?void 0:r.$async,this.refs={}}}function s(t){var e=y.call(this,t);if(e)return e;var e=(0,h.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:n}=this.opts.code,i=this.opts["ownProperties"],r=new d.CodeGen(this.scope,{es5:r,lines:n,ownProperties:i});let o;t.$async&&(o=r.scopeValue("Error",{ref:f.default,code:(0,d._)`require("ajv/dist/runtime/validation_error").default`}));n=r.scopeName("validate"),t.validateName=n,i={gen:r,allErrors:this.opts.allErrors,data:p.default.data,parentData:p.default.parentData,parentDataProperty:p.default.parentDataProperty,dataNames:[p.default.data],dataPathArr:[d.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:r.scopeValue("schema",!0===this.opts.code.source?{ref:t.schema,code:(0,d.stringify)(t.schema)}:{ref:t.schema}),validateName:n,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:e,baseId:t.baseId||e,schemaPath:d.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,d._)`""`,opts:this.opts,self:this};let a;try{this._compilations.add(t),(0,m.validateFunctionCode)(i),r.optimize(this.opts.code.optimize);var s=r.toString();a=r.scopeRefs(p.default.scope)+"return "+s,this.opts.code.process&&(a=this.opts.code.process(a,t));var u,c,l=new Function(""+p.default.self,""+p.default.scope,a)(this,this.scope.get());return this.scope.value(n,{ref:l}),l.errors=null,l.schema=t.schema,(l.schemaEnv=t).$async&&(l.$async=!0),!0===this.opts.code.source&&(l.source={validateName:n,validateCode:s,scopeValues:r._values}),this.opts.unevaluated&&({props:u,items:c}=i,l.evaluated={props:u instanceof d.Name?void 0:u,items:c instanceof d.Name?void 0:c,dynamicProps:u instanceof d.Name,dynamicItems:c instanceof d.Name},l.source)&&(l.source.evaluated=(0,d.stringify)(l.evaluated)),t.validate=l,t}catch(e){throw delete t.validate,delete t.validateName,a&&this.logger.error("Error compiling schema, function code:",a),e}finally{this._compilations.delete(t)}}function y(e){for(const n of this._compilations)if(t=n,r=e,t.schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n;var t,r}function l(e,t){var r,n,i=this.opts.uriResolver.parse(t),o=(0,h._getFullPath)(this.opts.uriResolver,i);let a=(0,h.getFullPath)(this.opts.uriResolver,e.baseId,void 0);return 0<Object.keys(e.schema).length&&o===a?v.call(this,i,e):(o=(0,h.normalizeId)(o),"string"==typeof(r=this.refs[o]||this.schemas[o])?"object"!=typeof(null==(n=l.call(this,e,r))?void 0:n.schema)?void 0:v.call(this,i,n):"object"==typeof(null==r?void 0:r.schema)?(r.validate||s.call(this,r),o===(0,h.normalizeId)(t)?(n=r["schema"],o=this.opts["schemaId"],(t=n[o])&&(a=(0,h.resolveUrl)(this.opts.uriResolver,a,t)),new c({schema:n,schemaId:o,root:e,baseId:a})):v.call(this,i,r)):void 0)}r.SchemaEnv=c,r.compileSchema=s,r.resolveRef=function(e,t,r){r=(0,h.resolveUrl)(this.opts.uriResolver,t,r);var n,i=e.refs[r];if(i)return i;let o=function(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||l.call(this,e,t)}.call(this,e,r);return void 0!==(o=void 0===o&&(i=null==(i=e.localRefs)?void 0:i[r],n=this.opts["schemaId"],i)?new c({schema:i,schemaId:n,root:e,baseId:t}):o)?e.refs[r]=function(e){return(0,h.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:s.call(this,e)}.call(this,o):void 0},r.getCompilingSchema=y,r.resolveSchema=l;const b=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(t,{baseId:r,schema:n,root:i}){if("/"===(null==(a=t.fragment)?void 0:a[0])){for(const s of t.fragment.slice(1).split("/")){if("boolean"==typeof n)return;var o=n[(0,u.unescapeFragment)(s)];if(void 0===o)return;o="object"==typeof(n=o)&&n[this.opts.schemaId];!b.has(s)&&o&&(r=(0,h.resolveUrl)(this.opts.uriResolver,r,o))}let e;var a,t=("boolean"!=typeof n&&n.$ref&&!(0,u.schemaHasRulesButRef)(n,this.RULES)&&(a=(0,h.resolveUrl)(this.opts.uriResolver,r,n.$ref),e=l.call(this,i,a)),this.opts)["schemaId"];return(e=e||new c({schema:n,schemaId:t,root:i,baseId:r})).schema!==e.root.schema?e:void 0}}},{"../runtime/validation_error":25,"./codegen":3,"./names":7,"./resolve":9,"./util":11,"./validate":16}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e=e("./codegen"),e={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};r.default=e},{"./codegen":3}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("./resolve");class n extends Error{constructor(e,t,r,n){super(n||`can't resolve reference ${r} from id `+t),this.missingRef=(0,i.resolveUrl)(e,t,r),this.missingSchema=(0,i.normalizeId)((0,i.getFullPath)(e,this.missingRef))}}r.default=n},{"./resolve":9}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSchemaRefs=r.resolveUrl=r.normalizeId=r._getFullPath=r.getFullPath=r.inlineRef=void 0;const i=e("./util"),n=e("fast-deep-equal"),o=e("json-schema-traverse"),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);r.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!u(e):!!t&&function t(e){let r=0;for(const n in e){if("$ref"===n)return 1/0;if(r++,!a.has(n)&&("object"==typeof e[n]&&(0,i.eachItem)(e[n],e=>r+=t(e)),r===1/0))return 1/0}return r}(e)<=t)};const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(e){for(const r in e){if(s.has(r))return!0;var t=e[r];if(Array.isArray(t)&&t.some(u))return!0;if("object"==typeof t&&u(t))return!0}return!1}function m(e,t="",r){!1!==r&&(t=y(t));r=e.parse(t);return c(e,r)}function c(e,t){return e.serialize(t).split("#")[0]+"#"}r.getFullPath=m,r._getFullPath=c;const l=/#\/?$/;function y(e){return e?e.replace(l,""):""}r.normalizeId=y,r.resolveUrl=function(e,t,r){return r=y(r),e.resolve(t,r)};const b=/^[a-z_][-a-z0-9._]*$/i;r.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:u,uriResolver:r}=this.opts,c={"":t=y(e[u]||t)},l=m(r,t,!1),d={},f=new Set;return o(e,{allKeys:!0},(i,e,t,r)=>{if(void 0!==r){const s=l+e;let n=c[r];function o(e){var t=this.opts.uriResolver.resolve;if(e=y(n?t(n,e):e),f.has(e))throw h(e);f.add(e);let r=this.refs[e];return"object"==typeof(r="string"==typeof r?this.refs[r]:r)?p(i,r.schema,e):e!==y(s)&&("#"===e[0]?(p(i,d[e],e),d[e]=i):this.refs[e]=s),e}function a(e){if("string"==typeof e){if(!b.test(e))throw new Error(`invalid anchor "${e}"`);o.call(this,"#"+e)}}"string"==typeof i[u]&&(n=o.call(this,i[u])),a.call(this,i.$anchor),a.call(this,i.$dynamicAnchor),c[e]=n}}),d;function p(e,t,r){if(void 0!==t&&!n(e,t))throw h(r)}function h(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},{"./util":11,"fast-deep-equal":123,"json-schema-traverse":145}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRules=r.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);r.isJSONType=function(e){return"string"==typeof e&&n.has(e)},r.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkStrictMode=r.getErrorPath=r.Type=r.useFunc=r.setEvaluated=r.evaluatedPropsToName=r.mergeEvaluated=r.eachItem=r.unescapeJsonPointer=r.escapeJsonPointer=r.escapeFragment=r.unescapeFragment=r.schemaRefOrVal=r.schemaHasRulesButRef=r.schemaHasRules=r.checkUnknownRules=r.alwaysValidSchema=r.toHash=void 0;const u=e("./codegen"),n=e("./codegen/code");function i(e,t=e.schema){var{opts:r,self:n}=e;if(r.strictSchema&&"boolean"!=typeof t){var i=n.RULES.keywords;for(const o in t)i[o]||h(e,`unknown keyword: "${o}"`)}}function o(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?""+e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:i,mergeToName:o,mergeValues:a,resultToName:s}){return(e,t,r,n)=>{t=void 0===r?t:r instanceof u.Name?((t instanceof u.Name?i:o)(e,t,r),r):t instanceof u.Name?(o(e,r,t),t):a(t,r);return n!==u.Name||t instanceof u.Name?t:s(e,t)}}function l(e,t){var r;return!0===t?e.var("props",!0):(r=e.var("props",(0,u._)`{}`),void 0!==t&&d(e,r,t),r)}function d(t,r,e){Object.keys(e).forEach(e=>t.assign((0,u._)`${r}${(0,u.getProperty)(e)}`,!0))}r.toHash=function(e){var t={};for(const r of e)t[r]=!0;return t},r.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!o(t,e.self.RULES.all))},r.checkUnknownRules=i,r.schemaHasRules=o,r.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},r.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return(0,u._)`${r}`}return(0,u._)`${e}${t}${(0,u.getProperty)(n)}`},r.unescapeFragment=function(e){return s(decodeURIComponent(e))},r.escapeFragment=function(e){return encodeURIComponent(a(e))},r.escapeJsonPointer=a,r.unescapeJsonPointer=s,r.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},r.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if((0,u._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,u._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,u._)`${r} || {}`).code((0,u._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,u._)`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,(0,u._)`${r} || {}`),d(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:l}),items:c({mergeNames:(e,t,r)=>e.if((0,u._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,u._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,u._)`${r} !== true`,()=>e.assign(r,!0===t||(0,u._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},r.evaluatedPropsToName=l,r.setEvaluated=d;const f={};var p;function h(e,t,r=e.opts.strictSchema){if(r){if(t="strict mode: "+t,!0===r)throw new Error(t);e.self.logger.warn(t)}}r.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:f[t.code]||(f[t.code]=new n._Code(t.code))})},(e=p=r.Type||(r.Type={}))[e.Num=0]="Num",e[e.Str=1]="Str",r.getErrorPath=function(e,t,r){return e instanceof u.Name?(t=t===p.Num,r?t?(0,u._)`"[" + ${e} + "]"`:(0,u._)`"['" + ${e} + "']"`:t?(0,u._)`"/" + ${e}`:(0,u._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`):r?(0,u.getProperty)(e).toString():"/"+a(e)},r.checkStrictMode=h},{"./codegen":3,"./codegen/code":2}],12:[function(e,t,r){"use strict";function n(t,e){return e.rules.some(e=>i(t,e))}function i(t,e){return void 0!==t[e.keyword]||(null==(e=e.definition.implements)?void 0:e.some(e=>void 0!==t[e]))}Object.defineProperty(r,"__esModule",{value:!0}),r.shouldUseRule=r.shouldUseGroup=r.schemaHasRulesForType=void 0,r.schemaHasRulesForType=function({schema:e,self:t},r){return(t=t.RULES.types[r])&&!0!==t&&n(e,t)},r.shouldUseGroup=n,r.shouldUseRule=i},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.boolOrEmptySchema=r.topBoolOrEmptySchema=void 0;const i=e("../errors"),o=e("../codegen"),a=e("../names"),s={message:"boolean schema is false"};function u(e,t){var{gen:r,data:n}=e,r={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,i.reportError)(r,s,void 0,t)}r.topBoolOrEmptySchema=function(e){var{gen:t,schema:r,validateName:n}=e;!1===r?u(e,!1):"object"==typeof r&&!0===r.$async?t.return(a.default.data):(t.assign((0,o._)`${n}.errors`,null),t.return(!0))},r.boolOrEmptySchema=function(e,t){var{gen:r,schema:n}=e;!1===n?(r.var(t,!1),u(e)):r.var(t,!0)}},{"../codegen":3,"../errors":5,"../names":7}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reportTypeError=r.checkDataTypes=r.checkDataType=r.coerceAndCheckDataType=r.getJSONTypes=r.getSchemaTypes=r.DataType=void 0;const n=e("../rules"),o=e("./applicability"),i=e("../errors"),f=e("../codegen"),s=e("../util");var u;function a(e){e=Array.isArray(e)?e:e?[e]:[];if(e.every(n.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}(e=u=r.DataType||(r.DataType={}))[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong",r.getSchemaTypes=function(e){var t=a(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},r.getJSONTypes=a,r.coerceAndCheckDataType=function(c,l){var t,{gen:e,data:r,opts:n}=c;i=l;const d=(t=n.coerceTypes)?i.filter(e=>p.has(e)||"array"===t&&"array"===e):[];var i=0<l.length&&!(0===d.length&&1===l.length&&(0,o.schemaHasRulesForType)(c,l[0]));return i&&(r=h(l,r,n.strictNumbers,u.Wrong),e.if(r,()=>{if(d.length){var i=c,e=l,t=d;const{gen:o,data:a,opts:r}=i,n=o.let("dataType",(0,f._)`typeof ${a}`),s=o.let("coerced",(0,f._)`undefined`);"array"===r.coerceTypes&&o.if((0,f._)`${n} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>o.assign(a,(0,f._)`${a}[0]`).assign(n,(0,f._)`typeof ${a}`).if(h(e,a,r.strictNumbers),()=>o.assign(s,a))),o.if((0,f._)`${s} !== undefined`);for(const u of t)(p.has(u)||"array"===u&&"array"===r.coerceTypes)&&!function(e){switch(e){case"string":return o.elseIf((0,f._)`${n} == "number" || ${n} == "boolean"`).assign(s,(0,f._)`"" + ${a}`).elseIf((0,f._)`${a} === null`).assign(s,(0,f._)`""`);case"number":return o.elseIf((0,f._)`${n} == "boolean" || ${a} === null
              || (${n} == "string" && ${a} && ${a} == +${a})`).assign(s,(0,f._)`+${a}`);case"integer":return o.elseIf((0,f._)`${n} === "boolean" || ${a} === null
              || (${n} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(s,(0,f._)`+${a}`);case"boolean":return o.elseIf((0,f._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(s,!1).elseIf((0,f._)`${a} === "true" || ${a} === 1`).assign(s,!0);case"null":return o.elseIf((0,f._)`${a} === "" || ${a} === 0 || ${a} === false`),o.assign(s,null);case"array":o.elseIf((0,f._)`${n} === "string" || ${n} === "number"
              || ${n} === "boolean" || ${a} === null`).assign(s,(0,f._)`[${a}]`)}}(u);o.else(),m(i),o.endIf(),o.if((0,f._)`${s} !== undefined`,()=>{var e,t,r,n;o.assign(a,s),[{gen:e,parentData:t,parentDataProperty:r},n]=[i,s],e.if((0,f._)`${t} !== undefined`,()=>e.assign((0,f._)`${t}[${r}]`,n))})}else m(c)})),i};const p=new Set(["string","number","integer","boolean","null"]);function c(e,t,r,n=u.Correct){var i=n===u.Correct?f.operators.EQ:f.operators.NEQ;let o;switch(e){case"null":return(0,f._)`${t} ${i} null`;case"array":o=(0,f._)`Array.isArray(${t})`;break;case"object":o=(0,f._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a((0,f._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return(0,f._)`typeof ${t} ${i} ${e}`}return n===u.Correct?o:(0,f.not)(o);function a(e=f.nil){return(0,f.and)((0,f._)`typeof ${t} == "number"`,e,r?(0,f._)`isFinite(${t})`:f.nil)}}function h(e,t,r,n){if(1===e.length)return c(e[0],t,r,n);let i;var o,e=(0,s.toHash)(e);e.array&&e.object?(o=(0,f._)`typeof ${t} != "object"`,i=e.null?o:(0,f._)`!${t} || ${o}`,delete e.null,delete e.array,delete e.object):i=f.nil,e.number&&delete e.integer;for(const a in e)i=(0,f.and)(i,c(a,t,r,n));return i}r.checkDataType=c,r.checkDataTypes=h;const l={message:({schema:e})=>"must be "+e,params:({schema:e,schemaValue:t})=>"string"==typeof e?(0,f._)`{type: ${e}}`:(0,f._)`{type: ${t}}`};function m(e){e=function(e){var{gen:t,data:r,schema:n}=e,i=(0,s.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}(e);(0,i.reportError)(e,l)}r.reportTypeError=m},{"../codegen":3,"../errors":5,"../rules":10,"../util":11,"./applicability":12}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assignDefaults=void 0;const s=e("../codegen"),u=e("../util");function o(e,t,r){var{gen:n,compositeRule:i,data:o,opts:a}=e;if(void 0!==r){o=(0,s._)`${o}${(0,s.getProperty)(t)}`;if(i)(0,u.checkStrictMode)(e,"default is ignored for: "+o);else{let e=(0,s._)`${o} === undefined`;"empty"===a.useDefaults&&(e=(0,s._)`${e} || ${o} === null || ${o} === ""`),n.if(e,(0,s._)`${o} = ${(0,s.stringify)(r)}`)}}}r.assignDefaults=function(r,e){var{properties:t,items:n}=r.schema;if("object"===e&&t)for(const i in t)o(r,i,t[i].default);else"array"===e&&Array.isArray(n)&&n.forEach((e,t)=>o(r,t,e.default))}},{"../codegen":3,"../util":11}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getData=r.KeywordCxt=r.validateFunctionCode=void 0;const u=e("./boolSchema"),n=e("./dataType"),x=e("./applicability"),P=e("./dataType"),o=e("./defaults"),i=e("./keyword"),a=e("./subschema"),j=e("../codegen"),A=e("../names"),c=e("../resolve"),M=e("../util"),s=e("../errors");function l({gen:r,validateName:e,schema:n,schemaEnv:t,opts:i},o){i.code.es5?r.func(e,(0,j._)`${A.default.data}, ${A.default.valCxt}`,t.$async,()=>{var e,t;r.code((0,j._)`"use strict"; ${d(n,i)}`),t=i,(e=r).if(A.default.valCxt,()=>{e.var(A.default.instancePath,(0,j._)`${A.default.valCxt}.${A.default.instancePath}`),e.var(A.default.parentData,(0,j._)`${A.default.valCxt}.${A.default.parentData}`),e.var(A.default.parentDataProperty,(0,j._)`${A.default.valCxt}.${A.default.parentDataProperty}`),e.var(A.default.rootData,(0,j._)`${A.default.valCxt}.${A.default.rootData}`),t.dynamicRef&&e.var(A.default.dynamicAnchors,(0,j._)`${A.default.valCxt}.${A.default.dynamicAnchors}`)},()=>{e.var(A.default.instancePath,(0,j._)`""`),e.var(A.default.parentData,(0,j._)`undefined`),e.var(A.default.parentDataProperty,(0,j._)`undefined`),e.var(A.default.rootData,A.default.data),t.dynamicRef&&e.var(A.default.dynamicAnchors,(0,j._)`{}`)}),r.code(o)}):r.func(e,(0,j._)`${A.default.data}, ${e=i,(0,j._)`{${A.default.instancePath}="", ${A.default.parentData}, ${A.default.parentDataProperty}, ${A.default.rootData}=${A.default.data}${e.dynamicRef?(0,j._)`, ${A.default.dynamicAnchors}={}`:j.nil}}={}`}`,t.$async,()=>r.code(d(n,i)).code(o))}function d(e,t){e="object"==typeof e&&e[t.schemaId];return e&&(t.code.source||t.code.process)?(0,j._)`/*# sourceURL=${e} */`:j.nil}function f(e,t){if(h(e)&&(g(e),p(e))){var r=e,n=t,{schema:i,gen:o,opts:a}=r,i=(a.$comment&&i.$comment&&w(r),r),s=i.schema[i.opts.schemaId],i=(s&&(i.baseId=(0,c.resolveUrl)(i.opts.uriResolver,i.baseId,s)),r);if(i.schema.$async&&!i.schemaEnv.$async)throw new Error("async schema in sync schema");a=o.const("_errs",A.default.errors),_(r,a),o.var(n,(0,j._)`${a} === ${A.default.errors}`)}else(0,u.boolOrEmptySchema)(e,t)}function p({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return 1}function h(e){return"boolean"!=typeof e.schema}function g(e){(0,M.checkUnknownRules)(e);var{schema:e,errSchemaPath:t,opts:r,self:n}=e;e.$ref&&r.ignoreKeywordsWithRef&&(0,M.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${t}"`)}function _(e,t){if(e.opts.jtd)return m(e,[],!1,t);var r=(0,n.getSchemaTypes)(e.schema);m(e,r,!(0,n.coerceAndCheckDataType)(e,r),t)}function w({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){r=r.$comment;!0===i.$comment?e.code((0,j._)`${A.default.self}.logger.log(${r})`):"function"==typeof i.$comment&&(i=(0,j.str)`${n}/$comment`,n=e.scopeValue("root",{ref:t.root}),e.code((0,j._)`${A.default.self}.opts.$comment(${r}, ${i}, ${n}.schema)`))}function m(t,r,n,i){const{gen:o,schema:a,data:s,allErrors:u,opts:c,self:e}=t,l=e["RULES"];if(!a.$ref||!c.ignoreKeywordsWithRef&&(0,M.schemaHasRulesButRef)(a,l)){if(!c.jtd){var d=t,f=r;if(!d.schemaEnv.meta&&d.opts.strictTypes){var p=d,h=f;if(h.length)if(p.dataTypes.length){h.forEach(e=>{R(p.dataTypes,e)||C(p,`type "${e}" not allowed by context "${p.dataTypes.join(",")}"`)});var m=p,y=h,b=[];for(const S of m.dataTypes)R(y,S)?b.push(S):y.includes("integer")&&"number"===S&&b.push("integer");m.dataTypes=b}else p.dataTypes=h;d.opts.allowUnionTypes||(m=d,1<(h=f).length&&(2!==h.length||!h.includes("null"))&&C(m,"use allowUnionTypes to allow union type keyword"));var v=d,g=d.dataTypes,_=v.self.RULES.all;for(const E in _){var w=_[E];"object"==typeof w&&(0,x.shouldUseRule)(v.schema,w)&&(w=w.definition["type"],w.length)&&!w.some(e=>{return e=e,(t=g).includes(e)||"number"===e&&t.includes("integer");var t})&&C(v,`missing type "${w.join(",")}" for keyword "${E}"`)}}}o.block(()=>{for(const e of l.rules)O(e);O(l.post)})}else o.block(()=>k(t,"$ref",l.all.$ref.definition));function O(e){(0,x.shouldUseGroup)(a,e)&&(e.type?(o.if((0,P.checkDataType)(e.type,s,c.strictNumbers)),I(t,e),1===r.length&&r[0]===e.type&&n&&(o.else(),(0,P.reportTypeError)(t)),o.endIf()):I(t,e),u||o.if((0,j._)`${A.default.errors} === ${i||0}`))}}function I(t,r){const{gen:e,schema:n,opts:{useDefaults:i}}=t;i&&(0,o.assignDefaults)(t,r.type),e.block(()=>{for(const e of r.rules)(0,x.shouldUseRule)(n,e)&&k(t,e.keyword,e.definition,r.type)})}function R(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function C(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,M.checkStrictMode)(e,t,e.opts.strictTypes)}r.validateFunctionCode=function(e){if(h(e)&&(g(e),p(e))){var m=e;const{schema:y,opts:b,gen:v}=m;l(m,()=>{b.$comment&&y.$comment&&w(m);var e=m,{schema:t,opts:r}=e;if(void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,M.checkStrictMode)(e,"default is ignored in the schema root"),v.let(A.default.vErrors,null),v.let(A.default.errors,0),b.unevaluated){var n=m;const{gen:u,validateName:c}=n;n.evaluated=u.const("evaluated",(0,j._)`${c}.evaluated`),u.if((0,j._)`${n.evaluated}.dynamicProps`,()=>u.assign((0,j._)`${n.evaluated}.props`,(0,j._)`undefined`)),u.if((0,j._)`${n.evaluated}.dynamicItems`,()=>u.assign((0,j._)`${n.evaluated}.items`,(0,j._)`undefined`))}_(m);{const{gen:l,schemaEnv:d,validateName:f,ValidationError:p,opts:h}=t=m;var i,o,a,s;d.$async?l.if((0,j._)`${A.default.errors} === 0`,()=>l.return(A.default.data),()=>l.throw((0,j._)`new ${p}(${A.default.vErrors})`)):(l.assign((0,j._)`${f}.errors`,A.default.vErrors),h.unevaluated&&([{gen:i,evaluated:o,props:a,items:s}]=[t],a instanceof j.Name&&i.assign((0,j._)`${o}.props`,a),s instanceof j.Name)&&i.assign((0,j._)`${o}.items`,s),l.return((0,j._)`${A.default.errors} === 0`))}})}else l(e,()=>(0,u.topBoolOrEmptySchema)(e))};class y{constructor(e,t,r){if((0,i.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,M.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(r+" value must be "+JSON.stringify(t.schemaType));("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",A.default.errors))}result(e,t,r){this.failResult((0,j.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,j.not)(e),void 0,t)}fail(e){void 0===e?(this.error(),this.allErrors||this.gen.if(!1)):(this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else())}fail$data(e){if(!this.$data)return this.fail(e);var t=this["schemaCode"];this.fail((0,j._)`${t} !== undefined && (${(0,j.or)(this.invalid$data(),e)})`)}error(e,t,r){t?(this.setParams(t),this._error(e,r),this.setParams({})):this._error(e,r)}_error(e,t){(e?s.reportExtraError:s.reportError)(this,this.def.error,t)}$dataError(){(0,s.reportError)(this,this.def.$dataError||s.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,s.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=j.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=j.nil,t=j.nil){var r,n,i,o;this.$data&&({gen:r,schemaCode:n,schemaType:i,def:o}=this,r.if((0,j.or)((0,j._)`${n} === undefined`,t)),e!==j.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==j.nil)&&r.assign(e,!1),r.else())}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:i,it:o}=this;return(0,j.or)(function(){if(n.length){var e;if(r instanceof j.Name)return e=Array.isArray(n)?n:[n],(0,j._)`${(0,P.checkDataTypes)(e,r,o.opts.strictNumbers,P.DataType.Wrong)}`;throw new Error("ajv implementation error")}return j.nil}(),function(){{var e;if(i.validateSchema)return e=t.scopeValue("validate$data",{ref:i.validateSchema}),(0,j._)`!${e}(${r})`}return j.nil}())}subschema(e,t){var r=(0,a.getSubschema)(this.it,e),e=((0,a.extendSubschemaData)(r,this.it,e),(0,a.extendSubschemaMode)(r,e),{...this.it,...r,items:void 0,props:void 0});return f(e,t),e}mergeEvaluated(e,t){var{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=M.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items)&&void 0!==e.items&&(r.items=M.mergeEvaluated.items(n,e.items,r.items,t))}mergeValidEvaluated(e,t){var{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,j.Name)),!0}}function k(e,t,r,n){e=new y(e,r,t);"code"in r?r.code(e,n):e.$data&&r.validate?(0,i.funcKeywordCode)(e,r):"macro"in r?(0,i.macroKeywordCode)(e,r):(r.compile||r.validate)&&(0,i.funcKeywordCode)(e,r)}r.KeywordCxt=y;const b=/^\/(?:[^~]|~0|~1)*$/,v=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:r,dataNames:t,dataPathArr:n}){let i,o;if(""===e)return A.default.rootData;if("/"===e[0]){if(!b.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o=A.default.rootData}else{var a=v.exec(e);if(!a)throw new Error("Invalid JSON-pointer: "+e);e=+a[1];if("#"===(i=a[2])){if(r<=e)throw new Error(u("property/index",e));return n[r-e]}if(r<e)throw new Error(u("data",e));if(o=t[r-e],!i)return o}let s=o;for(const c of i.split("/"))c&&(o=(0,j._)`${o}${(0,j.getProperty)((0,M.unescapeJsonPointer)(c))}`,s=(0,j._)`${s} && ${o}`);return s;function u(e,t){return`Cannot access ${e} ${t} levels up, current level is `+r}}r.getData=O},{"../codegen":3,"../errors":5,"../names":7,"../resolve":9,"../util":11,"./applicability":12,"./boolSchema":13,"./dataType":14,"./defaults":15,"./keyword":17,"./subschema":18}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateKeywordUsage=r.validSchemaType=r.funcKeywordCode=r.macroKeywordCode=void 0;const h=e("../codegen"),m=e("../names"),y=e("../../vocabularies/code"),b=e("../errors");function v(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,h._)`${n.parentData}[${n.parentDataProperty}]`))}function g(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,h.stringify)(r)})}r.macroKeywordCode=function(e,t){var{gen:r,keyword:n,schema:i,parentSchema:o,it:a}=e,t=t.macro.call(a.self,i,o,a),i=g(r,n,t),o=(!1!==a.opts.validateSchema&&a.self.validateSchema(t,!0),r.name("valid"));e.subschema({schema:t,schemaPath:h.nil,errSchemaPath:a.errSchemaPath+"/"+n,topSchemaRef:i,compositeRule:!0},o),e.pass(o,()=>e.error(!0))},r.funcKeywordCode=function(i,o){const{gen:a,keyword:e,schema:t,parentSchema:r,$data:n,it:s}=i;var[u,c]=[s.schemaEnv,o];if(c.async&&!u.$async)throw new Error("async keyword in sync schema");c=!n&&o.compile?o.compile.call(s.self,t,r,s):o.validate;const l=g(a,e,c),d=a.let("valid");function f(e=o.async?(0,h._)`await `:h.nil){var t=s.opts.passContext?m.default.this:m.default.self,r=!("compile"in o&&!n||!1===o.schema);a.assign(d,(0,h._)`${e}${(0,y.callValidateCode)(i,l,t,r)}`,o.modifying)}function p(e){var t;a.if((0,h.not)(null!=(t=o.valid)?t:d),e)}i.block$data(d,function(){if(!1===o.errors)f(),o.modifying&&v(i),p(()=>i.error());else{const n=(o.async?function(){const t=a.let("ruleErrs",null);return a.try(()=>f((0,h._)`await `),e=>a.assign(d,!1).if((0,h._)`${e} instanceof ${s.ValidationError}`,()=>a.assign(t,(0,h._)`${e}.errors`),()=>a.throw(e))),t}:function(){var e=(0,h._)`${l}.errors`;return a.assign(e,null),f(h.nil),e})();o.modifying&&v(i),p(()=>{{var e=i,t=n;const r=e["gen"];r.if((0,h._)`Array.isArray(${t})`,()=>{r.assign(m.default.vErrors,(0,h._)`${m.default.vErrors} === null ? ${t} : ${m.default.vErrors}.concat(${t})`).assign(m.default.errors,(0,h._)`${m.default.vErrors}.length`),(0,b.extendErrors)(e)},()=>e.error())}})}}),i.ok(null!=(u=o.valid)?u:d)},r.validSchemaType=function(t,e,r=!1){return!e.length||e.some(e=>"array"===e?Array.isArray(t):"object"===e?t&&"object"==typeof t&&!Array.isArray(t):typeof t==e||r&&void 0===t)},r.validateKeywordUsage=function({schema:t,opts:e,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");var a=i.dependencies;if(null!=a&&a.some(e=>!Object.prototype.hasOwnProperty.call(t,e)))throw new Error(`parent schema must have dependencies of ${o}: `+a.join(","));if(i.validateSchema&&!i.validateSchema(t[o])){a=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if("log"!==e.validateSchema)throw new Error(a);r.logger.error(a)}}},{"../../vocabularies/code":43,"../codegen":3,"../errors":5,"../names":7}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extendSubschemaMode=r.extendSubschemaData=r.getSubschema=void 0;const f=e("../codegen"),p=e("../util");r.getSubschema=function(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:o,topSchemaRef:a}){if(void 0!==t&&void 0!==n)throw new Error('both "keyword" and "schema" passed, only one allowed');var s;if(void 0!==t)return s=e.schema[t],void 0===r?{schema:s,schemaPath:(0,f._)`${e.schemaPath}${(0,f.getProperty)(t)}`,errSchemaPath:e.errSchemaPath+"/"+t}:{schema:s[r],schemaPath:(0,f._)`${e.schemaPath}${(0,f.getProperty)(t)}${(0,f.getProperty)(r)}`,errSchemaPath:e.errSchemaPath+`/${t}/`+(0,p.escapeFragment)(r)};if(void 0===n)throw new Error('either "keyword" or "schema" must be passed');if(void 0===i||void 0===o||void 0===a)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:a,errSchemaPath:o}},r.extendSubschemaData=function(t,r,{dataProp:e,dataPropType:n,data:i,dataTypes:o,propertyName:a}){if(void 0!==i&&void 0!==e)throw new Error('both "data" and "dataProp" passed, only one allowed');var s,u,c,l=r["gen"];function d(e){t.data=e,t.dataLevel=r.dataLevel+1,t.dataTypes=[],r.definedProperties=new Set,t.parentData=r.data,t.dataNames=[...r.dataNames,e]}void 0!==e&&({errorPath:s,dataPathArr:u,opts:c}=r,d(l.let("data",(0,f._)`${r.data}${(0,f.getProperty)(e)}`,!0)),t.errorPath=(0,f.str)`${s}${(0,p.getErrorPath)(e,n,c.jsPropertySyntax)}`,t.parentDataProperty=(0,f._)`${e}`,t.dataPathArr=[...u,t.parentDataProperty]),void 0!==i&&(d(i instanceof f.Name?i:l.let("data",i,!0)),void 0!==a)&&(t.propertyName=a),o&&(t.dataTypes=o)},r.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){void 0!==n&&(e.compositeRule=n),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}},{"../codegen":3,"../util":11}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=void 0;var n=e("./compile/validate"),i=(Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}}),e("./compile/codegen")),o=(Object.defineProperty(r,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}}),e("./runtime/validation_error"));const a=e("./compile/ref_error"),s=e("./compile/rules"),c=e("./compile"),u=e("./compile/codegen"),l=e("./compile/resolve"),d=e("./compile/validate/dataType"),f=e("./compile/util"),p=e("./refs/data.json"),h=e("./runtime/uri"),m=(e,t)=>new RegExp(e,t),y=(m.code="new RegExp",["removeAdditional","useDefaults","coerceTypes"]),b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...(t=e,o=t.strict,r=!0===(r=null==(r=t.code)?void 0:r.optimize)||void 0===r?1:r||0,i=null!=(i=null==(i=t.code)?void 0:i.regExp)?i:m,n=null!=(n=t.uriResolver)?n:h.default,{strictSchema:null==(a=null!=(a=t.strictSchema)?a:o)||a,strictNumbers:null==(a=null!=(a=t.strictNumbers)?a:o)||a,strictTypes:null!=(a=null!=(a=t.strictTypes)?a:o)?a:"log",strictTuples:null!=(a=null!=(a=t.strictTuples)?a:o)?a:"log",strictRequired:null!=(a=null!=(a=t.strictRequired)?a:o)&&a,code:t.code?{...t.code,optimize:r,regExp:i}:{optimize:r,regExp:i},loopRequired:null!=(o=t.loopRequired)?o:200,loopEnum:null!=(a=t.loopEnum)?a:200,meta:null==(r=t.meta)||r,messages:null==(i=t.messages)||i,inlineRefs:null==(o=t.inlineRefs)||o,schemaId:null!=(a=t.schemaId)?a:"$id",addUsedSchema:null==(r=t.addUsedSchema)||r,validateSchema:null==(i=t.validateSchema)||i,validateFormats:null==(o=t.validateFormats)||o,unicodeRegExp:null==(a=t.unicodeRegExp)||a,int32range:null==(r=t.int32range)||r,uriResolver:n})};var t,r,n,{es5:i,lines:o}=this.opts.code,a=(this.scope=new u.ValueScope({scope:{},prefixes:b,es5:i,lines:o}),this.logger=function(e){if(!1===e)return S;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger),e.validateFormats);e.validateFormats=!1,this.RULES=(0,s.getRules)(),w.call(this,v,e,"NOT SUPPORTED"),w.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=function(){var e={...this.opts};for(const t of y)delete e[t];return e}.call(this),e.formats&&function(){for(const t in this.opts.formats){var e=this.opts.formats[t];e&&this.addFormat(t,e)}}.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&function(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const r in e){var t=e[r];t.keyword||(t.keyword=r),this.addKeyword(t)}}}.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),function(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){var{$data:e,meta:t,schemaId:r}=this.opts;let n=p;"id"===r&&((n={...p}).id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){var{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);e=r(t);return"$async"in r||(this.errors=r.errors),e}compile(e,t){e=this._addSchema(e,t);return e.validate||this._compileSchemaEnv(e)}compileAsync(e,r){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const n=this.opts["loadSchema"];return t.call(this,e,r);async function t(e,t){await i.call(this,e.$schema);e=this._addSchema(e,t);return e.validate||o.call(this,e)}async function i(e){e&&!this.getSchema(e)&&await t.call(this,{$ref:e},!0)}async function o(t){try{return this._compileSchemaEnv(t)}catch(e){if(e instanceof a.default)return function({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}.call(this,e),await async function(e){var t=await async function(e){var t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}.call(this,e);this.refs[e]||await i.call(this,t.$schema);this.refs[e]||this.addSchema(t,e,r)}.call(this,e.missingSchema),o.call(this,t);throw e}}}addSchema(t,r,n,i=this.opts.validateSchema){if(Array.isArray(t))for(const e of t)this.addSchema(e,void 0,n,i);else{let e;if("object"==typeof t){var o=this.opts["schemaId"];if(void 0!==(e=t[o])&&"string"!=typeof e)throw new Error(`schema ${o} must be string`)}r=(0,l.normalizeId)(r||e),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,i,!0)}return this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),!(this.errors=null);r=this.validate(r,e);if(!r&&t){e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=O.call(this,e));)e=t;if(void 0===t){var r=this.opts["schemaId"],r=new c.SchemaEnv({schema:{},schemaId:r});if(!(t=c.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=O.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":this._cache.delete(e);t=e[this.opts.schemaId];return t&&(t=(0,l.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(t=e,r=t.keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(!function(e,t){const r=this["RULES"];if((0,f.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!E.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}.call(this,r,t),t){!function(e){let t=e["metaSchema"];void 0!==t&&(e.$data&&this.opts.$data&&(t=j(t)),e.validateSchema=this.compile(t,!0))}.call(this,t);const n={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};(0,f.eachItem)(r,0===n.type.length?e=>x.call(this,e,n):t=>n.type.forEach(e=>x.call(this,t,n,e)))}else(0,f.eachItem)(r,e=>x.call(this,e));return this}getKeyword(e){e=this.RULES.all[e];return"object"==typeof e?e.definition:!!e}removeKeyword(t){var e=this["RULES"];delete e.keywords[t],delete e.all[t];for(const n of e.rules){var r=n.rules.findIndex(e=>e.keyword===t);0<=r&&n.rules.splice(r,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:r=", ",dataVar:t="data"}={}){return e&&0!==e.length?e.map(e=>""+t+e.instancePath+" "+e.message).reduce((e,t)=>e+r+t):"No errors"}$dataMetaSchema(t,e){var r=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(const o of e){let e=t;for(const a of o.split("/").slice(1))e=e[a];for(const s in r){var n,i=r[s];"object"==typeof i&&(i=i.definition["$data"],n=e[s],i&&n)&&(e[s]=j(n))}}return t}_removeAllSchemas(e,t){for(const n in e){var r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,r,n=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;var a=this.opts["schemaId"];if("object"==typeof e)o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var s,u=this._cache.get(e);return void 0===u&&(r=(0,l.normalizeId)(o||r),s=l.getSchemaRefs.call(this,e,r),u=new c.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:r,localRefs:s}),this._cache.set(u.schema,u),i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=u),n)&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),e.validate)return e.validate;throw new Error("ajv implementation error")}_compileMetaSchema(e){var t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function w(e,t,r,n="error"){for(const o in e){var i=o;i in t&&this.logger[n](`${r}: option ${o}. `+e[i])}}function O(e){return e=(0,l.normalizeId)(e),this.schemas[e]||this.refs[e]}(r.default=_).ValidationError=o.default,_.MissingRefError=a.default;const S={log(){},warn(){},error(){}};const E=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t,r){var n=null==t?void 0:t.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');var i=this["RULES"];let o=n?i.post:i.rules.find(({type:e})=>e===r);o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,t&&(n={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}},t.before?function(e,t,r){var n=e.rules.findIndex(e=>e.keyword===r);0<=n?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}.call(this,o,n,t.before):o.rules.push(n),i.all[e]=n,null!=(i=t.implements))&&i.forEach(e=>this.addKeyword(e))}const P={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function j(e){return{anyOf:[e,P]}}},{"./compile":6,"./compile/codegen":3,"./compile/ref_error":8,"./compile/resolve":9,"./compile/rules":10,"./compile/util":11,"./compile/validate":16,"./compile/validate/dataType":14,"./refs/data.json":20,"./runtime/uri":24,"./runtime/validation_error":25}],20:[function(e,t,r){t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],21:[function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e=e("fast-deep-equal");e.code='require("ajv/dist/runtime/equal").default',r.default=e},{"fast-deep-equal":123}],23:[function(e,t,r){"use strict";function n(e){var t,r=e.length;let n=0,i=0;for(;i<r;)n++,55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<r&&56320==(64512&e.charCodeAt(i))&&i++;return n}Object.defineProperty(r,"__esModule",{value:!0}),(r.default=n).code='require("ajv/dist/runtime/ucs2length").default'},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e=e("uri-js");e.code='require("ajv/dist/runtime/uri").default',r.default=e},{"uri-js":783}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}r.default=n},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateAdditionalItems=void 0;const c=e("../../compile/codegen"),l=e("../../compile/util");e={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,c.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,c._)`{limit: ${e}}`},code(e){var{parentSchema:t,it:r}=e,t=t["items"];Array.isArray(t)?n(e,t):(0,l.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function n(r,e){const{gen:n,schema:t,data:i,keyword:o,it:a}=r,s=(a.items=!0,n.const("len",(0,c._)`${i}.length`));if(!1===t)r.setParams({len:e.length}),r.pass((0,c._)`${s} <= ${e.length}`);else if("object"==typeof t&&!(0,l.alwaysValidSchema)(a,t)){const u=n.var("valid",(0,c._)`${s} <= ${e.length}`);n.if((0,c.not)(u),()=>{var t;t=u,n.forRange("i",e.length,s,e=>{r.subschema({keyword:o,dataProp:e,dataPropType:l.Type.Num},t),a.allErrors||n.if((0,c.not)(t),()=>n.break())})}),r.ok(u)}}r.validateAdditionalItems=n,r.default=e},{"../../compile/codegen":3,"../../compile/util":11}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const h=e("../code"),m=e("../../compile/codegen"),y=e("../../compile/names"),b=e("../../compile/util");r.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,m._)`{additionalProperty: ${e.additionalProperty}}`},code(n){const{gen:i,schema:r,parentSchema:o,data:t,errsCount:e,it:a}=n;if(!e)throw new Error("ajv implementation error");const{allErrors:s,opts:u}=a;if(a.props=!0,"all"===u.removeAdditional||!(0,b.alwaysValidSchema)(a,r)){const f=(0,h.allSchemaProperties)(o.properties),p=(0,h.allSchemaProperties)(o.patternProperties);function c(e){i.code((0,m._)`delete ${t}[${e}]`)}function l(e){var t;"all"===u.removeAdditional||u.removeAdditional&&!1===r?c(e):!1===r?(n.setParams({additionalProperty:e}),n.error(),s||i.break()):"object"!=typeof r||(0,b.alwaysValidSchema)(a,r)||(t=i.name("valid"),"failing"===u.removeAdditional?(d(e,t,!1),i.if((0,m.not)(t),()=>{n.reset(),c(e)})):(d(e,t),s||i.if((0,m.not)(t),()=>i.break())))}function d(e,t,r){e={keyword:"additionalProperties",dataProp:e,dataPropType:b.Type.Str};!1===r&&Object.assign(e,{compositeRule:!0,createErrors:!1,allErrors:!1}),n.subschema(e,t)}i.forIn("key",t,e=>{f.length||p.length?i.if(function(t){let e;{var r;e=8<f.length?(r=(0,b.schemaRefOrVal)(a,o.properties,"properties"),(0,h.isOwnProperty)(i,r,t)):f.length?(0,m.or)(...f.map(e=>(0,m._)`${t} === ${e}`)):m.nil}p.length&&(e=(0,m.or)(e,...p.map(e=>(0,m._)`${(0,h.usePattern)(n,e)}.test(${t})`)));return(0,m.not)(e)}(e),()=>l(e)):l(e)}),n.ok((0,m._)`${e} === ${y.default.errors}`)}}}},{"../../compile/codegen":3,"../../compile/names":7,"../../compile/util":11,"../code":43}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=e("../../compile/util");r.default={keyword:"allOf",schemaType:"array",code(r){const{gen:e,schema:t,it:n}=r;if(!Array.isArray(t))throw new Error("ajv implementation error");const i=e.name("valid");t.forEach((e,t)=>{(0,o.alwaysValidSchema)(n,e)||(e=r.subschema({keyword:"allOf",schemaProp:t},i),r.ok(i),r.mergeEvaluated(e))})}}},{"../../compile/util":11}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e("../code").validateUnion,error:{message:"must match a schema in anyOf"}};r.default=e},{"../code":43}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const h=e("../../compile/codegen"),m=e("../../compile/util");r.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?(0,h.str)`must contain at least ${e} valid item(s)`:(0,h.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?(0,h._)`{minContains: ${e}}`:(0,h._)`{minContains: ${e}, maxContains: ${t}}`},code(n){const{gen:i,schema:e,parentSchema:t,data:r,it:o}=n;let a,s;var{minContains:u,maxContains:c}=t;o.opts.next?(a=void 0===u?1:u,s=c):a=1;const l=i.const("len",(0,h._)`${r}.length`);if(n.setParams({min:a,max:s}),void 0===s&&0===a)(0,m.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');else if(void 0!==s&&a>s)(0,m.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),n.fail();else if((0,m.alwaysValidSchema)(o,e)){let e=(0,h._)`${l} >= ${a}`;void 0!==s&&(e=(0,h._)`${e} && ${l} <= ${s}`),void n.pass(e)}else{o.items=!0;const p=i.name("valid");function d(){const e=i.name("_valid"),t=i.let("count",0);f(e,()=>i.if(e,()=>{return e=t,i.code((0,h._)`${e}++`),void(void 0===s?i.if((0,h._)`${e} >= ${a}`,()=>i.assign(p,!0).break()):(i.if((0,h._)`${e} > ${s}`,()=>i.assign(p,!1).break()),1===a?i.assign(p,!0):i.if((0,h._)`${e} >= ${a}`,()=>i.assign(p,!0))));var e}))}function f(t,r){i.forRange("i",0,l,e=>{n.subschema({keyword:"contains",dataProp:e,dataPropType:m.Type.Num,compositeRule:!0},t),r()})}void 0===s&&1===a?f(p,()=>i.if(p,()=>i.break())):0===a?(i.let(p,!0),void 0!==s&&i.if((0,h._)`${r}.length > 0`,d)):(i.let(p,!1),d()),n.result(p,()=>n.reset())}}}},{"../../compile/codegen":3,"../../compile/util":11}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateSchemaDeps=r.validatePropertyDeps=r.error=void 0;const c=e("../../compile/codegen"),u=e("../../compile/util"),l=e("../code");r.error={message:({params:{property:e,depsCount:t,deps:r}})=>{t=1===t?"property":"properties";return(0,c.str)`must have ${t} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,c._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};e={keyword:"dependencies",type:"object",schemaType:"object",error:r.error,code(e){var[t,r]=function({schema:e}){var t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);n(e,t),i(e,r)}};function n(t,e=t.schema){var{gen:r,data:n,it:i}=t;if(0!==Object.keys(e).length){var o,a=r.let("missing");for(const s in e){const u=e[s];0!==u.length&&(o=(0,l.propertyInData)(r,n,s,i.opts.ownProperties),t.setParams({property:s,depsCount:u.length,deps:u.join(", ")}),i.allErrors?r.if(o,()=>{for(const e of u)(0,l.checkReportMissingProp)(t,e)}):(r.if((0,c._)`${o} && (${(0,l.checkMissingProp)(t,u,a)})`),(0,l.reportMissingProp)(t,a),r.else()))}}}function i(t,e=t.schema){const{gen:r,data:n,keyword:i,it:o}=t,a=r.name("valid");for(const s in e)(0,u.alwaysValidSchema)(o,e[s])||(r.if((0,l.propertyInData)(r,n,s,o.opts.ownProperties),()=>{var e=t.subschema({keyword:i,schemaProp:s},a);t.mergeValidEvaluated(e,a)},()=>r.var(a,!0)),t.ok(a))}r.validatePropertyDeps=n,r.validateSchemaDeps=i,r.default=e},{"../../compile/codegen":3,"../../compile/util":11,"../code":43}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const l=e("../../compile/codegen"),d=e("../../compile/util");function f(e,t){t=e.schema[t];return void 0!==t&&!(0,d.alwaysValidSchema)(e,t)}r.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,l.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,l._)`{failingKeyword: ${e.ifClause}}`},code(n){const{gen:i,parentSchema:e,it:t}=n;void 0===e.then&&void 0===e.else&&(0,d.checkStrictMode)(t,'"if" without "then" and "else" is ignored');var r,o=f(t,"then"),a=f(t,"else");if(o||a){const u=i.let("valid",!0),c=i.name("_valid");function s(t,r){return()=>{var e=n.subschema({keyword:t},c);i.assign(u,c),n.mergeValidEvaluated(e,u),r?i.assign(r,(0,l._)`${t}`):n.setParams({ifClause:t})}}r=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c),n.mergeEvaluated(r),n.reset(),o&&a?(r=i.let("ifClause"),n.setParams({ifClause:r}),i.if(c,s("then",r),s("else",r))):o?i.if(c,s("then")):i.if((0,l.not)(c),s("else")),n.pass(u,()=>n.error(!0))}}}},{"../../compile/codegen":3,"../../compile/util":11}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./additionalItems"),i=e("./prefixItems"),o=e("./items"),a=e("./items2020"),s=e("./contains"),u=e("./dependencies"),c=e("./propertyNames"),l=e("./additionalProperties"),d=e("./properties"),f=e("./patternProperties"),p=e("./not"),h=e("./anyOf"),m=e("./oneOf"),y=e("./allOf"),b=e("./if"),v=e("./thenElse");r.default=function(e=!1){var t=[p.default,h.default,m.default,y.default,b.default,v.default,c.default,l.default,u.default,d.default,f.default];return e?t.push(i.default,a.default):t.push(n.default,o.default),t.push(s.default),t}},{"./additionalItems":26,"./additionalProperties":27,"./allOf":28,"./anyOf":29,"./contains":30,"./dependencies":31,"./if":32,"./items":34,"./items2020":35,"./not":36,"./oneOf":37,"./patternProperties":38,"./prefixItems":39,"./properties":40,"./propertyNames":41,"./thenElse":42}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateTuple=void 0;const h=e("../../compile/codegen"),m=e("../../compile/util"),n=e("../code");e={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){var{schema:t,it:r}=e;if(Array.isArray(t))return i(e,"additionalItems",t);r.items=!0,(0,m.alwaysValidSchema)(r,t)||e.ok((0,n.validateArray)(e))}};function i(r,e,t=r.schema){const{gen:n,parentSchema:i,data:o,keyword:a,it:s}=r;var u=i,{opts:c,errSchemaPath:l}=s,d=t.length,u=d===u.minItems&&(d===u.maxItems||!1===u[e]);c.strictTuples&&!u&&(u=`"${a}" is ${d}-tuple, but minItems or maxItems/${e} are not specified or different at path "${l}"`,(0,m.checkStrictMode)(s,u,c.strictTuples)),s.opts.unevaluated&&t.length&&!0!==s.items&&(s.items=m.mergeEvaluated.items(n,t.length,s.items));const f=n.name("valid"),p=n.const("len",(0,h._)`${o}.length`);t.forEach((e,t)=>{(0,m.alwaysValidSchema)(s,e)||(n.if((0,h._)`${p} > ${t}`,()=>r.subschema({keyword:a,schemaProp:t,dataProp:t},f)),r.ok(f))})}r.validateTuple=i,r.default=e},{"../../compile/codegen":3,"../../compile/util":11,"../code":43}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code"),a=e("./additionalItems");r.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,n.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,n._)`{limit: ${e}}`},code(e){var{schema:t,parentSchema:r,it:n}=e,r=r["prefixItems"];n.items=!0,(0,i.alwaysValidSchema)(n,t)||(r?(0,a.validateAdditionalItems)(e,r):e.ok((0,o.validateArray)(e)))}}},{"../../compile/codegen":3,"../../compile/util":11,"../code":43,"./additionalItems":26}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../compile/util");r.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){var{gen:t,schema:r,it:n}=e;(0,i.alwaysValidSchema)(n,r)?e.fail():(n=t.name("valid"),e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error()))},error:{message:"must NOT be valid"}}},{"../../compile/util":11}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const c=e("../../compile/codegen"),l=e("../../compile/util");r.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,c._)`{passingSchemas: ${e.passing}}`},code(n){const{gen:i,schema:e,parentSchema:t,it:o}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");if(!o.opts.discriminator||!t.discriminator){const r=e,a=i.let("valid",!1),s=i.let("passing",null),u=i.name("_valid");n.setParams({passing:s}),i.block(function(){r.forEach((e,t)=>{let r;(0,l.alwaysValidSchema)(o,e)?i.var(u,!0):r=n.subschema({keyword:"oneOf",schemaProp:t,compositeRule:!0},u),0<t&&i.if((0,c._)`${u} && ${a}`).assign(a,!1).assign(s,(0,c._)`[${s}, ${t}]`).else(),i.if(u,()=>{i.assign(a,!0),i.assign(s,t),r&&n.mergeEvaluated(r,c.Name)})})}),n.result(a,()=>n.reset(),()=>n.error(!0))}}}},{"../../compile/codegen":3,"../../compile/util":11}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const y=e("../code"),b=e("../../compile/codegen"),v=e("../../compile/util"),g=e("../../compile/util");r.default={keyword:"patternProperties",type:"object",schemaType:"object",code(n){const{gen:i,schema:t,data:e,parentSchema:r,it:o}=n;var a=o["opts"];const s=(0,y.allSchemaProperties)(t),u=s.filter(e=>(0,v.alwaysValidSchema)(o,t[e]));if(0!==s.length&&(u.length!==s.length||o.opts.unevaluated&&!0!==o.props)){const d=a.strictSchema&&!a.allowMatchingProperties&&r.properties,f=i.name("valid"),p=(!0===o.props||o.props instanceof b.Name||(o.props=(0,g.evaluatedPropsToName)(i,o.props)),o)["props"];for(const h of s){if(d){c=void 0;var c=h;for(const m in d)new RegExp(c).test(m)&&(0,v.checkStrictMode)(o,`property ${m} matches pattern ${c} (use allowMatchingProperties)`)}o.allErrors?l(h):(i.var(f,!0),l(h),i.if(f))}function l(r){i.forIn("key",e,t=>{i.if((0,b._)`${(0,y.usePattern)(n,r)}.test(${t})`,()=>{var e=u.includes(r);e||n.subschema({keyword:"patternProperties",schemaProp:r,dataProp:t,dataPropType:g.Type.Str},f),o.opts.unevaluated&&!0!==p?i.assign((0,b._)`${p}[${t}]`,!0):e||o.allErrors||i.if((0,b.not)(f),()=>i.break())})})}}}}},{"../../compile/codegen":3,"../../compile/util":11,"../code":43}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./items");r.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")}},{"./items":34}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const f=e("../../compile/validate"),p=e("../code"),h=e("../../compile/util"),m=e("./additionalProperties");r.default={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:o}=t;"all"===o.opts.removeAdditional&&void 0===n.additionalProperties&&m.default.code(new f.KeywordCxt(o,m.default,"additionalProperties"));var a=(0,p.allSchemaProperties)(r);for(const c of a)o.definedProperties.add(c);o.opts.unevaluated&&a.length&&!0!==o.props&&(o.props=h.mergeEvaluated.props(e,(0,h.toHash)(a),o.props));var s,a=a.filter(e=>!(0,h.alwaysValidSchema)(o,r[e]));if(0!==a.length){const l=e.name("valid");for(const d of a)s=d,o.opts.useDefaults&&!o.compositeRule&&void 0!==r[s].default?u(d):(e.if((0,p.propertyInData)(e,i,d,o.opts.ownProperties)),u(d),o.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(l);function u(e){t.subschema({keyword:"properties",schemaProp:e,dataProp:e},l)}}}}},{"../../compile/util":11,"../../compile/validate":16,"../code":43,"./additionalProperties":27}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../../compile/codegen"),s=e("../../compile/util");r.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,a._)`{propertyName: ${e.propertyName}}`},code(t){const{gen:r,schema:e,data:n,it:i}=t;if(!(0,s.alwaysValidSchema)(i,e)){const o=r.name("valid");r.forIn("key",n,e=>{t.setParams({propertyName:e}),t.subschema({keyword:"propertyNames",data:e,dataTypes:["string"],propertyName:e,compositeRule:!0},o),r.if((0,a.not)(o),()=>{t.error(!0),i.allErrors||r.break()})}),t.ok(o)}}}},{"../../compile/codegen":3,"../../compile/util":11}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/util");r.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}}},{"../../compile/util":11}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateUnion=r.validateArray=r.usePattern=r.callValidateCode=r.schemaProperties=r.allSchemaProperties=r.noPropertyInData=r.propertyInData=r.isOwnProperty=r.hasPropFunc=r.reportMissingProp=r.checkMissingProp=r.checkReportMissingProp=void 0;const l=e("../compile/codegen"),u=e("../compile/util"),d=e("../compile/names"),o=e("../compile/util");function n(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,l._)`Object.prototype.hasOwnProperty`})}function a(e,t,r){return(0,l._)`${n(e)}.call(${t}, ${r})`}function s(e,t,r,n){var i=(0,l._)`${t}${(0,l.getProperty)(r)} === undefined`;return n?(0,l.or)(i,(0,l.not)(a(e,t,r))):i}function i(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}r.checkReportMissingProp=function(e,t){var{gen:r,data:n,it:i}=e;r.if(s(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,l._)`${t}`},!0),e.error()})},r.checkMissingProp=function({gen:t,data:r,it:{opts:n}},e,i){return(0,l.or)(...e.map(e=>(0,l.and)(s(t,r,e,n.ownProperties),(0,l._)`${i} = ${e}`)))},r.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},r.hasPropFunc=n,r.isOwnProperty=a,r.propertyInData=function(e,t,r,n){var i=(0,l._)`${t}${(0,l.getProperty)(r)} !== undefined`;return n?(0,l._)`${i} && ${a(e,t,r)}`:i},r.noPropertyInData=s,r.allSchemaProperties=i,r.schemaProperties=function(t,r){return i(r).filter(e=>!(0,u.alwaysValidSchema)(t,r[e]))},r.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:o},it:a},s,u,c){return c=c?(0,l._)`${e}, ${t}, ${n}${i}`:t,e=[[d.default.instancePath,(0,l.strConcat)(d.default.instancePath,o)],[d.default.parentData,a.parentData],[d.default.parentDataProperty,a.parentDataProperty],[d.default.rootData,d.default.rootData]],a.opts.dynamicRef&&e.push([d.default.dynamicAnchors,d.default.dynamicAnchors]),n=(0,l._)`${c}, ${r.object(...e)}`,u!==l.nil?(0,l._)`${s}.call(${u}, ${n})`:(0,l._)`${s}(${n})`};const c=(0,l._)`new RegExp`;r.usePattern=function({gen:e,it:{opts:t}},r){var n=t.unicodeRegExp?"u":"",i=(t=t.code["regExp"])(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,l._)`${"new RegExp"===t.code?c:(0,o.useFunc)(e,t)}(${r}, ${n})`})},r.validateArray=function(r){const{gen:n,data:i,keyword:o,it:e}=r,a=n.name("valid");if(e.allErrors){const s=n.let("valid",!0);return t(()=>n.assign(s,!1)),s}return n.var(a,!0),t(()=>n.break()),a;function t(t){var e=n.const("len",(0,l._)`${i}.length`);n.forRange("i",0,e,e=>{r.subschema({keyword:o,dataProp:e,dataPropType:u.Type.Num},a),n.if((0,l.not)(a),t)})}},r.validateUnion=function(r){const{gen:n,schema:e,keyword:i,it:t}=r;if(!Array.isArray(e))throw new Error("ajv implementation error");var o=e.some(e=>(0,u.alwaysValidSchema)(t,e));if(!o||t.opts.unevaluated){const a=n.let("valid",!1),s=n.name("_valid");n.block(()=>e.forEach((e,t)=>{t=r.subschema({keyword:i,schemaProp:t,compositeRule:!0},s),n.assign(a,(0,l._)`${a} || ${s}`),t=r.mergeValidEvaluated(t,s);t||n.if((0,l.not)(a))})),r.result(a,()=>r.reset(),()=>r.error(!0))}}},{"../compile/codegen":3,"../compile/names":7,"../compile/util":11}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./id"),e=e("./ref"),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,e.default];r.default=n},{"./id":44,"./ref":46}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.callRef=r.getValidate=void 0;const h=e("../../compile/ref_error"),p=e("../code"),m=e("../../compile/codegen"),y=e("../../compile/names"),b=e("../../compile"),v=e("../../compile/util");e={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:o,validateName:a,opts:s,self:u}=n,c=o["root"];if(("#"===r||"#/"===r)&&i===c.baseId)return o===c?_(e,a,o,o.$async):(p=t.scopeValue("root",{ref:c}),_(e,(0,m._)`${p}.validate`,c,c.$async));var l,d,f,p=b.resolveRef.call(u,c,i,r);if(void 0===p)throw new h.default(n.opts.uriResolver,i,r);if(!(p instanceof b.SchemaEnv))return l=p,d=t.scopeValue("schema",!0===s.code.source?{ref:l,code:(0,m.stringify)(l)}:{ref:l}),f=t.name("valid"),l=e.subschema({schema:l,dataTypes:[],schemaPath:m.nil,topSchemaRef:d,errSchemaPath:r},f),e.mergeEvaluated(l),void e.ok(f);l=g(e,d=p),_(e,l,d,d.$async)}};function g(e,t){e=e.gen;return t.validate?e.scopeValue("validate",{ref:t.validate}):(0,m._)`${e.scopeValue("wrapper",{ref:t})}.validate`}function _(e,t,n,r){const{gen:i,it:o}=e,{allErrors:a,schemaEnv:s,opts:u}=o,c=u.passContext?y.default.this:m.nil;if(r){if(!s.$async)throw new Error("async schema referenced by sync schema");const f=i.let("valid");i.try(()=>{i.code((0,m._)`await ${(0,p.callValidateCode)(e,t,c)}`),d(t),a||i.assign(f,!0)},e=>{i.if((0,m._)`!(${e} instanceof ${o.ValidationError})`,()=>i.throw(e)),l(e),a||i.assign(f,!1)}),e.ok(f)}else e.result((0,p.callValidateCode)(e,t,c),()=>d(t),()=>l(t));function l(e){e=(0,m._)`${e}.errors`;i.assign(y.default.vErrors,(0,m._)`${y.default.vErrors} === null ? ${e} : ${y.default.vErrors}.concat(${e})`),i.assign(y.default.errors,(0,m._)`${y.default.vErrors}.length`)}function d(e){var t,r;o.opts.unevaluated&&(t=null==(t=null==n?void 0:n.validate)?void 0:t.evaluated,!0!==o.props&&(t&&!t.dynamicProps?void 0!==t.props&&(o.props=v.mergeEvaluated.props(i,t.props,o.props)):(r=i.var("props",(0,m._)`${e}.evaluated.props`),o.props=v.mergeEvaluated.props(i,r,o.props,m.Name))),!0!==o.items)&&(t&&!t.dynamicItems?void 0!==t.items&&(o.items=v.mergeEvaluated.items(i,t.items,o.items)):(r=i.var("items",(0,m._)`${e}.evaluated.items`),o.items=v.mergeEvaluated.items(i,r,o.items,m.Name)))}}r.getValidate=g,r.callRef=_,r.default=e},{"../../compile":6,"../../compile/codegen":3,"../../compile/names":7,"../../compile/ref_error":8,"../../compile/util":11,"../code":43}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../../compile/codegen"),s=e("../discriminator/types"),f=e("../../compile"),p=e("../../compile/util");r.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,a._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(r){const{gen:n,data:e,schema:t,parentSchema:u,it:c}=r,l=u["oneOf"];if(!c.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=t.propertyName;if("string"!=typeof d)throw new Error("discriminator: requires propertyName");if(t.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const i=n.let("valid",!1),o=n.const("tag",(0,a._)`${e}${(0,a.getProperty)(d)}`);n.if((0,a._)`typeof ${o} == "string"`,()=>{var e=function(){const r={},n=a(u);let i=!0;for(let t=0;t<l.length;t++){let e=l[t];null!==e&&void 0!==e&&e.$ref&&!(0,p.schemaHasRulesButRef)(e,c.self.RULES)&&(e=f.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,null===e||void 0===e?void 0:e.$ref))instanceof f.SchemaEnv&&(e=e.schema);var o=null==(o=null===e||void 0===e?void 0:e.properties)?void 0:o[d];if("object"!=typeof o)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);i=i&&(n||a(e)),!function(e,t){if(e.const)s(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`);for(const r of e.enum)s(r,t)}}(o,t)}if(i)return r;throw new Error(`discriminator: "${d}" must be required`);function a({required:e}){return Array.isArray(e)&&e.includes(d)}function s(e,t){if("string"!=typeof e||e in r)throw new Error(`discriminator: "${d}" values must be unique strings`);r[e]=t}}();n.if(!1);for(const t in e)n.elseIf((0,a._)`${o} === ${t}`),n.assign(i,function(e){var t=n.name("valid"),e=r.subschema({keyword:"oneOf",schemaProp:e},t);return r.mergeEvaluated(e,a.Name),t}(e[t]));n.else(),r.error(!1,{discrError:s.DiscrError.Mapping,tag:o,tagName:d}),n.endIf()},()=>r.error(!1,{discrError:s.DiscrError.Tag,tag:o,tagName:d})),r.ok(i)}}},{"../../compile":6,"../../compile/codegen":3,"../../compile/util":11,"../discriminator/types":48}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiscrError=void 0,(r=r.DiscrError||(r.DiscrError={})).Tag="tag",r.Mapping="mapping"},{}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core"),i=e("./validation"),o=e("./applicator"),a=e("./format"),e=e("./metadata"),n=[n.default,i.default,(0,o.default)(),a.default,e.metadataVocabulary,e.contentVocabulary];r.default=n},{"./applicator":33,"./core":45,"./format":51,"./metadata":52,"./validation":55}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const w=e("../../compile/codegen");r.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,w.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,w._)`{format: ${e}}`},code(e,t){const{gen:r,data:n,$data:i,schema:o,schemaCode:a,it:s}=e,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=s;if(u.validateFormats)if(i){const p=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),h=r.const("fDef",(0,w._)`${p}[${a}]`),m=r.let("fType"),y=r.let("format");r.if((0,w._)`typeof ${h} == "object" && !(${h} instanceof RegExp)`,()=>r.assign(m,(0,w._)`${h}.type || "string"`).assign(y,(0,w._)`${h}.validate`),()=>r.assign(m,(0,w._)`"string"`).assign(y,h)),e.fail$data((0,w.or)(!1===u.strictSchema?w.nil:(0,w._)`${a} && !${y}`,function(){var e=l.$async?(0,w._)`(${h}.async ? await ${y}(${n}) : ${y}(${n}))`:(0,w._)`${y}(${n})`,e=(0,w._)`(typeof ${y} == "function" ? ${e} : ${y}.test(${n}))`;return(0,w._)`${y} && ${y} !== true && ${m} === ${t} && !${e}`}()))}else{const b=d.formats[o];if(b){if(!0!==b){const[v,g,_]=function(e){var t=e instanceof RegExp?(0,w.regexpCode)(e):u.code.formats?(0,w._)`${u.code.formats}${(0,w.getProperty)(o)}`:void 0,t=r.scopeValue("formats",{key:o,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,t]:[e.type||"string",e.validate,(0,w._)`${t}.validate`]}(b);v===t&&e.pass(function(){if("object"!=typeof b||b instanceof RegExp||!b.async)return"function"==typeof g?(0,w._)`${_}(${n})`:(0,w._)`${_}.test(${n})`;if(l.$async)return(0,w._)`await ${_}(${n})`;throw new Error("async format in sync schema")}())}}else{if(!1!==u.strictSchema)throw new Error(f());function f(){return`unknown format "${o}" ignored in schema at path "${c}"`}d.logger.warn(f())}}}}},{"../../compile/codegen":3}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e=[e("./format").default];r.default=e},{"./format":50}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.contentVocabulary=r.metadataVocabulary=void 0,r.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],r.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../../compile/codegen"),s=e("../../compile/util"),u=e("../../runtime/equal");r.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,a._)`{allowedValue: ${e}}`},code(e){var{gen:t,data:r,$data:n,schemaCode:i,schema:o}=e;n||o&&"object"==typeof o?e.fail$data((0,a._)`!${(0,s.useFunc)(t,u.default)}(${r}, ${i})`):e.fail((0,a._)`${o} !== ${r}`)}}},{"../../compile/codegen":3,"../../compile/util":11,"../../runtime/equal":22}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const f=e("../../compile/codegen"),p=e("../../compile/util"),h=e("../../runtime/equal");r.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,f._)`{allowedValues: ${e}}`},code(e){const{gen:t,data:i,$data:r,schema:o,schemaCode:n,it:a}=e;if(!r&&0===o.length)throw new Error("enum must have non-empty array");var s=o.length>=a.opts.loopEnum;let u;const c=()=>null!==u&&void 0!==u?u:u=(0,p.useFunc)(t,h.default);let l;if(s||r)l=t.let("valid"),e.block$data(l,function(){t.assign(l,!1),t.forOf("v",n,e=>t.if((0,f._)`${c()}(${i}, ${e})`,()=>t.assign(l,!0).break()))});else{if(!Array.isArray(o))throw new Error("ajv implementation error");const d=t.const("vSchema",n);l=(0,f.or)(...o.map((e,t)=>{return r=d,t=t,"object"==typeof(n=o[t])&&null!==n?(0,f._)`${c()}(${i}, ${r}[${t}])`:(0,f._)`${i} === ${n}`;var r,n}))}e.pass(l)}}},{"../../compile/codegen":3,"../../compile/util":11,"../../runtime/equal":22}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./limitNumber"),i=e("./multipleOf"),o=e("./limitLength"),a=e("./pattern"),s=e("./limitProperties"),u=e("./required"),c=e("./limitItems"),l=e("./uniqueItems"),d=e("./const"),e=e("./enum"),n=[n.default,i.default,o.default,a.default,s.default,u.default,c.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,e.default];r.default=n},{"./const":53,"./enum":54,"./limitItems":56,"./limitLength":57,"./limitNumber":58,"./limitProperties":59,"./multipleOf":60,"./pattern":61,"./required":62,"./uniqueItems":63}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../compile/codegen");r.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){e="maxItems"===e?"more":"fewer";return(0,i.str)`must NOT have ${e} than ${t} items`},params:({schemaCode:e})=>(0,i._)`{limit: ${e}}`},code(e){var{keyword:t,data:r,schemaCode:n}=e,t="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data((0,i._)`${r}.length ${t} ${n}`)}}},{"../../compile/codegen":3}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=e("../../compile/codegen"),a=e("../../compile/util"),s=e("../../runtime/ucs2length");r.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){e="maxLength"===e?"more":"fewer";return(0,o.str)`must NOT have ${e} than ${t} characters`},params:({schemaCode:e})=>(0,o._)`{limit: ${e}}`},code(e){var{keyword:t,data:r,schemaCode:n,it:i}=e,t="maxLength"===t?o.operators.GT:o.operators.LT,i=!1===i.opts.unicode?(0,o._)`${r}.length`:(0,o._)`${(0,a.useFunc)(e.gen,s.default)}(${r})`;e.fail$data((0,o._)`${i} ${t} ${n}`)}}},{"../../compile/codegen":3,"../../compile/util":11,"../../runtime/ucs2length":23}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../compile/codegen");e=i.operators;const o={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}};e={message:({keyword:e,schemaCode:t})=>(0,i.str)`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,i._)`{comparison: ${o[e].okStr}, limit: ${t}}`},e={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:e,code(e){var{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,i._)`${r} ${o[t].fail} ${n} || isNaN(${r})`)}};r.default=e},{"../../compile/codegen":3}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../compile/codegen");r.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){e="maxProperties"===e?"more":"fewer";return(0,i.str)`must NOT have ${e} than ${t} properties`},params:({schemaCode:e})=>(0,i._)`{limit: ${e}}`},code(e){var{keyword:t,data:r,schemaCode:n}=e,t="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data((0,i._)`Object.keys(${r}).length ${t} ${n}`)}}},{"../../compile/codegen":3}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=e("../../compile/codegen");r.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,o.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,o._)`{multipleOf: ${e}}`},code(e){var{gen:t,data:r,schemaCode:n,it:i}=e,i=i.opts.multipleOfPrecision,t=t.let("res"),i=i?(0,o._)`Math.abs(Math.round(${t}) - ${t}) > 1e-${i}`:(0,o._)`${t} !== parseInt(${t})`;e.fail$data((0,o._)`(${n} === 0 || (${t} = ${r}/${n}, ${i}))`)}}},{"../../compile/codegen":3}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../code"),s=e("../../compile/codegen");r.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,s.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,s._)`{pattern: ${e}}`},code(e){var{data:t,$data:r,schema:n,schemaCode:i,it:o}=e,o=o.opts.unicodeRegExp?"u":"",r=r?(0,s._)`(new RegExp(${i}, ${o}))`:(0,a.usePattern)(e,n);e.fail$data((0,s._)`!${r}.test(${t})`)}}},{"../../compile/codegen":3,"../code":43}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const b=e("../code"),v=e("../../compile/codegen"),g=e("../../compile/util");r.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,v.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,v._)`{missingProperty: ${e}}`},code(r){const{gen:n,schema:e,schemaCode:i,data:o,$data:t,it:a}=r,s=a["opts"];if(t||0!==e.length){const f=e.length>=s.loopRequired;if(a.allErrors)if(f||t)r.block$data(v.nil,d);else for(const p of e)(0,b.checkReportMissingProp)(r,p);else{const h=n.let("missing");if(f||t){const m=n.let("valid",!0);r.block$data(m,()=>{return e=h,t=m,r.setParams({missingProperty:e}),void n.forOf(e,i,()=>{n.assign(t,(0,b.propertyInData)(n,o,e,s.ownProperties)),n.if((0,v.not)(t),()=>{r.error(),n.break()})},v.nil);var e,t}),r.ok(m)}else n.if((0,b.checkMissingProp)(r,e,h)),(0,b.reportMissingProp)(r,h),n.else()}if(s.strictRequired){var u,c=r.parentSchema.properties,l=r.it["definedProperties"];for(const y of e)void 0!==(null==c?void 0:c[y])||l.has(y)||(u=a.schemaEnv.baseId+a.errSchemaPath,u=`required property "${y}" is not defined at "${u}" (strictRequired)`,(0,g.checkStrictMode)(a,u,a.opts.strictRequired))}function d(){n.forOf("prop",i,e=>{r.setParams({missingProperty:e}),n.if((0,b.noPropertyInData)(n,o,e,s.ownProperties),()=>r.error())})}}}}},{"../../compile/codegen":3,"../../compile/util":11,"../code":43}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const d=e("../../compile/validate/dataType"),f=e("../../compile/codegen"),i=e("../../compile/util"),p=e("../../runtime/equal");r.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,f.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,f._)`{i: ${e}, j: ${t}}`},code(o){const{gen:a,data:s,$data:e,schema:t,parentSchema:r,schemaCode:n,it:u}=o;if(e||t){const c=a.let("valid"),l=r.items?(0,d.getSchemaTypes)(r.items):[];o.block$data(c,function(){const e=a.let("i",(0,f._)`${s}.length`),t=a.let("j");o.setParams({i:e,j:t}),a.assign(c,!0),a.if((0,f._)`${e} > 1`,()=>(0<l.length&&!l.some(e=>"object"===e||"array"===e)?function(e,t){const r=a.name("item"),n=(0,d.checkDataTypes)(l,r,u.opts.strictNumbers,d.DataType.Wrong),i=a.const("indices",(0,f._)`{}`);a.for((0,f._)`;${e}--;`,()=>{a.let(r,(0,f._)`${s}[${e}]`),a.if(n,(0,f._)`continue`),1<l.length&&a.if((0,f._)`typeof ${r} == "string"`,(0,f._)`${r} += "_"`),a.if((0,f._)`typeof ${i}[${r}] == "number"`,()=>{a.assign(t,(0,f._)`${i}[${r}]`),o.error(),a.assign(c,!1).break()}).code((0,f._)`${i}[${r}] = ${e}`)})}:function(e,t){const r=(0,i.useFunc)(a,p.default),n=a.name("outer");a.label(n).for((0,f._)`;${e}--;`,()=>a.for((0,f._)`${t} = ${e}; ${t}--;`,()=>a.if((0,f._)`${r}(${s}[${e}], ${s}[${t}])`,()=>{o.error(),a.assign(c,!1).break(n)})))})(e,t))},(0,f._)`${n} === false`),o.ok(c)}}}},{"../../compile/codegen":3,"../../compile/util":11,"../../compile/validate/dataType":14,"../../runtime/equal":22}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pushAtSortPosition=function(e,t,r,n){var i,o=e.length,a=o-1,s=0;if(0===o)return e.push(t),0;for(;n<=a;)i=e[s=n+(a-n>>1)],r(i,t)<=0?n=s+1:a=s-1;r(i,t)<=0&&s++;return e.splice(s,0,t),s}},{}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractNode=void 0;const n=e("./util"),i=e("./find-similar-node");r.AbstractNode=class{constructor(e,t,r){this.level=e,this.id=(0,n.nextNodeId)(),this.deleted=!1,this.type=r,(this.rootNode=t)&&this.rootNode.addNode(this)}isEqualToOtherNode(e,t=this.toString()){return t===e.toString()}remove(){if(this.ensureNotDeleted("remove"),this.isInternalNode())if(0<this.parents.size)throw new Error("cannot remove node with parents "+this.id);var e;this.branches&&((e=this).branches.areBranchesStrictEqual()?e.branches.getBranch("0"):(e.branches.getBranch("0").parents.remove(e),e.branches.getBranch("1"))).parents.remove(e),this.deleted=!0,this.rootNode.removeNode(this)}toJSON(e=!1){var t,r={id:e?this.id:void 0,deleted:e?this.deleted:void 0,type:this.type,level:this.level};return e&&this.parents&&(r.parents=this.parents.toString()),this.isLeafNode()&&(r.value=this.asLeafNode().value),this.branches&&!this.branches.deleted&&(t=this.branches,r.branches={0:t.getBranch("0").toJSON(e),1:t.getBranch("1").toJSON(e)}),r}toString(){let e="<"+this.type+":"+this.level;var t;return this.branches&&(t=this.branches,e=(e+="|0:"+t.getBranch("0"))+"|1:"+t.getBranch("1")),this.isLeafNode()&&(e+="|v:"+this.asLeafNode().value),e+=">"}isRootNode(){return"RootNode"===this.type}isInternalNode(){return"InternalNode"===this.type}isLeafNode(){return"LeafNode"===this.type}asRootNode(){if(this.isRootNode())return this;throw new Error("ouch")}asInternalNode(){if(this.isInternalNode())return this;throw new Error("ouch")}asLeafNode(){if(this.isLeafNode())return this;throw new Error("ouch")}ensureNotDeleted(e="unknown"){if(this.deleted)throw new Error("forbidden operation "+e+" on deleted node "+this.id)}log(){console.log(JSON.stringify(this.toJSON(!0),null,2))}applyEliminationRule(e){this.ensureNotDeleted("applyEliminationRule"),e=e||this.rootNode.getNodesOfLevel(this.level);const r=(0,i.findSimilarNode)(this,e);if(r){e=this.parents.getAll();const n=[];return e.forEach(e=>{var t=e.branches.getKeyOfNode(this);e.branches.setBranch(t,r),e.branches.areBranchesStrictEqual()&&n.push(e),this.parents.remove(e)}),n.forEach(e=>{e.isInternalNode()&&e.applyReductionRule()}),!0}return!1}}},{"./find-similar-node":70,"./util":83}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ensureNodesNotStrictEqual=r.Branches=void 0;r.Branches=class{constructor(e){this.node=e,this.deleted=!1,this.branches={}}setBranch(e,t){this.branches[e]!==t&&(this.branches[e]=t).parents.add(this.node)}getKeyOfNode(e){if(this.getBranch("0")===e)return"0";if(this.getBranch("1")===e)return"1";throw new Error("none matched")}getBranch(e){return this.branches[e]}getBothBranches(){return[this.getBranch("0"),this.getBranch("1")]}hasBranchAsNode(e){return this.getBranch("0")===e||this.getBranch("1")===e}hasNodeIdAsBranch(e){return this.getBranch("0").id===e||this.getBranch("1").id===e}areBranchesStrictEqual(){return this.branches[0]===this.branches[1]}hasEqualBranches(){return JSON.stringify(this.branches[0])===JSON.stringify(this.branches[1])}},r.ensureNodesNotStrictEqual=function(e,t){if(e===t)throw new Error("cannot have two strict equal branches")}},{}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createBddFromTruthTable=void 0;const u=e("./root-node"),c=e("./util"),l=e("./internal-node"),d=e("./leaf-node");r.createBddFromTruthTable=function(e){var r,n,i=new u.RootNode,t=e.keys().next().value.length,t=Math.pow(2,t);if(e.size!==t)throw new Error("truth table has missing entries");for([r,n]of e){let t=i;for(let e=0;e<r.length-1;e++){var o=e+1,a=r.charAt(e);t.branches.getBranch(a)||t.branches.setBranch(a,new l.InternalNode(o,i,t)),t=t.branches.getBranch(a)}var s=(0,c.lastChar)(r);if(t.branches.getBranch(s))throw new Error("leafNode already exists, this should not happen");t.branches.setBranch(s,new d.LeafNode(r.length,i,n,t))}return i}},{"./internal-node":72,"./leaf-node":73,"./root-node":82,"./util":83}],68:[function(e,t,r){"use strict";function c(e,t=new Set){var r;return t.add(e),e.isLeafNode()||(r=(e=e).branches.getBranch("0"),t.add(r),c(r,t),r=e.branches.getBranch("1"),t.add(r),c(r,t)),t}Object.defineProperty(r,"__esModule",{value:!0}),r.getNodesRecursive=r.ensureCorrectBdd=void 0,r.ensureCorrectBdd=function(t){var e=JSON.stringify(t.toJSON(!0));let r=[];const n=new Map;t.getLevels().forEach(e=>{e=t.getNodesOfLevel(e);e.forEach(e=>{n.set(e.id,e)}),r=r.concat(e)});var i=c(t);if(r.length!==i.size){const s=r.map(e=>e.id).sort();var o=Array.from(i).map(e=>e.id).sort().filter(e=>!s.includes(e));if(i.size>r.length){const u=o[0];var a=r.find(e=>!!e.isInternalNode()&&e.branches.hasNodeIdAsBranch(u));console.log("referenceToFirst:"),null!=a&&a.log()}throw new Error("ensureCorrectBdd() nodes in list not equal size to recursive nodes allNodes: "+r.length+" recursiveNodes: "+i.size+" nodesOnlyInRecursive: "+o.join(", ")+" ")}if(r.forEach(e=>{if(!e.isRootNode()){const t=e;if(e.deleted)throw new Error("ensureCorrectBdd() bdd includes a deleted node");if(0===t.parents.size)throw new Error("ensureCorrectBdd() node has no parent "+t.id);if(t.isInternalNode()){const r=t;e=r.branches.getBothBranches();if(r.branches.areBranchesStrictEqual())throw new Error("ensureCorrectBdd() node has two equal branches: "+e.map(e=>e.id).join(", "));e.forEach(e=>{if(!e.parents.has(r))throw new Error("ensureCorrectBdd() branch must have the node as parent")})}t.parents.getAll().forEach(e=>{if(!e.branches.hasBranchAsNode(t))throw new Error("ensureCorrectBdd() parent node does not have child as branch")})}}),e.includes('"deleted":true'))throw new Error("ensureCorrectBdd() bdd includes a deleted node")},r.getNodesRecursive=c},{}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fillTruthTable=void 0;const a=e("./util");r.fillTruthTable=function(e,t,r){var n=(0,a.maxBinaryWithLength)(t);let i=(0,a.minBinaryWithLength)(t),o=!1;for(;!o;)e.has(i)||e.set(i,r),i===n?o=!0:i=(0,a.getNextStateSet)(i)}},{"./util":83}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findSimilarNode=void 0,r.findSimilarNode=function(t,r){var n=t.toString();for(let e=0;e<r.length;e++){var i=r[e];if(t!==i&&!i.deleted&&t.isEqualToOtherNode(i,n))return i}return null}},{}],71:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./minimal-string/index"),r),i(e("./abstract-node"),r),i(e("./branches"),r),i(e("./create-bdd-from-truth-table"),r),i(e("./ensure-correct-bdd"),r),i(e("./fill-truth-table"),r),i(e("./find-similar-node"),r),i(e("./internal-node"),r),i(e("./leaf-node"),r),i(e("./optimize-brute-force"),r),i(e("./parents"),r),i(e("./root-node"),r),i(e("./util"),r)},{"./abstract-node":65,"./branches":66,"./create-bdd-from-truth-table":67,"./ensure-correct-bdd":68,"./fill-truth-table":69,"./find-similar-node":70,"./internal-node":72,"./leaf-node":73,"./minimal-string/index":76,"./optimize-brute-force":80,"./parents":81,"./root-node":82,"./util":83}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InternalNode=void 0;const n=e("./branches"),i=e("./parents");class o extends e("./abstract-node").AbstractNode{constructor(e,t,r){super(e,t,"InternalNode"),this.branches=new n.Branches(this),this.parents=new i.Parents(this),this.parents.add(r)}applyReductionRule(){if(this.branches.hasEqualBranches()){this.ensureNotDeleted("applyReductionRule");const r=this.branches.getBranch("0");return this.parents.getAll().forEach(e=>{var t=e.branches.getKeyOfNode(this);e.branches.setBranch(t,r),this.parents.remove(e),e.branches.areBranchesStrictEqual()&&e.isInternalNode()&&e.applyReductionRule()}),!0}return!1}}r.InternalNode=o},{"./abstract-node":65,"./branches":66,"./parents":81}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LeafNode=void 0;const i=e("./parents");var n=e("./abstract-node");const o=e("./util");class a extends n.AbstractNode{constructor(e,t,r,n){super(e,t,"LeafNode"),this.value=r,this.parents=new i.Parents(this),this.parents.add(n)}removeIfValueEquals(e){return this.ensureNotDeleted(),this.value===e&&(this.parents.getAll().forEach(e=>{var t=e.branches.getKeyOfNode(this),r=e.branches.getBranch((0,o.oppositeBoolean)(t));this.parents.remove(e),e.branches.setBranch(t,r),e.isInternalNode()&&e.applyReductionRule()}),!0)}}r.LeafNode=a},{"./abstract-node":65,"./parents":81,"./util":83}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.nodeToString=r.bddToMinimalString=void 0;const a=e("./string-format"),o=e("./string-format");function s(e,t,r){var n=(0,a.getNextCharId)(r);switch(e.type){case"LeafNode":var i=(0,a.getCharOfValue)(e.asLeafNode().value);return{id:n.char,nextCode:n.nextCode,str:n.char+i};case"InternalNode":var i=t.get(e.asInternalNode().branches.getBranch("0")),o=t.get(e.asInternalNode().branches.getBranch("1"));return{id:n.char,nextCode:n.nextCode,str:n.char+i+o+(0,a.getCharOfLevel)(e.level)};case"RootNode":i=t.get(e.asRootNode().branches.getBranch("0")),o=t.get(e.asRootNode().branches.getBranch("1"));return{id:n.char,nextCode:n.nextCode,str:""+i+o+(0,a.getCharOfLevel)(e.level)};default:throw new Error("unknown node type")}}r.bddToMinimalString=function(t){let r="",n=o.FIRST_CHAR_CODE_FOR_ID;var e=t.getLeafNodes().length;if(99<e)throw new Error("cannot build string with too many leaf nodes");r+=e.toString().padStart(2,"0"),e=t.levels.slice().reverse();const i=new Map;return e.forEach(e=>{t.getNodesOfLevel(e).forEach(e=>{var t=s(e,i,n);n=t.nextCode,i.set(e,t.id),r+=t.str})}),r},r.nodeToString=s},{"./string-format":79}],75:[function(e,t,r){"use strict";function n(e){var t=e.branches.getBranch("0"),r=e.branches.getBranch("1");return{l:e.level,0:t.isLeafNode()?t.asLeafNode().value:n(t),1:r.isLeafNode()?r.asLeafNode().value:n(r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.nodeToSimpleBddNode=r.bddToSimpleBdd=void 0,r.bddToSimpleBdd=n,r.nodeToSimpleBddNode=n},{}],76:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./bdd-to-minimal-string"),r),i(e("./minimal-string-to-simple-bdd"),r),i(e("./resolve-with-simple-bdd"),r),i(e("./string-format"),r),i(e("./bdd-to-simple-bdd"),r)},{"./bdd-to-minimal-string":74,"./bdd-to-simple-bdd":75,"./minimal-string-to-simple-bdd":77,"./resolve-with-simple-bdd":78,"./string-format":79}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.minimalStringToSimpleBdd=void 0;const f=e("../util"),p=e("./string-format");r.minimalStringToSimpleBdd=function(e){var t=new Map,r=2+2*parseInt(e.charAt(0)+e.charAt(1),10),n=e.substring(2,r),i=(0,f.splitStringToChunks)(n,2);for(let e=0;e<i.length;e++){var o=i[e],a=o.charAt(0),o=(0,p.getNumberOfChar)(o.charAt(1));t.set(a,o)}var n=e.substring(r,e.length-3),s=(0,f.splitStringToChunks)(n,4);for(let e=0;e<s.length;e++){var u=s[e],c=u.charAt(0),l=u.charAt(1),d=u.charAt(2),u=(0,p.getNumberOfChar)(u.charAt(3));if(!t.has(l))throw new Error("missing node with id "+l);if(!t.has(d))throw new Error("missing node with id "+d);l=t.get(l),d=t.get(d);t.set(c,{l:u,0:l,1:d})}return r=e.slice(-3),n=r.charAt(0),e=r.charAt(1),{l:(0,p.getNumberOfChar)(r.charAt(2)),0:t.get(n),1:t.get(e)}}},{"../util":83,"./string-format":79}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveWithSimpleBdd=void 0;const a=e("../util");r.resolveWithSimpleBdd=function(e,t,r){let n=e,i=e.l;for(;;){var o=t[i](r),o=(0,a.booleanToBooleanString)(o);if("number"==typeof(n=n[o])||"string"==typeof n)return n;i=n.l}}},{"../util":83}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getNextCharId=r.FIRST_CHAR_CODE_FOR_ID=r.getCharOfValue=r.getNumberOfChar=r.getCharOfLevel=r.CHAR_CODE_OFFSET=void 0,r.CHAR_CODE_OFFSET=40,r.getCharOfLevel=function(e){return e=r.CHAR_CODE_OFFSET+e,String.fromCharCode(e)},r.getNumberOfChar=function(e){return e.charCodeAt(0)-r.CHAR_CODE_OFFSET},r.getCharOfValue=function(e){return e=r.CHAR_CODE_OFFSET+e,String.fromCharCode(e)},r.FIRST_CHAR_CODE_FOR_ID=97,r.getNextCharId=function(e){return 128<=e&&e<=160&&(e=161),{char:String.fromCharCode(e),nextCode:e+1}}},{}],80:[function(e,t,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.getArrayWithIndexes=y.changeKeyOrder=y.shuffleBooleanOrdering=y.optimizeBruteForce=y.defaultCompareResults=void 0;const b=e("./create-bdd-from-truth-table"),v=e("./util");function g(e){var t=c((0,v.firstKeyOfMap)(e).length),t=(0,v.shuffleArray)(t);const r={},n={};t.forEach((e,t)=>{r[t]=e,n[e]=t});var i,o,a=new Map;for([i,o]of e.entries()){var s=u(i,r);a.set(s,o)}return{newTable:a,mapping:r,mappingBeforeToAfter:n}}function u(e,r){return e.split("").map((e,t)=>({char:e,indexBefore:t,indexAfter:r[t]})).sort((e,t)=>e.indexAfter-t.indexAfter).map(e=>e.char).join("")}function c(e){var t=[];let r=0;for(;r<e;)t.push(r),r++;return t}y.defaultCompareResults=function(e,t){return e.countNodes()<=t.countNodes()?e:t},y.optimizeBruteForce=async function({truthTable:e,iterations:t=1/0,onBetterBdd:r=()=>null,compareResults:n=y.defaultCompareResults,afterBddCreation:i=()=>null,log:o=!1}){var a=(0,b.createBddFromTruthTable)(e);i(a),a.minimize();let s={truthTable:e,bdd:a},u=(o&&(a.log(),console.log("initial nodes amount: "+a.countNodes())),0);for(;u<t;){u++,o&&(console.log("-".repeat(50)),console.log("optimizeBruteForce() itterate once"));const l=g(e),d=(0,b.createBddFromTruthTable)(l.newTable),f=new Map,p=(0,v.lastOfArray)(d.getLevels()),h=[],m=(d.getLevels().filter(e=>e!==p).forEach(e=>{const t=l.mappingBeforeToAfter[e],r=(h.push(t),new Set);f.set(t,r),d.getNodesOfLevel(e).forEach(e=>{e.level=t,r.add(e)})}),new Set);d.getNodesOfLevel(p).forEach(e=>m.add(e)),f.set(p,m),h.push(p),d.nodesByLevel=f,d.levels=h,i(d),d.minimize(),o&&(console.log("got new bdd with nodes amount of "+d.countNodes()),console.dir(l.mappingBeforeToAfter));var c=await n(s.bdd,d);if("RootNode"!==c.type)throw new Error("compareResults did not return a bdd");c===d&&(o&&(console.log("#".repeat(50)),console.log("found better bdd "+d.countNodes())),r(s={bdd:d,truthTable:l.newTable}))}return s},y.shuffleBooleanOrdering=g,y.changeKeyOrder=u,y.getArrayWithIndexes=c},{"./create-bdd-from-truth-table":67,"./util":83}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Parents=void 0;r.Parents=class{constructor(e){this.node=e,this.parents=new Set}remove(e){this.parents.delete(e),0===this.parents.size&&this.node.remove()}getAll(){return Array.from(this.parents)}add(e){if(this.node.level===e.level)throw new Error("a node cannot be parent of a node with the same level");this.parents.add(e)}has(e){return this.parents.has(e)}toString(){var e=[];for(const t of this.parents)e.push(t.id);return e.join(", ")}get size(){return this.parents.size}}},{}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RootNode=void 0;var n=e("./abstract-node");const i=e("./branches"),u=e("./util"),o=e("./minimal-string");class a extends n.AbstractNode{constructor(){super(0,null,"RootNode"),this.branches=new i.Branches(this),this.levels=[],this.nodesByLevel=new Map,this.levels.push(0);var e=new Set;e.add(this),this.nodesByLevel.set(0,e)}addNode(e){var t=e.level,t=(this.levels.includes(t)||this.levels.push(t),this.ensureLevelSetExists(t),this.nodesByLevel.get(t));null!=t&&t.add(e)}removeNode(e){var t=this.nodesByLevel.get(e.level);if(!t.has(e))throw new Error("removed non-existing node "+e.id);t.delete(e)}ensureLevelSetExists(e){this.nodesByLevel.has(e)||this.nodesByLevel.set(e,new Set)}getLevels(){return Array.from(this.levels).sort((e,t)=>e-t)}getNodesOfLevel(e){this.ensureLevelSetExists(e);e=this.nodesByLevel.get(e);return Array.from(e)}countNodes(){let t=0;return this.getLevels().forEach(e=>{e=this.getNodesOfLevel(e).length;t+=e}),t}minimize(n=!1){let e=!1;for(;!e;){n&&console.log("minimize() itterate once");let t=0,r=(0,u.lastOfArray)(this.getLevels());for(;0<r;){var i=this.getNodesOfLevel(r);n&&console.log("minimize() run for level "+r+" with "+i.length+" nodes");let e=0;for(const s of i)if(e++,n&&e%4e3==0&&console.log("minimize() node #"+s.id),s.isLeafNode()&&s.asLeafNode().applyEliminationRule()&&t++,!s.deleted&&s.isInternalNode()){var o=s,a=o.applyReductionRule();let e=!1;o.deleted||(e=o.applyEliminationRule(i)),(a||e)&&t++}r--}0===t?e=!0:n&&console.log("minimize() itteration done with "+t+" minimisations")}}getLeafNodes(){var e=(0,u.lastOfArray)(this.getLevels());return this.getNodesOfLevel(e).reverse()}removeIrrelevantLeafNodes(t){let r=!1;for(;!r;){let e=0;for(const n of this.getLeafNodes())n.removeIfValueEquals(t)&&e++;this.minimize(),0===e&&(r=!0)}}resolve(e,t){let r=this;for(;;){var n=e[r.level](t),n=(0,u.booleanToBooleanString)(n);if((r=r.branches.getBranch(n)).isLeafNode())return r.asLeafNode().value}}toSimpleBdd(){return(0,o.bddToSimpleBdd)(this)}}r.RootNode=a},{"./abstract-node":65,"./branches":66,"./minimal-string":76,"./util":83}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.splitStringToChunks=r.lastOfArray=r.shuffleArray=r.firstKeyOfMap=r.getNextStateSet=r.maxBinaryWithLength=r.minBinaryWithLength=r.binaryToDecimal=r.oppositeBinary=r.decimalToPaddedBinary=r.nextNodeId=r.lastChar=r.oppositeBoolean=r.booleanToBooleanString=r.booleanStringToBoolean=void 0,r.booleanStringToBoolean=function(e){return"1"===e},r.booleanToBooleanString=function(e){return e?"1":"0"},r.oppositeBoolean=function(e){return"1"===e?"0":"1"},r.lastChar=function(e){return e.slice(-1)};const n=function(t){let r="";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length;for(let e=0;e<t;e++)r+=n.charAt(Math.floor(Math.random()*i));return r}(4);let i=0;function o(e,t){return(e>>>0).toString(2).padStart(t,"0")}function a(e){return parseInt(e,2)}r.nextNodeId=function(){var e="node_"+n+"_"+i;return i++,e},r.decimalToPaddedBinary=o,r.oppositeBinary=function(e){if("1"===e)return"0";if("0"===e)return"1";throw new Error("non-binary given")},r.binaryToDecimal=a,r.minBinaryWithLength=function(e){return new Array(e).fill(0).map(()=>"0").join("")},r.maxBinaryWithLength=function(e){return new Array(e).fill(0).map(()=>"1").join("")},r.getNextStateSet=function(e){return o(a(e)+1,e.length)},r.firstKeyOfMap=function(e){return e.keys().next().value},r.shuffleArray=function(t){for(let e=t.length-1;0<e;e--){var r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t},r.lastOfArray=function(e){return e[e.length-1]},r.splitStringToChunks=function(r,n){var i=[];for(let e=0,t=r.length;e<t;e+=n)i.push(r.substring(e,e+n));return i}},{}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OPEN_BROADCAST_CHANNELS=r.BroadcastChannel=void 0,r.clearNodeFolder=function(e){e=(0,s.fillOptionsWithDefaults)(e);e=(0,a.chooseMethod)(e);return"node"===e.type?e.clearNodeFolder().then(function(){return!0}):o.PROMISE_RESOLVED_FALSE},r.enforceOptions=function(e){i=e};function n(e,t){var r;this.id=c++,u.add(this),this.name=e,i&&(t=i),this.options=(0,s.fillOptionsWithDefaults)(t),this.method=(0,a.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,e=(r=this).method.create(r.name,r.options),(0,o.isPromise)(e)?(r._prepP=e).then(function(e){r._state=e}):r._state=e}var i,o=e("./util.js"),a=e("./method-chooser.js"),s=e("./options.js"),u=new Set,c=(r.OPEN_BROADCAST_CHANNELS=u,0);function l(t,e,r){var n={time:t.method.microSeconds(),type:e,data:r};return(t._prepP||o.PROMISE_RESOLVED_VOID).then(function(){var e=t.method.postMessage(t._state,n);return t._uMP.add(e),e.catch().then(function(){return t._uMP.delete(e)}),e})}function d(e){return 0<e._addEL.message.length||0<e._addEL.internal.length}function f(e,t,r){e._addEL[t].push(r);var n,i,o=e;!o._iL&&d(o)&&(n=function(r){o._addEL[r.type].forEach(function(e){var t=e.time-1e5;r.time>=t&&e.fn(r.data)})},i=o.method.microSeconds(),o._prepP?o._prepP.then(function(){o._iL=!0,o.method.onMessage(o._state,n,i)}):(o._iL=!0,o.method.onMessage(o._state,n,i)))}function p(e,t,r){e._addEL[t]=e._addEL[t].filter(function(e){return e!==r});t=e;t._iL&&!d(t)&&(t._iL=!1,e=t.method.microSeconds(),t.method.onMessage(t._state,null,e))}(r.BroadcastChannel=n)._pubkey=!0,n.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return l(this,"message",e)},postInternal:function(e){return l(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};p(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,f(this,"message",t)):this._onML=null},addEventListener:function(e,t){var r=this.method.microSeconds();f(this,e,{time:r,fn:t})},removeEventListener:function(e,t){var r=this._addEL[e].find(function(e){return e.fn===t});p(this,e,r)},close:function(){var e,t=this;if(!this.closed)return u.delete(this),this.closed=!0,e=this._prepP||o.PROMISE_RESOLVED_VOID,this._onML=null,this._addEL.message=[],e.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(e){return e()}))}).then(function(){return t.method.close(t._state)})},get type(){return this.method.type},get isClosed(){return this.closed}}},{"./method-chooser.js":90,"./options.js":95,"./util.js":96}],85:[function(e,t,r){"use strict";e=e("./index.js");t.exports={BroadcastChannel:e.BroadcastChannel,createLeaderElection:e.createLeaderElection,clearNodeFolder:e.clearNodeFolder,enforceOptions:e.enforceOptions,beLeader:e.beLeader}},{"./index.js":86}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BroadcastChannel",{enumerable:!0,get:function(){return n.BroadcastChannel}}),Object.defineProperty(r,"OPEN_BROADCAST_CHANNELS",{enumerable:!0,get:function(){return n.OPEN_BROADCAST_CHANNELS}}),Object.defineProperty(r,"beLeader",{enumerable:!0,get:function(){return o.beLeader}}),Object.defineProperty(r,"clearNodeFolder",{enumerable:!0,get:function(){return n.clearNodeFolder}}),Object.defineProperty(r,"createLeaderElection",{enumerable:!0,get:function(){return i.createLeaderElection}}),Object.defineProperty(r,"enforceOptions",{enumerable:!0,get:function(){return n.enforceOptions}});var n=e("./broadcast-channel.js"),i=e("./leader-election.js"),o=e("./leader-election-util.js")},{"./broadcast-channel.js":84,"./leader-election-util.js":87,"./leader-election.js":89}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.beLeader=function(t){t.isLeader=!0,t._hasLeader=!0;function e(e){"leader"===e.context&&"apply"===e.action&&i(t,"tell"),"leader"!==e.context||"tell"!==e.action||t._dpLC||(t._dpLC=!0,t._dpL(),i(t,"tell"))}var r=(0,n.add)(function(){return t.die()});t._unl.push(r);return t.broadcastChannel.addEventListener("internal",e),t._lstns.push(e),i(t,"tell")},r.sendLeaderMessage=i;var n=e("unload");function i(e,t){t={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(t)}},{unload:781}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LeaderElectionWebLock=void 0;function n(e,t){var r=this;(this.broadcastChannel=e)._befC.push(function(){return r.die()}),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=(0,i.randomToken)(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name}var i=e("./util.js"),o=e("./leader-election-util.js");(r.LeaderElectionWebLock=n).prototype={hasLeader:function(){var t=this;return navigator.locks.query().then(function(e){e=e.held?e.held.filter(function(e){return e.name===t.lN}):[];return!!(e&&0<e.length)})},awaitLeadership:function(){var t,r=this;return this._wLMP||(this._wKMC.c=new AbortController,t=new Promise(function(e,t){r._wKMC.res=e,r._wKMC.rej=t}),this._wLMP=new Promise(function(e){navigator.locks.request(r.lN,{signal:r._wKMC.c.signal},function(){return(r._wKMC.c=void 0,o.beLeader)(r),e(),t}).catch(function(){})})),this._wLMP},set onduplicate(e){},die:function(){var t=this;return this._lstns.forEach(function(e){return t.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),(0,o.sendLeaderMessage)(this,"death")}}},{"./leader-election-util.js":87,"./util.js":96}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLeaderElection=function(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){e=e||{};(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3);e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options));return e}(t,e);var r=new((0,s.supportsWebLockAPI)()?n.LeaderElectionWebLock:i)(e,t);return e._befC.push(function(){return r.die()}),e._leaderElector=r};var s=e("./util.js"),u=e("./leader-election-util.js"),n=e("./leader-election-web-lock.js"),i=function(e,t){function r(e){"leader"===e.context&&("death"===e.action&&(n._hasLeader=!1),"tell"===e.action)&&(n._hasLeader=!0)}var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=(0,s.randomToken)(),this._aplQ=s.PROMISE_RESOLVED_VOID,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};i.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(o){var a=this;return this.isLeader?(0,s.sleep)(0,!0):this.isDead?(0,s.sleep)(0,!1):1<this._aplQC?this._aplQ:(this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return a.isLeader?s.PROMISE_RESOLVED_TRUE:(t=!1,e=new Promise(function(e){r=function(){t=!0,e()}}),a.broadcastChannel.addEventListener("internal",n=function(e){"leader"===e.context&&e.token!=a.token&&("apply"===e.action&&e.token>a.token&&r(),"tell"===e.action)&&(r(),a._hasLeader=!0)}),i=o?4*a._options.responseTime:a._options.responseTime,(0,u.sendLeaderMessage)(a,"apply").then(function(){return Promise.race([(0,s.sleep)(i),e.then(function(){return Promise.reject(new Error)})])}).then(function(){return(0,u.sendLeaderMessage)(a,"apply")}).then(function(){return Promise.race([(0,s.sleep)(i),e.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return a.broadcastChannel.removeEventListener("internal",n),!t&&(0,u.beLeader)(a).then(function(){return!0})}));var t,r,e,n,i}).then(function(){a._aplQC=a._aplQC-1}),this._aplQ.then(function(){return a.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(i){if(i.isLeader)return s.PROMISE_RESOLVED_VOID;return new Promise(function(e){var t=!1;function r(){t||(t=!0,i.broadcastChannel.removeEventListener("internal",n),e(!0))}i.applyOnce().then(function(){i.isLeader&&r()});(function e(){return(0,s.sleep)(i._options.fallbackInterval).then(function(){if(!i.isDead&&!t)return i.isLeader?void r():i.applyOnce(!0).then(function(){(i.isLeader?r:e)()})})})();var n=function(e){"leader"===e.context&&"death"===e.action&&(i._hasLeader=!1,i.applyOnce().then(function(){i.isLeader&&r()}))};i.broadcastChannel.addEventListener("internal",n),i._lstns.push(n)})}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;return this._lstns.forEach(function(e){return t.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,(0,u.sendLeaderMessage)(this,"death")}}},{"./leader-election-util.js":87,"./leader-election-web-lock.js":88,"./util.js":96}],90:[function(e,t,r){"use strict";e("@babel/runtime/helpers/typeof");Object.defineProperty(r,"__esModule",{value:!0}),r.chooseMethod=function(t){var e=[].concat(t.methods,a).filter(Boolean);if(t.type){if("simulate"===t.type)return o.SimulateMethod;var r=e.find(function(e){return e.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(e){return"idb"!==e.type}));r=e.find(function(e){return e.canBeUsed()});{if(r)return r;throw new Error("No usable method found in "+JSON.stringify(a.map(function(e){return e.type})))}};var r=e("./methods/native.js"),n=e("./methods/indexed-db.js"),i=e("./methods/localstorage.js"),o=e("./methods/simulate.js");var a=[r.NativeMethod,n.IndexedDBMethod,i.LocalstorageMethod]},{"./methods/indexed-db.js":91,"./methods/localstorage.js":92,"./methods/native.js":93,"./methods/simulate.js":94,"@babel/runtime/helpers/typeof":97}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TRANSACTION_SETTINGS=r.IndexedDBMethod=void 0,r.averageResponseTime=S,r.canBeUsed=O,r.cleanOldMessages=y,r.close=g,r.commitIndexedDBTransaction=d,r.create=b,r.createDatabase=u,r.getAllMessages=function(e){var r=e.transaction(c,"readonly",l),n=r.objectStore(c),i=[];return new Promise(function(t){n.openCursor().onsuccess=function(e){e=e.target.result;e?(i.push(e.value),e.continue()):(d(r),t(i))}})},r.getIdb=s,r.getMessagesHigherThan=p,r.getOldMessages=m,r.microSeconds=void 0,r.onMessage=w,r.postMessage=_,r.removeMessagesById=h,r.type=void 0,r.writeMessage=f;var i=e("../util.js"),o=e("oblivious-set"),a=e("../options.js"),e=i.microSeconds,n=(r.microSeconds=e,"pubkey.broadcast-channel-0-"),c="messages",l={durability:"relaxed"};r.TRANSACTION_SETTINGS=l;function s(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function d(e){e.commit&&e.commit()}function u(e){var r=s().open(n+e);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(c,{keyPath:"id",autoIncrement:!0})},new Promise(function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}})}function f(e,t,r){var n={uuid:t,time:(new Date).getTime(),data:r},i=e.transaction([c],"readwrite",l);return new Promise(function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(c).add(n),d(i)})}function p(e,n){var i,o=e.transaction(c,"readonly",l),a=o.objectStore(c),s=[],u=IDBKeyRange.bound(n+1,1/0);return a.getAll?(i=a.getAll(u),new Promise(function(t,r){i.onerror=function(e){return r(e)},i.onsuccess=function(e){t(e.target.result)}})):new Promise(function(t,r){var e=function(){try{return u=IDBKeyRange.bound(n+1,1/0),a.openCursor(u)}catch(e){return a.openCursor()}}();e.onerror=function(e){return r(e)},e.onsuccess=function(e){e=e.target.result;e?e.value.id<n+1?e.continue(n+1):(s.push(e.value),e.continue()):(d(o),t(s))}})}function h(e,t){var r;return e.closed?Promise.resolve([]):(r=e.db.transaction(c,"readwrite",l).objectStore(c),Promise.all(t.map(function(e){var t=r.delete(e);return new Promise(function(e){t.onsuccess=function(){return e()}})})))}function m(e,t){var n=(new Date).getTime()-t,i=e.transaction(c,"readonly",l),o=i.objectStore(c),a=[];return new Promise(function(r){o.openCursor().onsuccess=function(e){var t,e=e.target.result;e?(t=e.value).time<n?(a.push(t),e.continue()):(d(i),r(a)):r(a)}})}function y(t){return m(t.db,t.options.idb.ttl).then(function(e){return h(t,e.map(function(e){return e.id}))})}function b(r,n){return n=(0,a.fillOptionsWithDefaults)(n),u(r).then(function(e){var t={closed:!1,lastCursorId:0,channelName:r,options:n,uuid:(0,i.randomToken)(),eMIs:new o.ObliviousSet(2*n.idb.ttl),writeBlockPromise:i.PROMISE_RESOLVED_VOID,messagesCallback:null,readQueuePromises:[],db:e};return e.onclose=function(){t.closed=!0,n.idb.onclose&&n.idb.onclose()},function e(t){if(t.closed)return;v(t).then(function(){return(0,i.sleep)(t.options.idb.fallbackInterval)}).then(function(){return e(t)})}(t),t})}function v(r){return!r.closed&&r.messagesCallback?p(r.db,r.lastCursorId).then(function(e){return e.filter(function(e){return!!e}).map(function(e){return e.id>r.lastCursorId&&(r.lastCursorId=e.id),e}).filter(function(e){return t=r,(e=e).uuid!==t.uuid&&!(t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime);var t}).sort(function(e,t){return e.time-t.time}).forEach(function(e){r.messagesCallback&&(r.eMIs.add(e.id),r.messagesCallback(e.data))}),i.PROMISE_RESOLVED_VOID}):i.PROMISE_RESOLVED_VOID}function g(e){e.closed=!0,e.db.close()}function _(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return f(e.db,e.uuid,t)}).then(function(){0===(0,i.randomInt)(0,10)&&y(e)}),e.writeBlockPromise}function w(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,v(e)}function O(){return!!s()}function S(e){return 2*e.idb.fallbackInterval}r.type="idb",r.IndexedDBMethod={create:b,close:g,onMessage:w,postMessage:_,canBeUsed:O,type:"idb",averageResponseTime:S,microSeconds:e}},{"../options.js":95,"../util.js":96,"oblivious-set":406}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LocalstorageMethod=void 0,r.addStorageEventListener=d,r.averageResponseTime=b,r.canBeUsed=y,r.close=h,r.create=p,r.getLocalStorage=u,r.microSeconds=void 0,r.onMessage=m,r.postMessage=l,r.removeStorageEventListener=f,r.storageKey=c,r.type=void 0;var o=e("oblivious-set"),a=e("../options.js"),s=e("../util.js"),e=s.microSeconds,i=(r.microSeconds=e,"pubkey.broadcastChannel-"),n="localstorage";function u(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function c(e){return i+e}function l(i,o){return new Promise(function(n){(0,s.sleep)().then(function(){var e=c(i.channelName),t={token:(0,s.randomToken)(),time:(new Date).getTime(),data:o,uuid:i.uuid},t=JSON.stringify(t),r=(u().setItem(e,t),document.createEvent("Event"));r.initEvent("storage",!0,!0),r.key=e,r.newValue=t,window.dispatchEvent(r),n()})})}function d(e,t){function r(e){e.key===n&&t(JSON.parse(e.newValue))}var n=i+e;return window.addEventListener("storage",r),r}function f(e){window.removeEventListener("storage",e)}function p(e,t){var r,n,i;if(t=(0,a.fillOptionsWithDefaults)(t),y())return r=(0,s.randomToken)(),n=new o.ObliviousSet(t.localstorage.removeTimeout),(i={channelName:e,uuid:r,eMIs:n}).listener=d(e,function(e){!i.messagesCallback||e.uuid===r||!e.token||n.has(e.token)||e.data.time&&e.data.time<i.messagesCallbackTime||(n.add(e.token),i.messagesCallback(e.data))}),i;throw new Error("BroadcastChannel: localstorage cannot be used")}function h(e){f(e.listener)}function m(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t}function y(){var e=u();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}function b(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120}r.type=n,r.LocalstorageMethod={create:p,close:h,onMessage:m,postMessage:l,canBeUsed:y,type:n,averageResponseTime:b,microSeconds:e}},{"../options.js":95,"../util.js":96,"oblivious-set":406}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NativeMethod=void 0,r.averageResponseTime=c,r.canBeUsed=u,r.close=o,r.create=i,r.microSeconds=void 0,r.onMessage=s,r.postMessage=a,r.type=void 0;var n=e("../util.js"),e=n.microSeconds;r.microSeconds=e;function i(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function o(e){e.bc.close(),e.subFns=[]}function a(e,t){try{return e.bc.postMessage(t,!1),n.PROMISE_RESOLVED_VOID}catch(e){return Promise.reject(e)}}function s(e,t){e.messagesCallback=t}function u(){if("undefined"==typeof window&&"undefined"==typeof self||"function"!=typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}function c(){return 150}r.type="native",r.NativeMethod={create:i,close:o,onMessage:s,postMessage:a,canBeUsed:u,type:"native",averageResponseTime:c,microSeconds:e}},{"../util.js":96}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimulateMethod=void 0,r.averageResponseTime=l,r.canBeUsed=c,r.close=a,r.create=o,r.microSeconds=void 0,r.onMessage=u,r.postMessage=s,r.type=void 0;var e=e("../util.js").microSeconds,n=(r.microSeconds=e,"simulate"),i=(r.type=n,new Set);function o(e){e={name:e,messagesCallback:null};return i.add(e),e}function a(e){i.delete(e)}function s(t,r){return new Promise(function(e){return setTimeout(function(){Array.from(i).filter(function(e){return e.name===t.name}).filter(function(e){return e!==t}).filter(function(e){return!!e.messagesCallback}).forEach(function(e){return e.messagesCallback(r)}),e()},5)})}function u(e,t){e.messagesCallback=t}function c(){return!0}function l(){return 5}r.SimulateMethod={create:o,close:a,onMessage:u,postMessage:s,canBeUsed:c,type:n,averageResponseTime:l,microSeconds:e}},{"../util.js":96}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fillOptionsWithDefaults=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0);t.idb||(t.idb={});t.idb.ttl||(t.idb.ttl=45e3);t.idb.fallbackInterval||(t.idb.fallbackInterval=150);e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose);t.localstorage||(t.localstorage={});t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4);e.methods&&(t.methods=e.methods);t.node||(t.node={});t.node.ttl||(t.node.ttl=12e4);t.node.maxParallelWrites||(t.node.maxParallelWrites=2048);void 0===t.node.useFastPath&&(t.node.useFastPath=!0);return t}},{}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PROMISE_RESOLVED_VOID=r.PROMISE_RESOLVED_TRUE=r.PROMISE_RESOLVED_FALSE=void 0,r.isPromise=function(e){return e&&"function"==typeof e.then},r.microSeconds=function(){var e=(new Date).getTime();return e===i?1e3*e+ ++o:(o=0,1e3*(i=e))},r.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},r.randomToken=function(){return Math.random().toString(36).substring(2)},r.sleep=function(t,r){t=t||0;return new Promise(function(e){return setTimeout(function(){return e(r)},t)})},r.supportsWebLockAPI=function(){return"undefined"!=typeof navigator&&void 0!==navigator.locks&&"function"==typeof navigator.locks.request};var n=Promise.resolve(!1),n=(r.PROMISE_RESOLVED_FALSE=n,Promise.resolve(!0)),n=(r.PROMISE_RESOLVED_TRUE=n,Promise.resolve());r.PROMISE_RESOLVED_VOID=n;var i=0,o=0},{}],97:[function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],98:[function(e,t,r){"use strict";var n=e("get-intrinsic"),i=e("./"),o=i(n("String.prototype.indexOf"));t.exports=function(e,t){t=n(e,!!t);return"function"==typeof t&&-1<o(e,".prototype.")?i(t):t}},{"./":99,"get-intrinsic":129}],99:[function(t,e,r){"use strict";var n=t("function-bind"),i=t("get-intrinsic"),o=t("set-function-length"),a=i("%TypeError%"),s=i("%Function.prototype.apply%"),u=i("%Function.prototype.call%"),c=i("%Reflect.apply%",!0)||n.call(u,s),t=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(t)try{t({},"a",{value:1})}catch(e){t=null}e.exports=function(e){if("function"!=typeof e)throw new a("a function is required");var t=c(n,u,arguments);return o(t,1+l(0,e.length-(arguments.length-1)),!0)};function d(){return c(n,s,arguments)}t?t(e.exports,"apply",{value:d}):e.exports.apply=d},{"function-bind":125,"get-intrinsic":129,"set-function-length":778}],100:[function(e,t,r){!function(x){!function(){var e=function(){"use strict";function g(e,t){return null!=t&&e instanceof t}var _,w,O;try{_=Map}catch(e){_=function(){}}try{w=Set}catch(e){w=function(){}}try{O=Promise}catch(e){O=function(){}}function S(e,p,t,h,m){"object"==typeof p&&(t=p.depth,h=p.prototype,m=p.includeNonEnumerable,p=p.circular);var y=[],b=[],v=void 0!==x;return void 0===p&&(p=!0),function n(e,i){if(null===e)return null;if(0===i)return e;var r,t,o;if("object"!=typeof e)return e;if(g(e,_))r=new _;else if(g(e,w))r=new w;else if(g(e,O))r=new O(function(t,r){e.then(function(e){t(n(e,i-1))},function(e){r(n(e,i-1))})});else if(S.__isArray(e))r=[];else if(S.__isRegExp(e))r=new RegExp(e.source,E(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(S.__isDate(e))r=new Date(e.getTime());else{if(v&&x.isBuffer(e))return r=x.allocUnsafe?x.allocUnsafe(e.length):new x(e.length),e.copy(r),r;g(e,Error)?r=Object.create(e):void 0===h?(t=Object.getPrototypeOf(e),r=Object.create(t)):(r=Object.create(h),t=h)}if(p){var a=y.indexOf(e);if(-1!=a)return b[a];y.push(e),b.push(r)}for(u in g(e,_)&&e.forEach(function(e,t){t=n(t,i-1),e=n(e,i-1),r.set(t,e)}),g(e,w)&&e.forEach(function(e){e=n(e,i-1),r.add(e)}),e)(o=t?Object.getOwnPropertyDescriptor(t,u):o)&&null==o.set||(r[u]=n(e[u],i-1));if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(e),u=0;u<s.length;u++){var c=s[u];(d=Object.getOwnPropertyDescriptor(e,c))&&!d.enumerable&&!m||(r[c]=n(e[c],i-1),d.enumerable)||Object.defineProperty(r,c,{enumerable:!1})}if(m)for(var l=Object.getOwnPropertyNames(e),u=0;u<l.length;u++){var d,f=l[u];(d=Object.getOwnPropertyDescriptor(e,f))&&d.enumerable||(r[f]=n(e[f],i-1),Object.defineProperty(r,f,{enumerable:!1}))}return r}(e,t=void 0===t?1/0:t)}function t(e){return Object.prototype.toString.call(e)}function E(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return S.clonePrototype=function(e){var t;return null===e?null:((t=function(){}).prototype=e,new t)},S.__objToStr=t,S.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},S.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},S.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},S.__getRegExpFlags=E,S}();"object"==typeof t&&t.exports&&(t.exports=e)}.call(this)}.call(this,e("buffer").Buffer)},{buffer:908}],101:[function(e,t,r){var n,i;n=this,i=function(e){for(var t=e,r=t.lib.BlockCipher,n=t.algo,c=[],i=[],o=[],a=[],s=[],u=[],l=[],d=[],f=[],p=[],h=[],m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(var y=0,b=0,m=0;m<256;m++){var v=b^b<<1^b<<2^b<<3^b<<4,g=h[i[c[y]=v=v>>>8^255&v^99]=y],_=h[g],w=h[_],O=257*h[v]^16843008*v;o[y]=O<<24|O>>>8,a[y]=O<<16|O>>>16,s[y]=O<<8|O>>>24,u[y]=O,l[v]=(O=16843009*w^65537*_^257*g^16843008*y)<<24|O>>>8,d[v]=O<<16|O>>>16,f[v]=O<<8|O>>>24,p[v]=O,y?(y=g^h[h[h[w^g]]],b^=h[h[b]]):y=b=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*(1+(this._nRounds=6+r)),i=this._keySchedule=[],o=0;o<n;o++)o<r?i[o]=t[o]:(u=i[o-1],o%r?6<r&&o%r==4&&(u=c[u>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u]):(u=c[(u=u<<8|u>>>24)>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u],u^=S[o/r|0]<<24),i[o]=i[o-r]^u);for(var a=this._invKeySchedule=[],s=0;s<n;s++){var u,o=n-s;u=s%4?i[o]:i[o-4],a[s]=s<4||o<=4?u:l[c[u>>>24]]^d[c[u>>>16&255]]^f[c[u>>>8&255]]^p[c[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,s,u,c)},decryptBlock:function(e,t){var r=e[t+1],r=(e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,d,f,p,i),e[t+1]);e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var u=this._nRounds,c=e[t]^r[0],l=e[t+1]^r[1],d=e[t+2]^r[2],f=e[t+3]^r[3],p=4,h=1;h<u;h++)var m=n[c>>>24]^i[l>>>16&255]^o[d>>>8&255]^a[255&f]^r[p++],y=n[l>>>24]^i[d>>>16&255]^o[f>>>8&255]^a[255&c]^r[p++],b=n[d>>>24]^i[f>>>16&255]^o[c>>>8&255]^a[255&l]^r[p++],v=n[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&d]^r[p++],c=m,l=y,d=b,f=v;m=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^r[p++],y=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&c])^r[p++],b=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^r[p++],v=(s[f>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^r[p++];e[t]=m,e[t+1]=y,e[t+2]=b,e[t+3]=v},keySize:8});return t.AES=r._createHelper(n),e.AES},"object"==typeof r?t.exports=r=i(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(n.CryptoJS)},{"./cipher-core":102,"./core":103,"./enc-base64":104,"./evpkdf":106,"./md5":108}],102:[function(e,t,r){var n,i;n=this,i=function(e){function i(e){return"string"==typeof e?h:p}function o(e,t,r){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=n[o]}var t,r,a,n,s,u,c,l,d,f,p,h;e.lib.Cipher||(t=(e=e).lib,r=t.Base,a=t.WordArray,n=t.BufferedBlockAlgorithm,(s=e.enc).Utf8,u=s.Base64,c=e.algo.EvpKDF,l=t.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,r){return i(t).encrypt(n,e,t,r)},decrypt:function(e,t,r){return i(t).decrypt(n,e,t,r)}}}}),t.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),s=e.mode={},d=t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=s.CBC=((s=d.extend()).Encryptor=s.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;o.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),s.Decryptor=s.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),o.call(this,e,t,n),this._prevBlock=i}}),s),s=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,r=t-e.sigBytes%t,n=r<<24|r<<16|r<<8|r,i=[],o=0;o<r;o+=4)i.push(n);t=a.create(i,r);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:s}),reset:function(){l.reset.call(this);var e,t=this.cfg,r=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(t,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),f=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt,e=e?a.create([1398893684,1701076831]).concat(e).concat(t):t;return e.toString(u)},parse:function(e){var t,e=u.parse(e),r=e.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),e.sigBytes-=16),f.create({ciphertext:e,salt:t})}},p=t.SerializableCipher=r.extend({cfg:r.extend({format:d}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),t=i.finalize(t),i=i.cfg;return f.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),s=(e.kdf={}).OpenSSL={execute:function(e,t,r,n){n=n||a.random(8);e=c.create({keySize:t+r}).compute(e,n),r=a.create(e.words.slice(t),4*r);return e.sigBytes=4*t,f.create({key:e,iv:r,salt:n})}},h=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:s}),encrypt:function(e,t,r,n){r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,e=p.encrypt.call(this,e,t,r.key,n);return e.mixIn(r),e},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,p.decrypt.call(this,e,t,r.key,n)}}))},"object"==typeof r?t.exports=r=i(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],i):i(n.CryptoJS)},{"./core":103,"./evpkdf":106}],103:[function(m,r,n){!function(h){!function(){var e,t;e=this,t=function(){var n,c=Math;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),!(n=!(n=!(n="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:n)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:n)&&void 0!==h&&h.crypto?h.crypto:n)&&"function"==typeof m)try{n=m("crypto")}catch(e){}var r=Object.create||function(e){return t.prototype=e,e=new t,t.prototype=null,e};function t(){}var e={},i=e.lib={},o=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new l.init(t,e)}}),a=e.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o),s=(a=e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*o,e=c.min(4*s,i);if(s){for(var u=0;u<s;u+=o)this._doProcessBlock(n,u);t=n.splice(0,s),r.sigBytes-=e}return new l.init(t,e)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(i.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new p.HMAC.init(r,t).finalize(e)}}}),e.algo={});return e},"object"==typeof n?r.exports=n=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:907}],104:[function(e,t,r){var n,i;n=this,i=function(e){var h;return h=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=this._map,i=(e.clamp(),[]),o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)i.push(n.charAt(a>>>6*(3-s)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,r=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],i=0;i<r.length;i++)n[r.charCodeAt(i)]=i;for(var o,a,s=r.charAt(64),u=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),c=t,l=n,d=[],f=0,p=0;p<c;p++)p%4&&(o=l[u.charCodeAt(p-1)]<<p%4*2,a=l[u.charCodeAt(p)]>>>6-p%4*2,d[f>>>2]|=(o|a)<<24-f%4*8,f++);return h.create(d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)},{"./core":103}],105:[function(e,t,r){var n,i;n=this,i=function(e){return e.enc.Utf8},"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)},{"./core":103}],106:[function(e,t,r){var n,i;n=this,i=function(e){var t,r,n,l,i,o;return r=(t=e).lib,n=r.Base,l=r.WordArray,r=t.algo,i=r.MD5,o=r.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),o=l.create(),a=o.words,s=n.keySize,u=n.iterations;a.length<s;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var c=1;c<u;c++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*s,o}}),t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)},e.EvpKDF},"object"==typeof r?t.exports=r=i(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],i):i(n.CryptoJS)},{"./core":103,"./hmac":107,"./sha1":109}],107:[function(e,t,r){var n,i;n=this,i=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));for(var r=e.blockSize,n=4*r,e=((t=t.sigBytes>n?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),i=e.words,o=t.words,a=0;a<r;a++)i[a]^=1549556828,o[a]^=909522486;e.sigBytes=t.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})},"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)},{"./core":103}],108:[function(e,t,r){var n,i;n=this,i=function(e){for(var u=Math,t=e,r=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,P=[],o=0;o<64;o++)P[o]=4294967296*u.abs(u.sin(o+1))|0;function j(e,t,r,n,i,o,a){e=e+(t&r|~t&n)+i+a;return(e<<o|e>>>32-o)+t}function A(e,t,r,n,i,o,a){e=e+(t&n|r&~n)+i+a;return(e<<o|e>>>32-o)+t}function M(e,t,r,n,i,o,a){e=e+(t^r^n)+i+a;return(e<<o|e>>>32-o)+t}function I(e,t,r,n,i,o,a){e=e+(r^(t|~n))+i+a;return(e<<o|e>>>32-o)+t}return i=i.MD5=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],s=e[t+1],u=e[t+2],c=e[t+3],l=e[t+4],d=e[t+5],f=e[t+6],p=e[t+7],h=e[t+8],m=e[t+9],y=e[t+10],b=e[t+11],v=e[t+12],g=e[t+13],_=e[t+14],w=e[t+15],O=j(o[0],x=o[1],E=o[2],S=o[3],a,7,P[0]),S=j(S,O,x,E,s,12,P[1]),E=j(E,S,O,x,u,17,P[2]),x=j(x,E,S,O,c,22,P[3]);O=j(O,x,E,S,l,7,P[4]),S=j(S,O,x,E,d,12,P[5]),E=j(E,S,O,x,f,17,P[6]),x=j(x,E,S,O,p,22,P[7]),O=j(O,x,E,S,h,7,P[8]),S=j(S,O,x,E,m,12,P[9]),E=j(E,S,O,x,y,17,P[10]),x=j(x,E,S,O,b,22,P[11]),O=j(O,x,E,S,v,7,P[12]),S=j(S,O,x,E,g,12,P[13]),E=j(E,S,O,x,_,17,P[14]),O=A(O,x=j(x,E,S,O,w,22,P[15]),E,S,s,5,P[16]),S=A(S,O,x,E,f,9,P[17]),E=A(E,S,O,x,b,14,P[18]),x=A(x,E,S,O,a,20,P[19]),O=A(O,x,E,S,d,5,P[20]),S=A(S,O,x,E,y,9,P[21]),E=A(E,S,O,x,w,14,P[22]),x=A(x,E,S,O,l,20,P[23]),O=A(O,x,E,S,m,5,P[24]),S=A(S,O,x,E,_,9,P[25]),E=A(E,S,O,x,c,14,P[26]),x=A(x,E,S,O,h,20,P[27]),O=A(O,x,E,S,g,5,P[28]),S=A(S,O,x,E,u,9,P[29]),E=A(E,S,O,x,p,14,P[30]),O=M(O,x=A(x,E,S,O,v,20,P[31]),E,S,d,4,P[32]),S=M(S,O,x,E,h,11,P[33]),E=M(E,S,O,x,b,16,P[34]),x=M(x,E,S,O,_,23,P[35]),O=M(O,x,E,S,s,4,P[36]),S=M(S,O,x,E,l,11,P[37]),E=M(E,S,O,x,p,16,P[38]),x=M(x,E,S,O,y,23,P[39]),O=M(O,x,E,S,g,4,P[40]),S=M(S,O,x,E,a,11,P[41]),E=M(E,S,O,x,c,16,P[42]),x=M(x,E,S,O,f,23,P[43]),O=M(O,x,E,S,m,4,P[44]),S=M(S,O,x,E,v,11,P[45]),E=M(E,S,O,x,w,16,P[46]),O=I(O,x=M(x,E,S,O,u,23,P[47]),E,S,a,6,P[48]),S=I(S,O,x,E,p,10,P[49]),E=I(E,S,O,x,_,15,P[50]),x=I(x,E,S,O,d,21,P[51]),O=I(O,x,E,S,v,6,P[52]),S=I(S,O,x,E,c,10,P[53]),E=I(E,S,O,x,y,15,P[54]),x=I(x,E,S,O,s,21,P[55]),O=I(O,x,E,S,h,6,P[56]),S=I(S,O,x,E,w,10,P[57]),E=I(E,S,O,x,f,15,P[58]),x=I(x,E,S,O,g,21,P[59]),O=I(O,x,E,S,l,6,P[60]),S=I(S,O,x,E,b,10,P[61]),E=I(E,S,O,x,u,15,P[62]),x=I(x,E,S,O,m,21,P[63]),o[0]=o[0]+O|0,o[1]=o[1]+x|0,o[2]=o[2]+E|0,o[3]=o[3]+S|0},_doFinalize:function(){for(var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes,i=(t[n>>>5]|=128<<24-n%32,u.floor(r/4294967296)),i=(t[15+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(64+n>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),this._hash),o=i.words,a=0;a<4;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.MD5=n._createHelper(i),t.HmacMD5=n._createHmacHelper(i),e.MD5},"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)},{"./core":103}],109:[function(e,t,r){var n,i;n=this,i=function(e){var t,r,n,i,l;return r=(t=e).lib,n=r.WordArray,i=r.Hasher,r=t.algo,l=[],r=r.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=0;u<80;u++){l[u]=u<16?0|e[t+u]:(c=l[u-3]^l[u-8]^l[u-14]^l[u-16])<<1|c>>>31;var c=(n<<5|n>>>27)+s+l[u];c+=u<20?1518500249+(i&o|~i&a):u<40?1859775393+(i^o^a):u<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=i._createHelper(r),t.HmacSHA1=i._createHmacHelper(r),e.SHA1},"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)},{"./core":103}],110:[function(e,t,r){"use strict";e=e("./index.js");t.exports={IdleQueue:e.IdleQueue}},{"./index.js":111}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdleQueue=void 0;function n(){this._parallels=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map}function i(e,t){var r;t&&(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)&&(r=e._pHM.get(t),e._hPM.delete(r),e._pHM.delete(t)),e._iC.delete(t))}function o(t){t._tryIR||0===t._iC.size||(t._tryIR=!0,setTimeout(function(){t.isIdle()?setTimeout(function(){var e;t.isIdle()&&0!==(e=t)._iC.size&&(e._iC.values().next().value._manRes(),setTimeout(function(){return o(e)},0)),t._tryIR=!1},0):t._tryIR=!1},0))}(r.IdleQueue=n).prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,o(this)},wrapCall:function(e){var t,r=this;this.lock();try{t=e()}catch(e){throw this.unlock(),e}return t.then&&"function"==typeof t.then?t.then(function(e){return r.unlock(),e}).catch(function(e){throw r.unlock(),e}):(this.unlock(),t)},requestIdlePromise:function(e){var t,r=this,n=(e=e||{},new Promise(function(e){return t=e}));return n._manRes=function(){i(r,n),t()},e.timeout&&(e=setTimeout(function(){n._manRes()},e.timeout),n._timeoutObj=e),this._iC.add(n),o(this),n},cancelIdlePromise:function(e){i(this,e)},requestIdleCallback:function(e,t){var r=this._lHN++,t=this.requestIdlePromise(t);return this._hPM.set(r,t),this._pHM.set(t,r),t.then(function(){return e()}),r},cancelIdleCallback:function(e){e=this._hPM.get(e);this.cancelIdlePromise(e)},clear:function(){var t=this;this._iC.forEach(function(e){return i(t,e)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}}},{}],112:[function(e,t,r){var l=e("object-keys"),d=e("is-arguments"),f=e("object-is"),p=e("is-regex"),h=e("regexp.prototype.flags"),m=e("is-date-object"),y=Date.prototype.getTime;function b(e,t,r){r=r||{};if(r.strict?!f(e,t):e!==t){if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return r.strict?f(e,t):e==t;var n,i,o=e,a=t,s=r;if(typeof o!=typeof a)return!1;if(v(o)||v(a))return!1;if(o.prototype!==a.prototype)return!1;if(d(o)!==d(a))return!1;e=p(o),t=p(a);if(e!==t)return!1;if(e||t)return o.source===a.source&&h(o)===h(a);if(m(o)&&m(a))return y.call(o)===y.call(a);if(e=g(o),t=g(a),e!==t)return!1;if(e||t){if(o.length!==a.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==a[n])return!1}else{if(typeof o!=typeof a)return!1;try{var u=l(o),c=l(a)}catch(e){return!1}if(u.length!==c.length)return!1;for(u.sort(),c.sort(),n=u.length-1;0<=n;n--)if(u[n]!=c[n])return!1;for(n=u.length-1;0<=n;n--)if(i=u[n],!b(o[i],a[i],s))return!1}}return!0}function v(e){return null==e}function g(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}t.exports=b},{"is-arguments":137,"is-date-object":138,"is-regex":143,"object-is":400,"object-keys":404,"regexp.prototype.flags":425}],113:[function(e,t,r){"use strict";var n=e("has-property-descriptors")(),i=e("get-intrinsic"),u=n&&i("%Object.defineProperty%",!0);if(u)try{u({},"a",{value:1})}catch(e){u=!1}var c=i("%SyntaxError%"),l=i("%TypeError%"),d=e("gopd");t.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new l("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new l("`property` must be a string or a symbol`");if(3<arguments.length&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new l("`nonEnumerable`, if provided, must be a boolean or null");if(4<arguments.length&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new l("`nonWritable`, if provided, must be a boolean or null");if(5<arguments.length&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new l("`nonConfigurable`, if provided, must be a boolean or null");if(6<arguments.length&&"boolean"!=typeof arguments[6])throw new l("`loose`, if provided, must be a boolean");var n=3<arguments.length?arguments[3]:null,i=4<arguments.length?arguments[4]:null,o=5<arguments.length?arguments[5]:null,a=6<arguments.length&&arguments[6],s=!!d&&d(e,t);if(u)u(e,t,{configurable:null===o&&s?s.configurable:!o,enumerable:null===n&&s?s.enumerable:!n,value:r,writable:null===i&&s?s.writable:!i});else{if(!a&&(n||i||o))throw new c("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},{"get-intrinsic":129,gopd:130,"has-property-descriptors":131}],114:[function(e,t,r){"use strict";function n(e,t){var r=2<arguments.length?arguments[2]:{},n=o(t);a&&(n=s.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)!function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if(!c(n)||!n())return;l?u(e,t,r,!0):u(e,t,r)}(e,n[i],t[n[i]],r[n[i]])}var o=e("object-keys"),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,s=Array.prototype.concat,u=e("define-data-property"),c=function(e){return"function"==typeof e&&"[object Function]"===i.call(e)},l=e("has-property-descriptors")();n.supportsDescriptors=!!l,t.exports=n},{"define-data-property":113,"has-property-descriptors":131,"object-keys":404}],115:[function(e,r,n){!function(un,cn){!function(){var e,t;e=this,t=function(){"use strict";var T=function(e,t){return(T=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var v=function(){return(v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function N(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:un,O=Object.keys,g=Array.isArray;function s(t,r){return"object"==typeof r&&O(r).forEach(function(e){t[e]=r[e]}),t}"undefined"==typeof Promise||f.Promise||(f.Promise=Promise);var L=Object.getPrototypeOf,F={}.hasOwnProperty;function b(e,t){return F.call(e,t)}function B(t,r){"function"==typeof r&&(r=r(L(t))),("undefined"==typeof Reflect?O:Reflect.ownKeys)(r).forEach(function(e){u(t,e,r[e])})}var U=Object.defineProperty;function u(e,t,r,n){U(e,t,s(r&&b(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function z(t){return{from:function(e){return t.prototype=Object.create(e.prototype),u(t.prototype,"constructor",t),{extend:B.bind(null,t.prototype)}}}}var W=Object.getOwnPropertyDescriptor;function q(e,t){return W(e,t)||(e=L(e))&&q(e,t)}var K=[].slice;function V(e,t,r){return K.call(e,t,r)}function H(e,t){return t(e)}function G(e){if(!e)throw new Error("Assertion Failed")}function Z(e){f.setImmediate?cn(e):setTimeout(e,0)}function Y(e,n){return e.reduce(function(e,t,r){t=n(t,r);return t&&(e[t[0]]=t[1]),e},{})}function c(e,t){if(b(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var o=c(e,t[n]);r.push(o)}return r}var a,s=t.indexOf(".");return-1===s||void 0===(a=e[t.substr(0,s)])?void 0:c(a,t.substr(s+1))}function S(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){G("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)S(e,t[n],r[n])}else{var o,a,s=t.indexOf(".");-1!==s?(o=t.substr(0,s),""===(s=t.substr(s+1))?void 0===r?g(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r:S(a=(a=e[o])&&b(e,o)?a:e[o]={},s,r)):void 0===r?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function Q(e){var t,r={};for(t in e)b(e,t)&&(r[t]=e[t]);return r}var J=[].concat;function X(e){return J.apply([],e)}var e="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(X([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(e){return f[e]}),ee=e.map(function(e){return f[e]}),l=(Y(e,function(e){return[e,!0]}),null);function te(e){l="undefined"!=typeof WeakMap&&new WeakMap;e=function e(t){if(!t||"object"!=typeof t)return t;var r=l&&l.get(t);if(r)return r;if(g(t)){r=[],l&&l.set(t,r);for(var n=0,i=t.length;n<i;++n)r.push(e(t[n]))}else if(0<=ee.indexOf(t.constructor))r=t;else{var o,a=L(t);for(o in r=a===Object.prototype?{}:Object.create(a),l&&l.set(t,r),t)b(t,o)&&(r[o]=e(t[o]))}return r}(e);return l=null,e}var re={}.toString;function ne(e){return re.call(e).slice(8,-1)}var ie="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",oe="symbol"==typeof ie?function(e){var t;return null!=e&&(t=e[ie])&&t.apply(e)}:function(){return null},ae={};function r(e){var t,r,n,i;if(1===arguments.length){if(g(e))return e.slice();if(this===ae&&"string"==typeof e)return[e];if(i=oe(e))for(r=[];!(n=i.next()).done;)r.push(n.value);else{if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t]}}else for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var se="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},d="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ue(e,t){d=e,ce=t}var ce=function(){return!0},le=!new Error("").stack;function de(){if(le)try{throw new Error}catch(e){return e}return new Error}function fe(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(ce).map(function(e){return"\n"+e}).join("")):""}var e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(e),pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(e,t){this._e=de(),this.name=e,this.message=t}function me(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function ye(e,t,r,n){this._e=de(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=me(e,t)}function be(e,t){this._e=de(),this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=me(e,t)}z(he).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+fe(this._e,2))}},toString:function(){return this.name+": "+this.message}}),z(ye).from(he),z(be).from(he);var ve=t.reduce(function(e,t){return e[t]=t+"Error",e},{}),ge=he,_=t.reduce(function(e,r){var n=r+"Error";function t(e,t){this._e=de(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(t?"\n "+t:""),this.inner=t||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=pe[r]||n,this.inner=null)}return z(t).from(ge),e[r]=t,e},{}),_e=(_.Syntax=SyntaxError,_.Type=TypeError,_.Range=RangeError,e.reduce(function(e,t){return e[t+"Error"]=_[t],e},{}));e=t.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=_[t]),e},{});function w(){}function we(e){return e}function Oe(t,r){return null==t||t===we?r:function(e){return r(t(e))}}function Se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ee(i,o){return i===w?o:function(){var e=i.apply(this,arguments),t=(void 0!==e&&(arguments[0]=e),this.onsuccess),r=this.onerror,n=(this.onsuccess=null,this.onerror=null,o.apply(this,arguments));return t&&(this.onsuccess=this.onsuccess?Se(t,this.onsuccess):t),r&&(this.onerror=this.onerror?Se(r,this.onerror):r),void 0!==n?n:e}}function xe(r,n){return r===w?n:function(){r.apply(this,arguments);var e=this.onsuccess,t=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?Se(e,this.onsuccess):e),t&&(this.onerror=this.onerror?Se(t,this.onerror):t)}}function Pe(i,o){return i===w?o:function(e){var t=i.apply(this,arguments),e=(s(e,t),this.onsuccess),r=this.onerror,n=(this.onsuccess=null,this.onerror=null,o.apply(this,arguments));return e&&(this.onsuccess=this.onsuccess?Se(e,this.onsuccess):e),r&&(this.onerror=this.onerror?Se(r,this.onerror):r),void 0===t?void 0===n?void 0:n:s(t,n)}}function je(e,t){return e===w?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Ae(i,o){return i===w?o:function(){var e=i.apply(this,arguments);if(e&&"function"==typeof e.then){for(var t=this,r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];return e.then(function(){return o.apply(t,n)})}return o.apply(this,arguments)}}e.ModifyError=ye,e.DexieError=he,e.BulkError=be;var Me={},Ie=100,Re=100,Ce="undefined"==typeof Promise?[]:(t=Promise.resolve(),"undefined"!=typeof crypto&&crypto.subtle?[Ce=crypto.subtle.digest("SHA-512",new Uint8Array([0])),L(Ce),t]:[t,L(t),t]),ke=Ce[0],$e=Ce[1],De=Ce[2],Te=$e&&$e.then,Ne=ke&&ke.constructor,Le=!!De,Fe=!1,Be=De?function(){De.then(ot)}:f.setImmediate?cn.bind(null,ot):f.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){ot(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(ot,0)},Ue=function(e,t){Ze.push([e,t]),We&&(Be(),We=!1)},ze=!0,We=!0,qe=[],Ke=[],Ve=null,He=we,Ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Et,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Et(e[0],e[1])}catch(e){}})}},E=Ge,Ze=[],Ye=0,Qe=[];function y(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=w,this._lib=!1;var t=this._PSD=E;if(d&&(this._stackHolder=de(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Me)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],!1===this._state&&et(this,this._value)}else this._state=null,this._value=null,++t.ref,!function t(n,e){try{e(function(r){if(null===n._state){if(r===n)throw new TypeError("A promise cannot be resolved with itself.");var e=n._lib&&at();r&&"function"==typeof r.then?t(n,function(e,t){r instanceof y?r._then(e,t):r.then(e,t)}):(n._state=!0,n._value=r,tt(n)),e&&st()}},et.bind(null,n))}catch(e){et(n,e)}}(this,e)}var Je={get:function(){var s=E,t=pt;function e(r,n){var i=this,o=!s.global&&(s!==E||t!==pt),a=o&&!j(),e=new y(function(e,t){rt(i,new Xe(wt(r,s,o,a),wt(n,s,o,a),e,t,s))});return d&&it(e,this),e}return e.prototype=Me,e},set:function(e){u(this,"then",e&&e.prototype===Me?Je:{get:function(){return e},set:Je.set})}};function Xe(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function et(t,r){if(Ke.push(r),null===t._state){var n,e=t._lib&&at();if(r=He(r),t._state=!1,t._value=r,d&&null!==r&&"object"==typeof r&&!r._promise){var i=function(){var e=q(r,"stack");r._promise=t,u(r,"stack",{get:function(){return Fe?e&&(e.get?e.get.apply(r):e.value):t.stack}})};var o=void 0;var a=void 0;try{i.apply(null,a)}catch(e){o&&o(e)}}n=t,qe.some(function(e){return e._value===n._value})||qe.push(n),tt(t),e&&st()}}function tt(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)rt(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===Ye&&(++Ye,Ue(function(){0==--Ye&&ut()},[]))}function rt(e,t){if(null===e._state)e._listeners.push(t);else{var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ye,Ue(nt,[r,e,t])}}function nt(e,t,r){try{var n,i=(Ve=t)._value;t._state?n=e(i):(Ke.length&&(Ke=[]),n=e(i),-1===Ke.indexOf(i)&&function(e){var t=qe.length;for(;t;)if(qe[--t]._value===e._value)return qe.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{Ve=null,0==--Ye&&ut(),--r.psd.ref||r.psd.finalize()}}function it(e,t){var r=t?t._numPrev+1:0;r<Ie&&(e._prev=t,e._numPrev=r)}function ot(){at()&&st()}function at(){var e=ze;return We=ze=!1,e}function st(){var e,t,r;do{for(;0<Ze.length;)for(e=Ze,Ze=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<Ze.length);We=ze=!0}function ut(){for(var e=qe,t=(qe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)}),Qe.slice(0)),r=t.length;r;)t[--r]()}function ct(e){return new y(Me,!1,e)}function x(r,n){var i=E;return function(){var e=at(),t=E;try{return a(i,!0),r.apply(this,arguments)}catch(e){n&&n(e)}finally{a(t,!1),e&&st()}}}B(y.prototype,{then:Je,_then:function(e,t){rt(this,new Xe(null,null,e,t,E))},catch:function(e){var t,r;return 1===arguments.length?this.then(null,e):(t=e,r=arguments[1],"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:ct)(e)}):this.then(null,function(e){return(e&&e.name===t?r:ct)(e)}))},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),ct(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Fe=!0;var e=function e(t,r,n){if(r.length===n)return r;var i="";{var o,a,s;!1===t._state&&(null!=(o=t._value)?(a=o.name||"Error",s=o.message||o,i=fe(o,0)):(a=o,s=""),r.push(a+(s?": "+s:"")+i))}d&&((i=fe(t._stackHolder,2))&&-1===r.indexOf(i)&&r.push(i),t._prev)&&e(t._prev,r,n);return r}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Fe=!1}}},timeout:function(n,i){var o=this;return n<1/0?new y(function(e,t){var r=setTimeout(function(){return t(new _.Timeout(i))},n);o.then(e,t).finally(clearTimeout.bind(null,r))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&u(y.prototype,Symbol.toStringTag,"Dexie.Promise"),Ge.env=vt(),B(y,{all:function(){var o=r.apply(null,arguments).map(yt);return new y(function(r,n){0===o.length&&r([]);var i=o.length;o.forEach(function(e,t){return y.resolve(e).then(function(e){o[t]=e,--i||r(o)},n)})})},resolve:function(r){var e;return r instanceof y?r:r&&"function"==typeof r.then?new y(function(e,t){r.then(e,t)}):(it(e=new y(Me,!0,r),Ve),e)},reject:ct,race:function(){var e=r.apply(null,arguments).map(yt);return new y(function(t,r){e.map(function(e){return y.resolve(e).then(t,r)})})},PSD:{get:function(){return E},set:function(e){return E=e}},totalEchoes:{get:function(){return pt}},newPSD:P,usePSD:gt,scheduler:{get:function(){return Ue},set:function(e){Ue=e}},rejectionMapper:{get:function(){return He},set:function(e){He=e}},follow:function(i,r){return new y(function(e,t){return P(function(r,n){var e=E;e.unhandleds=[],e.onunhandled=n,e.finalize=Se(function(){var t,e=this;t=function(){0===e.unhandleds.length?r():n(e.unhandleds[0])},Qe.push(function e(){t(),Qe.splice(Qe.indexOf(e),1)}),++Ye,Ue(function(){0==--Ye&&ut()},[])},e.finalize),i()},r,e,t)})}}),Ne&&(Ne.allSettled&&u(y,"allSettled",function(){var e=r.apply(null,arguments).map(yt);return new y(function(r){0===e.length&&r([]);var n=e.length,i=new Array(n);e.forEach(function(e,t){return y.resolve(e).then(function(e){return i[t]={status:"fulfilled",value:e}},function(e){return i[t]={status:"rejected",reason:e}}).then(function(){return--n||r(i)})})})}),Ne.any)&&"undefined"!=typeof AggregateError&&u(y,"any",function(){var e=r.apply(null,arguments).map(yt);return new y(function(r,n){0===e.length&&n(new AggregateError([]));var i=e.length,o=new Array(i);e.forEach(function(e,t){return y.resolve(e).then(function(e){return r(e)},function(e){o[t]=e,--i||n(new AggregateError(o))})})})});var o={awaits:0,echoes:0,id:0},lt=0,dt=[],ft=0,pt=0,ht=0;function P(e,t,r,n){var i=E,o=Object.create(i),a=(o.parent=i,o.ref=0,o.global=!1,o.id=++ht,Ge.env),a=(o.env=Le?{Promise:y,PromiseProp:{value:y,configurable:!0,writable:!0},all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject,nthen:Ot(a.nthen,o),gthen:Ot(a.gthen,o)}:{},t&&s(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},gt(o,e,r,n));return 0===o.ref&&o.finalize(),a}function mt(){return o.id||(o.id=++lt),++o.awaits,o.echoes+=Re,o.id}function j(){return!!o.awaits&&(0==--o.awaits&&(o.id=0),o.echoes=o.awaits*Re,!0)}function yt(e){return o.echoes&&e&&e.constructor===Ne?(mt(),e.then(function(e){return j(),e},function(e){return j(),A(e)})):e}function bt(){var e=dt[dt.length-1];dt.pop(),a(e,!1)}function a(e,t){var r,n,i=E;(t?!o.echoes||ft++&&e===E:!ft||--ft&&e===E)||_t(t?function(e){++pt,o.echoes&&0!=--o.echoes||(o.echoes=o.id=0),dt.push(E),a(e,!0)}.bind(null,e):bt),e!==E&&(E=e,i===Ge&&(Ge.env=vt()),Le)&&(r=Ge.env.Promise,n=e.env,$e.then=n.nthen,r.prototype.then=n.gthen,i.global||e.global)&&(Object.defineProperty(f,"Promise",n.PromiseProp),r.all=n.all,r.race=n.race,r.resolve=n.resolve,r.reject=n.reject,n.allSettled&&(r.allSettled=n.allSettled),n.any)&&(r.any=n.any)}function vt(){var e=f.Promise;return Le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:$e.then,gthen:e.prototype.then}:{}}function gt(e,t,r,n,i){var o=E;try{return a(e,!0),t(r,n,i)}finally{a(o,!1)}}function _t(e){Te.call(ke,e)}function wt(t,r,n,i){return"function"!=typeof t?t:function(){var e=E;n&&mt(),a(r,!0);try{return t.apply(this,arguments)}finally{a(e,!1),i&&_t(j)}}}function Ot(r,n){return function(e,t){return r.call(this,wt(e,n),wt(t,n))}}-1===(""+Te).indexOf("[native code]")&&(mt=j=w);var St="unhandledrejection";function Et(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var n,i={promise:t,reason:e};if(f.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(St,!0,!0),s(n,i)):f.CustomEvent&&s(n=new CustomEvent(St,{detail:i}),i),n&&f.dispatchEvent&&(dispatchEvent(n),!f.PromiseRejectionEvent)&&f.onunhandledrejection)try{f.onunhandledrejection(n)}catch(e){}d&&n&&!n.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(e){}}var A=y.reject;function xt(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)}var t="4.0.0-alpha.4",Pt=String.fromCharCode(65535),M="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",jt="String expected.",At=[],Mt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),It=Mt,Rt=Mt,Ct="__dbnames",kt="readonly",$t="readwrite";function Dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Tt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nt(t){return"string"!=typeof t||/\./.test(t)?function(e){return e}:function(e){return void 0===e[t]&&t in e&&delete(e=te(e))[t],e}}function Lt(){throw _.Type()}n.prototype._trans=function(e,n,t){var r=this._tx||E.trans,i=this.name;function o(e,t,r){if(r.schema[i])return n(r.idbtrans,r);throw new _.NotFound("Table "+i+" not part of transaction")}var a=at();try{return r&&r.db===this.db?r===E.trans?r._promise(e,o,t):P(function(){return r._promise(e,o,t)},{trans:r,transless:E.transless||E}):function t(r,n,i,o){if(r.idbdb&&(r._state.openComplete||E.letThrough||r._vip)){var a=r._createTransaction(n,i,r._dbSchema);try{a.create(),r._state.PR1398_maxLoop=3}catch(e){return e.name===ve.InvalidState&&r.isOpen()&&0<--r._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),r._close(),r.open().then(function(){return t(r,n,i,o)})):A(e)}return a._promise(n,function(e,t){return P(function(){return E.trans=a,o(e,t,a)})}).then(function(e){return a._completion.then(function(){return e})})}if(r._state.openComplete)return A(new _.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._options.autoOpen)return A(new _.DatabaseClosed);r.open().catch(w)}return r._state.dbReadyPromise.then(function(){return t(r,n,i,o)})}(this.db,e,[this.name],o)}finally{a&&st()}},n.prototype.get=function(t,e){var r=this;return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",function(e){return r.core.get({trans:e,key:t}).then(function(e){return r.hook.reading.fire(e)})}).then(e)},n.prototype.where=function(o){if("string"==typeof o)return new this.db.WhereClause(this,o);if(g(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var r=O(o);if(1===r.length)return this.where(r[0]).equals(o[r[0]]);var e=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&r.every(function(e){return 0<=t.keyPath.indexOf(e)})&&t.keyPath.every(function(e){return 0<=r.indexOf(e)})})[0];if(e&&this.db._maxKey!==Pt)return this.where(e.name).equals(e.keyPath.map(function(e){return o[e]}));!e&&d&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit of a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName,n=this.db._deps.indexedDB;function s(e,t){try{return 0===n.cmp(e,t)}catch(e){return!1}}var t=r.reduce(function(e,t){var r=e[0],e=e[1],n=a[t],i=o[t];return[r||n,r||!n?Dt(e,n&&n.multi?function(e){e=c(e,t);return g(e)&&e.some(function(e){return s(i,e)})}:function(e){return s(i,c(e,t))}):e]},[null,null]),i=t[0],t=t[1];return i?this.where(i.name).equals(o[i.keyPath]).filter(t):e?this.filter(t):this.where(r).equals("")},n.prototype.filter=function(e){return this.toCollection().and(e)},n.prototype.count=function(e){return this.toCollection().count(e)},n.prototype.offset=function(e){return this.toCollection().offset(e)},n.prototype.limit=function(e){return this.toCollection().limit(e)},n.prototype.each=function(e){return this.toCollection().each(e)},n.prototype.toArray=function(e){return this.toCollection().toArray(e)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(n){for(var o=this.db,a=this.name,i=((this.schema.mappedClass=n).prototype instanceof Lt&&(n=function(e){var t=i,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}function i(){return null!==e&&e.apply(this,arguments)||this}return T(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n),Object.defineProperty(i.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),i.prototype.table=function(){return a},i}(n)),new Set),e=n.prototype;e;e=L(e))Object.getOwnPropertyNames(e).forEach(function(e){return i.add(e)});function t(e){if(!e)return e;var t,r=Object.create(n.prototype);for(t in e)if(!i.has(t))try{r[t]=e[t]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),n},n.prototype.defineClass=function(){return this.mapToClass(function(e){s(this,e)})},n.prototype.add=function(t,r){var n=this,e=this.schema.primKey,i=e.auto,o=e.keyPath,a=t;return o&&i&&(a=Nt(o)(t)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=r?[r]:null,values:[a]})}).then(function(e){return e.numFailures?y.reject(e.failures[0]):e.lastResult}).then(function(e){if(o)try{S(t,o,e)}catch(e){}return e})},n.prototype.update=function(t,r){if("object"!=typeof t||g(t))return this.where(":id").equals(t).modify(r);var e=c(t,this.schema.primKey.keyPath);if(void 0===e)return A(new _.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof r?O(r).forEach(function(e){S(t,e,r[e])}):r(t,{value:t,primKey:e})}catch(e){}return this.where(":id").equals(e).modify(r)},n.prototype.put=function(t,r){var n=this,e=this.schema.primKey,i=e.auto,o=e.keyPath,a=t;return o&&i&&(a=Nt(o)(t)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=r?[r]:null})}).then(function(e){return e.numFailures?y.reject(e.failures[0]):e.lastResult}).then(function(e){if(o)try{S(t,o,e)}catch(e){}return e})},n.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"delete",keys:[t]})}).then(function(e){return e.numFailures?y.reject(e.failures[0]):void 0})},n.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Tt})}).then(function(e){return e.numFailures?y.reject(e.failures[0]):void 0})},n.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(e){return r.core.getMany({keys:t,trans:e}).then(function(e){return e.map(function(e){return r.hook.reading.fire(e)})})})},n.prototype.bulkAdd=function(n,e,t){var o=this,a=Array.isArray(e)?e:void 0,s=(t=t||(a?void 0:e))?t.allKeys:void 0;return this._trans("readwrite",function(e){var t=o.schema.primKey,r=t.auto,t=t.keyPath;if(t&&a)throw new _.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==n.length)throw new _.InvalidArgument("Arguments objects and keys must have the same length");var i=n.length,r=t&&r?n.map(Nt(t)):n;return o.core.mutate({trans:e,type:"add",keys:a,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,n=e.lastResult,e=e.failures;if(0===t)return s?r:n;throw new be("".concat(o.name,".bulkAdd(): ").concat(t," of ").concat(i," operations failed"),e)})})},n.prototype.bulkPut=function(n,e,t){var o=this,a=Array.isArray(e)?e:void 0,s=(t=t||(a?void 0:e))?t.allKeys:void 0;return this._trans("readwrite",function(e){var t=o.schema.primKey,r=t.auto,t=t.keyPath;if(t&&a)throw new _.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==n.length)throw new _.InvalidArgument("Arguments objects and keys must have the same length");var i=n.length,r=t&&r?n.map(Nt(t)):n;return o.core.mutate({trans:e,type:"put",keys:a,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,n=e.lastResult,e=e.failures;if(0===t)return s?r:n;throw new be("".concat(o.name,".bulkPut(): ").concat(t," of ").concat(i," operations failed"),e)})})},n.prototype.bulkDelete=function(t){var n=this,i=t.length;return this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"delete",keys:t})}).then(function(e){var t=e.numFailures,r=e.lastResult,e=e.failures;if(0===t)return r;throw new be("".concat(n.name,".bulkDelete(): ").concat(t," of ").concat(i," operations failed"),e)})};var Ft=n;function n(){}function Bt(i){function t(e,t){if(t){for(var r=arguments.length,n=new Array(r-1);--r;)n[r-1]=arguments[r];return a[e].subscribe.apply(null,n),i}if("string"==typeof e)return a[e]}var a={};t.addEventType=s;for(var e=1,r=arguments.length;e<r;++e)s(arguments[e]);return t;function s(e,r,n){var i,o;if("object"!=typeof e)return r=r||je,o={subscribers:[],fire:n=n||w,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(t){o.subscribers=o.subscribers.filter(function(e){return e!==t}),o.fire=o.subscribers.reduce(r,n)}},a[e]=t[e]=o;O(i=e).forEach(function(e){var t=i[e];if(g(t))s(e,i[e][0],i[e][1]);else{if("asap"!==t)throw new _.InvalidArgument("Invalid event config");var r=s(e,we,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){Z(function(){e.apply(null,t)})})})}})}}function Ut(e,t){return z(t).from({prototype:e}),t}function zt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Wt(e,t){e.filter=Dt(e.filter,t)}function qt(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return Dt(n(),t())}:t,e.justLimit=r&&!n}function Kt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(r)return r;throw new _.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed")}function Vt(e,t,r){var n=Kt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Ht(e,o,t,r){var a,n,s=e.replayFilter?Dt(e.filter,e.replayFilter()):e.filter;return e.or?(a={},n=function(e,t,r){var n,i;s&&!s(t,r,function(e){return t.stop(e)},function(e){return t.fail(e)})||("[object ArrayBuffer]"===(i=""+(n=t.primaryKey))&&(i=""+new Uint8Array(n)),b(a,i))||(a[i]=!0,o(e,t,r))},Promise.all([e.or._iterate(n,t),Gt(Vt(e,r,t),e.algorithm,n,!e.keysOnly&&e.valueMapper)])):Gt(Vt(e,r,t),Dt(e.algorithm,s),o,!e.keysOnly&&e.valueMapper)}function Gt(e,n,i,o){var a=x(o?function(e,t,r){return i(o(e),t,r)}:i);return e.then(function(r){if(r)return r.start(function(){var t=function(){return r.continue()};n&&!n(r,function(e){return t=e},function(e){r.stop(e),t=w},function(e){r.fail(e),t=w})||a(r.value,r,function(e){return t=e}),t()})})}function I(e,t){try{var r=Zt(e),n=Zt(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":for(var i=Yt(e),o=Yt(t),a=i.length,s=o.length,u=a<s?a:s,c=0;c<u;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return a===s?0:a<s?-1:1;case"Array":for(var l=e,d=t,f=l.length,p=d.length,h=f<p?f:p,m=0;m<h;++m){var y=I(l[m],d[m]);if(0!==y)return y}return f===p?0:f<p?-1:1}}catch(e){}return NaN}function Zt(e){var t=typeof e;return"object"==t&&(ArrayBuffer.isView(e)||"ArrayBuffer"===(t=ne(e)))?"binary":t}function Yt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}i.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,A.bind(null,r.error)):r.table._trans("readonly",e).then(t)},i.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,A.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},i.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Dt(t.algorithm,e)},i.prototype._iterate=function(e,t){return Ht(this._ctx,e,t,this._ctx.table.core)},i.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&s(r,e),t._ctx=r,t},i.prototype.raw=function(){return this._ctx.valueMapper=null,this},i.prototype.each=function(t){var r=this._ctx;return this._read(function(e){return Ht(r,t,e,r.table.core)})},i.prototype.count=function(e){var i=this;return this._read(function(e){var t,r=i._ctx,n=r.table.core;return zt(r,!0)?n.count({trans:e,query:{index:Kt(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)}):(t=0,Ht(r,function(){return++t,!1},e,n).then(function(){return t}))}).then(e)},i.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[n]}var a="next"===this._ctx.dir?1:-1;function s(e,t){e=o(e,i),t=o(t,i);return e<t?-a:t<e?a:0}return this.toArray(function(e){return e.sort(s)}).then(t)},i.prototype.toArray=function(e){var o=this;return this._read(function(e){var t,r,n,i=o._ctx;return"next"===i.dir&&zt(i,!0)&&0<i.limit?(t=i.valueMapper,r=Kt(i,i.table.core.schema),i.table.core.query({trans:e,limit:i.limit,values:!0,query:{index:r,range:i.range}}).then(function(e){e=e.result;return t?e.map(t):e})):(n=[],Ht(i,function(e){return n.push(e)},e,i.table.core).then(function(){return n}))},e)},i.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,zt(e)?qt(e,function(){var r=t;return function(e,t){return 0===r||(1===r?--r:t(function(){e.advance(r),r=0}),!1)}}):qt(e,function(){var e=t;return function(){return--e<0}})),this},i.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),qt(this._ctx,function(){var n=e;return function(e,t,r){return--n<=0&&t(r),0<=n}},!0),this},i.prototype.until=function(n,i){return Wt(this._ctx,function(e,t,r){return!n(e.value)||(t(r),i)}),this},i.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},i.prototype.last=function(e){return this.reverse().first(e)},i.prototype.filter=function(t){var e;return Wt(this._ctx,function(e){return t(e.value)}),(e=this._ctx).isMatch=Dt(e.isMatch,t),this},i.prototype.and=function(e){return this.filter(e)},i.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},i.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},i.prototype.desc=function(){return this.reverse()},i.prototype.eachKey=function(r){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){r(t.key,t)})},i.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},i.prototype.eachPrimaryKey=function(r){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){r(t.primaryKey,t)})},i.prototype.keys=function(e){var t=this._ctx,r=(t.keysOnly=!t.isMatch,[]);return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},i.prototype.primaryKeys=function(e){var r=this._ctx;if("next"===r.dir&&zt(r,!0)&&0<r.limit)return this._read(function(e){var t=Kt(r,r.table.core.schema);return r.table.core.query({trans:e,values:!1,limit:r.limit,query:{index:t,range:r.range}})}).then(function(e){return e.result}).then(e);r.keysOnly=!r.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},i.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},i.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},i.prototype.lastKey=function(e){return this.reverse().firstKey(e)},i.prototype.distinct=function(){var r,e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];return e&&e.multi&&(r={},Wt(this._ctx,function(e){var e=e.primaryKey.toString(),t=b(r,e);return r[e]=!0,!t})),this},i.prototype.modify=function(_){var r=this,w=this._ctx;return this._write(function(p){function h(e,t){var r=t.failures,t=t.numFailures;u+=e-t;for(var n=0,i=O(r);n<i.length;n++){var o=i[n];s.push(r[o])}}m="function"==typeof _?_:(o=O(_),a=o.length,function(e){for(var t=!1,r=0;r<a;++r){var n=o[r],i=_[n];c(e,n)!==i&&(S(e,n,i),t=!0)}return t});var o,a,m,y=w.table.core,e=y.schema.primaryKey,b=e.outbound,v=e.extractKey,g=r.db._options.modifyChunkSize||200,s=[],u=0,t=[];return r.clone().primaryKeys().then(function(d){function f(c){var l=Math.min(g,d.length-c);return y.getMany({trans:p,keys:d.slice(c,c+l),cache:"immutable"}).then(function(e){for(var r=[],t=[],n=b?[]:null,i=[],o=0;o<l;++o){var a=e[o],s={value:te(a),primKey:d[c+o]};!1!==m.call(s,s.value,s)&&(null==s.value?i.push(d[c+o]):b||0===I(v(a),v(s.value))?(t.push(s.value),b&&n.push(d[c+o])):(i.push(d[c+o]),r.push(s.value)))}var u=zt(w)&&w.limit===1/0&&("function"!=typeof _||_===Jt)&&{index:w.index,range:w.range};return Promise.resolve(0<r.length&&y.mutate({trans:p,type:"add",values:r}).then(function(e){for(var t in e.failures)i.splice(parseInt(t),1);h(r.length,e)})).then(function(){return(0<t.length||u&&"object"==typeof _)&&y.mutate({trans:p,type:"put",keys:n,values:t,criteria:u,changeSpec:"function"!=typeof _&&_}).then(function(e){return h(t.length,e)})}).then(function(){return(0<i.length||u&&_===Jt)&&y.mutate({trans:p,type:"delete",keys:i,criteria:u}).then(function(e){return h(i.length,e)})}).then(function(){return d.length>c+l&&f(c+g)})})}return f(0).then(function(){if(0<s.length)throw new ye("Error modifying one or more objects",s,u,t);return d.length})})})},i.prototype.delete=function(){var i=this._ctx,r=i.range;return zt(i)&&(i.isPrimKey&&!Rt||3===r.type)?this._write(function(e){var t=i.table.core.schema.primaryKey,n=r;return i.table.core.count({trans:e,query:{index:t,range:n}}).then(function(r){return i.table.core.mutate({trans:e,type:"deleteRange",range:n}).then(function(e){var t=e.failures,e=(e.lastResult,e.results,e.numFailures);if(e)throw new ye("Could not delete some values",Object.keys(t).map(function(e){return t[e]}),r-e);return r-e})})}):this.modify(Jt)};var Qt=i;function i(){}var Jt=function(e,t){return t.value=null};function Xt(e,t){return e<t?-1:e===t?0:1}function er(e,t){return t<e?-1:e===t?0:1}function R(e,t,r){e=e instanceof ir?new e.Collection(e):e;return e._ctx.error=new(r||TypeError)(t),e}function tr(e){return new e.Collection(e,function(){return nr("")}).limit(0)}function rr(e,u,r,n){var i,c,l,d,f,p,h,m=r.length;if(!r.every(function(e){return"string"==typeof e}))return R(e,jt);function t(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},c="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},l="next"===e?Xt:er;var t=r.map(function(e){return{lower:c(e),upper:i(e)}}).sort(function(e,t){return l(e.lower,t.lower)});d=t.map(function(e){return e.upper}),f=t.map(function(e){return e.lower}),h="next"===(p=e)?"":n}t("next");var e=new e.Collection(e,function(){return C(d[0],f[m-1]+n)}),y=(e._ondirectionchange=function(e){t(e)},0);return e._addAlgorithm(function(e,t,r){var n=e.key;if("string"==typeof n){var i=c(n);if(u(i,f,y))return!0;for(var o=null,a=y;a<m;++a){var s=function(e,t,r,n,i,o){for(var a=Math.min(e.length,n.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):0<=s?e.substr(0,s)+t[s]+r.substr(s+1):null;i(e[u],c)<0&&(s=u)}return a<n.length&&"next"===o?e+r.substr(e.length):a<e.length&&"prev"===o?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}(n,i,d[a],f[a],l,p);null===s&&null===o?y=a+1:(null===o||0<l(o,s))&&(o=s)}t(null!==o?function(){e.continue(o+h)}:r)}return!1}),e}function C(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function nr(e){return{type:1,lower:e,upper:e}}Object.defineProperty(p.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),p.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?tr(this):new this.Collection(this,function(){return C(e,t,!r,!n)})}catch(e){return R(this,M)}},p.prototype.equals=function(e){return null==e?R(this,M):new this.Collection(this,function(){return nr(e)})},p.prototype.above=function(e){return null==e?R(this,M):new this.Collection(this,function(){return C(e,void 0,!0)})},p.prototype.aboveOrEqual=function(e){return null==e?R(this,M):new this.Collection(this,function(){return C(e,void 0,!1)})},p.prototype.below=function(e){return null==e?R(this,M):new this.Collection(this,function(){return C(void 0,e,!1,!0)})},p.prototype.belowOrEqual=function(e){return null==e?R(this,M):new this.Collection(this,function(){return C(void 0,e)})},p.prototype.startsWith=function(e){return"string"!=typeof e?R(this,jt):this.between(e,e+Pt,!0,!0)},p.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):rr(this,function(e,t){return 0===e.indexOf(t[0])},[e],Pt)},p.prototype.equalsIgnoreCase=function(e){return rr(this,function(e,t){return e===t[0]},[e],"")},p.prototype.anyOfIgnoreCase=function(){var e=r.apply(ae,arguments);return 0===e.length?tr(this):rr(this,function(e,t){return-1!==t.indexOf(e)},e,"")},p.prototype.startsWithAnyOfIgnoreCase=function(){var e=r.apply(ae,arguments);return 0===e.length?tr(this):rr(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},e,Pt)},p.prototype.anyOf=function(){var e,i,t=this,o=r.apply(ae,arguments),a=this._cmp;try{o.sort(a)}catch(e){return R(this,M)}return 0===o.length?tr(this):((e=new this.Collection(this,function(){return C(o[0],o[o.length-1])}))._ondirectionchange=function(e){a="next"===e?t._ascending:t._descending,o.sort(a)},i=0,e._addAlgorithm(function(e,t,r){for(var n=e.key;0<a(n,o[i]);)if(++i===o.length)return t(r),!1;return 0===a(n,o[i])||(t(function(){e.continue(o[i])}),!1)}),e)},p.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},p.prototype.noneOf=function(){var e=r.apply(ae,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return R(this,M)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},p.prototype.inAnyRange=function(e,t){var o=this,a=this._cmp,s=this._ascending,r=this._descending,u=this._min,c=this._max;if(0===e.length)return tr(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&s(e[0],e[1])<=0}))return R(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_.InvalidArgument);var n=!t||!1!==t.includeLowers,i=t&&!0===t.includeUppers;var l,d=s;function f(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,n=e.length;r<n;++r){var i=e[r];if(a(t[0],i[1])<0&&0<a(t[1],i[0])){i[0]=u(i[0],t[0]),i[1]=c(i[1],t[1]);break}}return r===n&&e.push(t),e},[])).sort(f)}catch(e){return R(this,M)}var p=0,h=i?function(e){return 0<s(e,l[p][1])}:function(e){return 0<=s(e,l[p][1])},m=n?function(e){return 0<r(e,l[p][0])}:function(e){return 0<=r(e,l[p][0])};var y=h,t=new this.Collection(this,function(){return C(l[0][0],l[l.length-1][1],!n,!i)});return t._ondirectionchange=function(e){d="next"===e?(y=h,s):(y=m,r),l.sort(f)},t._addAlgorithm(function(e,t,r){for(var n,i=e.key;y(i);)if(++p===l.length)return t(r),!1;return!h(n=i)&&!m(n)||(0===o._cmp(i,l[p][1])||0===o._cmp(i,l[p][0])||t(function(){d===s?e.continue(l[p][0]):e.continue(l[p][1])}),!1)}),t},p.prototype.startsWithAnyOf=function(){var e=r.apply(ae,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tr(this):this.inAnyRange(e.map(function(e){return[e,e+Pt]})):R(this,"startsWithAnyOf() only works with strings")};var ir=p;function p(){}function k(t){return x(function(e){return or(e),t(e.target.error),!1})}function or(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ar="storagemutated",sr="x-storagemutated-1",ur=Bt(null,ar),cr=(h.prototype._lock=function(){return G(!E.global),++this._reculock,1!==this._reculock||E.global||(E.lockOwnerFor=this),this},h.prototype._unlock=function(){if(G(!E.global),0==--this._reculock)for(E.global||(E.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{gt(e[1],e[0])}catch(e){}}return this},h.prototype._locked=function(){return this._reculock&&E.lockOwnerFor!==this},h.prototype.create=function(t){var r=this;if(this.mode){var e=this.db.idbdb,n=this.db._state.dbOpenError;if(G(!this.idbtrans),!t&&!e)switch(n&&n.name){case"DatabaseClosedError":throw new _.DatabaseClosed(n);case"MissingAPIError":throw new _.MissingAPI(n.message,n);default:throw new _.OpenFailed(n)}if(!this.active)throw new _.TransactionInactive;G(null===this._completion._state),(t=this.idbtrans=t||(this.db.core||e).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=x(function(e){or(e),r._reject(t.error)}),t.onabort=x(function(e){or(e),r.active&&r._reject(new _.Abort(t.error)),r.active=!1,r.on("abort").fire(e)}),t.oncomplete=x(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&ur.storagemutated.fire(t.mutatedParts)})}return this},h.prototype._promise=function(r,n,i){var e,o=this;return"readwrite"===r&&"readwrite"!==this.mode?A(new _.ReadOnly("Transaction is readonly")):this.active?this._locked()?new y(function(e,t){o._blockedFuncs.push([function(){o._promise(r,n,i).then(e,t)},E])}):i?P(function(){var e=new y(function(e,t){o._lock();var r=n(e,t,o);r&&r.then&&r.then(e,t)});return e.finally(function(){return o._unlock()}),e._lib=!0,e}):((e=new y(function(e,t){var r=n(e,t,o);r&&r.then&&r.then(e,t)}))._lib=!0,e):A(new _.TransactionInactive)},h.prototype._root=function(){return this.parent?this.parent._root():this},h.prototype.waitFor=function(e){var t,n=this._root(),i=y.resolve(e),o=(n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return i}):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}()),n._waitingFor);return new y(function(t,r){i.then(function(e){return n._waitingQueue.push(x(t.bind(null,e)))},function(e){return n._waitingQueue.push(x(r.bind(null,e)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},h.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _.Abort))},h.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(b(t,e))return t[e];var r=this.schema[e];if(r)return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r;throw new _.NotFound("Table "+e+" not part of transaction")},h);function h(){}function lr(e,t,r,n,i,o,a){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:o,src:(r&&!a?"&":"")+(n?"*":"")+(i?"++":"")+dr(t)}}function dr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fr(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:Y(r,function(e){return[e.name,e]})}}var pr=function(e){try{return e.only([[]]),pr=function(){return[[]]},[[]]}catch(e){return pr=function(){return Pt},Pt}};function hr(t){return null==t?function(){}:"string"==typeof t?1===(r=t).split(".").length?function(e){return e[r]}:function(e){return c(e,r)}:function(e){return c(e,t)};var r}function mr(e){return[].slice.call(e)}var yr=0;function br(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function vr(e,i,t){function w(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,n=e.lowerOpen,e=e.upperOpen;return void 0===t?void 0===r?null:i.upperBound(r,!!e):void 0===r?i.lowerBound(t,!!n):i.bound(t,r,!!n,!!e)}function r(e){var f,_=e.name;return{name:_,schema:e,mutate:function(e){var m=e.trans,y=e.type,b=e.keys,v=e.values,g=e.range;return new Promise(function(t,e){t=x(t);var r=m.objectStore(_),n=null==r.keyPath,i="put"===y||"add"===y;if(!i&&"delete"!==y&&"deleteRange"!==y)throw new Error("Invalid operation type: "+y);var o,a=(b||v||{length:1}).length;if(b&&v&&b.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(0===a)return t({numFailures:0,failures:{},results:[],lastResult:void 0});function s(e){++l,or(e)}var u=[],c=[],l=0;if("deleteRange"===y){if(4===g.type)return t({numFailures:l,failures:c,results:[],lastResult:void 0});3===g.type?u.push(o=r.clear()):u.push(o=r.delete(w(g)))}else{var n=i?n?[v,b]:[v,null]:[b,null],d=n[0],f=n[1];if(i)for(var p=0;p<a;++p)u.push(o=f&&void 0!==f[p]?r[y](d[p],f[p]):r[y](d[p])),o.onerror=s;else for(p=0;p<a;++p)u.push(o=r[y](d[p])),o.onerror=s}function h(e){e=e.target.result,u.forEach(function(e,t){return null!=e.error&&(c[t]=e.error)}),t({numFailures:l,failures:c,results:"delete"===y?b:u.map(function(e){return e.result}),lastResult:e})}o.onerror=function(e){s(e),h(e)},o.onsuccess=h})},getMany:function(e){var d=e.trans,f=e.keys;return new Promise(function(t,e){t=x(t);for(var r,n=d.objectStore(_),i=f.length,o=new Array(i),a=0,s=0,u=function(e){e=e.target;o[e._pos]=e.result,++s===a&&t(o)},c=k(e),l=0;l<i;++l)null!=f[l]&&((r=n.get(f[l]))._pos=l,r.onsuccess=u,r.onerror=c,++a);0===a&&t(o)})},get:function(e){var n=e.trans,i=e.key;return new Promise(function(t,e){t=x(t);var r=n.objectStore(_).get(i);r.onsuccess=function(e){return t(e.target.result)},r.onerror=k(e)})},query:(f=a,function(d){return new Promise(function(r,e){r=x(r);var n,i,o,t=d.trans,a=d.values,s=d.limit,u=d.query,c=s===1/0?void 0:s,l=u.index,u=u.range,t=t.objectStore(_),t=l.isPrimaryKey?t:t.index(l.name),l=w(u);if(0===s)return r({result:[]});f?((u=a?t.getAll(l,c):t.getAllKeys(l,c)).onsuccess=function(e){return r({result:e.target.result})},u.onerror=k(e)):(n=0,i=!a&&"openKeyCursor"in t?t.openKeyCursor(l):t.openCursor(l),o=[],i.onsuccess=function(e){var t=i.result;return!t||(o.push(a?t.value:t.primaryKey),++n===s)?r({result:o}):void t.continue()},i.onerror=k(e))})}),openCursor:function(e){var c=e.trans,o=e.values,a=e.query,s=e.reverse,l=e.unique;return new Promise(function(t,r){t=x(t);var e=a.index,n=a.range,i=c.objectStore(_),i=e.isPrimaryKey?i:i.index(e.name),e=s?l?"prevunique":"prev":l?"nextunique":"next",u=!o&&"openKeyCursor"in i?i.openKeyCursor(w(n),e):i.openCursor(w(n),e);u.onerror=k(r),u.onsuccess=x(function(e){var n,i,o,a,s=u.result;s?(s.___id=++yr,s.done=!1,n=s.continue.bind(s),i=(i=s.continuePrimaryKey)&&i.bind(s),o=s.advance.bind(s),a=function(){throw new Error("Cursor not stopped")},s.trans=c,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=x(r),s.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},s.start=function(e){function t(){if(u.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var r=new Promise(function(t,e){t=x(t),u.onerror=k(e),s.fail=e,s.stop=function(e){s.stop=s.continue=s.continuePrimaryKey=s.advance=a,t(e)}});return u.onsuccess=x(function(e){u.onsuccess=t,t()}),s.continue=n,s.continuePrimaryKey=i,s.advance=o,t(),r},t(s)):t(null)},r)})},count:function(e){var t=e.query,i=e.trans,o=t.index,a=t.range;return new Promise(function(t,e){var r=i.objectStore(_),r=o.isPrimaryKey?r:r.index(o.name),n=w(a),n=n?r.count(n):r.count();n.onsuccess=x(function(e){return t(e.target.result)}),n.onerror=k(e)})}}}n=t,o=mr((t=e).objectStoreNames);var n,t={schema:{name:t.name,tables:o.map(function(e){return n.objectStore(e)}).map(function(t){var e=t.keyPath,r=t.autoIncrement,n=g(e),i={},n={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==e,compound:n,keyPath:e,autoIncrement:r,unique:!0,extractKey:hr(e)},indexes:mr(t.indexNames).map(function(e){return t.index(e)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry,e=e.keyPath,t={name:t,compound:g(e),keyPath:e,unique:r,multiEntry:n,extractKey:hr(e)};return i[br(e)]=t}),getIndexByKeyPath:function(e){return i[br(e)]}};return i[":id"]=n.primaryKey,null!=e&&(i[br(e)]=n.primaryKey),n})},hasGetAll:0<o.length&&"getAll"in n.objectStore(o[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},o=t.schema,a=t.hasGetAll,t=o.tables.map(r),s={};return t.forEach(function(e){return s[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(s[e])return s[e];throw new Error("Table '".concat(e,"' not found"))},MIN_KEY:-1/0,MAX_KEY:pr(i),schema:o}}function gr(e,t,r,n){var i=r.IDBKeyRange;return r.indexedDB,r=vr(t,i,n),{dbcore:e.dbcore.reduce(function(e,t){t=t.create;return v(v({},e),t(e))},r)}}function _r(e,t){var r=e._novip,e=t.db,e=gr(r._middlewares,e,r._deps,t);r.core=e.dbcore,r.tables.forEach(function(e){var t=e.name;r.core.schema.tables.some(function(e){return e.name===t})&&(e.core=r.core.table(t),r[t]instanceof r.Table)&&(r[t].core=e.core)})}function wr(e,t,r,i){var o=e._novip;r.forEach(function(r){var n=i[r];t.forEach(function(e){var t=q(e,r);(!t||"value"in t&&void 0===t.value)&&(e===o.Transaction.prototype||e instanceof o.Transaction?u(e,r,{get:function(){return this.table(r)},set:function(e){U(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):e[r]=new o.Table(r,n))})})}function Or(e,t){var r=e._novip;t.forEach(function(e){for(var t in e)e[t]instanceof r.Table&&delete e[t]})}function Sr(e,t){return e._cfg.version-t._cfg.version}function Er(r,n,i,e){var o=r._dbSchema,a=r._createTransaction("readwrite",r._storeNames,o),s=(a.create(i),a._completion.catch(e),a._reject.bind(a)),h=E.transless||E;P(function(){var e,u,c,l,d,t,f,p;E.trans=a,E.transless=h,(0===n?(O(o).forEach(function(e){Pr(i,e,o[e].primKey,o[e].indexes)}),_r(r,i),y.follow(function(){return r.on.populate.fire(a)})):(u=n,c=a,l=i,d=(e=r)._novip,t=[],e=d._versions,f=d._dbSchema=Ar(0,d.idbdb,l),p=!1,e.filter(function(e){return e._cfg.version>=u}).forEach(function(s){t.push(function(){var t,r,n,i=f,e=s._cfg.dbschema,o=(Mr(d,i,l),Mr(d,e,l),f=d._dbSchema=e,xr(i,e)),a=(o.add.forEach(function(e){Pr(l,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new _.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return jr(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),jr(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})}),s._cfg.contentUpgrade);if(a&&s._cfg.version>u)return _r(d,l),c._memoizedTables={},p=!0,t=Q(e),o.del.forEach(function(e){t[e]=i[e]}),Or(d,[d.Transaction.prototype]),wr(d,[d.Transaction.prototype],O(t),t),c.schema=t,(r=se(a))&&mt(),e=y.follow(function(){var e;(n=a(c))&&r&&(e=j.bind(null,null),n.then(e,e))}),n&&"function"==typeof n.then?y.resolve(n):e.then(function(){return n})}),t.push(function(e){var t,r,n;p&&It||(t=s._cfg.dbschema,r=t,n=e,[].slice.call(n.db.objectStoreNames).forEach(function(e){return null==r[e]&&n.db.deleteObjectStore(e)})),Or(d,[d.Transaction.prototype]),wr(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),c.schema=d._dbSchema})}),function e(){return t.length?y.resolve(t.shift()(c.idbtrans)).then(e):y.resolve()}().then(function(){var t,r;r=l,O(t=f).forEach(function(e){r.db.objectStoreNames.contains(e)||Pr(r,e,t[e].primKey,t[e].indexes)})}))).catch(s)})}function xr(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Mt)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,c=void 0;for(c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],d=u[c];l?l.src!==d.src&&a.change.push(d):a.add.push(d)}(0<a.del.length||0<a.add.length||0<a.change.length)&&n.change.push(a)}}else n.add.push([r,o])}return n}function Pr(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});n.forEach(function(e){return jr(i,e)})}function jr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ar(e,t,s){var u={};return V(t.objectStoreNames,0).forEach(function(e){for(var t=s.objectStore(e),r=lr(dr(a=t.keyPath),a||"",!1,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),n=[],i=0;i<t.indexNames.length;++i){var o=t.index(t.indexNames[i]),a=o.keyPath,o=lr(o.name,a,!!o.unique,!!o.multiEntry,!1,a&&"string"!=typeof a,!1);n.push(o)}u[e]=fr(e,r,n)}),u}function Mr(e,t,r){for(var n=e._novip,i=r.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=r.objectStore(a);n._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c,l=s.indexNames[u],d=s.index(l).keyPath,d="string"==typeof d?d:"["+V(d).join("+")+"]";t[a]&&(c=t[a].idxByName[d])&&(c.name=l,delete t[a].idxByName[d],t[a].idxByName[l]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}Rr.prototype._parseStoresSpec=function(n,i){O(n).forEach(function(e){if(null!==n[e]){var t=n[e].split(",").map(function(e,t){var r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return lr(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),g(n),0===t)}),r=t.shift();if(r.multi)throw new _.Schema("Primary key cannot be multi-valued");t.forEach(function(e){if(e.auto)throw new _.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new _.Schema("Index must have a name and cannot be an empty string")}),i[e]=fr(e,r,t)}})},Rr.prototype.stores=function(e){var t=this.db,e=(this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,t._versions),r={},n={};return e.forEach(function(e){s(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,Or(t,[t._allTables,t,t.Transaction.prototype]),wr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],O(n),n),t._storeNames=O(n),this},Rr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Ae(this._cfg.contentUpgrade||w,e),this};var Ir=Rr;function Rr(){}function Cr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Qr(Ct,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function kr(e){return e&&"function"==typeof e.databases}function $r(e){return P(function(){return E.letThrough=!0,e()})}function Dr(f){var p=f._state,n=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?A(p.dbOpenError):f});d&&(p.openCanceller._stackHolder=de()),p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var t=p.openCanceller;function e(){if(p.openCanceller!==t)throw new _.DatabaseClosed("db.open() was cancelled")}var r,i=p.dbReadyResolve,h=null,m=!1;return y.race([t,("undefined"==typeof navigator?y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}r=setInterval(t,100),t()}).finally(function(){return clearInterval(r)}):Promise.resolve()).then(function(){return new y(function(c,r){if(e(),!n)throw new _.MissingAPI;var l=f.name,d=p.autoSchema?n.open(l):n.open(l,Math.round(10*f.verno));if(!d)throw new _.MissingAPI;d.onerror=k(r),d.onblocked=x(f._fireOnBlocked),d.onupgradeneeded=x(function(e){var t;h=d.transaction,p.autoSchema&&!f._options.allowEmptyDB?(d.onerror=or,h.abort(),d.result.close(),(t=n.deleteDatabase(l)).onsuccess=t.onerror=x(function(){r(new _.NoSuchDatabase("Database ".concat(l," doesnt exist")))})):(h.onerror=k(r),t=e.oldVersion>Math.pow(2,62)?0:e.oldVersion,m=t<1,f._novip.idbdb=d.result,Er(f,t/10,h,r))},r),d.onsuccess=x(function(){h=null;var e,t,r,n,i,o,a=f._novip.idbdb=d.result,s=V(a.objectStoreNames);if(0<s.length)try{var u=a.transaction(1===(i=s).length?i[0]:i,"readonly");p.autoSchema?(o=a,n=u,(r=(r=f)._novip).verno=o.version/10,n=r._dbSchema=Ar(0,o,n),r._storeNames=V(o.objectStoreNames,0),wr(r,[r._allTables],O(n),n)):(Mr(f,f._dbSchema,u),t=u,((t=xr(Ar(0,(e=f).idbdb,t),e._dbSchema)).add.length||t.change.some(function(e){return e.add.length||e.change.length}))&&console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),_r(f,u)}catch(e){}At.push(f),a.onversionchange=x(function(e){p.vcFired=!0,f.on("versionchange").fire(e)}),a.onclose=x(function(e){f.on("close").fire(e)}),m&&(s=f._deps,i=l,o=s.indexedDB,s=s.IDBKeyRange,kr(o)||i===Ct||Cr(o,s).put({name:i}).catch(w)),c()},r)})})]).then(function(){return e(),p.onReadyBeingFired=[],y.resolve($r(function(){return f.on.ready.fire(f.vip)})).then(function e(){var t;if(0<p.onReadyBeingFired.length)return t=p.onReadyBeingFired.reduce(Ae,w),p.onReadyBeingFired=[],y.resolve($r(function(){return t(f.vip)})).then(e)})}).finally(function(){p.onReadyBeingFired=null,p.isBeingOpened=!1}).then(function(){return f}).catch(function(e){p.dbOpenError=e;try{h&&h.abort()}catch(e){}return t===p.openCanceller&&f._close(),A(e)}).finally(function(){p.openComplete=!0,i()})}function Tr(t){function e(e){return t.next(e)}var n=r(e),i=r(function(e){return t.throw(e)});function r(r){return function(e){var e=r(e),t=e.value;return e.done?t:t&&"function"==typeof t.then?t.then(n,i):g(t)?Promise.all(t).then(n,i):n(t)}}return r(e)()}function Nr(e,t,r){for(var n=g(e)?e.slice():[e],i=0;i<r;++i)n.push(t);return n}var Lr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return v(v({},d),{table:function(e){var a=d.table(e),e=a.schema,s={},u=[];function c(e,t,r){var n=br(e),n=s[n]=s[n]||[],i=null==e?0:"string"==typeof e?1:e.length,o=0<t,o=v(v({},r),{isVirtual:o,keyTail:t,keyLength:i,extractKey:hr(e),unique:!o&&r.unique});return n.push(o),o.isPrimaryKey||u.push(o),1<i&&c(2===i?e[0]:e.slice(0,i-1),t+1,r),n.sort(function(e,t){return e.keyTail-t.keyTail}),o}var t=c(e.primaryKey.keyPath,0,e.primaryKey);s[":id"]=[t];for(var r=0,n=e.indexes;r<n.length;r++){var i=n[r];c(i.keyPath,0,i)}function l(e){var t,r=e.query.index;return r.isVirtual?v(v({},e),{query:{index:r,range:(t=e.query.range,r=r.keyTail,{type:1===t.type?2:t.type,lower:Nr(t.lower,t.lowerOpen?d.MAX_KEY:d.MIN_KEY,r),lowerOpen:!0,upper:Nr(t.upper,t.upperOpen?d.MIN_KEY:d.MAX_KEY,r),upperOpen:!0})}}):e}return v(v({},a),{schema:v(v({},e),{primaryKey:t,indexes:u,getIndexByKeyPath:function(e){return(e=s[br(e)])&&e[0]}}),count:function(e){return a.count(l(e))},query:function(e){return a.query(l(e))},openCursor:function(t){var e=t.query.index,n=e.keyTail,r=e.isVirtual,i=e.keyLength;return r?a.openCursor(l(t)).then(function(e){return e&&o(e)}):a.openCursor(t);function o(r){return Object.create(r,{continue:{value:function(e){null!=e?r.continue(Nr(e,t.reverse?d.MAX_KEY:d.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,i).concat(t.reverse?d.MIN_KEY:d.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value:function(e,t){r.continuePrimaryKey(Nr(e,d.MAX_KEY,n),t)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:function(){return r.value}}})}}})}})}};function Fr(i,o,a,s){return a=a||{},s=s||"",O(i).forEach(function(e){var t,r,n;b(o,e)?(t=i[e],r=o[e],"object"==typeof t&&"object"==typeof r&&t&&r?(n=ne(t))!==ne(r)?a[s+e]=o[e]:"Object"===n?Fr(t,r,a,s+e+"."):t!==r&&(a[s+e]=o[e]):t!==r&&(a[s+e]=o[e])):a[s+e]=void 0}),O(o).forEach(function(e){b(i,e)||(a[s+e]=o[e])}),a}var Br={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return v(v({},e),{table:function(n){var m=e.table(n),y=m.schema.primaryKey;return v(v({},m),{mutate:function(e){var t=E.trans,r=t.table(n).hook,f=r.deleting,p=r.creating,h=r.updating;switch(e.type){case"add":if(p.fire===w)break;return t._promise("readwrite",function(){return a(e)},!0);case"put":if(p.fire===w&&h.fire===w)break;return t._promise("readwrite",function(){return a(e)},!0);case"delete":if(f.fire===w)break;return t._promise("readwrite",function(){return a(e)},!0);case"deleteRange":if(f.fire===w)break;return t._promise("readwrite",function(){return function r(n,i,o){return m.query({trans:n,values:!1,query:{index:y,range:i},limit:o}).then(function(e){var t=e.result;return a({type:"delete",keys:t,trans:n}).then(function(e){return 0<e.numFailures?Promise.reject(e.failures[0]):t.length<o?{failures:[],numFailures:0,lastResult:void 0}:r(n,v(v({},i),{lower:t[t.length-1],lowerOpen:!0}),o)})})}(e.trans,e.range,1e4)},!0)}return m.mutate(e);function a(c){var e,t,r,l=E.trans,d=c.keys||(r=y,"delete"===(e=c).type?e.keys:e.keys||e.values.map(r.extractKey));if(d)return"delete"!==(c="add"===c.type||"put"===c.type?v(v({},c),{keys:d}):v({},c)).type&&(c.values=N([],c.values,!0)),c.keys&&(c.keys=N([],c.keys,!0)),e=m,r=d,("add"===(t=c).type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})).then(function(s){var u=d.map(function(e,t){var r,n,i,o=s[t],a={onerror:null,onsuccess:null};return"delete"===c.type?f.fire.call(a,e,o,l):"add"===c.type||void 0===o?(r=p.fire.call(a,e,c.values[t],l),null==e&&null!=r&&(c.keys[t]=e=r,y.outbound||S(c.values[t],y.keyPath,e))):(r=Fr(o,c.values[t]),(n=h.fire.call(a,r,e,o,l))&&(i=c.values[t],Object.keys(n).forEach(function(e){b(i,e)?i[e]=n[e]:S(i,e,n[e])}))),a});return m.mutate(c).then(function(e){for(var t=e.failures,r=e.results,n=e.numFailures,e=e.lastResult,i=0;i<d.length;++i){var o=(r||d)[i],a=u[i];null==o?a.onerror&&a.onerror(t[i]):a.onsuccess&&a.onsuccess("put"===c.type&&s[i]?c.values[i]:o)}return{failures:t,results:r,numFailures:n,lastResult:e}}).catch(function(t){return u.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})});throw new Error("Keys missing")}}})}})}};function Ur(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===I(t.keys[i],e[o])&&(n.push(r?te(t.values[i]):t.values[i]),++o);return n.length===e.length?n:null}catch(e){return null}}var zr={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return v(v({},r),{getMany:function(t){var e;return t.cache?(e=Ur(t.keys,t.trans._cache,"clone"===t.cache))?y.resolve(e):r.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?te(e):e},e}):r.getMany(t)},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Wr(e){return!("from"in e)}var $=function(e,t){var r;if(!this)return r=new $,e&&"d"in e&&s(r,e),r;s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function qr(e,t,r){var n=I(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(Wr(e))return s(e,{from:t,to:r,d:1});var n=e.l,i=e.r;if(I(r,e.from)<0)return n?qr(n,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Gr(e);if(0<I(t,e.to))return i?qr(i,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Gr(e);I(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<I(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);t=!e.r;n&&!e.l&&Kr(e,n),i&&t&&Kr(e,i)}}function Kr(e,t){Wr(t)||!function e(t,r){var n=r.from,i=r.to,o=r.l,r=r.r;qr(t,n,i),o&&e(t,o),r&&e(t,r)}(e,t)}function Vr(e,t){var r=Hr(t),n=r.next();if(!n.done)for(var i=n.value,o=Hr(e),a=o.next(i.from),s=a.value;!n.done&&!a.done;){if(I(s.from,i.to)<=0&&0<=I(s.to,i.from))return!0;I(i.from,s.from)<0?i=(n=r.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Hr(e){var r=Wr(e)?null:{s:0,n:e};return{next:function(e){for(var t=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,t)for(;r.n.l&&I(e,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!t||I(e,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function Gr(e){var t,r,n,i=((null==(i=e.r)?void 0:i.d)||0)-((null==(i=e.l)?void 0:i.d)||0),i=1<i?"r":i<-1?"l":"";i&&(t="r"==i?"l":"r",r=v({},e),n=e[i],e.from=n.from,e.to=n.to,e[i]=n[i],r[i]=n[t],(e[t]=r).d=Zr(r)),e.d=Zr(e)}function Zr(e){var t=e.r,e=e.l;return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}B($.prototype,((Xr={add:function(e){return Kr(this,e),this},addKey:function(e){return qr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return qr(t,e,e)}),this}})[ie]=function(){return Hr(this)},Xr));var Yr={stack:"dbcore",level:0,create:function(n){var y=n.schema.name,b=new $(n.MIN_KEY,n.MAX_KEY);return v(v({},n),{table:function(p){function e(e){var t=(e=e.query).index,e=e.range;return[t,new $(null!=(t=e.lower)?t:n.MIN_KEY,null!=(t=e.upper)?t:n.MAX_KEY)]}var h=n.table(p),m=h.schema,t=m.primaryKey,c=t.extractKey,l=t.outbound,r=v(v({},h),{mutate:function(e){function r(e){return e="idb://".concat(y,"/").concat(p,"/").concat(e),n[e]||(n[e]=new $)}var t=e.trans,n=t.mutatedParts||(t.mutatedParts={}),i=r(""),u=r(":dels"),c=e.type,t="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],l=t[0],d=t[1],f=e.trans._cache;return h.mutate(e).then(function(e){var t,o,a,s;return g(l)?("delete"!==c&&(l=e.results),i.addKeys(l),(t=Ur(l,f))||"add"===c||u.addKeys(l),(t||d)&&(o=r,a=t,s=d,m.indexes.forEach(function(t){var r=o(t.name||"");function n(e){return null!=e?t.extractKey(e):null}function i(e){t.multiEntry&&g(e)?e.forEach(function(e){return r.addKey(e)}):r.addKey(e)}(a||s).forEach(function(e,t){var r=a&&n(a[t]),t=s&&n(s[t]);0!==I(r,t)&&(null!=r&&i(r),null!=t)&&i(t)})}))):l?(t={from:l.lower,to:l.upper},u.add(t),i.add(t)):(i.add(b),u.add(b),m.indexes.forEach(function(e){return r(e.name).add(b)})),e})}}),d={get:function(e){return[t,new $(e.key)]},getMany:function(e){return[t,(new $).addKeys(e.keys)]},count:e,query:e,openCursor:e};return O(d).forEach(function(u){r[u]=function(i){var t=E.subscr;if(t){var o,e=function(e){e="idb://".concat(y,"/").concat(p,"/").concat(e);return t[e]||(t[e]=new $)},a=e(""),s=e(":dels"),r=d[u](i),n=r[0],r=r[1];if(e(n.name||"").add(r),!n.isPrimaryKey){if("count"!==u)return o="query"===u&&l&&i.values&&h.query(v(v({},i),{values:!1})),h[u].apply(this,arguments).then(function(t){if("query"===u){if(l&&i.values)return o.then(function(e){e=e.result;return a.addKeys(e),t});var e=i.values?t.result.map(c):t.result;(i.values?a:s).addKeys(e)}else{var r,n;if("openCursor"===u)return n=i.values,(r=t)&&Object.create(r,{key:{get:function(){return s.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return s.addKey(e),e}},value:{get:function(){return n&&a.addKey(r.primaryKey),r.value}}})}return t});s.add(b)}}return h[u].apply(this,arguments)}}),r}})}};m.prototype.version=function(t){if(isNaN(t)||t<.1)throw new _.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new _.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,r=e.filter(function(e){return e._cfg.version===t})[0];return r||(r=new this.Version(t),e.push(r),e.sort(Sr),r.stores({}),this._state.autoSchema=!1),r},m.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||E.letThrough||this._vip)?e():new y(function(e,t){if(r._state.openComplete)return t(new _.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._options.autoOpen)return void t(new _.DatabaseClosed);r.open().catch(w)}r._state.dbReadyPromise.then(e,t)}).then(e)},m.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,e=e.name,i=(e&&this.unuse({stack:t,name:e}),this._middlewares[t]||(this._middlewares[t]=[]));return i.push({stack:t,create:r,level:null==n?10:n,name:e}),i.sort(function(e,t){return e.level-t.level}),this},m.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},m.prototype.open=function(){return Dr(this)},m.prototype._close=function(){var r=this._state,e=At.indexOf(this);if(0<=e&&At.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}r.dbReadyPromise=new y(function(e){r.dbReadyResolve=e}),r.openCanceller=new y(function(e,t){r.cancelOpen=t})},m.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new _.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},m.prototype.delete=function(){var i=this,r=0<arguments.length,o=this._state;return new y(function(n,t){function e(){i.close();var e=i._deps.indexedDB.deleteDatabase(i.name);e.onsuccess=x(function(){var e,t,r;e=i._deps,t=i.name,r=e.indexedDB,e=e.IDBKeyRange,kr(r)||t===Ct||Cr(r,e).delete(t).catch(w),n()}),e.onerror=k(t),e.onblocked=i._fireOnBlocked}if(r)throw new _.InvalidArgument("Arguments not allowed in db.delete()");o.isBeingOpened?o.dbReadyPromise.then(e):e()})},m.prototype.backendDB=function(){return this.idbdb},m.prototype.isOpen=function(){return null!==this.idbdb},m.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},m.prototype.hasFailed=function(){return null!==this._state.dbOpenError},m.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(m.prototype,"tables",{get:function(){var t=this;return O(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),m.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new _.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,X(i),r]}.apply(this,arguments);return this._transaction.apply(this,e)},m.prototype._transaction=function(e,t,r){var n,i,o=this,a=E.trans,s=(a&&a.db===this&&-1===e.indexOf("!")||(a=null),-1!==e.indexOf("?"));e=e.replace("!","").replace("?","");try{if(i=t.map(function(e){e=e instanceof o.Table?e.name:e;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===kt)n=kt;else{if("rw"!=e&&e!=$t)throw new _.InvalidArgument("Invalid transaction mode: "+e);n=$t}if(a){if(a.mode===kt&&n===$t){if(!s)throw new _.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&i.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!s)throw new _.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),s&&a&&!a.active&&(a=null)}}catch(r){return a?a._promise(null,function(e,t){t(r)}):A(r)}var u=function i(o,a,s,u,c){return y.resolve().then(function(){var e=E.transless||E,t=o._createTransaction(a,s,o._dbSchema,u),e={trans:t,transless:e};if(u)t.idbtrans=u.idbtrans;else try{t.create(),o._state.PR1398_maxLoop=3}catch(e){return e.name===ve.InvalidState&&o.isOpen()&&0<--o._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),o._close(),o.open().then(function(){return i(o,a,s,null,c)})):A(e)}var r,n=se(c),e=(n&&mt(),y.follow(function(){var e;(r=c.call(t,t))&&(n?(e=j.bind(null,null),r.then(e,e)):"function"==typeof r.next&&"function"==typeof r.throw&&(r=Tr(r)))},e));return(r&&"function"==typeof r.then?y.resolve(r).then(function(e){return t.active?e:A(new _.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):e.then(function(){return r})).then(function(e){return u&&t._resolve(),t._completion.then(function(){return e})}).catch(function(e){return t._reject(e),A(e)})})}.bind(null,this,n,i,a,r);return a?a._promise(n,u,"lock"):E.trans?gt(E.transless,function(){return o._whenReady(u)}):this._whenReady(u)},m.prototype.table=function(e){if(b(this._allTables,e))return this._allTables[e];throw new _.InvalidTable("Table ".concat(e," does not exist"))};var Qr=m;function m(e,t){var o,n,a,r,i,s=this,u=(this._middlewares={},this.verno=0,m.dependencies),u=(this._options=t=v({addons:m.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},t.addons),c=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:w,dbReadyPromise:null,cancelOpen:w,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3});c.dbReadyPromise=new y(function(e){c.dbReadyResolve=e}),c.openCanceller=new y(function(e,t){c.cancelOpen=t}),this._state=c,this.name=e,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[Ae,w]}),this.on.ready.subscribe=H(this.on.ready.subscribe,function(i){return function(r,n){m.vip(function(){var t,e=s._state;e.openComplete?(e.dbOpenError||y.resolve().then(r),n&&i(r)):e.onReadyBeingFired?(e.onReadyBeingFired.push(r),n&&i(r)):(i(r),t=s,n||i(function e(){t.on.ready.unsubscribe(r),t.on.ready.unsubscribe(e)}))})}}),this.Collection=(o=this,Ut(Qt.prototype,function(e,t){this.db=o;var r=Tt,n=null;if(t)try{r=t()}catch(e){n=e}var t=e._ctx,e=t.table,i=e.hook.reading.fire;this._ctx={table:e,index:t.index,isPrimKey:!t.index||e.schema.primKey.keyPath&&t.index===e.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:t.or,valueMapper:i!==we?i:null}})),this.Table=(n=this,Ut(Ft.prototype,function(e,t,r){this.db=n,this._tx=r,this.name=e,this.schema=t,this.hook=n._allTables[e]?n._allTables[e].hook:Bt(null,{creating:[Ee,w],reading:[Oe,we],updating:[Pe,w],deleting:[xe,w]})})),this.Transaction=(a=this,Ut(cr.prototype,function(e,t,r,n,i){var o=this;this.db=a,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new y(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),A(e)})})),this.Version=(r=this,Ut(Ir.prototype,function(e){this.db=r,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(i=this,Ut(ir.prototype,function(e,t,r){this.db=i,this._ctx={table:e,index:":id"===t?null:t,or:r};var n=i._deps.indexedDB;if(!n)throw new _.MissingAPI;this._cmp=this._ascending=n.cmp.bind(n),this._descending=function(e,t){return n.cmp(t,e)},this._max=function(e,t){return 0<n.cmp(e,t)?e:t},this._min=function(e,t){return n.cmp(e,t)<0?e:t},this._IDBKeyRange=i._deps.IDBKeyRange})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close()}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=pr(t.IDBKeyRange),this._createTransaction=function(e,t,r,n){return new s.Transaction(e,t,r,s._options.chromeTransactionDurability,n)},this._fireOnBlocked=function(t){s.on("blocked").fire(t),At.filter(function(e){return e.name===s.name&&e!==s&&!e._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Lr),this.use(Br),this.use(Yr),this.use(zr),this.vip=Object.create(this,{_vip:{value:!0}}),u.forEach(function(e){return e(s)})}var Jr,Xr="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",en=(tn.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},tn.prototype[Xr]=function(){return this},tn);function tn(e){this._subscribe=e}function rn(t,r){return O(r).forEach(function(e){Kr(t[e]||(t[e]=new $),r[e])}),t}function nn(m){return new en(function(i){var o=se(m);var a=!1,s={},u={},c={get closed(){return a},unsubscribe:function(){a=!0,ur.storagemutated.unsubscribe(p)}},l=(i.start&&i.start(c),!1),d=!1;function f(){return O(u).some(function(e){return s[e]&&Vr(s[e],u[e])})}var p=function(e){rn(s,e),f()&&h()},h=function(){var t,e,r;function n(){return P(m,{subscr:e,trans:null})}l||a||(s={},e=t={},o&&mt(),r=E.trans?gt(E.transless,n):n(),o&&r.then(j,j),r=r,d||(ur(ar,p),d=!0),l=!0,Promise.resolve(r).then(function(e){l=!1,a||(f()?h():(s={},u=t,i.next&&i.next(e)))},function(e){["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||(l=!1,i.error&&i.error(e),c.unsubscribe())}))};return h(),c})}try{Jr={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(e){Jr={indexedDB:null,IDBKeyRange:null}}var on=Qr;function an(e){var t=D;try{D=!0,ur.storagemutated.fire(e)}finally{D=t}}B(on,v(v({},e),{delete:function(e){return new on(e,{addons:[]}).delete()},exists:function(e){return new on(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=on.dependencies,r=t.indexedDB,t=t.IDBKeyRange,(kr(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==Ct})}):Cr(r,t).toCollection().primaryKeys()).then(e)}catch(e){return A(new _.MissingAPI)}var t,r},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return E.trans?gt(E.transless,e):e()},vip:$r,async:function(t){return function(){try{var e=Tr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:y.resolve(e)}catch(e){return A(e)}}},spawn:function(e,t,r){try{var n=Tr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:y.resolve(n)}catch(e){return A(e)}},currentTransaction:{get:function(){return E.trans||null}},waitFor:function(e,t){e=y.resolve("function"==typeof e?on.ignoreTransaction(e):e).timeout(t||6e4);return E.trans?E.trans.waitFor(e):e},Promise:y,debug:{get:function(){return d},set:function(e){ue(e,"dexie"===e?function(){return!0}:xt)}},derive:z,extend:s,props:B,override:H,Events:Bt,on:ur,liveQuery:nn,extendObservabilitySet:rn,getByKeyPath:c,setByKeyPath:S,delByKeyPath:function(t,e){"string"==typeof e?S(t,e,void 0):"length"in e&&[].map.call(e,function(e){S(t,e,void 0)})},shallowClone:Q,deepClone:te,getObjectDiff:Fr,cmp:I,asap:Z,minKey:-1/0,addons:[],connections:At,errnames:ve,dependencies:Jr,semVer:t,version:t.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),on.maxKey=pr(on.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(ur(ar,function(e){var t;D||(Mt?(t=document.createEvent("CustomEvent")).initCustomEvent(sr,!0,!0,e):t=new CustomEvent(sr,{detail:e}),D=!0,dispatchEvent(t),D=!1)}),addEventListener(sr,function(e){e=e.detail;D||an(e)}));var sn,D=!1;return"undefined"!=typeof BroadcastChannel?("function"==typeof(sn=new BroadcastChannel(sr)).unref&&sn.unref(),ur(ar,function(e){D||sn.postMessage(e)}),sn.onmessage=function(e){e.data&&an(e.data)}):"undefined"!=typeof self&&"undefined"!=typeof navigator&&(ur(ar,function(t){try{D||("undefined"!=typeof localStorage&&localStorage.setItem(sr,JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&N([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:sr,changedParts:t})}))}catch(e){}}),"undefined"!=typeof addEventListener&&addEventListener("storage",function(e){e.key===sr&&(e=JSON.parse(e.newValue))&&an(e.changedParts)}),Xr=self.document&&navigator.serviceWorker)&&Xr.addEventListener("message",function(e){e=e.data;e&&e.type===sr&&an(e.changedParts)}),y.rejectionMapper=function(e,t){return!e||e instanceof he||e instanceof TypeError||e instanceof SyntaxError||!e.name||!_e[e.name]?e:(t=new _e[e.name](t||e.message,e),"stack"in e&&u(t,"stack",{get:function(){return this.inner.stack}}),t)},ue(d,xt),v(Qr,Object.freeze({__proto__:null,Dexie:Qr,liveQuery:nn,Entity:Lt,cmp:I,default:Qr,RangeSet:$,mergeRanges:Kr,rangesOverlap:Vr}),{default:Qr}),Qr},"object"==typeof n&&void 0!==r?r.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Dexie=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:932}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unknownAction=r.runFullQueryAgain=r.removeExistingAndInsertAtSortPosition=r.insertAtSortPosition=r.alwaysWrong=r.replaceExisting=r.removeExisting=r.removeLastInsertLast=r.removeFirstInsertFirst=r.removeLastInsertFirst=r.removeFirstInsertLast=r.removeLastItem=r.removeFirstItem=r.insertLast=r.insertFirst=r.doNothing=void 0;const n=e("array-push-at-sort-position");r.doNothing=e=>{},r.insertFirst=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},r.insertLast=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},r.removeFirstItem=e=>{var t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},r.removeLastItem=e=>{var t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},r.removeFirstInsertLast=e=>{(0,r.removeFirstItem)(e),(0,r.insertLast)(e)},r.removeLastInsertFirst=e=>{(0,r.removeLastItem)(e),(0,r.insertFirst)(e)},r.removeFirstInsertFirst=e=>{(0,r.removeFirstItem)(e),(0,r.insertFirst)(e)},r.removeLastInsertLast=e=>{(0,r.removeLastItem)(e),(0,r.insertLast)(e)},r.removeExisting=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);var r=t.queryParams.primaryKey,n=t.previousResults;for(let e=0;e<n.length;e++)if(n[e][r]===t.changeEvent.id){n.splice(e,1);break}},r.replaceExisting=t=>{var r=t.changeEvent.doc,n=t.queryParams.primaryKey,i=t.previousResults;for(let e=0;e<i.length;e++)if(i[e][n]===t.changeEvent.id){i[e]=r,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,r);break}},r.alwaysWrong=e=>{var t={_id:"wrongHuman"+(new Date).getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},r.insertAtSortPosition=t=>{const r=t.changeEvent.id;var e=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(r))return;t.keyDocumentMap.set(r,e)}else if(t.previousResults.find(e=>e[t.queryParams.primaryKey]===r))return;(0,n.pushAtSortPosition)(t.previousResults,e,t.queryParams.sortComparator,0)},r.removeExistingAndInsertAtSortPosition=e=>{(0,r.removeExisting)(e),(0,r.insertAtSortPosition)(e)},r.runFullQueryAgain=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")};r.unknownAction=e=>{throw new Error("Action unknownAction should never be called")}},{"array-push-at-sort-position":64}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.actionFunctions=r.orderedActionList=void 0;e=e("./action-functions");r.orderedActionList=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],r.actionFunctions={doNothing:e.doNothing,insertFirst:e.insertFirst,insertLast:e.insertLast,removeFirstItem:e.removeFirstItem,removeLastItem:e.removeLastItem,removeFirstInsertLast:e.removeFirstInsertLast,removeLastInsertFirst:e.removeLastInsertFirst,removeFirstInsertFirst:e.removeFirstInsertFirst,removeLastInsertLast:e.removeLastInsertLast,removeExisting:e.removeExisting,replaceExisting:e.replaceExisting,alwaysWrong:e.alwaysWrong,insertAtSortPosition:e.insertAtSortPosition,removeExistingAndInsertAtSortPosition:e.removeExistingAndInsertAtSortPosition,runFullQueryAgain:e.runFullQueryAgain,unknownAction:e.unknownAction}},{"./action-functions":116}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveInput=r.getSimpleBdd=r.minimalBddString=void 0;const n=e("binary-decision-diagram"),i=e("../states");r.minimalBddString="14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7ef7¡bk7¢e{7£g|7¤ry7¥dp7¦gk7§eq7¨gt7©ac7ªmv7«gu7¬nm7­iy7®nw7¯¤s8°«¦8±¬k8²ªm8³®v8´«n8µ¬n8¶vm8·xv8¸mn8¹­j8º®m8»xm8¼­¹3½}~3¾©°3¿¢3À¡£3Ám±3Â®º3Ãmº3Ä©´3Åb®3Æmµ3Çm»3Èx»3Ékn3Êm¸3Ë¼j6ÌÂm6ÍÆÃ6ÎÈm6Ïnm6ÐÊÇ6ÑÌÎ,ÒÍÐ,ÓÅÉ,Ô²¶,Õ³·,Ö®n,×º»,Ømf9ÙËÁ9Úym9ÛmÏ9ÜÑÒ9Ýz{2Þpq2ß½¿2à¾À2á¥§2â°¨2ãÄÓ2ä´Ö2åÝn0æÞn0çØÛ0èÙÜ0éßn0êàã0ë²Ô0ì¯Õ0íán0îâä0ï¹×0ðçv/ñåæ/òçë/óèì/ôéí/õêî/öÚy/÷òm(øóï(ùöy(ú÷ø:ûôõ:ümù:ýðñ4þúû4ÿþý*Āüm*ÿĀ.";let o;function a(){return o=o||(0,n.minimalStringToSimpleBdd)(r.minimalBddString)}r.getSimpleBdd=a;r.resolveInput=e=>(0,n.resolveWithSimpleBdd)(a(),i.stateResolveFunctionByIndex,e)},{"../states":120,"binary-decision-diagram":71}],119:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.runAction=r.calculateActionFunction=r.calculateActionName=r.calculateActionFromMap=void 0;const o=e("./states"),a=e("./actions"),s=e("./bdd/bdd.generated");function u(e){e=(0,s.resolveInput)(e);return a.orderedActionList[e]}i(e("./states"),r),i(e("./util"),r),r.calculateActionFromMap=function(e,t){return t=(0,o.getStateSet)(t),(e=e.get(t))?{action:e,stateSet:t}:{action:"runFullQueryAgain",stateSet:t}},r.calculateActionName=u,r.calculateActionFunction=function(e){return e=u(e),a.actionFunctions[e]},r.runAction=function(e,t,r,n,i){return(0,a.actionFunctions[e])({queryParams:t,changeEvent:r,previousResults:n,keyDocumentMap:i}),n}},{"./actions":117,"./bdd/bdd.generated":118,"./states":120,"./util":122}],120:[function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),r=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=(Object.defineProperty(i,"__esModule",{value:!0}),i.logStateSet=i.getStateSet=i.resolveState=i.stateResolveFunctionByIndex=i.stateResolveFunctions=i.orderedStateList=void 0,e("./state-resolver"));function a(e,t){var r=i.stateResolveFunctions[e];if(r)return r(t);throw new Error("resolveState() has no function for "+e)}r(e("./state-resolver"),i),i.orderedStateList=["isInsert","isUpdate","isDelete","hasLimit","isFindOne","hasSkip","wasResultsEmpty","previousUnknown","wasLimitReached","wasFirst","wasLast","sortParamsChanged","wasInResult","wasSortedBeforeFirst","wasSortedAfterLast","isSortedBeforeFirst","isSortedAfterLast","wasMatching","doesMatchNow"],i.stateResolveFunctions={isInsert:o.isInsert,isUpdate:o.isUpdate,isDelete:o.isDelete,hasLimit:o.hasLimit,isFindOne:o.isFindOne,hasSkip:o.hasSkip,wasResultsEmpty:o.wasResultsEmpty,previousUnknown:o.previousUnknown,wasLimitReached:o.wasLimitReached,wasFirst:o.wasFirst,wasLast:o.wasLast,sortParamsChanged:o.sortParamsChanged,wasInResult:o.wasInResult,wasSortedBeforeFirst:o.wasSortedBeforeFirst,wasSortedAfterLast:o.wasSortedAfterLast,isSortedBeforeFirst:o.isSortedBeforeFirst,isSortedAfterLast:o.isSortedAfterLast,wasMatching:o.wasMatching,doesMatchNow:o.doesMatchNow},i.stateResolveFunctionByIndex={0:o.isInsert,1:o.isUpdate,2:o.isDelete,3:o.hasLimit,4:o.isFindOne,5:o.hasSkip,6:o.wasResultsEmpty,7:o.previousUnknown,8:o.wasLimitReached,9:o.wasFirst,10:o.wasLast,11:o.sortParamsChanged,12:o.wasInResult,13:o.wasSortedBeforeFirst,14:o.wasSortedAfterLast,15:o.isSortedBeforeFirst,16:o.isSortedAfterLast,17:o.wasMatching,18:o.doesMatchNow},i.resolveState=a,i.getStateSet=function(t){let r="";for(let e=0;e<i.orderedStateList.length;e++){var n=a(i.orderedStateList[e],t);r+=n?"1":"0"}return r},i.logStateSet=function(r){i.orderedStateList.forEach((e,t)=>{console.log("state: "+e+" : "+r[t])})}},{"./state-resolver":121}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wasResultsEmpty=r.doesMatchNow=r.wasMatching=r.isSortedAfterLast=r.isSortedBeforeFirst=r.wasSortedAfterLast=r.wasSortedBeforeFirst=r.wasLast=r.wasFirst=r.wasInResult=r.sortParamsChanged=r.wasLimitReached=r.previousUnknown=r.isUpdate=r.isInsert=r.isDelete=r.hasSkip=r.isFindOne=r.hasLimit=void 0;const o=e("../util");r.hasLimit=e=>!!e.queryParams.limit,r.isFindOne=e=>1===e.queryParams.limit,r.hasSkip=e=>!!(e.queryParams.skip&&0<e.queryParams.skip),r.isDelete=e=>"DELETE"===e.changeEvent.operation,r.isInsert=e=>"INSERT"===e.changeEvent.operation,r.isUpdate=e=>"UPDATE"===e.changeEvent.operation,r.previousUnknown=e=>e.changeEvent.previous===o.UNKNOWN_VALUE,r.wasLimitReached=e=>(0,r.hasLimit)(e)&&e.previousResults.length>=e.queryParams.limit,r.sortParamsChanged=e=>{var t=e.queryParams.sortFields,r=e.changeEvent.previous,n=e.changeEvent.doc;if(n){if(!r||r===o.UNKNOWN_VALUE)return!0;for(let e=0;e<t.length;e++){var i=t[e];if((0,o.getProperty)(r,i)!==(0,o.getProperty)(n,i))return!0}}return!1},r.wasInResult=e=>{var t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);var r=e.queryParams.primaryKey,n=e.previousResults;for(let e=0;e<n.length;e++)if(n[e][r]===t)return!0;return!1},r.wasFirst=e=>{var t=e.previousResults[0];return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},r.wasLast=e=>{var t=(0,o.lastOfArray)(e.previousResults);return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},r.wasSortedBeforeFirst=e=>{var t,r=e.changeEvent.previous;return!(!r||r===o.UNKNOWN_VALUE||!(t=e.previousResults[0]))&&(t[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(r,t)<0)},r.wasSortedAfterLast=e=>{var t,r=e.changeEvent.previous;return!(!r||r===o.UNKNOWN_VALUE||!(t=(0,o.lastOfArray)(e.previousResults)))&&(t[e.queryParams.primaryKey]===e.changeEvent.id||0<e.queryParams.sortComparator(r,t))},r.isSortedBeforeFirst=e=>{var t,r=e.changeEvent.doc;return!!r&&!!(t=e.previousResults[0])&&(t[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(r,t)<0)},r.isSortedAfterLast=e=>{var t,r=e.changeEvent.doc;return!!r&&!!(t=(0,o.lastOfArray)(e.previousResults))&&(t[e.queryParams.primaryKey]===e.changeEvent.id||0<e.queryParams.sortComparator(r,t))},r.wasMatching=e=>{var t=e.changeEvent.previous;return!(!t||t===o.UNKNOWN_VALUE)&&e.queryParams.queryMatcher(t)},r.doesMatchNow=e=>{var t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)};r.wasResultsEmpty=e=>0===e.previousResults.length},{"../util":122}],122:[function(e,t,i){"use strict";function r(e){return e.startsWith("-")?e.substr(1):e}function o(e){var t=typeof e;return null!==e&&("object"==t||"function"==t)}Object.defineProperty(i,"__esModule",{value:!0}),i.getProperty=i.isObject=i.roundToTwoDecimals=i.mergeSets=i.ensureNotFalsy=i.flatClone=i.cloneMap=i.objectToMap=i.mapToObject=i.replaceCharAt=i.getSortFieldsOfQuery=i.normalizeSortField=i.tryToFillPreviousDoc=i.shuffleArray=i.randomOfArray=i.lastOfArray=i.UNKNOWN_VALUE=void 0,i.UNKNOWN_VALUE="UNKNOWN",i.lastOfArray=function(e){return e[e.length-1]},i.randomOfArray=function(e){return e[Math.floor(Math.random()*e.length)]},i.shuffleArray=function(e){return e.slice().sort(()=>Math.random()-.5)},i.tryToFillPreviousDoc=function(e){var t;if(e.changeEvent.previous===i.UNKNOWN_VALUE){const r=e.changeEvent.id,n=e.queryParams.primaryKey;e.keyDocumentMap?(t=e.keyDocumentMap.get(r))&&(e.changeEvent.previous=t):(t=e.previousResults.find(e=>e[n]===r))&&(e.changeEvent.previous=t)}},i.normalizeSortField=r,i.getSortFieldsOfQuery=function(e){return e.sort?e.sort.map(e=>Array.isArray(e)?e[0].map(e=>r(e)):r(e)):["_id"]},i.replaceCharAt=function(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)},i.mapToObject=function(e){const r={};return e.forEach((e,t)=>{r[t]=e}),r},i.objectToMap=function(e){const r=new Map;return Object.entries(e).forEach(([e,t])=>{r.set(e,t)}),r},i.cloneMap=function(e){const r=new Map;return e.forEach((e,t)=>{r[t]=e}),r},i.flatClone=function(e){return Object.assign({},e)},i.ensureNotFalsy=function(e){if(e)return e;throw new Error("ensureNotFalsy() is falsy")},i.mergeSets=function(e){let t=new Set;return e.forEach(e=>{t=new Set([...t,...e])}),t},i.roundToTwoDecimals=function(e){return parseFloat(e.toFixed(2))},i.isObject=o,i.getProperty=function(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!o(t)||"string"!=typeof e)return void 0===r?t:r;var n=e.split(".");if(0===n.length)return r;for(let e=0;e<n.length;e++){var i=n[e];if(null==(t=function(e,t){{var r;if("number"!=typeof t&&Array.isArray(e))return r=Number.parseInt(t,10),Number.isInteger(r)&&e[r]===e[t]}return}(t,i)?e===n.length-1?void 0:null:t[i])){if(e!==n.length-1)return r;break}}return void 0===t?r:t}},{}],123:[function(e,t,r){"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1}else{if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var a=o[i];if(!e(t[a],r[a]))return!1}}return!0}return t!=t&&r!=r}},{}],124:[function(e,t,r){"use strict";function u(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r}var c=Object.prototype.toString,l=Math.max;t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==c.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n,e,i=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r}(arguments,1),o=l(0,r.length-i.length),a=[],s=0;s<o;s++)a[s]="$"+s;return n=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(a,",")+"){ return binder.apply(this,arguments); }")(function(){var e;return this instanceof n?(e=r.apply(this,u(i,arguments)),Object(e)===e?e:this):r.apply(t,u(i,arguments))}),r.prototype&&((e=function(){}).prototype=r.prototype,n.prototype=new e,e.prototype=null),n}},{}],125:[function(e,t,r){"use strict";e=e("./implementation");t.exports=Function.prototype.bind||e},{"./implementation":124}],126:[function(e,t,r){"use strict";function n(){return"string"==typeof function(){}.name}var i=Object.getOwnPropertyDescriptor;if(i)try{i([],"length")}catch(e){i=null}n.functionsHaveConfigurableNames=function(){var e;return!!(n()&&i&&(e=i(function(){},"name"))&&e.configurable)};var o=Function.prototype.bind;n.boundFunctionsHaveNames=function(){return n()&&"function"==typeof o&&""!==function(){}.bind().name},t.exports=n},{}],127:[function(e,t,r){for(var s=e("util"),u=e("is-property"),c=/[\{\[]/,l=/[\}\]]/,n=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],d={},i=0;i<n.length;i++)d[n[i]]=!0;function o(){function n(e){l.test(e.trim()[0])&&c.test(e[e.length-1])?(o--,t(e),o++):c.test(e[e.length-1])?(t(e),o++):(l.test(e.trim()[0])&&o--,t(e))}function i(e){if(e)if(1===arguments.length&&-1<e.indexOf("\n"))for(var t=e.trim().split("\n"),r=0;r<t.length;r++)n(t[r].trim());else n(s.format.apply(s,arguments));return i}var r=[],o=0,a={},t=function(e){for(var t="";t.length<2*o;)t+="  ";r.push(t+e)};return i.scope={},i.formats=f,i.sym=function(e){var t;return e&&u(t=e)&&!d.hasOwnProperty(t)||(e="tmp"),a[e]||(a[e]=0),e+(a[e]++||"")},i.property=function(e,t){return 1===arguments.length&&(t=e,e=""),u(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},i.toString=function(){return r.join("\n")},i.toFunction=function(t){t=t||{};var e="return ("+i.toString()+")",r=(Object.keys(i.scope).forEach(function(e){t[e]||(t[e]=i.scope[e])}),Object.keys(t).map(function(e){return e})),n=r.map(function(e){return t[e]});return Function.apply(null,r.concat(e)).apply(null,n)},arguments.length&&i.apply(null,arguments),i}var f={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}};o.formats=f,t.exports=o},{"is-property":142,util:935}],128:[function(e,t,r){function n(e,t){return i(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"}var i=e("is-property");n.valid=i,n.property=function(e){return i(e)?e:JSON.stringify(e)},t.exports=n},{"is-property":142}],129:[function(e,t,r){"use strict";var n,f=SyntaxError,i=Function,p=TypeError,o=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}function a(){throw new p}var s=h?function(){try{return a}catch(e){try{return h(arguments,"callee").get}catch(e){return a}}}():a,u=e("has-symbols")(),c=e("has-proto")(),l=Object.getPrototypeOf||(c?function(e){return e.__proto__}:null),m={},c="undefined"!=typeof Uint8Array&&l?l(Uint8Array):n,y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":u&&l?l([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":m,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u&&l?l(l([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u&&l?l((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u&&l?l((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u&&l?l(""[Symbol.iterator]()):n,"%Symbol%":u?Symbol:n,"%SyntaxError%":f,"%ThrowTypeError%":s,"%TypedArray%":c,"%TypeError%":p,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(l)try{null.error}catch(e){u=l(l(e));y["%Error.prototype%"]=u}function b(e){var t,r;return"%AsyncFunction%"===e?t=o("async function () {}"):"%GeneratorFunction%"===e?t=o("function* () {}"):"%AsyncGeneratorFunction%"===e?t=o("async function* () {}"):"%AsyncGenerator%"===e?(r=b("%AsyncGeneratorFunction%"))&&(t=r.prototype):"%AsyncIteratorPrototype%"===e&&(r=b("%AsyncGenerator%"))&&l&&(t=l(r.prototype)),y[e]=t}var v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},s=e("function-bind"),g=e("hasown"),_=s.call(Function.call,Array.prototype.concat),w=s.call(Function.apply,Array.prototype.splice),O=s.call(Function.call,String.prototype.replace),S=s.call(Function.call,String.prototype.slice),E=s.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g;t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new p("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new p('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,e))throw new f("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new f("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new f("invalid intrinsic syntax, expected opening `%`");var i=[];return O(e,x,function(e,t,r,n){i[i.length]=r?O(n,P,"$1"):t||e}),i}(e),n=0<r.length?r[0]:"",i=function(e,t){var r,n=e;if(g(v,n)&&(n="%"+(r=v[n])[0]+"%"),g(y,n)){var i=y[n];if(void 0!==(i=i===m?b(n):i)||t)return{alias:r,name:n,value:i};throw new p("intrinsic "+e+" exists, but is not available. Please file an issue!")}throw new f("intrinsic "+e+" does not exist!")}("%"+n+"%",t),o=(i.name,i.value),a=!1,i=i.alias;i&&(n=i[0],w(r,_([0,1],i)));for(var s=1,u=!0;s<r.length;s+=1){var c=r[s],l=S(c,0,1),d=S(c,-1);if(('"'===l||"'"===l||"`"===l||'"'===d||"'"===d||"`"===d)&&l!==d)throw new f("property names with quotes must have matching quotes");if("constructor"!==c&&u||(a=!0),g(y,l="%"+(n+="."+c)+"%"))o=y[l];else if(null!=o){if(!(c in o)){if(t)return;throw new p("base intrinsic for "+e+" exists, but the property is not available.")}o=h&&s+1>=r.length?(u=!!(d=h(o,c)))&&"get"in d&&!("originalValue"in d.get)?d.get:o[c]:(u=g(o,c),o[c]),u&&!a&&(y[l]=o)}}return o}},{"function-bind":125,"has-proto":132,"has-symbols":133,hasown:136}],130:[function(t,e,r){"use strict";t=t("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch(e){t=null}e.exports=t},{"get-intrinsic":129}],131:[function(e,t,r){"use strict";function n(){if(i)try{return i({},"a",{value:1}),!0}catch(e){}return!1}var i=e("get-intrinsic")("%Object.defineProperty%",!0);n.hasArrayLengthDefineBug=function(){if(!n())return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},t.exports=n},{"get-intrinsic":129}],132:[function(e,t,r){"use strict";var n={foo:{}},i=Object;t.exports=function(){return{__proto__:n}.foo===n.foo&&!({__proto__:null}instanceof i)}},{}],133:[function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=e("./shams");t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},{"./shams":134}],134:[function(e,t,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"!=typeof Symbol.iterator){var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}}return!0}},{}],135:[function(e,t,r){"use strict";var n=e("has-symbols/shams");t.exports=function(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":134}],136:[function(e,t,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,e=e("function-bind");t.exports=e.call(n,i)},{"function-bind":125}],137:[function(e,t,r){"use strict";function n(e){return!(o&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)}function i(e){return!!n(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)}var o=e("has-tostringtag/shams")(),a=e("call-bind/callBound")("Object.prototype.toString"),e=function(){return n(arguments)}();n.isLegacyArguments=i,t.exports=e?n:i},{"call-bind/callBound":98,"has-tostringtag/shams":135}],138:[function(e,t,r){"use strict";var n=Date.prototype.getDay,i=Object.prototype.toString,o=e("has-tostringtag/shams")();t.exports=function(e){if("object"!=typeof e||null===e)return!1;if(!o)return"[object Date]"===i.call(e);try{return n.call(e),!0}catch(e){return!1}}},{"has-tostringtag/shams":135}],139:[function(e,t,r){var i=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n=/\/\d{1,3}(?=%|$)/,o=/\//,a=/%.*$/,s=/([^0-9a-f:/%])/i,u=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/i;function c(e){var t,r,n;return!!i.test(e)&&4===(e=e.split(".")).length&&!("0"===e[0][0]&&1<e[0].length)&&!("0"===e[1][0]&&1<e[1].length)&&!("0"===e[2][0]&&1<e[2].length)&&!("0"===e[3][0]&&1<e[3].length)&&(t=Number(e[0]),r=Number(e[1]),n=Number(e[2]),e=Number(e[3]),0<=t)&&t<256&&0<=r&&r<256&&0<=n&&n<256&&0<=e&&e<256}function l(e){var t=e.replace(n,""),r=e.length!==t.length;if(r)return!1;if(!r&&o.test(e))return!1;r=t.replace(a,""),e=r.lastIndexOf(":");if(-1===e)return!1;t=c(r.substring(e+1))?r.substring(0,e+1)+"1234:5678":r;if(s.test(t))return!1;if(u.test(t))return!1;e=t.split("::");if(2<e.length)return!1;if(2===e.length){r=""===e[0]?[]:e[0].split(":"),e=""===e[1]?[]:e[1].split(":");if(8-(r.length+e.length)<=0)return!1}else if(8!==t.split(":").length)return!1;return!0}function d(e){return c(e)||l(e)}t.exports=function(e){if(4===(e=e||{}).version)return c;if(6===e.version)return l;if(null==e.version)return d;throw new Error("Unknown version: "+e.version)},t.exports.__all_regexes__=[i,n,o,a,s,u]},{}],140:[function(e,t,r){var e=e("is-my-ip-valid"),n=/\s/,i=/^[a-zA-Z0-9.-]+$/,o=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/,a=/^\+[0-9][0-9 ]{5,27}[0-9]$/,s=/ {2}/,u=/ /g;r["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(?:\.\d+|)([zZ]|[+-]\d{2}:\d{2})$/,r.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,r.time=/^\d{2}:\d{2}:\d{2}$/,r.email=function(e){return-1!==e.indexOf("@")&&!n.test(e)},r["ip-address"]=r.ipv4=e({version:4}),r.ipv6=e({version:6}),r.uri=/^[a-zA-Z][a-zA-Z0-9+\-.]*:[^\s]*$/,r.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,r.hostname=function(e){if(!i.test(e))return!1;for(var t=e.split("."),r=0;r<t.length;r++)if(!o.test(t[r]))return!1;return!0},r.alpha=/^[a-zA-Z]+$/,r.alphanumeric=/^[a-zA-Z0-9]+$/,r.style=/.:\s*[^;]/g,r.phone=function(e){return!!a.test(e)&&!s.test(e)&&7<=(e=e.substring(1).replace(u,"").length)&&e<=15},r["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/},{"is-my-ip-valid":139}],141:[function(e,n,t){function I(t,r,n){function i(r){return r&&r.id===n?r:"object"==typeof r&&r?Object.keys(r).reduce(function(e,t){return e||i(r[t])},null):null}var o=i(t);if(o)return o;n=(n=n.replace(/^#/,"")).replace(/\/$/,"");try{return l.get(t,decodeURI(n))}catch(e){o=n.indexOf("#");if(0!==o)if(-1===o)a=r[n];else{var a=r[n.slice(0,o)],t=n.slice(o).replace(/^#/,"");try{return l.get(a,t)}catch(e){}}else a=r[n];return a||null}}function a(e,t){t=Math.min(-1===t?e.length:t,e.length);for(var r=[],n=0;n<t;n++)r.push("object"==typeof e[n]?JSON.stringify(e[n]):e[n]);for(n=1;n<r.length;n++)if(r.indexOf(r[n])!==n)return!1;return!0}function s(e,t){var r=(0|t)!==t?Math.pow(10,t.toString().split(".").pop().length):1;return!(1<r?r<((0|e)!==e?Math.pow(10,e.toString().split(".").pop().length):1)||Math.round(r*e)%(r*t):e%t)}function u(e,t,r){return-1<r&&t.length>r||e.test(t)}function R(e,b,v,t,g){function _(t){var e=JSON.stringify(t);try{for(var r=/\[([^\[\]"]+)\]/;r.test(e);)e=e.replace(r,n);return e}catch(e){return JSON.stringify(t)}function n(e,t){if(-1===i.indexOf(t))throw new Error("Unreplaceable");return'." + '+t+' + "'}}function w(e){var t;return n[e]||(t=A("pattern"),x[t]=new RegExp(e),n[e]=t)}function O(){var e=o.shift();return o.push(e+e[0]),i.push(e),e}function S(n,r,i,o,a){function s(e,t,r){M("errors++"),!0===i&&(M("if (validate.errors === null) validate.errors = []"),P?M("validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})",_(t||n),JSON.stringify(e),r||n,JSON.stringify(h),JSON.stringify(a)):M("validate.errors.push({field:%s,message:%s})",_(t||n),JSON.stringify(e)))}var t,u,c,l,d,f,p=r.properties,h=r.type,m=!1,e=(Array.isArray(r.items)&&(p={},r.items.forEach(function(e,t){p[t]=e}),h="array",m=!0),0),y=(!0===r.required?(e++,M("if (%s === undefined) {",n),s("is required"),M("} else {")):(e++,M("if (%s !== undefined) {",n)),[].concat(h).map(function(e){if(e&&!$.hasOwnProperty(e))throw new Error("Unknown type: "+e);return $[e||"any"](n)}).join(" || ")||"true");for("true"!==y&&(e++,M("if (!(%s)) {",y),s("is the wrong type"),M("} else {")),m&&(!1===r.additionalItems?(M("if (%s.length > %d) {",n,r.items.length),s("has additional items"),M("}")):r.additionalItems&&(l=O(),M("for (var %s = %d; %s < %s.length; %s++) {",l,r.items.length,l,n,l),S(n+"["+l+"]",r.additionalItems,i,o,a.concat("additionalItems")),M("}"))),r.format&&E[r.format]&&("string"!==h&&k[r.format]&&M("if (%s) {",$.string(n)),u=A("format"),x[u]=E[r.format],"function"==typeof x[u]?M("if (!%s(%s)) {",u,n):M("if (!testLimitedRegex(%s, %s, %d)) {",u,n,void 0===r.maxLength?-1:r.maxLength),s("must be "+r.format+" format"),M("}"),"string"!==h)&&k[r.format]&&M("}"),Array.isArray(r.required)&&(u=A("missing"),M("var %s = 0",u),M("if ((%s)) {","object"!==h?$.object(n):"true"),r.required.map(function(e){e=C(n,e);M("if (%s === undefined) {",e),s("is required",e),M("%s++",u),M("}")}),M("}"),j||(M("if (%s === 0) {",u),e++)),r.uniqueItems&&("array"!==h&&M("if (%s) {",$.array(n)),M("if (!(unique(%s, %d))) {",n,r.maxItems||-1),s("must be unique"),M("}"),"array"!==h)&&M("}"),r.enum&&(y=r.enum.some(function(e){return"object"==typeof e}),M("if (%s) {",r.enum.map(y?function(e){return"JSON.stringify("+n+") !== JSON.stringify("+JSON.stringify(e)+")"}:function(e){return n+" !== "+JSON.stringify(e)}).join(" && ")||"false"),s("must be an enum value"),M("}")),r.dependencies&&("object"!==h&&M("if (%s) {",$.object(n)),Object.keys(r.dependencies).forEach(function(e){var t=r.dependencies[e];"string"==typeof t&&(t=[t]);Array.isArray(t)&&(M("if (%s !== undefined && !(%s)) {",C(n,e),t.map(function(e){return C(n,e)+" !== undefined"}).join(" && ")||"true"),s("dependencies not set"),M("}")),"object"==typeof t&&(M("if (%s !== undefined) {",C(n,e)),S(n,t,i,o,a.concat(["dependencies",e])),M("}"))}),"object"!==h)&&M("}"),!r.additionalProperties&&!1!==r.additionalProperties||("object"!==h&&M("if (%s) {",$.object(n)),l=O(),c=A("keys"),y=Object.keys(p||{}).map(function(e){return c+"["+l+"] !== "+JSON.stringify(e)}).concat(Object.keys(r.patternProperties||{}).map(function(e){return"!"+w(e)+".test("+c+"["+l+"])"})).join(" && ")||"true",M("var %s = Object.keys(%s)",c,n)("for (var %s = 0; %s < %s.length; %s++) {",l,l,c,l)("if (%s) {",y),!1===r.additionalProperties?(o&&M("delete %s",n+"["+c+"["+l+"]]"),s("has additional properties",null,JSON.stringify(n+".")+" + "+c+"["+l+"]")):S(n+"["+c+"["+l+"]]",r.additionalProperties,i,o,a.concat(["additionalProperties"])),M("}")("}"),"object"===h)||M("}"),r.$ref&&(y=I(v,g&&g.schemas||{},r.$ref))&&((t=b[r.$ref])||(b[r.$ref]=function(e){return t(e)},t=R(y,b,v,!1,g)),u=A("ref"),x[u]=t,M("if (!(%s(%s))) {",u,n),s("referenced schema does not match"),M("}")),r.not&&(d=A("prev"),M("var %s = errors",d),S(n,r.not,!1,o,a.concat("not")),M("if (%s === errors) {",d),s("negative schema matches"),M("} else {")("errors = %s",d)("}")),r.items&&!m&&("array"!==h&&M("if (%s) {",$.array(n)),l=O(),M("for (var %s = 0; %s < %s.length; %s++) {",l,l,n,l),S(n+"["+l+"]",r.items,i,o,a.concat("items")),M("}"),"array"!==h)&&M("}"),r.patternProperties&&("object"!==h&&M("if (%s) {",$.object(n)),c=A("keys"),l=O(),M("var %s = Object.keys(%s)",c,n)("for (var %s = 0; %s < %s.length; %s++) {",l,l,c,l),Object.keys(r.patternProperties).forEach(function(e){var t=w(e);M("if (%s.test(%s)) {",t,c+"["+l+"]"),S(n+"["+c+"["+l+"]]",r.patternProperties[e],i,o,a.concat(["patternProperties",e])),M("}")}),M("}"),"object"!==h)&&M("}"),r.pattern&&(y=w(r.pattern),"string"!==h&&M("if (%s) {",$.string(n)),M("if (!(testLimitedRegex(%s, %s, %d))) {",y,n,void 0===r.maxLength?-1:r.maxLength),s("pattern mismatch"),M("}"),"string"!==h)&&M("}"),r.allOf&&r.allOf.forEach(function(e,t){S(n,e,i,o,a.concat(["allOf",t]))}),r.anyOf&&r.anyOf.length&&(d=A("prev"),r.anyOf.forEach(function(e,t){0===t?M("var %s = errors",d):M("if (errors !== %s) {",d)("errors = %s",d),S(n,e,!1,!1,a)}),r.anyOf.forEach(function(e,t){t&&M("}")}),M("if (%s !== errors) {",d),s("no schemas match"),M("}")),r.oneOf&&r.oneOf.length&&(d=A("prev"),f=A("passes"),M("var %s = errors",d)("var %s = 0",f),r.oneOf.forEach(function(e,t){S(n,e,!1,!1,a),M("if (%s === errors) {",d)("%s++",f)("} else {")("errors = %s",d)("}")}),M("if (%s !== 1) {",f),s("no (or more than one) schemas match"),M("}")),void 0!==r.multipleOf&&("number"!==h&&"integer"!==h&&M("if (%s) {",$.number(n)),M("if (!isMultipleOf(%s, %d)) {",n,r.multipleOf),s("has a remainder"),M("}"),"number"!==h)&&"integer"!==h&&M("}"),void 0!==r.maxProperties&&("object"!==h&&M("if (%s) {",$.object(n)),M("if (Object.keys(%s).length > %d) {",n,r.maxProperties),s("has more properties than allowed"),M("}"),"object"!==h)&&M("}"),void 0!==r.minProperties&&("object"!==h&&M("if (%s) {",$.object(n)),M("if (Object.keys(%s).length < %d) {",n,r.minProperties),s("has less properties than allowed"),M("}"),"object"!==h)&&M("}"),void 0!==r.maxItems&&("array"!==h&&M("if (%s) {",$.array(n)),M("if (%s.length > %d) {",n,r.maxItems),s("has more items than allowed"),M("}"),"array"!==h)&&M("}"),void 0!==r.minItems&&("array"!==h&&M("if (%s) {",$.array(n)),M("if (%s.length < %d) {",n,r.minItems),s("has less items than allowed"),M("}"),"array"!==h)&&M("}"),void 0!==r.maxLength&&("string"!==h&&M("if (%s) {",$.string(n)),M("if (%s.length > %d) {",n,r.maxLength),s("has longer length than allowed"),M("}"),"string"!==h)&&M("}"),void 0!==r.minLength&&("string"!==h&&M("if (%s) {",$.string(n)),M("if (%s.length < %d) {",n,r.minLength),s("has less length than allowed"),M("}"),"string"!==h)&&M("}"),void 0!==r.minimum&&("number"!==h&&"integer"!==h&&M("if (%s) {",$.number(n)),M("if (%s %s %d) {",n,r.exclusiveMinimum?"<=":"<",r.minimum),s("is less than minimum"),M("}"),"number"!==h)&&"integer"!==h&&M("}"),void 0!==r.maximum&&("number"!==h&&"integer"!==h&&M("if (%s) {",$.number(n)),M("if (%s %s %d) {",n,r.exclusiveMaximum?">=":">",r.maximum),s("is more than maximum"),M("}"),"number"!==h)&&"integer"!==h&&M("}"),p&&Object.keys(p).forEach(function(e){Array.isArray(h)&&-1!==h.indexOf("null")&&M("if (%s !== null) {",n),S(C(n,e),p[e],i,o,a.concat(m?e:["properties",e])),Array.isArray(h)&&-1!==h.indexOf("null")&&M("}")});e--;)M("}")}var E=g?d(k,g.formats):k,x={unique:a,formats:E,isMultipleOf:s,testLimitedRegex:u},P=!!g&&!!g.verbose,j=!(!g||void 0===g.greedy)&&g.greedy,r={},i=[],A=function(e){e+=r[e]=(r[e]||0)+1;return i.push(e),e},n={},o=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],M=c("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return S("data",e,t,g&&g.filter,[]),M("return errors === 0")("}"),(M=M.toFunction(x)).errors=null,Object.defineProperty&&Object.defineProperty(M,"error",{get:function(){return M.errors?M.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}}),M.toJSON=function(){return e},M}var C=e("generate-object-property"),c=e("generate-function"),l=e("jsonpointer"),d=e("xtend"),k=e("./formats"),$={any:function(){return"true"},null:function(e){return e+" === null"},boolean:function(e){return"typeof "+e+' === "boolean"'},array:function(e){return"Array.isArray("+e+")"},object:function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},number:function(e){return"typeof "+e+' === "number" && isFinite('+e+")"},integer:function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},string:function(e){return"typeof "+e+' === "string"'}};n.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),R(e,{},e,!0,t)},n.exports.filter=function(e,t){var r=n.exports(e,d(t,{filter:!0}));return function(e){return r(e),e}}},{"./formats":140,"generate-function":127,"generate-object-property":128,jsonpointer:146,xtend:890}],142:[function(e,t,r){"use strict";t.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},{}],143:[function(e,t,r){"use strict";var n,i,o,a,s,u=e("call-bind/callBound"),e=e("has-tostringtag/shams")(),c=(e&&(n=u("Object.prototype.hasOwnProperty"),i=u("RegExp.prototype.exec"),o={},s={toString:a=function(){throw o},valueOf:a},"symbol"==typeof Symbol.toPrimitive)&&(s[Symbol.toPrimitive]=a),u("Object.prototype.toString")),l=Object.getOwnPropertyDescriptor;t.exports=e?function(e){if(!e||"object"!=typeof e)return!1;var t=l(e,"lastIndex");if(!(t&&n(t,"value")))return!1;try{i(e,s)}catch(e){return e===o}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===c(e)}},{"call-bind/callBound":98,"has-tostringtag/shams":135}],144:[function(e,o,a){!function(i,N){!function(){var e,t,r,n;e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:this,t=function(){"use strict";function r(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return"+"==e?"-":"_"})}function e(e){for(var t,r,n,i="",o=e.length%3,a=0;a<e.length;){if(255<(t=e.charCodeAt(a++))||255<(r=e.charCodeAt(a++))||255<(n=e.charCodeAt(a++)))throw new TypeError("invalid character found");i+=O[(t=t<<16|r<<8|n)>>18&63]+O[t>>12&63]+O[t>>6&63]+O[63&t]}return o?i.slice(0,o-3)+"===".substring(o):i}function t(e,t){return(t=void 0===t?!1:t)?r(M(e)):M(e)}function n(e){var t;return e.length<2?(t=e.charCodeAt(0))<128?e:t<2048?x(192|t>>>6)+x(128|63&t):x(224|t>>>12&15)+x(128|t>>>6&63)+x(128|63&t):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),x(240|t>>>18&7)+x(128|t>>>12&63)+x(128|t>>>6&63)+x(128|63&t))}function i(e){return e.replace(I,n)}function o(e,t){return(t=void 0===t?!1:t)?r(R(e)):R(e)}function a(e){return o(e,!0)}function s(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return x(55296+(t>>>10))+x(56320+(1023&t));case 3:return x((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return x((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}}function u(e){return e.replace(C,s)}function c(e){if(e=e.replace(/\s+/g,""),!E.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,i="",o=0;o<e.length;)t=S[e.charAt(o++)]<<18|S[e.charAt(o++)]<<12|(r=S[e.charAt(o++)])<<6|(n=S[e.charAt(o++)]),i+=64===r?x(t>>16&255):64===n?x(t>>16&255,t>>8&255):x(t>>16&255,t>>8&255,255&t);return i}function l(e){return $(d(e))}function d(e){return j(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}))}function f(e){return T(d(e))}function p(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}}function h(){function e(e,t){Object.defineProperty(String.prototype,e,p(t))}e("fromBase64",function(){return f(this)}),e("toBase64",function(e){return o(this,e)}),e("toBase64URI",function(){return o(this,!0)}),e("toBase64URL",function(){return o(this,!0)}),e("toUint8Array",function(){return l(this)})}function m(){function e(e,t){Object.defineProperty(Uint8Array.prototype,e,p(t))}e("toBase64",function(e){return t(this,e)}),e("toBase64URI",function(){return t(this,!0)}),e("toBase64URL",function(){return t(this,!0)})}var y,b="function"==typeof atob,v="function"==typeof btoa,g="function"==typeof N,_="function"==typeof TextDecoder?new TextDecoder:void 0,w="function"==typeof TextEncoder?new TextEncoder:void 0,O=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),S=(y={},O.forEach(function(e,t){return y[e]=t}),y),E=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,x=String.fromCharCode.bind(String),P="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},j=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},A=v?function(e){return btoa(e)}:g?function(e){return N.from(e,"binary").toString("base64")}:e,M=g?function(e){return N.from(e).toString("base64")}:function(e){for(var t=[],r=0,n=e.length;r<n;r+=4096)t.push(x.apply(null,e.subarray(r,r+4096)));return A(t.join(""))},I=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,R=g?function(e){return N.from(e,"utf8").toString("base64")}:w?function(e){return M(w.encode(e))}:function(e){return A(i(e))},C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=b?function(e){return atob(j(e))}:g?function(e){return N.from(e,"base64").toString("binary")}:c,$=g?function(e){return P(N.from(e,"base64"))}:function(e){return P(k(e).split("").map(function(e){return e.charCodeAt(0)}))},T=g?function(e){return N.from(e,"base64").toString("utf8")}:_?function(e){return _.decode($(e))}:function(e){return u(k(e))},D={version:"3.7.5",VERSION:"3.7.5",atob:k,atobPolyfill:c,btoa:A,btoaPolyfill:e,fromBase64:f,toBase64:o,encode:o,encodeURI:a,encodeURL:a,utob:i,btou:u,decode:f,isValid:function(e){return"string"==typeof e&&(e=e.replace(/\s+/g,"").replace(/={0,2}$/,""),!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e))},fromUint8Array:t,toUint8Array:l,extendString:h,extendUint8Array:m,extendBuiltins:function(){h(),m()},Base64:{}};return Object.keys(D).forEach(function(e){return D.Base64[e]=D[e]}),D},"object"==typeof a&&void 0!==o?o.exports=t():"function"==typeof define&&define.amd?define(t):(r=e.Base64,(n=t()).noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:908}],145:[function(e,t,r){"use strict";var m=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,n,i,o,a,s,u,c,l){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var d in r(i,o,a,s,u,c,l),i){var f=i[d];if(Array.isArray(f)){if(d in m.arrayKeywords)for(var p=0;p<f.length;p++)e(t,r,n,f[p],o+"/"+d+"/"+p,a,o,d,i,p)}else if(d in m.propsKeywords){if(f&&"object"==typeof f)for(var h in f)e(t,r,n,f[h],o+"/"+d+"/"+y(h),a,o,d,i,h)}else(d in m.keywords||t.allKeys&&!(d in m.skipKeywords))&&e(t,r,n,f,o+"/"+d,a,o,d,i)}n(i,o,a,s,u,c,l)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function y(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}m.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},m.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},m.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},m.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],146:[function(e,t,r){var n=/~/,i=/~[01]/g;function o(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function c(e){return n.test(e)?e.replace(i,o):e}function l(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e}else if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function a(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=l(t)).length;if(1===r)return e;for(var n=1;n<r;){if(e=e[c(t[n++])],r===n)return e;if("object"!=typeof e||null===e)return}}function s(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=l(t)).length)throw new Error("Invalid JSON pointer for set.");for(var n,i,o=e,a=t,e=r,s=1,u=a.length;s<u;){if("constructor"===a[s]||"prototype"===a[s]||"__proto__"===a[s])return o;if(n=c(a[s++]),i=s<u,void 0===o[n]&&(Array.isArray(o)&&"-"===n&&(n=o.length),i)&&(""!==a[s]&&a[s]<1/0||"-"===a[s]?o[n]=[]:o[n]={}),!i)break;o=o[n]}t=o[n];return void 0===e?delete o[n]:o[n]=e,t}r.get=a,r.set=s,r.compile=function(e){var r=l(e);return{get:function(e){return a(e,r)},set:function(e,t){return s(e,r,t)}}}},{}],147:[function(e,t,r){"use strict";function o(t,e){return e.split(".").map(function(e){return a(t,e)}).join(".")}function i(e,t){if(t.startsWith(e.compressionFlag))throw new Error("cannot compress objects that start with the compression-flag: "+e.compressionFlag+" on key "+t)}function a(e,t){i(e,t);var r=t.split("["),n=(t=r.shift(),e.compressedToUncompressed.get(t));return n?(r=r.length?"["+r.join("["):"",e.compressionFlag+n+r):t}function s(r,n){var i;return Array.isArray(n)?n.map(function(e){return s(r,e)}):!(n instanceof RegExp)&&"object"==typeof n&&null!==n?(i={},Object.keys(n).forEach(function(e){var t=e.startsWith("$")?e:o(r,e);i[t]=s(r,n[e])}),i):n}Object.defineProperty(r,"__esModule",{value:!0}),r.compressQuerySelector=r.compressQuery=r.compressedAndFlaggedKey=r.throwErrorIfCompressionFlagUsed=r.compressedPath=r.compressObject=void 0,r.compressObject=function r(n,i){var o;return"object"!=typeof i||null===i?i:Array.isArray(i)?i.map(function(e){return r(n,e)}):(o={},Object.keys(i).forEach(function(e){var t=a(n,e),e=r(n,i[e]);o[t]=e}),o)},r.compressedPath=o,r.throwErrorIfCompressionFlagUsed=i,r.compressedAndFlaggedKey=a,r.compressQuery=function(n,r){var i,e={selector:s(n,r.selector)};return r.skip&&(e.skip=r.skip),r.limit&&(e.limit=r.limit),r.fields&&(e.fields=r.fields.map(function(e){return o(n,e)})),r.sort&&(Array.isArray(r.sort)?e.sort=r.sort.map(function(e){var t,r;return"string"==typeof e?((t=e.startsWith("-"))&&(e=e.substr(1)),r=o(n,e),t?"-"+r:r):s(n,e)}):(i={},Object.keys(r.sort).forEach(function(e){var t=r.sort[e],e=o(n,e);i[e]=t}),e.sort=i)),e},r.compressQuerySelector=s},{}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCompressedJsonSchema=void 0;var a=e("./util"),s=e("./compress");r.createCompressedJsonSchema=function r(n,i){var e,t,o;return"array"===i.type&&i.items?(t=(0,a.flatClone)(i),e=Array.isArray(i.items)?i.items.map(function(e){return r(n,e)}):r(n,i.items),t.items=e,t):"object"===i.type&&i.properties?(t=(0,a.flatClone)(i),o={},Object.keys(i.properties).forEach(function(e){var t=i.properties[e],e=(0,s.compressedPath)(n,e);o[e]=r(n,t)}),t.properties=o,t.required&&(t.required=t.required.map(function(e){return(0,s.compressedPath)(n,e)})),t):i}},{"./compress":147,"./util":152}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uncompressedToCompressedTable=n.compressedToUncompressedTable=n.getPropertiesOfSchema=n.createCompressionTable=n.DEFAULT_COMPRESSION_FLAG=void 0;var i=e("./util");function o(r){var n=new Set;function i(e){e=o(e);Array.from(e).forEach(function(e){return n.add(e)})}return r.properties&&Object.keys(r.properties).forEach(function(e){var t=r.properties[e];n.add(e),r.properties&&i(t)}),r.items&&(Array.isArray(r.items)?r.items.forEach(function(e){i(e)}):i(r.items)),n}function a(e,t){var e=o(e),e=Array.from(e).sort(i.alphabeticCompare),r=new Map,n=0;return e.filter(function(e){return 3<e.length&&!t.includes(e)}).forEach(function(e){var t=(0,i.numberToLetter)(n);n++,r.set(e,t)}),r}function s(r,n,i){var o=new Map;return Array.from(r.keys()).forEach(function(e){var t=r.get(e);i.includes(t)||o.set(n+t,e)}),o}n.DEFAULT_COMPRESSION_FLAG="|",n.createCompressionTable=function(e,t,r){return void 0===t&&(t=n.DEFAULT_COMPRESSION_FLAG),{compressedToUncompressed:e=a(e,r=void 0===r?[]:r),uncompressedToCompressed:s(e,t,r),compressionFlag:t}},n.getPropertiesOfSchema=o,n.compressedToUncompressedTable=a,n.uncompressedToCompressedTable=s},{"./util":152}],150:[function(e,t,r){"use strict";function a(e,t){var r=t.split("["),e=(t=r.shift(),e.uncompressedToCompressed.get(t));return e?e+(r.length?"["+r.join("["):""):t}Object.defineProperty(r,"__esModule",{value:!0}),r.decompressedKey=r.decompressedPath=r.decompressObject=void 0,r.decompressObject=function r(n,i){var o;return"object"!=typeof i||null===i?i:Array.isArray(i)?i.map(function(e){return r(n,e)}):(o={},Object.keys(i).forEach(function(e){var t=a(n,e),e=r(n,i[e]);o[t]=e}),o)},r.decompressedPath=function(t,e){return e.split(".").map(function(e){return a(t,e)}).join(".")},r.decompressedKey=a},{}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCompressedJsonSchema=r.decompressedPath=r.decompressObject=r.compressQuery=r.compressQuerySelector=r.compressedPath=r.compressObject=r.DEFAULT_COMPRESSION_FLAG=r.createCompressionTable=void 0;var n=e("./create-compression-table"),i=(Object.defineProperty(r,"createCompressionTable",{enumerable:!0,get:function(){return n.createCompressionTable}}),Object.defineProperty(r,"DEFAULT_COMPRESSION_FLAG",{enumerable:!0,get:function(){return n.DEFAULT_COMPRESSION_FLAG}}),e("./compress")),o=(Object.defineProperty(r,"compressObject",{enumerable:!0,get:function(){return i.compressObject}}),Object.defineProperty(r,"compressedPath",{enumerable:!0,get:function(){return i.compressedPath}}),Object.defineProperty(r,"compressQuerySelector",{enumerable:!0,get:function(){return i.compressQuerySelector}}),Object.defineProperty(r,"compressQuery",{enumerable:!0,get:function(){return i.compressQuery}}),e("./decompress")),a=(Object.defineProperty(r,"decompressObject",{enumerable:!0,get:function(){return o.decompressObject}}),Object.defineProperty(r,"decompressedPath",{enumerable:!0,get:function(){return o.decompressedPath}}),e("./create-compressed-json-schema"));Object.defineProperty(r,"createCompressedJsonSchema",{enumerable:!0,get:function(){return a.createCompressedJsonSchema}})},{"./compress":147,"./create-compressed-json-schema":148,"./create-compression-table":149,"./decompress":150}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flatClone=r.alphabeticCompare=r.numberToLetter=void 0;var n="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ123456789",i=n.length;r.numberToLetter=function(e){var t=[];do{}while(t.push(e%i),e=Math.floor(e/i),0<e--);return t.reverse().map(function(e){return n[e]}).join("")};r.alphabeticCompare=function(e,t){return e<t?-1:0},r.flatClone=function(e){return Object.assign({},e)}},{}],153:[function(e,F,t){!function(L){!function(){var n="__lodash_hash_undefined__",o=1/0,r="[object Function]",i="[object GeneratorFunction]",a="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,e="object"==typeof L&&L&&L.Object===Object&&L,t="object"==typeof self&&self&&self.Object===Object&&self,e=e||t||Function("return this")();var t=Array.prototype,p=Function.prototype,h=Object.prototype,m=e["__core-js_shared__"],y=(m=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",b=p.toString,v=h.hasOwnProperty,g=h.toString,_=RegExp("^"+b.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=e.Symbol,w=t.splice,O=R(e,"Map"),S=R(Object,"create"),p=m?m.prototype:void 0,E=p?p.toString:void 0;function x(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function P(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function j(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function M(e,t){for(var r,n=0,i=(t=function(e,t){if(k(e))return;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||D(e))return 1;return u.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:k(r=t)?r:N(r)).length;null!=e&&n<i;)e=e[function(e){if("string"==typeof e||D(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t[n++])];return n&&n==i?e:void 0}function T(e){var t;return $(e)&&(t=e,!(y&&y in t))&&(function(e){e=$(e)?g.call(e):"";return e==r||e==i}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:f).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function I(e,t){var r,n,e=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?e["string"==typeof t?"string":"hash"]:e.map}function R(e,t){t=t;e=null==(e=e)?void 0:e[t];return T(e)?e:void 0}x.prototype.clear=function(){this.__data__=S?S(null):{}},x.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},x.prototype.get=function(e){var t,r=this.__data__;return S?(t=r[e])===n?void 0:t:v.call(r,e)?r[e]:void 0},x.prototype.has=function(e){var t=this.__data__;return S?void 0!==t[e]:v.call(t,e)},x.prototype.set=function(e,t){return this.__data__[e]=S&&void 0===t?n:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__;return!((e=A(t,e))<0||(e==t.length-1?t.pop():w.call(t,e,1),0))},P.prototype.get=function(e){var t=this.__data__;return(e=A(t,e))<0?void 0:t[e][1]},P.prototype.has=function(e){return-1<A(this.__data__,e)},P.prototype.set=function(e,t){var r=this.__data__,n=A(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},j.prototype.clear=function(){this.__data__={hash:new x,map:new(O||P),string:new x}},j.prototype.delete=function(e){return I(this,e).delete(e)},j.prototype.get=function(e){return I(this,e).get(e)},j.prototype.has=function(e){return I(this,e).has(e)},j.prototype.set=function(e,t){return I(this,e).set(e,t),this};var N=C(function(e){e=null==(t=e)?"":function(e){var t;return"string"==typeof e?e:D(e)?E?E.call(e):"":"0"==(t=e+"")&&1/e==-o?"-0":t}(t);var t,i=[];return c.test(e)&&i.push(""),e.replace(l,function(e,t,r,n){i.push(r?n.replace(d,"$1"):t||e)}),i});function C(n,i){if("function"!=typeof n||i&&"function"!=typeof i)throw new TypeError("Expected a function");function o(){var e=arguments,t=i?i.apply(this,e):e[0],r=o.cache;return r.has(t)?r.get(t):(e=n.apply(this,e),o.cache=r.set(t,e),e)}return o.cache=new(C.Cache||j),o}C.Cache=j;var k=Array.isArray;function $(e){var t=typeof e;return e&&("object"==t||"function"==t)}function D(e){return"symbol"==typeof e||!!(t=e)&&"object"==typeof t&&g.call(e)==a;var t}F.exports=function(e,t,r){return void 0===(e=null==e?void 0:M(e,t))?r:e}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],154:[function(e,Le,Fe){!function(Ne){!function(){var n="__lodash_hash_undefined__",T=1,G=2,E=9007199254740991,N="[object Arguments]",L="[object Array]",x="[object AsyncFunction]",Z="[object Boolean]",Y="[object Date]",Q="[object Error]",P="[object Function]",j="[object GeneratorFunction]",F="[object Map]",J="[object Number]",A="[object Null]",B="[object Object]",M="[object Promise]",I="[object Proxy]",X="[object RegExp]",U="[object Set]",ee="[object String]",te="[object Symbol]",R="[object Undefined]",r="[object WeakMap]",re="[object ArrayBuffer]",z="[object DataView]",C=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,t={},e=(t["[object Float32Array]"]=t["[object Float64Array]"]=t["[object Int8Array]"]=t["[object Int16Array]"]=t["[object Int32Array]"]=t["[object Uint8Array]"]=t["[object Uint8ClampedArray]"]=t["[object Uint16Array]"]=t["[object Uint32Array]"]=!0,t[N]=t[L]=t[re]=t[Z]=t[z]=t[Y]=t[Q]=t[P]=t[F]=t[J]=t[B]=t[X]=t[U]=t[ee]=t[r]=!1,"object"==typeof Ne&&Ne&&Ne.Object===Object&&Ne),i="object"==typeof self&&self&&self.Object===Object&&self,i=e||i||Function("return this")(),o="object"==typeof Fe&&Fe&&!Fe.nodeType&&Fe,a=o&&"object"==typeof Le&&Le&&!Le.nodeType&&Le,a=a&&a.exports===o,s=a&&e.process,o=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}(),e=o&&o.isTypedArray;function ne(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}function ie(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var $,D,o=Array.prototype,u=Function.prototype,c=Object.prototype,l=i["__core-js_shared__"],oe=u.toString,W=c.hasOwnProperty,ae=(u=/[^.]+$/.exec(l&&l.keys&&l.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",se=c.toString,ue=RegExp("^"+oe.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),l=a?i.Buffer:void 0,u=i.Symbol,ce=i.Uint8Array,le=c.propertyIsEnumerable,de=o.splice,d=u?u.toStringTag:void 0,fe=Object.getOwnPropertySymbols,a=l?l.isBuffer:void 0,pe=($=Object.keys,D=Object,function(e){return $(D(e))}),o=O(i,"DataView"),f=O(i,"Map"),l=O(i,"Promise"),p=O(i,"Set"),i=O(i,"WeakMap"),h=O(Object,"create"),he=S(o),me=S(f),ye=S(l),be=S(p),ve=S(i),u=u?u.prototype:void 0,ge=u?u.valueOf:void 0;function m(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function b(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function v(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new b;++t<r;)this.add(e[t])}function q(e){e=this.__data__=new y(e);this.size=e.size}function _e(e,t){var r,n,i,o=V(e),a=!o&&Me(e),s=!o&&!a&&Ie(e),u=!o&&!a&&!s&&De(e),c=o||a||s||u,l=c?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],d=l.length;for(r in e)!t&&!W.call(e,r)||c&&("length"==r||s&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(n=r,(i=null==(i=d)?E:i)&&("number"==typeof n||k.test(n))&&-1<n&&n%1==0&&n<i))||l.push(r);return l}function g(e,t){for(var r=e.length;r--;)if(Ae(e[r][0],t))return r;return-1}function _(e){if(null==e)return void 0===e?R:A;if(d&&d in Object(e)){var t=e,r=W.call(t,d),n=t[d];try{var i=!(t[d]=void 0)}catch(e){}var o=se.call(t);return i&&(r?t[d]=n:delete t[d]),o}return se.call(e)}function we(e){return H(e)&&_(e)==N}function Oe(e,t,r,n,i){if(e===t)return!0;if(null==e||null==t||!H(e)&&!H(t))return e!=e&&t!=t;var o=Oe,a=V(e),s=V(t),u=a?L:K(e),s=s?L:K(t),c=(u=u==N?B:u)==B,l=(s=s==N?B:s)==B;if((s=u==s)&&Ie(e)){if(!Ie(t))return!1;c=!(a=!0)}if(s&&!c){i=i||new q;if(a||De(e))return xe(e,t,r,n,o,i);else{var d=e;var f=t;var p=u;var h=r;var m=n;var y=o;var b=i;switch(p){case z:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case re:return d.byteLength==f.byteLength&&y(new ce(d),new ce(f))?!0:!1;case Z:case Y:case J:return Ae(+d,+f);case Q:return d.name==f.name&&d.message==f.message;case X:case ee:return d==f+"";case F:var v=ne;case U:var g=h&T;if(v=v||ie,d.size!=f.size&&!g)return!1;g=b.get(d);if(g)return g==f;h|=G,b.set(d,f);g=xe(v(d),v(f),h,m,y,b);return b.delete(d),g;case te:if(ge)return ge.call(d)==ge.call(f)}return!1;return}}if(!(r&T)){var a=c&&W.call(e,"__wrapped__"),u=l&&W.call(t,"__wrapped__");if(a||u)return c=a?e.value():e,l=u?t.value():t,i=i||new q,o(c,l,r,n,i)}if(s){i=i||new q;var _=e,w=t,O=r,S=n,E=o,x=i,P=O&T,j=Pe(_),A=j.length,a=Pe(w).length;if(A!=a&&!P)return!1;for(var M=A;M--;){var I=j[M];if(!(P?I in w:W.call(w,I)))return!1}if((a=x.get(_))&&x.get(w))return a==w;for(var R=!0,C=(x.set(_,w),x.set(w,_),P);++M<A;){I=j[M];var k,$=_[I],D=w[I];if(!(void 0===(k=S?P?S(D,$,I,w,_,x):S($,D,I,_,w,x):k)?$===D||E($,D,O,S,x):k)){R=!1;break}C=C||"constructor"==I}return R&&!C&&(a=_.constructor,u=w.constructor,a!=u)&&"constructor"in _&&"constructor"in w&&!("function"==typeof a&&a instanceof a&&"function"==typeof u&&u instanceof u)&&(R=!1),x.delete(_),x.delete(w),R}return!1}function Se(e){var t;return ke(e)&&(t=e,!(ae&&ae in t))&&(Re(e)?ue:C).test(S(e))}function Ee(e){if(r="function"==typeof(r=(t=e)&&t.constructor)&&r.prototype||c,t!==r)return pe(e);var t,r,n,i=[];for(n in Object(e))W.call(e,n)&&"constructor"!=n&&i.push(n);return i}function xe(e,t,r,n,i,o){var a=r&T,s=e.length,u=t.length;if(s!=u&&!(a&&s<u))return!1;u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,l=!0,d=r&G?new v:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var f,p=e[c],h=t[c];if(void 0!==(f=n?a?n(h,p,c,t,e,o):n(p,h,c,e,t,o):f)){if(f)continue;l=!1;break}if(d){if(!function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return 1}(t,function(e,t){return!d.has(t)&&(p===e||i(p,e,r,n,o))&&d.push(t)})){l=!1;break}}else if(p!==h&&!i(p,h,r,n,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function Pe(e){var t=Te,r=je;if(t=t(e),V(e))return t;for(var n=t,i=r(e),o=-1,a=i.length,s=n.length;++o<a;)n[s+o]=i[o];return n}function w(e,t){var r,n,e=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?e["string"==typeof t?"string":"hash"]:e.map}function O(e,t){t=t;e=null==(e=e)?void 0:e[t];return Se(e)?e:void 0}m.prototype.clear=function(){this.__data__=h?h(null):{},this.size=0},m.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},m.prototype.get=function(e){var t,r=this.__data__;return h?(t=r[e])===n?void 0:t:W.call(r,e)?r[e]:void 0},m.prototype.has=function(e){var t=this.__data__;return h?void 0!==t[e]:W.call(t,e)},m.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=h&&void 0===t?n:t,this},y.prototype.clear=function(){this.__data__=[],this.size=0},y.prototype.delete=function(e){var t=this.__data__;return!((e=g(t,e))<0||(e==t.length-1?t.pop():de.call(t,e,1),--this.size,0))},y.prototype.get=function(e){var t=this.__data__;return(e=g(t,e))<0?void 0:t[e][1]},y.prototype.has=function(e){return-1<g(this.__data__,e)},y.prototype.set=function(e,t){var r=this.__data__,n=g(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},b.prototype.clear=function(){this.size=0,this.__data__={hash:new m,map:new(f||y),string:new m}},b.prototype.delete=function(e){return e=w(this,e).delete(e),this.size-=e?1:0,e},b.prototype.get=function(e){return w(this,e).get(e)},b.prototype.has=function(e){return w(this,e).has(e)},b.prototype.set=function(e,t){var r=w(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},v.prototype.add=v.prototype.push=function(e){return this.__data__.set(e,n),this},v.prototype.has=function(e){return this.__data__.has(e)},q.prototype.clear=function(){this.__data__=new y,this.size=0},q.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},q.prototype.get=function(e){return this.__data__.get(e)},q.prototype.has=function(e){return this.__data__.has(e)},q.prototype.set=function(e,t){var r=this.__data__;if(r instanceof y){var n=r.__data__;if(!f||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new b(n)}return r.set(e,t),this.size=r.size,this};var je=fe?function(t){if(null==t)return[];t=Object(t);for(var e=fe(t),r=function(e){return le.call(t,e)},n=-1,i=null==e?0:e.length,o=0,a=[];++n<i;){var s=e[n];r(s,n,e)&&(a[o++]=s)}return a}:function(){return[]},K=_;function S(e){if(null!=e){try{return oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ae(e,t){return e===t||e!=e&&t!=t}(o&&K(new o(new ArrayBuffer(1)))!=z||f&&K(new f)!=F||l&&K(l.resolve())!=M||p&&K(new p)!=U||i&&K(new i)!=r)&&(K=function(e){var t=_(e),e=t==B?e.constructor:void 0,e=e?S(e):"";if(e)switch(e){case he:return z;case me:return F;case ye:return M;case be:return U;case ve:return r}return t});var Me=we(function(){return arguments}())?we:function(e){return H(e)&&W.call(e,"callee")&&!le.call(e,"callee")},V=Array.isArray;var Ie=a||function(){return!1};function Re(e){if(ke(e))return(e=_(e))==P||e==j||e==x||e==I}function Ce(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=E}function ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function H(e){return null!=e&&"object"==typeof e}var $e,De=e?($e=e,function(e){return $e(e)}):function(e){return H(e)&&Ce(e.length)&&!!t[_(e)]};function Te(e){return(null!=(t=e)&&Ce(t.length)&&!Re(t)?_e:Ee)(e);var t}Le.exports=function(e,t){return Oe(e,t)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],155:[function(e,t,r){var n,i;n=this,i=function(){"use strict";var b="undefined"!=typeof window&&!!window.__loki_incremental_idb_debug;function e(e){if(this.mode="incremental",this.options=e||{},this.chunkSize=100,this.megachunkCount=this.options.megachunkCount||20,this.idb=null,this._prevLokiVersionId=null,this._prevCollectionVersionIds={},!(4<=this.megachunkCount&&this.megachunkCount%2==0))throw new Error("megachunkCount must be >=4 and divisible by 2")}function d(e,t){var r;e.value=JSON.parse(e.value),t&&3===(r=e.key.split(".")).length&&"chunk"===r[1]&&(r=r[0],e.value=t(r,e.value))}function v(){return Math.random().toString(36).substring(2)}function r(e){e=e.key;if(e.includes(".")){e=e.split(".");if(3===e.length&&"chunk"===e[1])return parseInt(e[2],10)}return-1}function i(e){e.sort(function(e,t){e=r(e),t=r(t);return e<t?-1:t<e?1:0})}function f(e,t,r){e.onsuccess=function(e){try{return t(e)}catch(e){r(e)}},e.onerror=r}return e.prototype._getChunk=function(e,t){for(var r,n=t*this.chunkSize,i=n+this.chunkSize-1,o=(e.ensureId(),e.idIndex),a=null,s=o.length-1,u=0;o[u]<o[s];)o[r=u+s>>1]<n?u=1+r:s=r;if(null===(a=s===u&&o[u]>=n&&o[u]<=i?u:a))return[];for(var c=null,l=a+this.chunkSize-1;a<=l;l--)if(o[l]<=i){c=l;break}t=e.data[a];if(!(t&&t.$loki>=n&&t.$loki<=i))throw new Error("broken invariant firstelement");t=e.data[c];if(!(t&&t.$loki>=n&&t.$loki<=i))throw new Error("broken invariant lastElement");t=e.data.slice(a,c+1);if(t.length>this.chunkSize)throw new Error("broken invariant - chunk size");return t},e.prototype.saveDatabase=function(e,n,t){var i=this;if(this.idb){if(this.operationInProgress)throw new Error("Error while saving to database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0,b&&console.log("saveDatabase - begin"),b&&console.time("saveDatabase");try{var o=function(){console.error("Unexpected successful tx - cannot update previous version ids")},r=!1,a=this.idb.transaction(["LokiIncrementalData"],"readwrite"),s=(a.oncomplete=function(){o(),l(),r&&i.options.onDidOverwrite&&i.options.onDidOverwrite()},a.onerror=function(e){l(e)},a.onabort=function(e){l(e)},a.objectStore("LokiIncrementalData")),u=function(e){try{var t=!e,r=i._putInChunks(s,n(),t,e);o=function(){i._prevLokiVersionId=r.lokiVersionId,r.collectionVersionIds.forEach(function(e){i._prevCollectionVersionIds[e.name]=e.versionId})},a.commit&&a.commit()}catch(e){console.error("idb performSave failed: ",e),a.abort()}},c=function(){f(s.getAllKeys(),function(e){var n;e=e.target.result,n={},e.forEach(function(e){var t,r,e=e.split(".");3===e.length&&"chunk"===e[1]&&(t=e[0],e=parseInt(e[2])||0,!(r=n[t])||r<e)&&(n[t]=e)}),u(n)},function(e){console.error("Getting all keys failed: ",e),a.abort()})};f(s.get("loki"),function(e){(function(e){try{return e&&JSON.parse(e.value).idbVersionId||null}catch(e){return console.error("Error while parsing loki chunk",e),null}}(e.target.result)===i._prevLokiVersionId?u:(b&&console.warn("Another writer changed Loki IDB, using slow path..."),r=!0,c))()},function(e){console.error("Getting loki chunk failed: ",e),a.abort()})}catch(e){l(e)}}else this._initializeIDB(e,t,function(){i.saveDatabase(e,n,t)});function l(e){b&&e&&console.error(e),b&&console.timeEnd("saveDatabase"),i.operationInProgress=!1,t(e)}},e.prototype._putInChunks=function(l,d,f,p){var h=this,m=[],y=0,e=(d.collections.forEach(function(r,e){function t(e){var t=h._getChunk(r,e);h.options.serializeChunk&&(t=h.options.serializeChunk(r.name,t)),t=JSON.stringify(t),y+=t.length,b&&f&&console.log("Saving: "+r.name+".chunk."+e),l.put({key:r.name+".chunk."+e,value:t})}var n,i=new Set;f&&r.dirtyIds.forEach(function(e){e=e/h.chunkSize|0;i.add(e)}),r.dirtyIds=[];if(f)i.forEach(t);else{for(var o=r.maxId/h.chunkSize|0,a=0;a<=o;a+=1)t(a);for(var s=p[r.name]||0,u=1+o;u<=s;u+=1){var c=r.name+".chunk."+u;l.delete(c),b&&console.warn("Deleted chunk: "+c)}}!r.dirty&&!i.size&&f||(r.idIndex=[],r.data=[],r.idbVersionId=v(),m.push({name:r.name,versionId:r.idbVersionId}),n=JSON.stringify(r),y+=n.length,b&&f&&console.log("Saving: "+r.name+".metadata"),l.put({key:r.name+".metadata",value:n})),d.collections[e]={name:r.name}}),d.idbVersionId=v(),JSON.stringify(d));return y+=e.length,b&&f&&console.log("Saving: loki"),l.put({key:"loki",value:e}),b&&console.log("saved size: "+y),{lokiVersionId:d.idbVersionId,collectionVersionIds:m}},e.prototype.loadDatabase=function(e,t){var r=this;if(this.operationInProgress)throw new Error("Error while loading database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0,b&&console.log("loadDatabase - begin"),b&&console.time("loadDatabase");function n(e){b&&console.timeEnd("loadDatabase"),r.operationInProgress=!1,t(e)}this._getAllChunks(e,function(e){try{if(!Array.isArray(e))throw e;if(!e.length)return n(null);b&&console.log("Found chunks:",e.length);var t=(e=function(e){var a,s={};if(i(e),e.forEach(function(e){var t=e.key;var r=e.value;if(t==="loki"){a=r;return}else if(t.includes(".")){var n=t.split(".");if(n.length===3&&n[1]==="chunk"){var i=n[0];if(s[i])s[i].dataChunks.push(r);else s[i]={metadata:null,dataChunks:[r]};return}else if(n.length===2&&n[1]==="metadata"){var o=n[0];if(s[o])s[o].metadata=r;else s[o]={metadata:r,dataChunks:[]};return}}console.error("Unknown chunk "+t);throw new Error("Corrupted database - unknown chunk found")}),a)return{loki:a,chunkMap:s};throw new Error("Corrupted database - missing database metadata")}(e)).loki;return e.loki=null,o=t,a=e.chunkMap,o.collections.forEach(function(e,t){var r=a[e.name];if(r){if(!r.metadata)throw new Error("Corrupted database - missing metadata chunk for "+e.name);var n=r.metadata,i=(r.metadata=null,o.collections[t]=n,r.dataChunks);i.forEach(function(e,t){e.forEach(function(e){n.data.push(e)}),i[t]=null})}}),e=null,r._prevLokiVersionId=t.idbVersionId||null,r._prevCollectionVersionIds={},t.collections.forEach(function(e){r._prevCollectionVersionIds[e.name]=e.idbVersionId||null}),n(t)}catch(e){return r._prevLokiVersionId=null,r._prevCollectionVersionIds={},n(e)}var o,a})},e.prototype._initializeIDB=function(r,n,i){var o=this;if(b&&console.log("initializing idb"),this.idbInitInProgress)throw new Error("Cannot open IndexedDB because open is already in progress");this.idbInitInProgress=!0;var e=indexedDB.open(r,1);e.onupgradeneeded=function(e){var t=e.target.result;if(b&&console.log("onupgradeneeded, old version: "+e.oldVersion),!(e.oldVersion<1))throw new Error("Invalid old version "+e.oldVersion+" for IndexedDB upgrade");t.createObjectStore("LokiIncrementalData",{keyPath:"key"})},e.onsuccess=function(e){o.idbInitInProgress=!1;var t=e.target.result;(o.idb=t).objectStoreNames.contains("LokiIncrementalData")?(b&&console.log("init success"),t.onversionchange=function(e){o.idb===t&&(b&&console.log("IDB version change",e),o.idb.close(),o.idb=null,o.options.onversionchange)&&o.options.onversionchange(e)},i()):(n(new Error("Missing LokiIncrementalData")),o.deleteDatabase(r))},e.onblocked=function(e){console.error("IndexedDB open is blocked",e),n(new Error("IndexedDB open is blocked by open connection"))},e.onerror=function(e){o.idbInitInProgress=!1,console.error("IndexedDB open error",e),n(e)}},e.prototype._getAllChunks=function(e,s){var u,c,l=this;function t(e){var n=l.megachunkCount,r=function(e,t){for(var r,n,i=Math.floor(e.length/t),o=[],a=0;a<t;a+=1)r=e[i*a],n=e[i*(a+1)],o.push(0===a?IDBKeyRange.upperBound(n,!0):a===t-1?IDBKeyRange.lowerBound(r):IDBKeyRange.bound(r,n,!1,!0));return o}(e,n),i=[],o=0;function a(t){var e=r[t];f(u.getAll(e),function(e){var r;t<n/2&&a(t+n/2),(r=e.target.result).forEach(function(e,t){d(e,c),i.push(e),r[t]=null}),(o+=1)===n&&s(i)},function(e){s(e)})}for(var t=0;t<n/2;t+=1)a(t)}this.idb?(u=this.idb.transaction(["LokiIncrementalData"],"readonly").objectStore("LokiIncrementalData"),c=this.options.deserializeChunk,f(u.getAllKeys(),function(e){e=e.target.result.sort();100<e.length?t(e):f(u.getAll(),function(e){e=e.target.result;e.forEach(function(e){d(e,c)}),s(e)},function(e){s(e)})},function(e){s(e)}),l.options.onFetchStart&&l.options.onFetchStart()):this._initializeIDB(e,s,function(){l._getAllChunks(e,s)})},e.prototype.deleteDatabase=function(e,t){if(this.operationInProgress)throw new Error("Error while deleting database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0;var r=this,e=(b&&console.log("deleteDatabase - begin"),b&&console.time("deleteDatabase"),this._prevLokiVersionId=null,this._prevCollectionVersionIds={},this.idb&&(this.idb.close(),this.idb=null),indexedDB.deleteDatabase(e));e.onsuccess=function(){r.operationInProgress=!1,b&&console.timeEnd("deleteDatabase"),t({success:!0})},e.onerror=function(e){r.operationInProgress=!1,console.error("Error while deleting database",e),t({success:!1})},e.onblocked=function(e){console.error("Deleting database failed because it's blocked by another connection",e)}},e},"function"==typeof define&&define.amd?define([],i):"object"==typeof r?t.exports=i():n.IncrementalIndexedDBAdapter=i()},{}],156:[function(e,t,r){var n,i;n=this,i=function(){return e.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},e.prototype.checkAvailability=function(){return!("undefined"==typeof indexedDB||!indexedDB)},e.prototype.loadKey=e.prototype.loadDatabase=function(t,r){var e=this.app,n=this;null===this.catalog||null===this.catalog.db?this.catalog=new a(function(e){n.catalog=e,n.loadDatabase(t,r)}):this.catalog.getAppKey(e,t,function(e){"function"==typeof r?0===e.id?r(null):r(e.val):console.log(e.val)})},e.prototype.saveKey=e.prototype.saveDatabase=function(t,r,n){var e=this.app,i=this;function o(e){e&&!0===e.success?n(null):n(new Error("Error saving database")),i.options.closeAfterSave&&i.closeDatabase()}null===this.catalog||null===this.catalog.db?this.catalog=new a(function(e){i.saveDatabase(t,r,o)}):this.catalog.setAppKey(e,t,r,o)},e.prototype.deleteKey=e.prototype.deleteDatabase=function(t,r){var e=this.app,n=this;null===this.catalog||null===this.catalog.db?this.catalog=new a(function(e){n.catalog=e,n.deleteDatabase(t,r)}):this.catalog.getAppKey(e,t,function(e){e=e.id;0!==e?n.catalog.deleteAppKey(e,r):"function"==typeof r&&r({success:!0})})},e.prototype.deleteDatabasePartitions=function(t){var r=this;this.getDatabaseList(function(e){e.forEach(function(e){e.startsWith(t)&&r.deleteDatabase(e)})})},e.prototype.getKeyList=e.prototype.getDatabaseList=function(n){var e=this.app,t=this;null===this.catalog||null===this.catalog.db?this.catalog=new a(function(e){t.catalog=e,t.getDatabaseList(n)}):this.catalog.getAppKeys(e,function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].key);"function"==typeof n?n(t):t.forEach(function(e){console.log(e)})})},e.prototype.getCatalogSummary=function(s){this.app;var t=this;null===this.catalog||null===this.catalog.db?this.catalog=new a(function(e){t.catalog=e,t.getCatalogSummary(s)}):this.catalog.getAllKeys(function(e){for(var t,r,n,i,o=[],a=0;a<e.length;a++)r=(t=e[a]).app||"",n=t.key||"",i=t.val||"",r=2*r.length+2*n.length+i.length+1,o.push({app:t.app,key:t.key,size:r});"function"==typeof s?s(o):o.forEach(function(e){console.log(e)})})},a.prototype.initializeLokiCatalog=function(t){var e=indexedDB.open("LokiCatalog",1),r=this;e.onupgradeneeded=function(e){var e=e.target.result;e.objectStoreNames.contains("LokiAKV")&&e.deleteObjectStore("LokiAKV"),e.objectStoreNames.contains("LokiAKV")||((e=e.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0})).createIndex("app","app",{unique:!1}),e.createIndex("key","key",{unique:!1}),e.createIndex("appkey","appkey",{unique:!0}))},e.onsuccess=function(e){r.db=e.target.result,"function"==typeof t&&t(r)},e.onerror=function(e){throw e}},a.prototype.getAppKey=function(e,t,r){var n,i,e=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").index("appkey").get(e+","+t);e.onsuccess=(n=r,function(e){e=e.target.result;null==e&&(e={id:0,success:!1}),"function"==typeof n?n(e):console.log(e)}),e.onerror=(i=r,function(e){if("function"!=typeof i)throw e;i({id:0,success:!1})})},a.prototype.getAppKeyById=function(e,t,r){var n,i;this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").get(e).onsuccess=(n=r,i=t,function(e){"function"==typeof i?i(e.target.result,n):console.log(e.target.result)})},a.prototype.setAppKey=function(n,i,o,a){var t,s=this.db.transaction(["LokiAKV"],"readwrite").objectStore("LokiAKV"),u=s.index("appkey").get(n+","+i);u.onsuccess=function(e){var t,r,e=e.target.result,e=(null==e?e={app:n,key:i,appkey:n+","+i,val:o}:e.val=o,s.put(e));e.onerror=(t=a,function(e){"function"==typeof t?t({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(u.error))}),e.onsuccess=(r=a,function(e){"function"==typeof r&&r({success:!0})})},u.onerror=(t=a,function(e){"function"==typeof t?t({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(u.error))})},a.prototype.deleteAppKey=function(e,t){var r,n,i=this.db.transaction(["LokiAKV"],"readwrite").objectStore("LokiAKV").delete(e);i.onsuccess=(r=t,function(e){"function"==typeof r&&r({success:!0})}),i.onerror=(n=t,function(e){"function"==typeof n?n({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(i.error))})},a.prototype.getAppKeys=function(e,t){var r,n,i,o=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").index("app"),e=IDBKeyRange.only(e),o=o.openCursor(e);o.onsuccess=(r=[],n=t,function(e){var t,e=e.target.result;e?(t=e.value,r.push(t),e.continue()):"function"==typeof n?n(r):console.log(r)}),o.onerror=(i=t,function(e){"function"==typeof i?i(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(e))})},a.prototype.getAllKeys=function(e){var r,n,t,i=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").openCursor();i.onsuccess=(r=[],n=e,function(e){var t,e=e.target.result;e?(t=e.value,r.push(t),e.continue()):"function"==typeof n?n(r):console.log(r)}),i.onerror=(t=e,function(e){"function"==typeof t&&t(null)})},e;function e(e,t){if(this.app="loki",this.options=t||{},void 0!==e&&(this.app=e),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}function a(e){this.db=null,this.initializeLokiCatalog(e)}},"function"==typeof define&&define.amd?define([],i):"object"==typeof r?t.exports=i():n.LokiIndexedAdapter=i()},{}],157:[function(F,r,n){!function(N,L){!function(){var e,t;e=this,t=function(){"use strict";var O=Object.prototype.hasOwnProperty;function p(e){var t,r;if(Array.isArray(e)){for(r=0;r<e.length;r++)p(e[r]);a(e)}else if(null!==e&&"object"==typeof e){for(t in e)e.hasOwnProperty(t)&&p(e[t]);a(e)}}function a(e){Object.isFrozen(e)||Object.freeze(e)}function s(e){return Object.isFrozen(e)?f(e,"shallow"):e}var S={copyProperties:function(e,t){for(var r in e)t[r]=e[r]},resolveTransformObject:function(e,t,r){var n,i;if("number"!=typeof r&&(r=0),!(10<=++r))for(n in e)"string"==typeof e[n]&&0===e[n].indexOf("[%lktxp]")?(i=e[n].substring(8),t.hasOwnProperty(i)&&(e[n]=t[i])):"object"==typeof e[n]&&(e[n]=S.resolveTransformObject(e[n],t,r));return e},resolveTransformParams:function(e,t){var r,n,i=[];if(void 0===t)return e;for(r=0;r<e.length;r++)n=f(e[r],"shallow-recurse-objects"),i.push(S.resolveTransformObject(n,t));return i},getIn:function(e,t,r){if(null!=e){if(!r)return e[t];if("string"==typeof t&&(t=t.split(".")),!Array.isArray(t))throw new Error("path must be a string or array. Found "+typeof t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[t[n++]];return n&&n==i?e:void 0}}},v={aeq:e,lt:t,gt:r};function e(e,t){var r,n,i,o;if(e===t)return!0;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:i=1;break;case!1:i=3;break;case!0:i=4;break;case"":i=5;break;default:i=e==e?9:0}switch(t){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=t==t?9:0}if(9!==i||9!==o)return i===o}return r=Number(e),n=Number(t),r==r||n==n?r===n:e.toString()==t.toString()}function t(e,t,r){var n,i,o,a;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}switch(t){case void 0:case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=t==t?9:0}if(9!==o||9!==a)return o===a?r:o<a}return n=Number(e),i=Number(t),n==n&&i==i?n<i||!(i<n)&&r:n==n&&i!=i||(i!=i||n==n)&&(e<t||!(t<e)&&(e==t?r:(n=e.toString())<(i=t.toString())||n==i&&r))}function r(e,t,r){var n,i,o,a;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}switch(t){case void 0:case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=t==t?9:0}if(9!==o||9!==a)return o===a?r:a<o}return n=Number(e),i=Number(t),n==n&&i==i?i<n||!(n<i)&&r:(n!=n||i==i)&&(i==i&&n!=n||t<e||!(e<t)&&(e==t?r:(n=e.toString(),(i=t.toString())<n||n==i&&r)))}function h(e,t,r){return v.aeq(e,t)?0:v.lt(e,t,!1)?r?1:-1:v.gt(e,t,!1)?r?-1:1:0}function E(e,t,r,n,i,o){var a,s=o||0,o=t[s],u=!1;if("object"==typeof e&&o in e&&(a=e[o]),s+1>=t.length)u=r(a,n,i);else if(Array.isArray(a))for(var c=0,l=a.length;c<l&&!0!==(u=E(a[c],t,r,n,i,s+1));c+=1);else u=E(a,t,r,n,i,s+1);return u}function n(t){return"string"==typeof t||Array.isArray(t)?function(e){return-1!==t.indexOf(e)}:"object"==typeof t&&null!==t?function(e){return O.call(t,e)}:null}function o(e,t,r){for(var n in t)if(O.call(t,n))return x[n](e,t[n],r);return!1}var x={$eq:function(e,t){return e===t},$aeq:function(e,t){return e==t},$ne:function(e,t){return t!=t?e==e:e!==t},$dteq:function(e,t){return v.aeq(e,t)},$gt:function(e,t){return v.gt(e,t,!1)},$gte:function(e,t){return v.gt(e,t,!0)},$lt:function(e,t){return v.lt(e,t,!1)},$lte:function(e,t){return v.lt(e,t,!0)},$jgt:function(e,t){return t<e},$jgte:function(e,t){return t<=e},$jlt:function(e,t){return e<t},$jlte:function(e,t){return e<=t},$between:function(e,t){return null!=e&&v.gt(e,t[0],!0)&&v.lt(e,t[1],!0)},$jbetween:function(e,t){return null!=e&&e>=t[0]&&e<=t[1]},$in:function(e,t){return-1!==t.indexOf(e)},$inSet:function(e,t){return t.has(e)},$nin:function(e,t){return-1===t.indexOf(e)},$keyin:function(e,t){return e in t},$nkeyin:function(e,t){return!(e in t)},$definedin:function(e,t){return void 0!==t[e]},$undefinedin:function(e,t){return void 0===t[e]},$regex:function(e,t){return t.test(e)},$containsString:function(e,t){return"string"==typeof e&&-1!==e.indexOf(t)},$containsNone:function(e,t){return!x.$containsAny(e,t)},$containsAny:function(e,t){e=n(e);return null!==e&&(Array.isArray(t)?t.some(e):e(t))},$contains:function(e,t){e=n(e);return null!==e&&(Array.isArray(t)?t.every(e):e(t))},$elemMatch:function(e,n){return!!Array.isArray(e)&&e.some(function(r){return Object.keys(n).every(function(e){var t=n[e];return"object"==typeof t&&t||(t={$eq:t}),-1!==e.indexOf(".")?E(r,e.split("."),o,n[e],r):o(r[e],t,r)})})},$type:function(e,t,r){var n=typeof e;return"object"===n&&(Array.isArray(e)?n="array":e instanceof Date&&(n="date")),"object"!=typeof t?n===t:o(n,t,r)},$finite:function(e,t){return t===isFinite(e)},$size:function(e,t,r){return!!Array.isArray(e)&&("object"!=typeof t?e.length===t:o(e.length,t,r))},$len:function(e,t,r){return"string"==typeof e&&("object"!=typeof t?e.length===t:o(e.length,t,r))},$where:function(e,t){return!0===t(e)},$not:function(e,t,r){return!o(e,t,r)},$and:function(e,t,r){for(var n=0,i=t.length;n<i;n+=1)if(!o(e,t[n],r))return!1;return!0},$or:function(e,t,r){for(var n=0,i=t.length;n<i;n+=1)if(o(e,t[n],r))return!0;return!1},$exists:function(e,t){return t?void 0!==e:void 0===e}},P=(["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"].forEach(function(e){var n=x[e];x["$"+e]=function(e,t,r){if("string"==typeof t)return n(e,r[t]);if("function"==typeof t)return n(e,t(r));throw new Error("Invalid argument to $$ matcher")}}),{$eq:x.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0});function f(t,e){if(null==t)return null;switch(e||"parse-stringify"){case"parse-stringify":r=JSON.parse(JSON.stringify(t));break;case"jquery-extend-deep":r=jQuery.extend(!0,{},t);break;case"shallow":r=Object.create(t.constructor.prototype),Object.keys(t).map(function(e){r[e]=t[e]});break;case"shallow-assign":r=Object.create(t.constructor.prototype),Object.assign(r,t);break;case"shallow-recurse-objects":var r=f(t,"shallow");Object.keys(t).forEach(function(e){"object"==typeof t[e]&&"Object"===t[e].constructor.name?r[e]=f(t[e],"shallow-recurse-objects"):Array.isArray(t[e])&&(r[e]=function(e,t){if("parse-stringify"==t)return f(e,t);for(var r=[],n=0,i=e.length;n<i;n++)r[n]=f(e[n],t);return r}(t[e],"shallow-recurse-objects"))})}return r}function i(){try{return window&&void 0!==window.localStorage&&null!==window.localStorage}catch(e){}}function u(){}function c(e,t){this.filename=e||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=!(!t||!t.hasOwnProperty("verbose"))&&t.verbose,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};t&&t.hasOwnProperty("env")?this.ENV=t.env:this.ENV=void 0!==L&&(L.android||L.NSObject)?"NATIVESCRIPT":"undefined"==typeof window||void 0!==L&&L.window&&void 0!==N?"NODEJS":"undefined"==typeof document||-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER","undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(t,!0),this.on("init",this.clearChanges)}function l(e){this.hashStore={},this.options=e||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}function d(e,t){if(this.mode="reference",this.adapter=null,this.options=t||{},this.dbref=null,this.dbname="",this.pageIterator={},!e)throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");if("reference"===e.mode)throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=e,this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=26214400),this.options.hasOwnProperty("delimiter")||(this.options.delimiter="$<\n")}function m(){try{this.fs=F("fs")}catch(e){this.fs=null}}function y(){}function b(e,t){return this.collection=e,this.filteredrows=[],this.filterInitialized=!1,this}function g(e,t,r){this.collection=e,this.name=t,this.rebuildPending=!1,this.options=r||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new b(e),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}function _(e,t){this.name=e,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=e,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var s=this,r=((t=t||{}).hasOwnProperty("unique")&&(Array.isArray(t.unique)||(t.unique=[t.unique]),t.unique.forEach(function(e){s.uniqueNames.push(e)})),t.hasOwnProperty("exact")&&t.exact.forEach(function(e){s.constraints.exact[e]=new D(e)}),this.adaptiveBinaryIndices=!t.hasOwnProperty("adaptiveBinaryIndices")||t.adaptiveBinaryIndices,this.transactional=!!t.hasOwnProperty("transactional")&&t.transactional,this.cloneObjects=!!t.hasOwnProperty("clone")&&t.clone,this.cloneMethod=t.hasOwnProperty("cloneMethod")?t.cloneMethod:"parse-stringify",this.asyncListeners=!!t.hasOwnProperty("asyncListeners")&&t.asyncListeners,this.disableMeta=!!t.hasOwnProperty("disableMeta")&&t.disableMeta,this.disableChangesApi=!t.hasOwnProperty("disableChangesApi")||t.disableChangesApi,this.disableDeltaChangesApi=!t.hasOwnProperty("disableDeltaChangesApi")||t.disableDeltaChangesApi,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=!!t.hasOwnProperty("autoupdate")&&t.autoupdate,this.serializableIndices=!t.hasOwnProperty("serializableIndices")||t.serializableIndices,this.disableFreeze=!t.hasOwnProperty("disableFreeze")||t.disableFreeze,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(t.ttl||-1,t.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[],[]);if(t&&t.indices)if("[object Array]"===Object.prototype.toString.call(t.indices))r=t.indices;else{if("string"!=typeof t.indices)throw new TypeError("Indices needs to be a string or an array of strings");r=[t.indices]}for(var n=0;n<r.length;n++)this.ensureIndex(r[n]);function u(e,t){var r=null!==t&&"object"==typeof t?Object.keys(t):null;if(r&&r.length&&["string","boolean","number"].indexOf(typeof t)<0){for(var n={},i=0;i<r.length;i++){var o,a=r[i];t.hasOwnProperty(a)&&(!e.hasOwnProperty(a)||0<=s.uniqueNames.indexOf(a)||"$loki"==a||"meta"==a?n[a]=t[a]:void 0!==(o=u(e[a],t[a]))&&o!={}&&(n[a]=o))}return 0===Object.keys(n).length?void 0:n}return e===t?void 0:t}function i(){s.changes=[]}this.observerCallback=function(e){var t="function"==typeof Set?new Set:[];t.add||(t.add=function(e){return-1===this.indexOf(e)&&this.push(e),this}),e.forEach(function(e){t.add(e.object)}),t.forEach(function(e){if(!O.call(e,"$loki"))return s.removeAutoUpdateObserver(e);try{s.update(e)}catch(e){}})},this.getChangeDelta=function(e,t){return t?u(t,e):JSON.parse(JSON.stringify(e))},this.getObjectDelta=u,this.getChanges=function(){return s.changes},this.flushChanges=i,this.setChangesApi=function(e){s.disableChangesApi=!e,e||(s.disableDeltaChangesApi=!1)},this.on("delete",function(e){s.disableChangesApi||s.createChange(s.name,"R",e)}),this.on("warning",function(e){s.lokiConsoleWrapper.warn(e)}),i()}function w(e){return-1!==e.indexOf(".")}function j(e){return parseFloat(e,10)}function A(e,t){return e+t}function T(e,t){return e-t}function M(e){return e.reduce(A,0)/e.length}function I(e,t,r){if(!1===r)return e[t];for(var n=t.split("."),i=e;0<n.length;)i=i[n.shift()];return i}function R(e,t,r){for(var n,i,o=0,a=e.length;o<a;){if(0===(n=r.apply(null,[t,e[i=o+a>>1]])))return{found:!0,index:i};n<0?a=i:o=1+i}return{found:!1,index:a}}function C(r){return function(e,t){return R(e,t,r)}}function k(){}function $(e){this.field=e,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}function D(e){this.index=Object.create(null),this.field=e}return u.prototype.events={},u.prototype.asyncListeners=!1,u.prototype.on=function(e,t){var r=this;return Array.isArray(e)?e.forEach(function(e){r.on(e,t)}):(this.events[e]||(this.events[e]=[])).push(t),t},u.prototype.emit=function(e){var t,r=this;if(!e||!this.events[e])throw new Error("No event "+e+" defined");this.events[e].length&&(t=Array.prototype.slice.call(arguments,1),this.events[e].forEach(function(e){r.asyncListeners?setTimeout(function(){e.apply(r,t)},1):e.apply(r,t)}))},u.prototype.addListener=u.prototype.on,u.prototype.removeListener=function(e,t){var r=this;Array.isArray(e)?e.forEach(function(e){r.removeListener(e,t)}):this.events[e]&&(e=this.events[e]).splice(e.indexOf(t),1)},((c.prototype=new u).constructor=c).prototype.getIndexedAdapter=function(){var e;return e="function"==typeof F?F("./loki-indexed-adapter.js"):e},c.prototype.configureOptions=function(e,t){var r,n={fs:m,localStorage:y,memory:l};this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,void 0!==e&&(this.options=e,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof n[e.persistenceMethod]&&(this.persistenceMethod=e.persistenceMethod,this.persistenceAdapter=new n[e.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=e.adapter,this.options.adapter=null,this.isIncremental="incremental"===this.persistenceAdapter.mode),e.autoload&&t&&(r=this,setTimeout(function(){r.loadDatabase(e,e.autoloadCallback)},1)),this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(e,e.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves"))&&(this.throttledSaves=this.options.throttledSaves),this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter="$<\n"),null===this.persistenceAdapter&&(this.persistenceMethod={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"}[this.ENV],this.persistenceMethod)&&(this.persistenceAdapter=new n[this.persistenceMethod])},c.prototype.copy=function(e){var t,r,n=new c(this.filename,{env:"NA"});if(e=e||{},n.loadJSONObject(this,{retainDirtyFlags:!0}),e.hasOwnProperty("removeNonSerializable")&&!0===e.removeNonSerializable)for(n.autosaveHandle=null,n.persistenceAdapter=null,t=n.collections.length,r=0;r<t;r++)n.collections[r].constraints=null,n.collections[r].ttl=null;return n},c.prototype.addCollection=function(e,t){var r,n=this.collections.length;if(t&&!0===t.disableMeta){if(!1===t.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===t.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"==typeof t.ttl&&0<t.ttl)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(r=0;r<n;r+=1)if(this.collections[r].name===e)return this.collections[r];t=new _(e,t);return t.isIncremental=this.isIncremental,this.collections.push(t),this.verbose&&(t.lokiConsoleWrapper=console),t},c.prototype.loadCollection=function(e){if(!e.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(e)},c.prototype.getCollection=function(e){for(var t=this.collections.length,r=0;r<t;r+=1)if(this.collections[r].name===e)return this.collections[r];return this.emit("warning","collection "+e+" not found"),null},c.prototype.renameCollection=function(e,t){e=this.getCollection(e);return e&&(e.name=t),e},c.prototype.listCollections=function(){for(var e=this.collections.length,t=[];e--;)t.push({name:this.collections[e].name,type:this.collections[e].objType,count:this.collections[e].data.length});return t},c.prototype.removeCollection=function(e){for(var t=this.collections.length,r=0;r<t;r+=1)if(this.collections[r].name===e){var n,i=new _(e,{}),o=this.collections[r];for(n in o)o.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(o[n]=i[n]);return void this.collections.splice(r,1)}},c.prototype.getName=function(){return this.name},c.prototype.serializeReplacer=function(e,t){switch(e){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return t}},c.prototype.toJson=c.prototype.serialize=function(e){switch((e=e||{}).hasOwnProperty("serializationMethod")||(e.serializationMethod=this.options.serializationMethod),e.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},c.prototype.serializeDestructured=function(e){var t,r,n,i,o,a=[];if((e=e||{}).hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),!0===e.partitioned&&e.hasOwnProperty("partition")&&0<=e.partition)return this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:e.partition});for((o=new c(this.filename)).loadJSONObject(this),t=0;t<o.collections.length;t++)o.collections[t].data=[];if(!0===e.partitioned&&-1===e.partition)return o.serialize({serializationMethod:"normal"});for(a.push(o.serialize({serializationMethod:"normal"})),o=null,t=0;t<this.collections.length;t++)if(n=this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:t}),!1===e.partitioned&&!1===e.delimited){if(!Array.isArray(n))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(i=n.length,r=0;r<i;r++)a.push(n[r]),n[r]=null;a.push("")}else a.push(n);return e.partitioned?(e.delimited,a):e.delimited?(a.push(""),a.join(e.delimiter)):(a.push(""),a)},c.prototype.serializeCollection=function(e){var t,r,n=[];if((e=e||{}).hasOwnProperty("delimited")||(e.delimited=!0),!e.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(t=this.collections[e.collectionIndex].data.length,n=[],r=0;r<t;r++)n.push(JSON.stringify(this.collections[e.collectionIndex].data[r]));return e.delimited?(n.push(""),n.join(e.delimiter)):n},c.prototype.deserializeDestructured=function(e,t){var r,n,i,o=[],a=0,s=1,u=!1;if((t=t||{}).hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.partitioned){if(t.hasOwnProperty("partition"))return-1===t.partition?JSON.parse(e[0]):this.deserializeCollection(e[t.partition+1],t);for(n=(r=JSON.parse(e[0])).collections.length,a=0;a<n;a++)r.collections[a].data=this.deserializeCollection(e[a+1],t)}else{if(t.delimited){if(o=e.split(t.delimiter),e=null,0===o.length)return null}else o=e;for(n=(r=JSON.parse(o[0])).collections.length,o[0]=null;!u;)o[s],""===o[s]?++a>n&&(u=!0):(i=JSON.parse(o[s]),r.collections[a].data.push(i)),o[s++]=null}return r},c.prototype.deserializeCollection=function(e,t){var r,n,i=[];for((t=t||{}).hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.delimited?(i=e.split(t.delimiter)).pop():i=e,n=i.length,r=0;r<n;r++)i[r]=JSON.parse(i[r]);return i},c.prototype.loadJSON=function(e,t){var r;if(0===e.length)r={};else switch(this.options.serializationMethod){case"normal":case"pretty":r=JSON.parse(e);break;case"destructured":r=this.deserializeDestructured(e);break;default:r=JSON.parse(e)}this.loadJSONObject(r,t)},c.prototype.loadJSONObject=function(e,t){var r,n,i,o,a,s,u=0,c=e.collections?e.collections.length:0;for(this.name=e.name,e.hasOwnProperty("throttledSaves")&&t&&!t.hasOwnProperty("throttledSaves")&&(this.throttledSaves=e.throttledSaves),this.collections=[];u<c;u+=1){if(r=e.collections[u],(n=this.addCollection(r.name,{disableChangesApi:r.disableChangesApi,disableDeltaChangesApi:r.disableDeltaChangesApi,disableMeta:r.disableMeta,disableFreeze:!r.hasOwnProperty("disableFreeze")||r.disableFreeze})).adaptiveBinaryIndices=!!r.hasOwnProperty("adaptiveBinaryIndices")&&!0===r.adaptiveBinaryIndices,n.transactional=r.transactional,n.asyncListeners=r.asyncListeners,n.cloneObjects=r.cloneObjects,n.cloneMethod=r.cloneMethod||"parse-stringify",n.autoupdate=r.autoupdate,n.changes=r.changes,n.dirtyIds=r.dirtyIds||[],t&&!0===t.retainDirtyFlags?n.dirty=r.dirty:n.dirty=!1,i=r.data.length,o=0,t&&t.hasOwnProperty(r.name))for(a=function(e){var r,n=t[e.name];return n.proto?(r=n.inflate||S.copyProperties,function(e){var t=new n.proto;return r(e,t),t}):n.inflate}(r);o<i;o++)s=a(r.data[o]),n.data[o]=s,n.addAutoUpdateObserver(s),n.disableFreeze||p(n.data[o]);else for(;o<i;o++)n.data[o]=r.data[o],n.addAutoUpdateObserver(n.data[o]),n.disableFreeze||p(n.data[o]);if(n.maxId=void 0===r.maxId?0:r.maxId,void 0!==r.binaryIndices&&(n.binaryIndices=r.binaryIndices),void 0!==r.transforms&&(n.transforms=r.transforms),n.uniqueNames=[],r.hasOwnProperty("uniqueNames")&&(n.uniqueNames=r.uniqueNames),void 0!==r.DynamicViews){for(var l=0;l<r.DynamicViews.length;l++){var d=r.DynamicViews[l],f=n.addDynamicView(d.name,d.options);f.resultdata=d.resultdata,f.resultsdirty=d.resultsdirty,f.filterPipeline=d.filterPipeline,f.sortCriteriaSimple=d.sortCriteriaSimple,f.sortCriteria=d.sortCriteria,f.sortFunction=null,f.sortDirty=d.sortDirty,n.disableFreeze||(p(f.filterPipeline),f.sortCriteriaSimple?p(f.sortCriteriaSimple):f.sortCriteria&&p(f.sortCriteria)),f.resultset.filteredrows=d.resultset.filteredrows,f.resultset.filterInitialized=d.resultset.filterInitialized,f.rematerialize({removeWhereFilters:!0})}e.databaseVersion<1.5&&(n.ensureAllIndexes(!0),n.dirty=!0)}}},c.prototype.close=function(e){this.autosave&&(this.autosaveDisable(),this.autosaveDirty())&&(this.saveDatabase(e),e=void 0),e&&this.on("close",e),this.emit("close")},c.prototype.generateChangesNotification=function(e){function t(e){return e.name}var r=[],n=e||this.collections.map(t);return this.collections.forEach(function(e){-1!==n.indexOf(e.name)&&(r=r.concat(e.getChanges()))}),r},c.prototype.serializeChanges=function(e){return JSON.stringify(this.generateChangesNotification(e))},c.prototype.clearChanges=function(){this.collections.forEach(function(e){e.flushChanges&&e.flushChanges()})},l.prototype.loadDatabase=function(e,t){var r=this;this.options.asyncResponses?setTimeout(function(){r.hashStore.hasOwnProperty(e)?t(r.hashStore[e].value):t(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(e)?t(this.hashStore[e].value):t(null)},l.prototype.saveDatabase=function(e,t,r){var n,i=this;this.options.asyncResponses?setTimeout(function(){n=i.hashStore.hasOwnProperty(e)?i.hashStore[e].savecount:0,i.hashStore[e]={savecount:n+1,lastsave:new Date,value:t},r()},this.options.asyncTimeout):(n=this.hashStore.hasOwnProperty(e)?this.hashStore[e].savecount:0,this.hashStore[e]={savecount:n+1,lastsave:new Date,value:t},r())},l.prototype.deleteDatabase=function(e,t){this.hashStore.hasOwnProperty(e)&&delete this.hashStore[e],"function"==typeof t&&t()},d.prototype.loadDatabase=function(e,r){var n=this;this.dbname=e,this.dbref=new c(e),this.adapter.loadDatabase(e,function(e){var t;e?("string"!=typeof e&&r(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()")),t=JSON.parse(e),n.dbref.loadJSONObject(t),t=null,n.dbref.collections.length,0===n.dbref.collections.length?r(n.dbref):(n.pageIterator={collection:0,pageIndex:0},n.loadNextPartition(0,function(){r(n.dbref)}))):r(e)})},d.prototype.loadNextPartition=function(t,r){var e=this.dbname+"."+t,n=this;!0===this.options.paging?(this.pageIterator.pageIndex=0,this.loadNextPage(r)):this.adapter.loadDatabase(e,function(e){e=n.dbref.deserializeCollection(e,{delimited:!0,collectionIndex:t});n.dbref.collections[t].data=e,++t<n.dbref.collections.length?n.loadNextPartition(t,r):r()})},d.prototype.loadNextPage=function(i){var e=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,o=this;this.adapter.loadDatabase(e,function(e){var t,r=e.split(o.options.delimiter),n=r.length,e=(e="")===r[n-1];for(e&&(r.pop(),""===r[(n=r.length)-1])&&1===n&&(r.pop(),n=r.length),t=0;t<n;t++)o.dbref.collections[o.pageIterator.collection].data.push(JSON.parse(r[t])),r[t]=null;r=[],e?++o.pageIterator.collection<o.dbref.collections.length?o.loadNextPartition(o.pageIterator.collection,i):i():(o.pageIterator.pageIndex++,o.loadNextPage(i))})},d.prototype.exportDatabase=function(e,t,r){var n,i=t.collections.length;for(this.dbref=t,this.dbname=e,this.dirtyPartitions=[-1],n=0;n<i;n++)t.collections[n].dirty&&this.dirtyPartitions.push(n);this.saveNextPartition(function(e){r(e)})},d.prototype.saveNextPartition=function(t){var r=this,e=this.dirtyPartitions.shift(),n=this.dbname+(-1===e?"":"."+e);this.options.paging&&-1!==e?(this.pageIterator={collection:e,docIndex:0,pageIndex:0},this.saveNextPage(function(e){0===r.dirtyPartitions.length?t(e):r.saveNextPartition(t)})):(e=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:e}),this.adapter.saveDatabase(n,e,function(e){e?t(e):0===r.dirtyPartitions.length?t(null):r.saveNextPartition(t)}))},d.prototype.saveNextPage=function(t){function e(e){c="",e&&t(e),l?t(null):(n.pageIterator.pageIndex++,n.saveNextPage(t))}var r,n=this,i=this.dbref.collections[this.pageIterator.collection],o=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,a=0,s=i.data.length,u=this.options.delimiter.length,c="",l=!1,d=!1;for(0===i.data.length&&(l=!0);;)if(l||(r=JSON.stringify(i.data[this.pageIterator.docIndex]),c+=r,a+=r.length,++this.pageIterator.docIndex>=s&&(l=!0)),(d=a>=this.options.pageSize?!0:d)&&!l||(c+=this.options.delimiter,a+=u),l||d)return void this.adapter.saveDatabase(o,c,e)},m.prototype.loadDatabase=function(r,n){var i=this;this.fs.stat(r,function(e,t){!e&&t.isFile()?i.fs.readFile(r,{encoding:"utf8"},function(e,t){n(e?new Error(e):t)}):n(null)})},m.prototype.saveDatabase=function(t,e,r){var n=this,i=t+"~";this.fs.writeFile(i,e,function(e){e?r(new Error(e)):n.fs.rename(i,t,r)})},m.prototype.deleteDatabase=function(e,t){this.fs.unlink(e,function(e){e?t(new Error(e)):t()})},y.prototype.loadDatabase=function(e,t){i()?t(localStorage.getItem(e)):t(new Error("localStorage is not available"))},y.prototype.saveDatabase=function(e,t,r){i()?(localStorage.setItem(e,t),r(null)):r(new Error("localStorage is not available"))},y.prototype.deleteDatabase=function(e,t){i()?(localStorage.removeItem(e),t(null)):t(new Error("localStorage is not available"))},c.prototype.throttledSaveDrain=function(e,t){var r=this,n=(new Date).getTime();this.throttledSaves||e(!0),(t=t||{}).hasOwnProperty("recursiveWait")||(t.recursiveWait=!0),t.hasOwnProperty("recursiveWaitLimit")||(t.recursiveWaitLimit=!1),t.hasOwnProperty("recursiveWaitLimitDuration")||(t.recursiveWaitLimitDuration=2e3),t.hasOwnProperty("started")||(t.started=(new Date).getTime()),this.throttledSaves&&this.throttledSavePending?t.recursiveWait?this.throttledCallbacks.push(function(){r.throttledSavePending?t.recursiveWaitLimit&&n-t.started>t.recursiveWaitLimitDuration?e(!1):r.throttledSaveDrain(e,t):e(!0)}):this.throttledCallbacks.push(e):e(!0)},c.prototype.loadDatabaseInternal=function(r,e){var n=e||function(e,t){if(e)throw e},i=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(e){if("string"==typeof e){var t=!1;try{i.loadJSON(e,r||{}),t=!0}catch(e){n(e)}t&&(n(null),i.emit("loaded","database "+i.filename+" loaded"))}else e?e instanceof Error?n(e):"object"==typeof e?(i.loadJSONObject(e,r||{}),n(null),i.emit("loaded","database "+i.filename+" loaded")):n("unexpected adapter response : "+e):(n(null),i.emit("loaded","empty database "+i.filename+" loaded"))}):n(new Error("persistenceAdapter not configured"))},c.prototype.loadDatabase=function(t,r){var n=this;this.throttledSaves?this.throttledSaveDrain(function(e){e?(n.throttledSavePending=!0,n.loadDatabaseInternal(t,function(e){0===n.throttledCallbacks.length?n.throttledSavePending=!1:n.saveDatabase(),"function"==typeof r&&r(e)})):"function"==typeof r&&r(new Error("Unable to pause save throttling long enough to read database"))},t):this.loadDatabaseInternal(t,r)},c.prototype.saveDatabaseInternal=function(e){var r,t=e||function(e){if(e)throw e},n=this;this.persistenceAdapter?"incremental"===this.persistenceAdapter.mode?(this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){var e;if(n.ignoreAutosave=!1,!r)return e=n.copy({removeNonSerializable:!0}),r=n.collections.map(function(e){return[e.dirty,e.dirtyIds]}),n.collections.forEach(function(e){e.dirty=!1,e.dirtyIds=[]}),e;t(new Error("adapter error - getLokiCopy called more than once"))},function(e){n.ignoreAutosave=!1,e&&r&&n.collections.forEach(function(e,t){t=r[t];e.dirty=e.dirty||t[0],e.dirtyIds=e.dirtyIds.concat(t[1])}),t(e)})):"reference"===this.persistenceAdapter.mode&&"function"==typeof this.persistenceAdapter.exportDatabase?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(e){n.autosaveClearFlags(),t(e)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(e){t(e)})):t(new Error("persistenceAdapter not configured"))},c.prototype.save=c.prototype.saveDatabase=function(e){var r,n;this.throttledSaves?this.throttledSavePending?this.throttledCallbacks.push(e):(r=this.throttledCallbacks,this.throttledCallbacks=[],r.unshift(e),this.throttledSavePending=!0,(n=this).saveDatabaseInternal(function(t){n.throttledSavePending=!1,r.forEach(function(e){"function"==typeof e&&setTimeout(function(){e(t)},1)}),0<n.throttledCallbacks.length&&n.saveDatabase()})):this.saveDatabaseInternal(e)},c.prototype.deleteDatabase=function(e,t){var r="function"!=typeof e||t?t||function(e,t){if(e)throw e}:e;null!==this.persistenceAdapter?this.persistenceAdapter.deleteDatabase(this.filename,function(e){r(e)}):r(new Error("persistenceAdapter not configured"))},c.prototype.autosaveDirty=function(){for(var e=0;e<this.collections.length;e++)if(this.collections[e].dirty)return!0;return!1},c.prototype.autosaveClearFlags=function(){for(var e=0;e<this.collections.length;e++)this.collections[e].dirty=!1},c.prototype.autosaveEnable=function(e,t){this.autosave=!0;var r=5e3,n=this;void 0!==this.autosaveInterval&&null!==this.autosaveInterval&&(r=this.autosaveInterval),this.autosaveHandle=setInterval(function(){n.autosaveDirty()&&!n.ignoreAutosave&&n.saveDatabase(t)},r)},c.prototype.autosaveDisable=function(){void 0!==this.autosaveHandle&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},b.prototype.reset=function(){return 0<this.filteredrows.length&&(this.filteredrows=[]),this.filterInitialized=!1,this},b.prototype.toJSON=function(){var e=this.copy();return e.collection=null,e},b.prototype.limit=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var t=new b(this.collection);return t.filteredrows=this.filteredrows.slice(0,e),t.filterInitialized=!0,t},b.prototype.offset=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var t=new b(this.collection);return t.filteredrows=this.filteredrows.slice(e),t.filterInitialized=!0,t},b.prototype.branch=b.prototype.copy=function(){var e=new b(this.collection);return 0<this.filteredrows.length&&(e.filteredrows=this.filteredrows.slice()),e.filterInitialized=this.filterInitialized,e},b.prototype.transform=function(e,t){var r,n,i=this;if("object"!=typeof(e="string"==typeof e&&this.collection.transforms.hasOwnProperty(e)?this.collection.transforms[e]:e)||!Array.isArray(e))throw new Error("Invalid transform");for(void 0!==t&&(e=S.resolveTransformParams(e,t)),r=0;r<e.length;r++)switch((n=e[r]).type){case"find":i.find(n.value);break;case"where":i.where(n.value);break;case"simplesort":i.simplesort(n.property,n.desc||n.options);break;case"compoundsort":i.compoundsort(n.value);break;case"sort":i.sort(n.value);break;case"limit":i=i.limit(n.value);break;case"offset":i=i.offset(n.value);break;case"map":i=i.map(n.value,n.dataOptions);break;case"eqJoin":i=i.eqJoin(n.joinData,n.leftJoinKey,n.rightJoinKey,n.mapFun,n.dataOptions);break;case"mapReduce":i=i.mapReduce(n.mapFunction,n.reduceFunction);break;case"update":i.update(n.value);break;case"remove":i.remove()}return i},b.prototype.sort=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());function t(e,t){return r(n[e],n[t])}var r,n;r=e,n=this.collection.data;return this.filteredrows.sort(t),this},b.prototype.simplesort=function(r,e){var n,i,o,a,s,t=10,u=this.collection.data.length,c=this.filteredrows.length,l=this.collection.binaryIndices.hasOwnProperty(r);if(!0===(e=void 0!==e&&!1!==e?e:{desc:!1})&&(e={desc:!0}),0===c){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(r))return this.collection.ensureIndex(r),this.filteredrows=this.collection.binaryIndices[r].values.slice(0),e.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!e.disableIndexIntersect&&l&&(u/c<=(t=e.useJavascriptSorting?6:t)||e.forceIndexIntersect)){for(var d=this.filteredrows,f={},p=0;p<c;p++)f[d[p]]=!0;l=this.collection.binaryIndices[r].values;return this.filteredrows=l.filter(function(e){return f[e]}),e.desc&&this.filteredrows.reverse(),this}return e.useJavascriptSorting?this.sort(function(e,t){return e[r]===t[r]?0:e[r]>t[r]?1:e[r]<t[r]?-1:void 0}):(n=r,i=e.desc,o=this.collection.data,this.filteredrows.sort(function(e,t){return s=~n.indexOf(".")?(s=n.split("."),a=S.getIn(o[e],s,!0),S.getIn(o[t],s,!0)):(a=o[e][n],o[t][n]),h(a,s,i)}),this)},b.prototype.compoundsort=function(e){if(0===e.length)throw new Error("Invalid call to compoundsort, need at least one property");var t;if(1===e.length)return t=e[0],Array.isArray(t)?this.simplesort(t[0],t[1]):this.simplesort(t,!1);for(var d,f,r=0,n=e.length;r<n;r+=1)t=e[r],Array.isArray(t)||(e[r]=[t,!1]);return this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex()),d=e,f=this.collection.data,this.filteredrows.sort(function(e,t){for(var r,n,i,o,a=d,s=f[e],u=f[t],c=0,l=a.length;c<l;c++)if(o=~(n=(r=a[c])[0]).indexOf(".")?(o=n.split("."),i=S.getIn(s,o,!0),S.getIn(u,o,!0)):(i=s[n],u[n]),0!==(n=h(i,o,r[1])))return n;return 0}),this},b.prototype.$or=b.prototype.findOr=function(e){for(var t,r,n,i=0,o=[],a=[],s=(this.count(),0),u=e.length;s<u;s++)for(r=(t=this.branch().find(e[s]).filteredrows).length,i=0;i<r;i++)void 0===a[n=t[i]]&&(a[n]=!0,o.push(n));return this.filteredrows=o,this.filterInitialized=!0,this},b.prototype.$and=b.prototype.findAnd=function(e){for(var t=0,r=e.length;t<r;t++){if(0===this.count())return this;this.find(e[t])}return this},b.prototype.find=function(e,t){if(0===this.collection.data.length)this.filteredrows=[],this.filterInitialized=!0;else{var r,n,i,o,a,s,u,c=e||"getAll",e=!1,l=[],d=[],f=null;if(t=t||!1,"object"==typeof c){for(r in c)(o={})[r]=c[r],d.push(o),O.call(c,r)&&(i=c[n=r]);if(1<d.length)return this.find({$and:d},t)}if(n&&"getAll"!==c)if("$and"===n||"$or"===n)this[n](i),t&&1<this.filteredrows.length&&(this.filteredrows=this.filteredrows.slice(0,1));else{if(null===i||"object"!=typeof i||i instanceof Date)a="$eq",s=i;else{if("object"!=typeof i)throw new Error("Do not know what you want to do.");for(u in i)if(O.call(i,u)){s=i[a=u];break}}"$regex"!==a&&"object"!=typeof s||(s=function e(t,r){if("$regex"===t)Array.isArray(r)?r=new RegExp(r[0],r[1]):r instanceof RegExp||(r=new RegExp(r));else if("object"==typeof r)for(var n in r)"$regex"!==n&&"object"!=typeof r[n]||(r[n]=e(n,r[n]));return r}(a,s));var p,h,m=-1!==n.indexOf("."),y=(!this.filterInitialized&&this.collection.binaryIndices[n]&&P[a]&&(!0!==this.collection.adaptiveBinaryIndices&&this.collection.ensureIndex(n),e=!0,f=this.collection.binaryIndices[n]),!e&&"$in"===a&&Array.isArray(s)&&"undefined"!=typeof Set&&(s=new Set(s),a="$inSet"),x[a]),b=this.collection.data,v=0,g=0,_=0;if(this.filterInitialized){if(g=(p=this.filteredrows).length,m){for(n=n.split("."),v=0;v<g;v++)if(E(h=b[_=p[v]],n,y,s,h)&&(l.push(_),t))return this.filteredrows=l,this}else for(v=0;v<g;v++)if(y((h=b[_=p[v]])[n],s,h)&&(l.push(_),t))return this.filteredrows=l,this}else if(e){var w=this.collection.calculateRange(a,n,s);if("$in"!==a){for(v=w[0];v<=w[1];v++)if(!0!==P[a]){if(P[a](S.getIn(b[f.values[v]],n,m),s)&&(l.push(f.values[v]),t))return this.filteredrows=l,this.filterInitialized=!0,this}else if(l.push(f.values[v]),t)return this.filteredrows=l,this.filterInitialized=!0,this}else for(v=0,g=w.length;v<g;v++)if(l.push(f.values[w[v]]),t)return this.filteredrows=l,this.filterInitialized=!0,this}else if(g=b.length,m){for(n=n.split("."),v=0;v<g;v++)if(E(h=b[v],n,y,s,h)&&(l.push(v),t))return this.filteredrows=l,this.filterInitialized=!0,this}else for(v=0;v<g;v++)if(y((h=b[v])[n],s,h)&&(l.push(v),t))return this.filteredrows=l,this.filterInitialized=!0,this;this.filteredrows=l,this.filterInitialized=!0}else t&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=0<this.collection.data.length?[0]:[],this.filterInitialized=!0))}return this},b.prototype.where=function(e){var t,r=[];if("function"!=typeof e)throw new TypeError("Argument is not a stored view or a function");t=e;try{if(this.filterInitialized){for(var n=this.filteredrows.length;n--;)!0===t(this.collection.data[this.filteredrows[n]])&&r.push(this.filteredrows[n]);this.filteredrows=r}else{for(var i=this.collection.data.length;i--;)!0===t(this.collection.data[i])&&r.push(i);this.filteredrows=r,this.filterInitialized=!0}return this}catch(e){throw e}},b.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},b.prototype.data=function(e){var t,r,n,i=[],o=this.collection.data;if((e=e||{}).removeMeta&&!e.forceClones&&(e.forceClones=!0,e.forceCloneMethod=e.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(e.forceClones=!0,e.forceCloneMethod="parse-stringify"),!this.filterInitialized){if(0===this.filteredrows.length){if(this.collection.cloneObjects||e.forceClones){for(s=o.length,n=e.forceCloneMethod||this.collection.cloneMethod,r=0;r<s;r++)t=f(o[r],n),e.removeMeta&&(delete t.$loki,delete t.meta),i.push(t);return i}return o.slice()}this.filterInitialized=!0}var a=this.filteredrows,s=a.length;if(this.collection.cloneObjects||e.forceClones)for(n=e.forceCloneMethod||this.collection.cloneMethod,r=0;r<s;r++)t=f(o[a[r]],n),e.removeMeta&&(delete t.$loki,delete t.meta),i.push(t);else for(r=0;r<s;r++)i.push(o[a[r]]);return i},b.prototype.update=function(e){if("function"!=typeof e)throw new TypeError("Argument is not a function");this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());for(var t,r=this.filteredrows.length,n=this.collection.data,i=0;i<r;i++)this.disableFreeze&&!this.collection.cloneObjects&&this.collection.disableDeltaChangesApi?(e(n[this.filteredrows[i]]),this.collection.update(n[this.filteredrows[i]])):(e(t=f(n[this.filteredrows[i]],this.collection.cloneMethod)),this.collection.update(t));return this},b.prototype.remove=function(){return this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},b.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(e){throw e}},b.prototype.eqJoin=function(e,t,r,n,i){var o,a,s=[],u=[],c="function"==typeof t,l="function"==typeof r,d={},f=(a=this.data(i)).length;if(e instanceof _)s=e.chain().data(i);else if(e instanceof b)s=e.data(i);else{if(!Array.isArray(e))throw new TypeError("joinData needs to be an array or result set");s=e}for(var p=s.length,h=0;h<p;h++)d[o=l?r(s[h]):s[h][r]]=s[h];n=n||function(e,t){return{left:e,right:t}};for(var m=0;m<f;m++)o=c?t(a[m]):a[m][t],u.push(n(a[m],d[o]||{}));return this.collection=new _("joinData"),this.collection.insert(u),this.filteredrows=[],this.filterInitialized=!1,this},b.prototype.map=function(e,t){t=this.data(t).map(e);return this.collection=new _("mappedData"),this.collection.insert(t),this.filteredrows=[],this.filterInitialized=!1,this},((g.prototype=new u).constructor=g).prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},g.prototype.rematerialize=function(e){e=e||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new b(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var t,r,n,i=Object.isFrozen(this.filterPipeline);if(e.hasOwnProperty("removeWhereFilters"))for(i&&(this.filterPipeline=this.filterPipeline.slice()),r=t=this.filterPipeline.length;r--;)"where"===this.filterPipeline[r].type&&(r!==this.filterPipeline.length-1&&(this.filterPipeline[r]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var o=this.filterPipeline;for(this.filterPipeline=[],t=o.length,n=0;n<t;n++)this.applyFind(o[n].val,o[n].uid);return i&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},g.prototype.branchResultset=function(e,t){var r=this.resultset.branch();return void 0===e?r:r.transform(e,t)},g.prototype.toJSON=function(){var e=new g(this.collection,this.name,this.options);return e.resultset=this.resultset,e.resultdata=[],e.resultsdirty=!0,e.filterPipeline=this.filterPipeline,e.sortFunction=this.sortFunction,e.sortCriteria=this.sortCriteria,e.sortCriteriaSimple=this.sortCriteriaSimple||null,e.sortDirty=this.sortDirty,e.collection=null,e},g.prototype.removeFilters=function(e){e=e||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var t=Object.isFrozen(this.filterPipeline),r=0<this.filterPipeline.length;this.filterPipeline=[],t&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,!(this.sortDirty=!1)===e.queueSortPhase&&this.queueSortPhase(),r&&this.emit("filter")},g.prototype.applySort=function(e){return this.sortFunction=e,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},g.prototype.applySimpleSort=function(e,t){return this.sortCriteriaSimple={propname:e,options:t||!1},this.collection.disableFreeze||p(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},g.prototype.applySortCriteria=function(e){return this.sortCriteria=e,this.collection.disableFreeze||p(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},g.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},g.prototype.commit=function(){return this.cachedresultset=null,this},g.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},g.prototype._indexOfFilterWithId=function(e){if("string"==typeof e||"number"==typeof e)for(var t=0,r=this.filterPipeline.length;t<r;t+=1)if(e===this.filterPipeline[t].uid)return t;return-1},g.prototype._addFilter=function(e){var t=Object.isFrozen(this.filterPipeline);t&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||p(e),this.filterPipeline.push(e),t&&Object.freeze(this.filterPipeline),this.resultset[e.type](e.val)},g.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var e=this.filterPipeline,t=Object.isFrozen(e);this.filterPipeline=[];for(var r=0,n=e.length;r<n;r+=1)this._addFilter(e[r]);return t&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},g.prototype.applyFilter=function(e){var t,r=this._indexOfFilterWithId(e.uid);return 0<=r?((t=Object.isFrozen(this.filterPipeline))&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[r]=e,t&&(a(e),Object.freeze(this.filterPipeline)),this.reapplyFilters()):(this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(e),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this)},g.prototype.applyFind=function(e,t){return this.applyFilter({type:"find",val:e,uid:t}),this},g.prototype.applyWhere=function(e,t){return this.applyFilter({type:"where",val:e,uid:t}),this},g.prototype.removeFilter=function(e){var t=this._indexOfFilterWithId(e);if(t<0)throw new Error("Dynamic view does not contain a filter with ID: "+e);e=Object.isFrozen(this.filterPipeline);return e&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(t,1),e&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},g.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},g.prototype.data=function(e){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(e)},g.prototype.queueRebuildEvent=function(){var e;this.rebuildPending||(this.rebuildPending=!0,e=this,setTimeout(function(){e.rebuildPending&&(e.rebuildPending=!1,e.emit("rebuild",e))},this.options.minRebuildInterval))},g.prototype.queueSortPhase=function(){var e;this.sortDirty||(this.sortDirty=!0,"active"===(e=this).options.sortPriority?setTimeout(function(){e.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent())},g.prototype.performSortPhase=function(e){(this.sortDirty||this.resultsdirty)&&(e=e||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),e.suppressRebuildEvent||this.emit("rebuild",this))},g.prototype.evaluateDocument=function(e,t){if(this.resultset.filterInitialized){var r,n=this.resultset.filteredrows,t=t?-1:n.indexOf(+e),i=n.length,o=new b(this.collection);o.filteredrows=[e],o.filterInitialized=!0;for(var a=0,s=this.filterPipeline.length;a<s;a++)o[(r=this.filterPipeline[a]).type](r.val);var u=0===o.filteredrows.length?-1:0;-1===t&&-1==u||(-1===t&&-1!=u?(n.push(e),this.options.persistent&&this.resultdata.push(this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent()):-1!==t&&-1==u?(t<i-1?(n.splice(t,1),this.options.persistent&&this.resultdata.splice(t,1)):(n.length=i-1,this.options.persistent&&(this.resultdata.length=i-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent()):-1!==t&&-1!=u&&(this.options.persistent&&(this.resultdata[t]=this.collection.data[e]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent()))}else this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent()},g.prototype.removeDocument=function(e){var t,r,n,i={},o={},a=this.resultset,s=this.resultset.filteredrows,u=s.length;if(this.resultset.filterInitialized){for(r=(e=Array.isArray(e)?e:[e]).length,t=0;t<r;t++)i[e[t]]=!0;for(c=0;c<u;c++)i[s[c]]&&(o[c]=!0);0<Object.keys(o).length&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(e,t){return!o[t]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(e,t){return!o[t]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());for(var u=a.filteredrows.length,c=0;c<u;c++)n=e.filter(function(t){return function(e){return e<a.filteredrows[t]}}(c)),a.filteredrows[c]-=n.length}else this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent()},g.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(e){throw e}},((_.prototype=new u).contructor=_).prototype.createChange=function(e,t,r,n){this.changes.push({name:e,operation:t,obj:"U"!=t||this.disableDeltaChangesApi?JSON.parse(JSON.stringify(r)):this.getChangeDelta(r,n)})},_.prototype.insertMeta=function(e){var t,r;if(!this.disableMeta&&e)if(Array.isArray(e))for(t=e.length,r=0;r<t;r++)e[r].hasOwnProperty("meta")||(e[r].meta={}),e[r].meta.created=(new Date).getTime(),e[r].meta.revision=0;else e.meta||(e.meta={}),e.meta.created=(new Date).getTime(),e.meta.revision=0},_.prototype.updateMeta=function(e){return!this.disableMeta&&e&&(this.disableFreeze||((e=s(e)).meta=s(e.meta)),e.meta.updated=(new Date).getTime(),e.meta.revision+=1),e},_.prototype.createInsertChange=function(e){this.createChange(this.name,"I",e)},_.prototype.createUpdateChange=function(e,t){this.createChange(this.name,"U",e,t)},_.prototype.insertMetaWithChange=function(e){this.insertMeta(e),this.createInsertChange(e)},_.prototype.updateMetaWithChange=function(e,t,r){return e=this.updateMeta(e,r),this.createUpdateChange(e,t),e},_.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},_.prototype.addAutoUpdateObserver=function(e){this.autoupdate&&"function"==typeof Object.observe&&Object.observe(e,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},_.prototype.removeAutoUpdateObserver=function(e){this.autoupdate&&"function"==typeof Object.observe&&Object.unobserve(e,this.observerCallback)},_.prototype.addTransform=function(e,t){if(this.transforms.hasOwnProperty(e))throw new Error("a transform by that name already exists");this.transforms[e]=t},_.prototype.getTransform=function(e){return this.transforms[e]},_.prototype.setTransform=function(e,t){this.transforms[e]=t},_.prototype.removeTransform=function(e){delete this.transforms[e]},_.prototype.byExample=function(e){var t,r,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(((r={})[t]=e[t],r));return{$and:n}},_.prototype.findObject=function(e){return this.findOne(this.byExample(e))},_.prototype.findObjects=function(e){return this.find(this.byExample(e))},_.prototype.ttlDaemonFuncGen=function(){var e=this,r=this.ttl.age;return function(){var t=Date.now();e.chain().where(function(e){e=e.meta.updated||e.meta.created;return r<t-e}).remove()}},_.prototype.setTTL=function(e,t){e<0?clearInterval(this.ttl.daemon):(this.ttl.age=e,this.ttl.ttlInterval=t,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),t))},_.prototype.prepareFullDocIndex=function(){for(var e=this.data.length,t=new Array(e),r=0;r<e;r+=1)t[r]=r;return t},_.prototype.configureOptions=function(e){(e=e||{}).hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=e.adaptiveBinaryIndices,this.adaptiveBinaryIndices)&&this.ensureAllIndexes()},_.prototype.ensureIndex=function(e,t){if(void 0===t&&(t=!1),null==e)throw new Error("Attempting to set index without an associated property");var r,n,i,o,a;this.binaryIndices[e]&&!t&&!this.binaryIndices[e].dirty||!0===this.adaptiveBinaryIndices&&this.binaryIndices.hasOwnProperty(e)&&!t||(t={name:e,dirty:!0,values:this.prepareFullDocIndex()},this.binaryIndices[e]=t,r=e,n=this.data,a=!!~r.indexOf(".")&&r.split("."),t.values.sort(function(e,t){if(o=a?(i=S.getIn(n[e],a,!0),S.getIn(n[t],a,!0)):(i=n[e][r],n[t][r]),i!==o){if(v.lt(i,o,!1))return-1;if(v.gt(i,o,!1))return 1}return 0}),t.dirty=!1,this.dirty=!0)},_.prototype.checkAllIndexes=function(e){var t,r=this.binaryIndices,n=[];for(t in r)!O.call(r,t)||this.checkIndex(t,e)||n.push(t);return n},_.prototype.checkIndex=function(e,t){(t=t||{}).randomSamplingFactor&&!1!==t.randomSampling&&(t.randomSampling=!0),t.randomSamplingFactor=t.randomSamplingFactor||.1,(t.randomSamplingFactor<0||1<t.randomSamplingFactor)&&(t.randomSamplingFactor=.1);var r,n,i,o,a,s=!0;if(!this.binaryIndices.hasOwnProperty(e))throw new Error("called checkIndex on property without an index: "+e);if(this.adaptiveBinaryIndices||this.ensureIndex(e),(o=(a=this.binaryIndices[e].values).length)!==this.data.length)return t.repair&&this.ensureIndex(e,!0),!1;if(0===o)return!0;var u=-1!==e.indexOf(".");if(1===o)s=0===a[0];else if(t.randomSampling){if(x.$lte(S.getIn(this.data[a[0]],e,u),S.getIn(this.data[a[1]],e,u))||(s=!1),s=x.$lte(S.getIn(this.data[a[o-2]],e,u),S.getIn(this.data[a[o-1]],e,u))?s:!1)for(n=Math.floor((o-1)*t.randomSamplingFactor),r=0;r<n-1;r++)if(i=Math.floor(Math.random()*(o-1)),!x.$lte(S.getIn(this.data[a[i]],e,u),S.getIn(this.data[a[i+1]],e,u))){s=!1;break}}else for(r=0;r<o-1;r++)if(!x.$lte(S.getIn(this.data[a[r]],e,u),S.getIn(this.data[a[r+1]],e,u))){s=!1;break}return!s&&t.repair&&this.ensureIndex(e,!0),s},_.prototype.getBinaryIndexValues=function(e){for(var t=this.binaryIndices[e].values,r=[],n=0;n<t.length;n++)r.push(S.getIn(this.data[t[n]],e,!0));return r},_.prototype.getUniqueIndex=function(e,t){var r=this.constraints.unique[e];return!r&&t?this.ensureUniqueIndex(e):r},_.prototype.ensureUniqueIndex=function(e){var t=this.constraints.unique[e];return t||-1==this.uniqueNames.indexOf(e)&&this.uniqueNames.push(e),this.constraints.unique[e]=t=new $(e),this.data.forEach(function(e){t.set(e)}),t},_.prototype.ensureAllIndexes=function(e){var t,r=this.binaryIndices;for(t in r)O.call(r,t)&&this.ensureIndex(t,e)},_.prototype.flagBinaryIndexesDirty=function(){var e,t=this.binaryIndices;for(e in t)O.call(t,e)&&(t[e].dirty=!0)},_.prototype.flagBinaryIndexDirty=function(e){this.binaryIndices[e]&&(this.binaryIndices[e].dirty=!0)},_.prototype.count=function(e){return(e?this.chain().find(e).filteredrows:this.data).length},_.prototype.ensureId=function(){if(!this.idIndex){for(var e=this.data,t=0,r=e.length,n=new Array(r);t<r;t++)n[t]=e[t].$loki;this.idIndex=n}},_.prototype.ensureIdAsync=function(e){this.async(function(){this.ensureId()},e)},_.prototype.addDynamicView=function(e,t){e=new g(this,e,t);return this.DynamicViews.push(e),e},_.prototype.removeDynamicView=function(t){this.DynamicViews=this.DynamicViews.filter(function(e){return e.name!==t})},_.prototype.getDynamicView=function(e){for(var t=0;t<this.DynamicViews.length;t++)if(this.DynamicViews[t].name===e)return this.DynamicViews[t];return null},_.prototype.findAndUpdate=function(e,t){"function"==typeof e?this.updateWhere(e,t):this.chain().find(e).update(t)},_.prototype.findAndRemove=function(e){this.chain().find(e).remove()},_.prototype.insert=function(e,t){if(!Array.isArray(e))return this.insertOne(e);var r,n=[],t=t&&!this.cloneObjects&&this.adaptiveBinaryIndices&&0<Object.keys(this.binaryIndices).length;t&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",e);for(var i=0,o=e.length;i<o;i++){if(!(r=this.insertOne(e[i],!0)))return;n.push(r)}}finally{t&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",n),1===(n=this.cloneObjects?f(n,this.cloneMethod):n).length?n[0]:n},_.prototype.insertOne=function(e,t){var r=null;if("object"!=typeof e?r=new TypeError("Document needs to be an object"):null===e&&(r=new TypeError("Object cannot be null")),null!==r)throw this.emit("error",r),r;r=this.cloneObjects?f(e,this.cloneMethod):e;if(this.disableFreeze||(r=s(r)),this.disableMeta||(void 0===r.meta?r.meta={revision:0,created:0}:this.disableFreeze||(r.meta=s(r.meta))),t||this.emit("pre-insert",r),this.add(r))return this.disableChangesApi?this.insertMeta(r):this.insertMetaWithChange(r),this.disableFreeze||p(r),e=this.cloneObjects?f(r,this.cloneMethod):r,t||this.emit("insert",e),this.addAutoUpdateObserver(e),e},_.prototype.clear=function(e){var t=this;e=e||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},!0===e.removeIndices?(this.binaryIndices={},this.uniqueNames=[]):Object.keys(this.binaryIndices).forEach(function(e){t.binaryIndices[e].dirty=!1,t.binaryIndices[e].values=[]})},_.prototype.update=function(e){var t,r,n;if(Array.isArray(e)){n=e.length,(t=!this.cloneObjects&&this.adaptiveBinaryIndices&&0<Object.keys(this.binaryIndices).length)&&(this.adaptiveBinaryIndices=!1);try{for(r=0;r<n;r+=1)this.update(e[r])}finally{t&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}}else{if(!O.call(e,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var i,o,a,s=this.get(e.$loki,!0),u=this;if(!s)throw new Error("Trying to update a document not in collection.");i=s[0],a=s[1],o=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?f(e,this.cloneMethod):e,this.emit("pre-update",e),this.uniqueNames.forEach(function(e){u.getUniqueIndex(e,!0).update(i,o)}),(this.data[a]=o)!==e&&this.addAutoUpdateObserver(e);for(var c,l,d=0;d<this.DynamicViews.length;d++)this.DynamicViews[d].evaluateDocument(a,!1);if(this.adaptiveBinaryIndices)for(c in this.binaryIndices)this.adaptiveBinaryIndexUpdate(a,c);else this.flagBinaryIndexesDirty();return this.idIndex[a]=o.$loki,this.isIncremental&&this.dirtyIds.push(o.$loki),this.commit(),this.dirty=!0,o=this.disableChangesApi?this.updateMeta(o):this.updateMetaWithChange(o,i),this.disableFreeze||p(o),l=this.cloneObjects?f(o,this.cloneMethod):o,this.emit("update",l,i),l}catch(e){throw this.rollback(),this.lokiConsoleWrapper.error(e.message),this.emit("error",e),e}}},_.prototype.add=function(e){if("object"!=typeof e)throw new TypeError("Object being added needs to be an object");if(void 0!==e.$loki)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var t=this.maxId;e.$loki=t,this.disableMeta||(e.meta.version=0);for(var r=0,n=this.uniqueNames.length;r<n;r++)this.getUniqueIndex(this.uniqueNames[r],!0).set(e);this.idIndex&&this.idIndex.push(t),this.isIncremental&&this.dirtyIds.push(t),this.data.push(e);for(var i,o=this.data.length-1,a=this.DynamicViews.length,r=0;r<a;r++)this.DynamicViews[r].evaluateDocument(o,!0);if(this.adaptiveBinaryIndices)for(i in this.binaryIndices)this.adaptiveBinaryIndexInsert(o,i);else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?f(e,this.cloneMethod):e}catch(e){throw this.rollback(),this.lokiConsoleWrapper.error(e.message),this.emit("error",e),e}},_.prototype.updateWhere=function(e,t){var r,n=this.where(e),i=0;try{for(;i<n.length;i++)r=t(n[i]),this.update(r)}catch(e){this.rollback(),this.lokiConsoleWrapper.error(e.message)}},_.prototype.removeWhere=function(e){var t;"function"==typeof e?(t=this.data.filter(e),this.remove(t)):this.chain().find(e).remove()},_.prototype.removeDataOnly=function(){this.remove(this.data.slice())},_.prototype.removeBatchByPositions=function(r){var e,t,n,i,o,a=r.length,s={},u=Object.keys(this.binaryIndices).length,c=Object.keys(this.constraints.unique).length,l=this.adaptiveBinaryIndices&&0<Object.keys(this.binaryIndices).length,d=this;try{for(this.startTransaction(),this.ensureId(),n=0;n<a;n++)s[this.idIndex[r[n]]]=!0;if(0<(e=this.DynamicViews.length)||0<u||0<c){if(0<e)for(t=0;t<e;t++)this.DynamicViews[t].removeDocument(r);if(this.adaptiveBinaryIndices&&!l)for(o in this.binaryIndices)this.adaptiveBinaryIndexRemove(r,o);else this.flagBinaryIndexesDirty();c&&this.uniqueNames.forEach(function(e){var t=d.getUniqueIndex(e);if(t)for(n=0;n<a;n++)null!==(i=d.data[r[n]])[e]&&void 0!==i[e]&&t.remove(i[e])})}if(!this.disableChangesApi||1<this.events.delete.length)for(n=0;n<a;n++)this.emit("delete",this.data[r[n]]);if(this.data=this.data.filter(function(e){return!s[e.$loki]}),this.isIncremental)for(n=0;n<a;n++)this.dirtyIds.push(this.idIndex[r[n]]);this.idIndex=this.idIndex.filter(function(e){return!s[e]}),this.adaptiveBinaryIndices&&l&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(e){return this.rollback(),l&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(e.message),this.emit("error",e),null}},_.prototype.removeBatch=function(e){for(var t=e.length,r=this.data.length,n={},i=[],o=0;o<r;o++)n[this.data[o].$loki]=o;for(o=0;o<t;o++)"object"==typeof e[o]?i.push(n[e[o].$loki]):i.push(n[e[o]]);this.removeBatchByPositions(i)},_.prototype.remove=function(r){if("object"!=typeof(r="number"==typeof r?this.get(r):r))throw new Error("Parameter is not an object");if(Array.isArray(r))this.removeBatch(r);else{if(!O.call(r,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var e=this.get(r.$loki,!0),t=e[1],n=this;this.uniqueNames.forEach(function(e){var t;null!==r[e]&&void 0!==r[e]&&(t=n.getUniqueIndex(e))&&t.remove(r[e])});for(var i,o=0;o<this.DynamicViews.length;o++)this.DynamicViews[o].removeDocument(t);if(this.adaptiveBinaryIndices)for(i in this.binaryIndices)this.adaptiveBinaryIndexRemove(t,i);else this.flagBinaryIndexesDirty();return this.data.splice(t,1),this.removeAutoUpdateObserver(r),this.idIndex.splice(t,1),this.isIncremental&&this.dirtyIds.push(r.$loki),this.commit(),this.dirty=!0,this.emit("delete",e[0]),delete(r=this.disableFreeze?r:s(r)).$loki,delete r.meta,this.disableFreeze||a(r),r}catch(e){return this.rollback(),this.lokiConsoleWrapper.error(e.message),this.emit("error",e),null}}},_.prototype.get=function(e,t){this.idIndex||this.ensureId();var r,t=t||!1,n=this.idIndex,i=n.length-1,o=0;if(e="number"==typeof e?e:parseInt(e,10),isNaN(e))throw new TypeError("Passed id is not an integer");for(;n[o]<n[i];)n[r=o+i>>1]<e?o=1+r:i=r;return i===o&&n[o]===e?t?[this.data[o],o]:this.data[o]:null},_.prototype.getBinaryIndexPosition=function(e,t){var r=S.getIn(this.data[e],t,!0),n=this.binaryIndices[t].values,t=this.calculateRange("$eq",t,r);if(0!==t[0]||-1!==t[1])for(var r=t[0],i=t[1],o=r;o<=i;o++)if(n[o]===e)return o;return null},_.prototype.adaptiveBinaryIndexInsert=function(e,t){var r=-1!==t.indexOf("."),n=this.binaryIndices[t].values,i=S.getIn(this.data[e],t,r),n=(!0===this.serializableIndices&&i instanceof Date&&(this.data[e][t]=i.getTime(),i=S.getIn(this.data[e],t)),0===n.length?0:this.calculateRangeStart(t,i,!0,r));this.binaryIndices[t].values.splice(n,0,e)},_.prototype.adaptiveBinaryIndexUpdate=function(e,t){for(var r=this.binaryIndices[t].values,n=r.length,i=0;i<n&&r[i]!==e;i++);this.binaryIndices[t].values.splice(i,1),this.adaptiveBinaryIndexInsert(e,t)},_.prototype.adaptiveBinaryIndexRemove=function(e,t,r){var n,i,o,a,s,u,c=this.binaryIndices[t],l={};if(Array.isArray(e)){if(1!==(a=e.length)){for(o=0;o<a;o++)l[e[o]]=!0;if(c.values=c.values.filter(function(e){return!l[e]}),!0===r)return;var d=e.slice();for(d.sort(function(e,t){return e-t}),n=c.values.length,i=0;i<n;i++){for(s=c.values[i],o=u=0;o<a&&s>d[o];o++)u++;c.values[i]-=u}return}e=e[0]}if(null===(t=this.getBinaryIndexPosition(e,t)))return null;if(c.values.splice(t,1),!0!==r)for(n=c.values.length,i=0;i<n;i++)c.values[i]>e&&c.values[i]--},_.prototype.calculateRangeStart=function(e,t,r,n){var i,o=this.data,a=this.binaryIndices[e].values,s=0,u=a.length-1;if(0===a.length)return-1;for(S.getIn(o[a[s]],e,n),S.getIn(o[a[u]],e,n);s<u;)v.lt(S.getIn(o[a[i=s+u>>1]],e,n),t,!1)?s=1+i:u=i;var c=s;return v.aeq(t,S.getIn(o[a[c]],e,n))?c:v.lt(t,S.getIn(o[a[c]],e,n),!1)?r?c:c-1:r?c+1:c},_.prototype.calculateRangeEnd=function(e,t,r){var n,i=this.data,o=this.binaryIndices[e].values,a=0,s=o.length-1;if(0===o.length)return-1;for(S.getIn(i[o[a]],e,r),S.getIn(i[o[s]],e,r);a<s;)v.lt(t,S.getIn(i[o[n=a+s>>1]],e,r),!1)?s=n:a=1+n;var u=s;return v.aeq(t,S.getIn(i[o[u]],e,r))?u:v.gt(t,S.getIn(i[o[u]],e,r),!1)?u+1:v.aeq(t,S.getIn(i[o[u-1]],e,r))?u-1:u},_.prototype.calculateRange=function(e,t,r){var n,i,o,a=this.data,s=this.binaryIndices[t].values,u=s.length-1;if(0===a.length)return[0,-1];var c=-1!==t.indexOf("."),l=S.getIn(a[s[0]],t,c),d=S.getIn(a[s[u]],t,c);switch(e){case"$eq":case"$aeq":case"$dteq":if(v.lt(r,l,!1)||v.gt(r,d,!1))return[0,-1];break;case"$gt":if(v.gt(r,d,!0))return[0,-1];if(v.gt(l,r,!1))return[0,u];break;case"$gte":if(v.gt(r,d,!1))return[0,-1];if(v.gt(l,r,!0))return[0,u];break;case"$lt":if(v.lt(r,l,!0))return[0,-1];if(v.lt(d,r,!1))return[0,u];break;case"$lte":if(v.lt(r,l,!1))return[0,-1];if(v.lt(d,r,!0))return[0,u];break;case"$between":return v.gt(r[0],d,!1)?[0,-1]:v.lt(r[1],l,!1)||((n=this.calculateRangeStart(t,r[0],!1,c))<0&&n++,u<(o=this.calculateRangeEnd(t,r[1],c))&&o--,v.gt(S.getIn(a[s[n]],t,c),r[0],!0)||n++,v.lt(S.getIn(a[s[o]],t,c),r[1],!0)||o--,o<n)?[0,-1]:[n,o];case"$in":for(var f=[],p=[],h=0,m=r.length;h<m;h++)for(var y=this.calculateRange("$eq",t,r[h]),b=y[0];b<=y[1];b++)void 0===f[b]&&(f[b]=!0,p.push(b));return p}switch(e){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":n=this.calculateRangeStart(t,r,!1,c),i=S.getIn(a[s[n]],t,c)}switch(e){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":o=this.calculateRangeEnd(t,r,c),S.getIn(a[s[o]],t,c)}switch(e){case"$eq":case"$aeq":case"$dteq":return v.aeq(i,r)?[n,o]:[0,-1];case"$gt":return v.aeq(S.getIn(a[s[o]],t,c),r)?[o+1,u]:[o,u];case"$gte":return v.aeq(S.getIn(a[s[n]],t,c),r)?[n,u]:[n+1,u];case"$lt":return v.aeq(S.getIn(a[s[n]],t,c),r)?[0,n-1]:[0,n];case"$lte":return v.aeq(S.getIn(a[s[o]],t,c),r)?[0,o]:[0,o-1];default:return[0,a.length-1]}},_.prototype.by=function(t,e){var r;return void 0===e?(r=this,function(e){return r.by(t,e)}):(e=this.getUniqueIndex(t,!0).get(e),this.cloneObjects?f(e,this.cloneMethod):e)},_.prototype.findOne=function(e){e=e||{};e=this.chain().find(e,!0).data();return Array.isArray(e)&&0===e.length?null:this.cloneObjects?f(e[0],this.cloneMethod):e[0]},_.prototype.chain=function(e,t){var r=new b(this);return void 0===e?r:r.transform(e,t)},_.prototype.find=function(e){return this.chain().find(e).data()},_.prototype.findOneUnindexed=function(e,t){for(var r=this.data.length;r--;)if(S.getIn(this.data[r],e,!0)===t)return this.data[r];return null},_.prototype.startTransaction=function(){if(this.transactional){this.cachedData=f(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].startTransaction()}},_.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].commit()}},_.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].rollback()}},_.prototype.async=function(e,t){setTimeout(function(){if("function"!=typeof e)throw new TypeError("Argument passed for async execution is not a function");e(),t()},0)},_.prototype.where=function(e){return this.chain().where(e).data()},_.prototype.mapReduce=function(e,t){try{return t(this.data.map(e))}catch(e){throw e}},_.prototype.eqJoin=function(e,t,r,n,i){return new b(this).eqJoin(e,t,r,n,i)},_.prototype.stages={},_.prototype.getStage=function(e){return this.stages[e]||(this.stages[e]={}),this.stages[e]},_.prototype.commitLog=[],_.prototype.stage=function(e,t){var r=JSON.parse(JSON.stringify(t));return this.getStage(e)[t.$loki]=r},_.prototype.commitStage=function(e,t){var r,n=this.getStage(e),i=(new Date).getTime();for(r in n)this.update(n[r]),this.commitLog.push({timestamp:i,message:t,data:JSON.parse(JSON.stringify(n[r]))});this.stages[e]={}},_.prototype.no_op=function(){},_.prototype.extract=function(e){for(var t=0,r=this.data.length,n=w(e),i=[];t<r;t+=1)i.push(I(this.data[t],e,n));return i},_.prototype.max=function(e){return Math.max.apply(null,this.extract(e))},_.prototype.min=function(e){return Math.min.apply(null,this.extract(e))},_.prototype.maxRecord=function(e){for(var t,r=0,n=this.data.length,i=w(e),o={index:0,value:void 0};r<n;r+=1)(void 0===t||t<I(this.data[r],e,i))&&(t=I(this.data[r],e,i),o.index=this.data[r].$loki);return o.value=t,o},_.prototype.minRecord=function(e){for(var t,r=0,n=this.data.length,i=w(e),o={index:0,value:void 0};r<n;r+=1)(void 0===t||t>I(this.data[r],e,i))&&(t=I(this.data[r],e,i),o.index=this.data[r].$loki);return o.value=t,o},_.prototype.extractNumerical=function(e){return this.extract(e).map(j).filter(Number).filter(function(e){return!isNaN(e)})},_.prototype.avg=function(e){return M(this.extractNumerical(e))},_.prototype.stdDev=function(e){return e=this.extractNumerical(e),t=M(e),e=M(e.map(function(e){e-=t;return e*e})),Math.sqrt(e);var t},_.prototype.mode=function(e){var t,r,n,i={};for(r in this.extract(e).forEach(function(e){i[e]?i[e]+=1:i[e]=1}),i)t?t<i[r]&&(n=r):t=i[n=r];return n},_.prototype.median=function(e){var e=this.extractNumerical(e),t=(e.sort(T),Math.floor(e.length/2));return e.length%2?e[t]:(e[t-1]+e[t])/2},k.prototype={keys:[],values:[],sort:function(e,t){return e<t?-1:t<e?1:0},setSort:function(e){this.bs=new C(e)},bs:function(){return new C(this.sort)},set:function(e,t){var r=this.bs(this.keys,e);r.found?this.values[r.index]=t:(this.keys.splice(r.index,0,e),this.values.splice(r.index,0,t))},get:function(e){return this.values[R(this.keys,e,this.sort).index]}},$.prototype.keyMap={},$.prototype.lokiMap={},$.prototype.set=function(e){var t=e[this.field];if(null!=t){if(this.keyMap[t])throw new Error("Duplicate key for property "+this.field+": "+t);this.keyMap[t]=e,this.lokiMap[e.$loki]=t}},$.prototype.get=function(e){return this.keyMap[e]},$.prototype.byId=function(e){return this.keyMap[this.lokiMap[e]]},$.prototype.update=function(e,t){var r;this.lokiMap[e.$loki]!==t[this.field]?(r=this.lokiMap[e.$loki],this.set(t),this.keyMap[r]=void 0):this.keyMap[e[this.field]]=t},$.prototype.remove=function(e){var t=this.keyMap[e];if(null==t)throw new Error("Key is not in unique index: "+this.field);this.keyMap[e]=void 0,this.lokiMap[t.$loki]=void 0},$.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)},D.prototype={set:function(e,t){this.index[e]?this.index[e].push(t):this.index[e]=[t]},remove:function(e,t){var r,n=this.index[e];for(r in n)n[r]==t&&n.splice(r,1);n.length<1&&(this.index[e]=void 0)},get:function(e){return this.index[e]},clear:function(e){this.index={}}},c.deepFreeze=p,c.freeze=a,c.unFreeze=s,c.LokiOps=x,c.Collection=_,c.DynamicView=g,c.Resultset=b,c.KeyValueStore=k,c.LokiMemoryAdapter=l,c.LokiPartitioningAdapter=d,c.LokiLocalStorageAdapter=y,c.LokiFsAdapter=m,c.persistenceAdapters={fs:m,localStorage:y},c.aeq=e,c.lt=t,c.gt=r,c.Comparators=v,c},"function"==typeof define&&define.amd?define([],t):"object"==typeof n?r.exports=t():e.loki=t()}.call(this)}.call(this,F("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./loki-indexed-adapter.js":156,_process:930,fs:904}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Aggregator=void 0;const s=e("./core"),u=e("./lazy"),c=e("./util");r.Aggregator=class{constructor(e,t){this.pipeline=e,this.options=(0,s.initOptions)(t)}stream(e){let t=(0,u.Lazy)(e);var e=this.options.processingMode,r=(e!=s.ProcessingMode.CLONE_ALL&&e!=s.ProcessingMode.CLONE_INPUT||t.map(c.cloneDeep),new Array);if(!(0,c.isEmpty)(this.pipeline))for(const a of this.pipeline){var n=Object.keys(a),i=n[0],o=(0,s.getOperator)(s.OperatorType.PIPELINE,i,this.options);(0,c.assert)(1===n.length&&!!o,"invalid pipeline operator "+i),r.push(i),t=o(t,a[i],this.options)}return(e==s.ProcessingMode.CLONE_OUTPUT||e==s.ProcessingMode.CLONE_ALL&&(0,c.intersection)([["$group","$unwind"],r]).length)&&t.map(c.cloneDeep),t}run(e){return this.stream(e).value()}}},{"./core":159,"./lazy":161,"./util":397}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.redact=r.computeValue=r.getOperator=r.useOperators=r.Context=r.OperatorType=r.initOptions=r.ComputeOptions=r.ProcessingMode=void 0;const c=e("./util");var n,l;(e=n=r.ProcessingMode||(r.ProcessingMode={})).CLONE_ALL="CLONE_ALL",e.CLONE_INPUT="CLONE_INPUT",e.CLONE_OUTPUT="CLONE_OUTPUT",e.CLONE_OFF="CLONE_OFF";class d{constructor(e,t,r,n=Date.now()){this._opts=e,this._root=t,this._local=r,this.timestamp=n,this.update(t,r)}static init(e,t,r){return e instanceof d?new d(e._opts,(0,c.isNil)(e.root)?t:e.root,Object.assign({},e.local,r)):new d(e,t,r)}update(e,t){return this._root=e,this._local=t&&Object.assign({},t,{variables:Object.assign({},null==(e=this._local)?void 0:e.variables,null==t?void 0:t.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:i.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var e;return null==(e=this._opts)?void 0:e.collation}get processingMode(){var e;return(null==(e=this._opts)?void 0:e.processingMode)||n.CLONE_OFF}get useStrictMode(){var e;return null==(e=this._opts)?void 0:e.useStrictMode}get scriptEnabled(){var e;return null==(e=this._opts)?void 0:e.scriptEnabled}get useGlobalContext(){var e;return null==(e=this._opts)?void 0:e.useGlobalContext}get hashFunction(){var e;return null==(e=this._opts)?void 0:e.hashFunction}get collectionResolver(){var e;return null==(e=this._opts)?void 0:e.collectionResolver}get jsonSchemaValidator(){var e;return null==(e=this._opts)?void 0:e.jsonSchemaValidator}get variables(){var e;return null==(e=this._opts)?void 0:e.variables}get context(){var e;return null==(e=this._opts)?void 0:e.context}}r.ComputeOptions=d,r.initOptions=function(e){return e instanceof d?e.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:n.CLONE_OFF},e),{context:null!=e&&e.context?i.from(null==e?void 0:e.context):i.init({})}))},(e=l=r.OperatorType||(r.OperatorType={})).ACCUMULATOR="accumulator",e.EXPRESSION="expression",e.PIPELINE="pipeline",e.PROJECTION="projection",e.QUERY="query",e.WINDOW="window";class i{constructor(e){this.operators=(0,c.cloneDeep)(e)}static init(e){return new i((0,c.merge)({[l.ACCUMULATOR]:{},[l.EXPRESSION]:{},[l.PIPELINE]:{},[l.PROJECTION]:{},[l.QUERY]:{},[l.WINDOW]:{}},e,{skipValidation:!0}))}static from(e){return new i(e.operators)}addOperators(e,t){for(var[r,n]of Object.entries(t))this.getOperator(e,r)||(this.operators[e][r]=n);return this}addAccumulatorOps(e){return this.addOperators(l.ACCUMULATOR,e)}addExpressionOps(e){return this.addOperators(l.EXPRESSION,e)}addQueryOps(e){return this.addOperators(l.QUERY,e)}addPipelineOps(e){return this.addOperators(l.PIPELINE,e)}addProjectionOps(e){return this.addOperators(l.PROJECTION,e)}addWindowOps(e){return this.addOperators(l.WINDOW,e)}getOperator(e,t){return e in this.operators&&this.operators[e][t]||null}}const o=(r.Context=i).init({});function f(e,t,r){var{context:r,useGlobalContext:n}=r||{},r=r?r.getOperator(e,t):null;return!r&&n?o.getOperator(e,t):r}r.useOperators=function(e,t){for(var[r,n]of Object.entries(t)){(0,c.assert)((0,c.isFunction)(n)&&(0,c.isOperator)(r),`'${r}' is not a valid operator`);var i=f(e,r,null);(0,c.assert)(!i||n===i,r+` already exists for '${e}' operators. Cannot change operator function once registered.`)}o.addOperators(e,t)},r.getOperator=f;const p={$$ROOT(e,t,r){return r.root},$$CURRENT(e,t,r){return e},$$REMOVE(e,t,r){},$$NOW(e,t,r){return new Date(r.timestamp)}},h={$$KEEP(e,t,r){return e},$$PRUNE(e,t,r){},$$DESCEND(t,r,n){if((0,c.has)(r,"$cond")){let e;for(var[i,o]of Object.entries(t))if((0,c.isObjectLike)(o)){if(o instanceof Array){var a,s=[];for(a of o)(0,c.isObject)(a)&&(a=u(a,r,n.update(a))),(0,c.isNil)(a)||s.push(a);e=s}else e=u(o,r,n.update(o));(0,c.isNil)(e)?delete t[i]:t[i]=e}}return t}};function m(t,r,n,i){const o=d.init(i,t);if(n=n||"",(0,c.isOperator)(n)){var a=f(l.EXPRESSION,n,i);if(a)return a(t,r,o);a=f(l.ACCUMULATOR,n,i);if(a)return t instanceof Array||(t=m(t,r,null,o),r=null),(0,c.assert)(t instanceof Array,`'${n}' target must be an array.`),a(t,r,o.update(null,o.local));throw new Error(`operator '${n}' is not registered`)}if((0,c.isString)(r)&&0<r.length&&"$"===r[0]){if((0,c.has)(h,r))return r;let e=o.root;a=r.split(".");return""===(r=(0,c.has)(p,a[0])?(e=p[a[0]](t,null,o),r.slice(a[0].length+1)):"$$"===a[0].slice(0,2)?(e=Object.assign({},o.variables,{this:t},null==(n=o.local)?void 0:n.variables),n=a[0].slice(2),(0,c.assert)((0,c.has)(e,n),"Use of undefined variable: "+n),r.slice(2)):r.slice(1))?e:(0,c.resolve)(e,r)}if((0,c.isArray)(r))return r.map(e=>m(t,e,null,o));if((0,c.isObject)(r)){var e={};for(const[s,u]of Object.entries(r))if(e[s]=m(t,u,s,o),[l.EXPRESSION,l.ACCUMULATOR].some(e=>!!f(e,s,i)))return(0,c.assert)(1===Object.keys(r).length,"Invalid aggregation expression '"+JSON.stringify(r)+"'"),e[s];return e}return r}function u(e,t,r){var n=m(e,t,null,r);return(0,c.has)(h,n)?h[n](e,t,r):n}r.computeValue=m,r.redact=u},{"./util":397}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Cursor=void 0;const n=e("./aggregator"),i=e("./lazy"),o=e("./util");class a{constructor(e,t,r,n){this.source=e,this.predicate=t,this.projection=r,this.options=n,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||((0,o.isObject)(this.projection)&&this.operators.push({$project:this.projection}),this.result=(0,i.Lazy)(this.source).filter(this.predicate),0<this.operators.length&&(this.result=new n.Aggregator(this.operators,this.options).stream(this.result))),this.result}fetchAll(){var e=(0,i.Lazy)([...this.buffer]);return this.buffer=[],(0,i.compose)(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=Object.assign(Object.assign({},this.options),{collation:e}),this}next(){var e;return 0<this.buffer.length?this.buffer.pop():(e=this.fetch().next()).done?void 0:e.value}hasNext(){if(!(0<this.buffer.length)){var e=this.fetch().next();if(e.done)return!1;this.buffer.push(e.value)}return!0}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}}r.Cursor=a},{"./aggregator":158,"./lazy":161,"./util":397}],161:[function(e,t,r){"use strict";function n(e){return e instanceof o?e:new o(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.Iterator=r.compose=r.Lazy=void 0,r.Lazy=n,r.compose=function(...t){let r=0;return n(()=>{for(;r<t.length;){var e=t[r].next();if(!e.done)return e;r++}return{done:!0}})};const m=new Error;var y,i;function a(c,l,d){let f=!1,p=-1,h=0;return function(n){try{e:for(;!f;){let e=c(),t=(p++,-1);var i=l.length;let r=!1;for(;++t<i;){var o=l[t];switch(o.action){case y.MAP:e=o.func(e,p);break;case y.FILTER:if(o.func(e,p))break;continue e;case y.TAKE:--o.count,o.count||(r=!0);break;case y.DROP:--o.count,o.count||(a=l,s=t,u=void 0,u=a.slice(s+1),a.splice(s),Array.prototype.push.apply(a,u));continue e;default:break e}}if(f=r,!n)return{value:e,done:!1};d[h++]=e}}catch(e){if(e!==m)throw e}var a,s,u;return{done:f=!0}}}(i=y=y||{})[i.MAP=0]="MAP",i[i.FILTER=1]="FILTER",i[i.TAKE=2]="TAKE",i[i.DROP=3]="DROP";class o{constructor(t){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let r;if(t instanceof Function&&(t={next:t}),(e=t)&&"object"==typeof e&&(null==e?void 0:e.next)instanceof Function){const n=t;r=()=>{var e=n.next();if(e.done)throw m;return e.value}}else if(t instanceof Array){const i=t,o=i.length;let e=0;r=()=>{if(e<o)return i[e++];throw m}}else if(!(t instanceof Function))throw new Error(`Source is of type '${typeof t}'. Must be Array, Function, or Generator`);var e;this.getNext=a(r,this.iteratees,this.yieldedValues)}push(e,t){return"function"==typeof t?this.iteratees.push({action:e,func:t}):"number"==typeof t&&this.iteratees.push({action:e,count:t}),this}next(){return this.getNext()}map(e){return this.push(y.MAP,e)}filter(e){return this.push(y.FILTER,e)}take(e){return 0<e?this.push(y.TAKE,e):this}drop(e){return 0<e?this.push(y.DROP,e):this}transform(e){const t=this;let r;return n(()=>(r=r||n(e(t.value()))).next())}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){var t=this.next();if(t.done)break;if(!1===e(t.value))return!1}return!0}reduce(e,t){let r=this.next();for(void 0!==t||r.done||(t=r.value,r=this.next());!r.done;)t=e(t,r.value),r=this.next();return t}size(){return this.reduce((e,t)=>++e,0)}[Symbol.iterator](){return this}}r.Iterator=o},{}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$type=r.$elemMatch=r.$size=r.$all=r.$exists=r.$regex=r.$mod=r.$gte=r.$gt=r.$lte=r.$lt=r.$nin=r.$in=r.$ne=r.$eq=r.createExpressionOperator=r.createQueryOperator=void 0;const i=e("../core"),a=e("../query"),s=e("../util");function n(e,t,r){return!!(0,s.isEqual)(e,t)||!(!(0,s.isNil)(e)||!(0,s.isNil)(t))||e instanceof Array&&(t=s.isEqual.bind(null,t),e.some(t)||(0,s.flatten)(e,null==r?void 0:r.depth).some(t))}function o(e,t,r){return(0,s.isNil)(e)?t.some(e=>null===e):0<(0,s.intersection)([(0,s.ensureArray)(e),t],null==r?void 0:r.hashFunction).length}function u(e){return(0,s.isOperator)(e)&&-1===["$and","$or","$nor"].indexOf(e)}function c(n,t,i){if((0,s.isArray)(n)&&!(0,s.isEmpty)(n)){let r=e=>e,e=t;Object.keys(t).every(u)&&(e={temp:t},r=e=>({temp:e}));var o=new a.Query(e,i);for(let e=0,t=n.length;e<t;e++)if(o.test(r(n[e])))return!0}return!1}r.createQueryOperator=function(a){var e=(t,r,n)=>{const i={unwrapArray:!0},o=Math.max(1,t.split(".").length-1);return e=>{e=(0,s.resolve)(e,t,i);return a(e,r,Object.assign(Object.assign({},n),{depth:o}))}};return e.op="query",e},r.createExpressionOperator=function(n){return(e,t,r)=>{e=(0,i.computeValue)(e,t,null,r);return n(...e)}},r.$eq=n,r.$ne=function(e,t,r){return!n(e,t,r)},r.$in=o,r.$nin=function(e,t,r){return!o(e,t,r)},r.$lt=function(e,t,r){return h(e,t,(e,t)=>(0,s.compare)(e,t)<0)},r.$lte=function(e,t,r){return h(e,t,(e,t)=>(0,s.compare)(e,t)<=0)},r.$gt=function(e,t,r){return h(e,t,(e,t)=>0<(0,s.compare)(e,t))},r.$gte=function(e,t,r){return h(e,t,(e,t)=>0<=(0,s.compare)(e,t))},r.$mod=function(e,t,r){return(0,s.ensureArray)(e).some(e=>2===t.length&&e%t[0]===t[1])},r.$regex=function(e,t,r){var e=(0,s.ensureArray)(e),n=e=>(0,s.isString)(e)&&(0,s.truthy)(t.exec(e),null==r?void 0:r.useStrictMode);return e.some(n)||(0,s.flatten)(e,1).some(n)},r.$exists=function(e,t,r){return(!1===t||0===t)&&void 0===e||(!0===t||1===t)&&void 0!==e},r.$all=function(e,t,r){if(!((0,s.isArray)(e)&&(0,s.isArray)(t)&&e.length&&t.length))return!1;let n=!0;for(const i of t){if(!n)break;n=(0,s.isObject)(i)&&(0,s.inArray)(Object.keys(i),"$elemMatch")?c(e,i.$elemMatch,r):i instanceof RegExp?e.some(e=>"string"==typeof e&&i.test(e)):e.some(e=>(0,s.isEqual)(i,e))}return n},r.$size=function(e,t,r){return Array.isArray(e)&&e.length===t},r.$elemMatch=c;var e=e=>null===e,l=e=>(0,s.isNumber)(e)&&e>=s.MIN_INT&&e<=s.MAX_INT&&-1===e.toString().indexOf("."),d=e=>(0,s.isNumber)(e)&&e>=s.MIN_LONG&&e<=s.MAX_LONG&&-1===e.toString().indexOf(".");const f={array:s.isArray,bool:s.isBoolean,boolean:s.isBoolean,date:s.isDate,decimal:s.isNumber,double:s.isNumber,int:l,long:d,number:s.isNumber,null:e,object:s.isObject,regex:s.isRegExp,regexp:s.isRegExp,string:s.isString,undefined:s.isNil,function:e=>{throw new Error("unsupported type key `function`.")},1:s.isNumber,2:s.isString,3:s.isObject,4:s.isArray,6:s.isNil,8:s.isBoolean,9:s.isDate,10:e,11:s.isRegExp,16:l,18:d,19:s.isNumber};function p(e,t){t=f[t];return!!t&&t(e)}function h(e,t,r){return(0,s.ensureArray)(e).some(e=>(0,s.getType)(e)===(0,s.getType)(t)&&r(e,t))}r.$type=function(t,e,r){return Array.isArray(e)?0<=e.findIndex(e=>p(t,e)):p(t,e)}},{"../core":159,"../query":396,"../util":397}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.covariance=r.stddev=void 0,r.stddev=function(e,t=!0){var r=e.reduce((e,t)=>e+t,0),n=e.length||1;const i=r/n;return Math.sqrt(e.reduce((e,t)=>e+Math.pow(t-i,2),0)/(n-Number(t)))},r.covariance=function(e,t=!0){if(!e)return null;if(e.length<2)return t?null:0;let r=0,n=0;for(var[i,o]of e)r+=i,n+=o;r/=e.length,n/=e.length;let a=0;for(var[s,u]of e)a+=(s-r)*(u-n);return a/(e.length-Number(t))}},{}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$accumulator=void 0;const s=e("../../core"),u=e("../../util");r.$accumulator=(e,t,r)=>{if((0,u.assert)(!!r&&r.scriptEnabled,"$accumulator operator requires 'scriptEnabled' option to be true"),0==e.length)return t.initArgs;var n=s.ComputeOptions.init(r),r=(0,s.computeValue)({},t.initArgs||[],null,n.update((null==(r=null==n?void 0:n.local)?void 0:r.groupId)||{}));let i=t.init.call(null,...r);for(const a of e){var o=(0,s.computeValue)(a,t.accumulateArgs,null,n.update(a));i=t.accumulate.call(null,i,...o)}return t.finalize?t.finalize.call(null,i):i}},{"../../core":159,"../../util":397}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$addToSet=void 0;const n=e("../../util"),i=e("./push");r.$addToSet=(e,t,r)=>(0,n.unique)((0,i.$push)(e,t,r),null==r?void 0:r.hashFunction)},{"../../util":397,"./push":182}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$avg=void 0;const n=e("../../util"),i=e("./push");r.$avg=(e,t,r)=>{e=(0,i.$push)(e,t,r).filter(n.isNumber);return e.reduce((e,t)=>e+t,0)/(e.length||1)}},{"../../util":397,"./push":182}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$bottom=void 0;const n=e("./bottomN");r.$bottom=(e,t,r)=>(0,n.$bottomN)(e,Object.assign(Object.assign({},t),{n:1}),r)},{"./bottomN":168}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$bottomN=void 0;const o=e("../../aggregator"),a=e("../../core"),s=e("./push");r.$bottomN=(e,t,r)=>{var r=a.ComputeOptions.init(r),{n,sortBy:i}=(0,a.computeValue)(r.local.groupId,t,null,r),i=new o.Aggregator([{$sort:i}],r).run(e),e=i.length;return(0,s.$push)(e<=n?i:i.slice(e-n),t.output,r)}},{"../../aggregator":158,"../../core":159,"./push":182}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$count=void 0;r.$count=(e,t,r)=>e.length},{}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$covariancePop=void 0;const n=e("./_internal"),i=e("./push");r.$covariancePop=(e,t,r)=>(0,n.covariance)((0,i.$push)(e,t,r),!1)},{"./_internal":163,"./push":182}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$covarianceSamp=void 0;const n=e("./_internal"),i=e("./push");r.$covarianceSamp=(e,t,r)=>(0,n.covariance)((0,i.$push)(e,t,r),!0)},{"./_internal":163,"./push":182}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$first=void 0;const n=e("../../core");r.$first=(e,t,r)=>0<e.length?(0,n.computeValue)(e[0],t,null,r):void 0},{"../../core":159}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$firstN=void 0;const a=e("../../core"),s=e("./push");r.$firstN=(e,t,r)=>{var n=a.ComputeOptions.init(r),i=e.length,o=(0,a.computeValue)(null==(o=null==n?void 0:n.local)?void 0:o.groupId,t.n,null,n);return(0,s.$push)(i<=o?e:e.slice(0,o),t.input,r)}},{"../../core":159,"./push":182}],174:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./accumulator"),r),i(e("./addToSet"),r),i(e("./avg"),r),i(e("./bottom"),r),i(e("./bottomN"),r),i(e("./count"),r),i(e("./covariancePop"),r),i(e("./covarianceSamp"),r),i(e("./first"),r),i(e("./firstN"),r),i(e("./last"),r),i(e("./lastN"),r),i(e("./max"),r),i(e("./maxN"),r),i(e("./mergeObjects"),r),i(e("./min"),r),i(e("./minN"),r),i(e("./push"),r),i(e("./stdDevPop"),r),i(e("./stdDevSamp"),r),i(e("./sum"),r),i(e("./top"),r),i(e("./topN"),r)},{"./accumulator":164,"./addToSet":165,"./avg":166,"./bottom":167,"./bottomN":168,"./count":169,"./covariancePop":170,"./covarianceSamp":171,"./first":172,"./firstN":173,"./last":175,"./lastN":176,"./max":177,"./maxN":178,"./mergeObjects":179,"./min":180,"./minN":181,"./push":182,"./stdDevPop":183,"./stdDevSamp":184,"./sum":185,"./top":186,"./topN":187}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$last=void 0;const n=e("../../core");r.$last=(e,t,r)=>0<e.length?(0,n.computeValue)(e[e.length-1],t,null,r):void 0},{"../../core":159}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lastN=void 0;const a=e("../../core"),s=e("./push");r.$lastN=(e,t,r)=>{var n=a.ComputeOptions.init(r),i=e.length,o=(0,a.computeValue)(null==(o=null==n?void 0:n.local)?void 0:o.groupId,t.n,null,n);return(0,s.$push)(i<=o?e:e.slice(i-o),t.input,r)}},{"../../core":159,"./push":182}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$max=void 0;const n=e("../../util"),i=e("./push");r.$max=(e,t,r)=>{e=(0,i.$push)(e,t,r).filter(n.isNotNaN).reduce((e,t)=>0<=(0,n.compare)(t,e)?t:e,-1/0);return e===-1/0?void 0:e}},{"../../util":397,"./push":182}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$maxN=void 0;const a=e("../../core"),s=e("../../util"),u=e("./push");r.$maxN=(e,t,r)=>{var n=a.ComputeOptions.init(r),i=e.length,o=(0,a.computeValue)(null==(o=null==n?void 0:n.local)?void 0:o.groupId,t.n,null,n),n=(0,u.$push)(e,t.input,r).filter(e=>!(0,s.isNil)(e));return n.sort((e,t)=>-1*(0,s.compare)(e,t)),i<=o?n:n.slice(0,o)}},{"../../core":159,"../../util":397,"./push":182}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$mergeObjects=void 0;const n=e("../expression/object/mergeObjects");r.$mergeObjects=(e,t,r)=>(0,n.$mergeObjects)({docs:e},"$docs",r)},{"../expression/object/mergeObjects":276}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$min=void 0;const n=e("../../util"),i=e("./push");r.$min=(e,t,r)=>{e=(0,i.$push)(e,t,r).filter(n.isNotNaN).reduce((e,t)=>(0,n.compare)(t,e)<=0?t:e,1/0);return e===1/0?void 0:e}},{"../../util":397,"./push":182}],181:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$minN=void 0;const a=e("../../core"),s=e("../../util"),u=e("./push");r.$minN=(e,t,r)=>{var n=a.ComputeOptions.init(r),i=e.length,o=(0,a.computeValue)(null==(o=null==n?void 0:n.local)?void 0:o.groupId,t.n,null,n),n=(0,u.$push)(e,t.input,r).filter(e=>!(0,s.isNil)(e));return n.sort(s.compare),i<=o?n:n.slice(0,o)}},{"../../core":159,"../../util":397,"./push":182}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$push=void 0;const i=e("../../core"),o=e("../../util");r.$push=(e,t,r)=>{if((0,o.isNil)(t))return e;const n=i.ComputeOptions.init(r);return e.map(e=>(0,i.computeValue)(e,t,null,n.update(e)))}},{"../../core":159,"../../util":397}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$stdDevPop=void 0;const n=e("../../util"),i=e("./_internal"),o=e("./push");r.$stdDevPop=(e,t,r)=>(0,i.stddev)((0,o.$push)(e,t,r).filter(n.isNumber),!1)},{"../../util":397,"./_internal":163,"./push":182}],184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$stdDevSamp=void 0;const n=e("../../util"),i=e("./_internal"),o=e("./push");r.$stdDevSamp=(e,t,r)=>(0,i.stddev)((0,o.$push)(e,t,r).filter(n.isNumber),!0)},{"../../util":397,"./_internal":163,"./push":182}],185:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sum=void 0;const n=e("../../util"),i=e("./push");r.$sum=(e,t,r)=>{return(0,n.isArray)(e)?(0,n.isNumber)(t)?e.length*t:(0,i.$push)(e,t,r).filter(n.isNumber).reduce((e,t)=>e+t,0):0}},{"../../util":397,"./push":182}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$top=void 0;const n=e("./topN");r.$top=(e,t,r)=>(0,n.$topN)(e,Object.assign(Object.assign({},t),{n:1}),r)},{"./topN":187}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$topN=void 0;const o=e("../../aggregator"),a=e("../../core"),s=e("./push");r.$topN=(e,t,r)=>{var r=a.ComputeOptions.init(r),{n,sortBy:i}=(0,a.computeValue)(r.local.groupId,t,null,r),i=new o.Aggregator([{$sort:i},{$limit:n}],r).run(e);return(0,s.$push)(i,t.output,r)}},{"../../aggregator":158,"../../core":159,"./push":182}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.truncate=void 0,r.truncate=function(t,r,n){var i=Math.abs(t)===t?1:-1;t=Math.abs(t);let o=Math.trunc(t);if(t=parseFloat((t-o).toFixed(r+1)),0===r){var a=Math.trunc(10*t);n&&(1==(1&o)&&5<=a||5<a)&&o++}else if(0<r){a=Math.pow(10,r);let e=Math.trunc(t*a);t=Math.trunc(t*a*10)%10;n&&5<t&&(e+=1),o=(o*a+e)/a}else if(r<0){t=Math.pow(10,-1*r);let e=o%t;if(o=Math.max(0,o-e),n&&-1==i){for(;10<e;)e-=e%10;0<o&&5<=e&&(o+=t)}}return o*i}},{}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$abs=void 0;const n=e("../../../core"),i=e("../../../util");r.$abs=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:Math.abs(e)}},{"../../../core":159,"../../../util":397}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$add=void 0;const i=e("../../../core"),o=e("../../../util");r.$add=(e,t,r)=>{e=(0,i.computeValue)(e,t,null,r);let n=!1;t=e.reduce((e,t)=>((0,o.isDate)(t)&&((0,o.assert)(!n,"'$add' can only have one date value"),n=!0,t=t.getTime()),e+=t),0);return n?new Date(t):t}},{"../../../core":159,"../../../util":397}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ceil=void 0;const n=e("../../../core"),i=e("../../../util");r.$ceil=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)||isNaN(e),"$ceil expression must resolve to a number."),Math.ceil(e))}},{"../../../core":159,"../../../util":397}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$divide=void 0;const n=e("../../../core");r.$divide=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e[0]/e[1]}},{"../../../core":159}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$exp=void 0;const n=e("../../../core"),i=e("../../../util");r.$exp=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)||isNaN(e),"$exp expression must resolve to a number."),Math.exp(e))}},{"../../../core":159,"../../../util":397}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$floor=void 0;const n=e("../../../core"),i=e("../../../util");r.$floor=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)||isNaN(e),"$floor expression must resolve to a number."),Math.floor(e))}},{"../../../core":159,"../../../util":397}],195:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./abs"),r),i(e("./add"),r),i(e("./ceil"),r),i(e("./divide"),r),i(e("./exp"),r),i(e("./floor"),r),i(e("./ln"),r),i(e("./log"),r),i(e("./log10"),r),i(e("./mod"),r),i(e("./multiply"),r),i(e("./pow"),r),i(e("./round"),r),i(e("./sqrt"),r),i(e("./subtract"),r),i(e("./trunc"),r)},{"./abs":189,"./add":190,"./ceil":191,"./divide":192,"./exp":193,"./floor":194,"./ln":196,"./log":197,"./log10":198,"./mod":199,"./multiply":200,"./pow":201,"./round":202,"./sqrt":203,"./subtract":204,"./trunc":205}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ln=void 0;const n=e("../../../core"),i=e("../../../util");r.$ln=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)||isNaN(e),"$ln expression must resolve to a number."),Math.log(e))}},{"../../../core":159,"../../../util":397}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$log=void 0;const n=e("../../../core"),i=e("../../../util");r.$log=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t="$log expression must resolve to array(2) of numbers";return(0,i.assert)((0,i.isArray)(e)&&2===e.length,t),e.some(i.isNil)?null:((0,i.assert)(e.some(isNaN)||e.every(i.isNumber),t),Math.log10(e[0])/Math.log10(e[1]))}},{"../../../core":159,"../../../util":397}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$log10=void 0;const n=e("../../../core"),i=e("../../../util");r.$log10=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)||isNaN(e),"$log10 expression must resolve to a number."),Math.log10(e))}},{"../../../core":159,"../../../util":397}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$mod=void 0;const n=e("../../../core");r.$mod=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e[0]%e[1]}},{"../../../core":159}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$multiply=void 0;const n=e("../../../core");r.$multiply=(e,t,r)=>{return(0,n.computeValue)(e,t,null,r).reduce((e,t)=>e*t,1)}},{"../../../core":159}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$pow=void 0;const n=e("../../../core"),i=e("../../../util");r.$pow=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(e)&&2===e.length&&e.every(i.isNumber),"$pow expression must resolve to array(2) of numbers"),(0,i.assert)(!(0===e[0]&&e[1]<0),"$pow cannot raise 0 to a negative exponent"),Math.pow(e[0],e[1])}},{"../../../core":159,"../../../util":397}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$round=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("./_internal");r.$round=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=e[0],r=e[1];return(0,i.isNil)(t)||isNaN(t)||Math.abs(t)===1/0?t:((0,i.assert)((0,i.isNumber)(t),"$round expression must resolve to a number."),(0,o.truncate)(t,r,!0))}},{"../../../core":159,"../../../util":397,"./_internal":188}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sqrt=void 0;const n=e("../../../core"),i=e("../../../util");r.$sqrt=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:((0,i.assert)((0,i.isNumber)(e)&&0<e||isNaN(e),"$sqrt expression must resolve to non-negative number."),Math.sqrt(e))}},{"../../../core":159,"../../../util":397}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$subtract=void 0;const n=e("../../../core");r.$subtract=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e[0]-e[1]}},{"../../../core":159}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$trunc=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("./_internal");r.$trunc=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=e[0],r=e[1];return(0,i.isNil)(t)||isNaN(t)||Math.abs(t)===1/0?t:((0,i.assert)((0,i.isNumber)(t),"$trunc expression must resolve to a number."),(0,i.assert)((0,i.isNil)(r)||(0,i.isNumber)(r)&&-20<r&&r<100,"$trunc expression has invalid place"),(0,o.truncate)(t,r,!1))}},{"../../../core":159,"../../../util":397,"./_internal":188}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$arrayElemAt=void 0;const n=e("../../../core"),i=e("../../../util");r.$arrayElemAt=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)(e instanceof Array&&2===e.length,"$arrayElemAt expression must resolve to array(2)"),e.some(i.isNil)?null:(t=e[1],r=e[0],t<0&&Math.abs(t)<=r.length?r[(t+r.length)%r.length]:0<=t&&t<r.length?r[t]:void 0)}},{"../../../core":159,"../../../util":397}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$arrayToObject=void 0;const n=e("../../../core"),i=e("../../../util");r.$arrayToObject=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(e),"$arrayToObject expression must resolve to an array"),e.reduce((e,t)=>{for(;(0,i.isArray)(t)&&1===t.length;)t=t[0];var r;return t instanceof Array&&2==t.length?e[t[0]]=t[1]:(r=t,(0,i.assert)((0,i.isObject)(r)&&(0,i.has)(r,"k")&&(0,i.has)(r,"v"),"$arrayToObject expression is invalid."),e[r.k]=r.v),e},{})}},{"../../../core":159,"../../../util":397}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$concatArrays=void 0;const n=e("../../../core"),i=e("../../../util");r.$concatArrays=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(e),"$concatArrays must resolve to an array"),e.some(i.isNil)?null:e.reduce((e,t)=>(0,i.into)(e,t),[])}},{"../../../core":159,"../../../util":397}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$filter=void 0;const s=e("../../../core"),u=e("../../../util");r.$filter=(t,r,n)=>{var e=(0,s.computeValue)(t,r.input,null,n);(0,u.assert)((0,u.isArray)(e),"$filter 'input' expression must resolve to an array");const i=s.ComputeOptions.init(n,t),o=r.as||"this",a={variables:{[o]:null}};return e.filter(e=>{a.variables[o]=e;e=(0,s.computeValue)(t,r.cond,null,i.update(i.root,a));return(0,u.truthy)(e,n.useStrictMode)})}},{"../../../core":159,"../../../util":397}],210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$first=void 0;const i=e("../../../core"),o=e("../../../util"),a=e("../../accumulator");r.$first=(e,t,r)=>{var n=i.ComputeOptions.init(r);return e instanceof Array?(0,a.$first)(e,t,n.update()):(n=(0,i.computeValue)(e,t,null,r),(0,o.isNil)(n)?null:((0,o.assert)((0,o.isArray)(n),"Must resolve to an array/null or missing"),(0,a.$first)(n,"$$this",r)))}},{"../../../core":159,"../../../util":397,"../../accumulator":174}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$firstN=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("../../accumulator/firstN");r.$firstN=(e,t,r)=>{return e instanceof Array?(0,o.$firstN)(e,t,r):({input:e,n:t}=(0,n.computeValue)(e,t,null,r),(0,i.isNil)(e)?null:((0,i.assert)((0,i.isArray)(e),"Must resolve to an array/null or missing"),(0,o.$firstN)(e,{n:t,input:"$$this"},r)))}},{"../../../core":159,"../../../util":397,"../../accumulator/firstN":173}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$in=void 0;const n=e("../../../core"),i=e("../../../util");r.$in=(e,t,r)=>{var[e,t]=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(t),"$in second argument must be an array"),t.some(i.isEqual.bind(null,e))}},{"../../../core":159,"../../../util":397}],213:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./arrayElemAt"),r),i(e("./arrayToObject"),r),i(e("./concatArrays"),r),i(e("./filter"),r),i(e("./first"),r),i(e("./firstN"),r),i(e("./in"),r),i(e("./indexOfArray"),r),i(e("./isArray"),r),i(e("./last"),r),i(e("./lastN"),r),i(e("./map"),r),i(e("./maxN"),r),i(e("./minN"),r),i(e("./nin"),r),i(e("./range"),r),i(e("./reduce"),r),i(e("./reverseArray"),r),i(e("./size"),r),i(e("./slice"),r),i(e("./sortArray"),r),i(e("./zip"),r)},{"./arrayElemAt":206,"./arrayToObject":207,"./concatArrays":208,"./filter":209,"./first":210,"./firstN":211,"./in":212,"./indexOfArray":214,"./isArray":215,"./last":216,"./lastN":217,"./map":218,"./maxN":219,"./minN":220,"./nin":221,"./range":222,"./reduce":223,"./reverseArray":224,"./size":225,"./slice":226,"./sortArray":227,"./zip":228}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$indexOfArray=void 0;const s=e("../../../core"),u=e("../../../util");r.$indexOfArray=(e,t,r)=>{e=(0,s.computeValue)(e,t,null,r);if((0,u.isNil)(e))return null;let n=e[0];const i=e[1];if((0,u.isNil)(n))return null;(0,u.assert)((0,u.isArray)(n),"$indexOfArray expression must resolve to an array.");t=e[2]||0;let o=e[3];if(t>(o=(0,u.isNil)(o)?n.length:o))return-1;(0,u.assert)(0<=t&&0<=o,"$indexOfArray expression is invalid"),(0<t||o<n.length)&&(n=n.slice(t,o));let a=-1;return n.some((e,t)=>{e=(0,u.isEqual)(e,i);return e&&(a=t),e}),a+t}},{"../../../core":159,"../../../util":397}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$isArray=void 0;const n=e("../../../core");r.$isArray=(e,t,r)=>(0,n.computeValue)(e,t[0],null,r)instanceof Array},{"../../../core":159}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$last=void 0;const i=e("../../../core"),o=e("../../../util"),a=e("../../accumulator");r.$last=(e,t,r)=>{var n=i.ComputeOptions.init(r);return e instanceof Array?(0,a.$last)(e,t,n.update()):(n=(0,i.computeValue)(e,t,null,r),(0,o.isNil)(n)?null:((0,o.assert)((0,o.isArray)(n),"Must resolve to an array/null or missing"),(0,a.$last)(n,"$$this",r)))}},{"../../../core":159,"../../../util":397,"../../accumulator":174}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lastN=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("../../accumulator/lastN");r.$lastN=(e,t,r)=>{return e instanceof Array?(0,o.$lastN)(e,t,r):({input:e,n:t}=(0,n.computeValue)(e,t,null,r),(0,i.isNil)(e)?null:((0,i.assert)((0,i.isArray)(e),"Must resolve to an array/null or missing"),(0,o.$lastN)(e,{n:t,input:"$$this"},r)))}},{"../../../core":159,"../../../util":397,"../../accumulator/lastN":176}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$map=void 0;const a=e("../../../core"),s=e("../../../util");r.$map=(t,r,e)=>{var n=(0,a.computeValue)(t,r.input,null,e);(0,s.assert)((0,s.isArray)(n),"$map 'input' expression must resolve to an array");const i=a.ComputeOptions.init(e),o=r.as||"this";return n.map(e=>(0,a.computeValue)(t,r.in,null,i.update(i.root,{variables:{[o]:e}})))}},{"../../../core":159,"../../../util":397}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$maxN=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("../../accumulator/maxN");r.$maxN=(e,t,r)=>{return e instanceof Array?(0,o.$maxN)(e,t,r):({input:e,n:t}=(0,n.computeValue)(e,t,null,r),(0,i.isNil)(e)?null:((0,i.assert)((0,i.isArray)(e),"Must resolve to an array/null or missing"),(0,o.$maxN)(e,{n:t,input:"$$this"},r)))}},{"../../../core":159,"../../../util":397,"../../accumulator/maxN":178}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$minN=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("../../accumulator/minN");r.$minN=(e,t,r)=>{return e instanceof Array?(0,o.$minN)(e,t,r):({input:e,n:t}=(0,n.computeValue)(e,t,null,r),(0,i.isNil)(e)?null:((0,i.assert)((0,i.isArray)(e),"Must resolve to an array/null or missing"),(0,o.$minN)(e,{n:t,input:"$$this"},r)))}},{"../../../core":159,"../../../util":397,"../../accumulator/minN":181}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$nin=void 0;e=e("../../_predicates");r.$nin=(0,e.createExpressionOperator)(e.$nin)},{"../../_predicates":162}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$range=void 0;const s=e("../../../core");r.$range=(e,t,r)=>{var e=(0,s.computeValue)(e,t,null,r),t=e[0],n=e[1],i=e[2]||1,o=new Array;let a=t;for(;a<n&&0<i||a>n&&i<0;)o.push(a),a+=i;return o}},{"../../../core":159}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$reduce=void 0;const o=e("../../../core"),a=e("../../../util");r.$reduce=(e,t,r)=>{const n=o.ComputeOptions.init(r);r=(0,o.computeValue)(e,t.input,null,n),e=(0,o.computeValue)(e,t.initialValue,null,n);const i=t.in;return(0,a.isNil)(r)?null:((0,a.assert)((0,a.isArray)(r),"$reduce 'input' expression must resolve to an array"),r.reduce((e,t)=>(0,o.computeValue)(t,i,null,n.update(n.root,{variables:{value:e}})),e))}},{"../../../core":159,"../../../util":397}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$reverseArray=void 0;const n=e("../../../core"),i=e("../../../util");r.$reverseArray=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);if((0,i.isNil)(e))return null;(0,i.assert)((0,i.isArray)(e),"$reverseArray expression must resolve to an array");t=e.slice(0);return t.reverse(),t}},{"../../../core":159,"../../../util":397}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$size=void 0;const n=e("../../../core"),i=e("../../../util");r.$size=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isArray)(e)?e.length:void 0}},{"../../../core":159,"../../../util":397}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$slice=void 0;const o=e("../../../core"),a=e("../../../util");r.$slice=(e,t,r)=>{e=(0,o.computeValue)(e,t,null,r),t=e[0];let n=e[1],i=e[2];return(0,a.isNil)(i)?n<0?(n=Math.max(0,t.length+n),i=t.length-n+1):(i=n,n=0):(n<0&&(n=Math.max(0,t.length+n)),(0,a.assert)(0<i,"Invalid argument for $slice operator. Limit must be a positive number"),i+=n),t.slice(n,i)}},{"../../../core":159,"../../../util":397}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sortArray=void 0;const n=e("../../../aggregator"),i=e("../../../core"),o=e("../../../util");r.$sortArray=(e,t,r)=>{var{input:e,sortBy:t}=(0,i.computeValue)(e,t,null,r);return(0,o.isNil)(e)?null:((0,o.assert)((0,o.isArray)(e),"$sortArray expression must resolve to an array"),(0,o.isObject)(t)?new n.Aggregator([{$sort:t}]).run(e):((r=[...e]).sort(o.compare),-1===t&&r.reverse(),r))}},{"../../../aggregator":158,"../../../core":159,"../../../util":397}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$zip=void 0;const l=e("../../../core"),d=e("../../../util");r.$zip=(e,t,r)=>{var n=(0,l.computeValue)(e,t.inputs,null,r),i=t.useLongestLength||!1;(0,d.assert)((0,d.isArray)(n),"'inputs' expression must resolve to an array"),(0,d.assert)((0,d.isBoolean)(i),"'useLongestLength' must be a boolean"),(0,d.isArray)(t.defaults)&&(0,d.assert)(i,"'useLongestLength' must be set to true to use 'defaults'");let o=0;for(let e=0,t=n.length;e<t;e++){var a=n[e];if((0,d.isNil)(a))return null;(0,d.assert)((0,d.isArray)(a),"'inputs' expression values must resolve to an array or null"),o=i?Math.max(o,a.length):Math.min(o||a.length,a.length)}var s=[];const u=t.defaults||[];for(let r=0;r<o;r++){var c=n.map((e,t)=>(0,d.isNil)(e[r])?u[t]||null:e[r]);s.push(c)}return s}},{"../../../core":159,"../../../util":397}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$and=void 0;const n=e("../../../core"),i=e("../../../util");r.$and=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.truthy)(e,r.useStrictMode)&&e.every(e=>(0,i.truthy)(e,r.useStrictMode))}},{"../../../core":159,"../../../util":397}],230:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./and"),r),i(e("./not"),r),i(e("./or"),r)},{"./and":229,"./not":231,"./or":232}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$not=void 0;const n=e("../../../core"),i=e("../../../util");r.$not=(e,t,r)=>{t=(0,i.ensureArray)(t);if(0==t.length)return!1;if(1==t.length)return!(0,n.computeValue)(e,t[0],null,r);throw"Expression $not takes exactly 1 argument"}},{"../../../core":159,"../../../util":397}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$or=void 0;const i=e("../../../core"),o=e("../../../util");r.$or=(e,t,r)=>{e=(0,i.computeValue)(e,t,null,r);const n=r.useStrictMode;return(0,o.truthy)(e,n)&&e.some(e=>(0,o.truthy)(e,n))}},{"../../../core":159,"../../../util":397}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$cmp=void 0;const n=e("../../../core");r.$cmp=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e[0]>e[1]?1:e[0]<e[1]?-1:0}},{"../../../core":159}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$eq=void 0;e=e("../../_predicates");r.$eq=(0,e.createExpressionOperator)(e.$eq)},{"../../_predicates":162}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$gt=void 0;e=e("../../_predicates");r.$gt=(0,e.createExpressionOperator)(e.$gt)},{"../../_predicates":162}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$gte=void 0;e=e("../../_predicates");r.$gte=(0,e.createExpressionOperator)(e.$gte)},{"../../_predicates":162}],237:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./cmp"),r),i(e("./eq"),r),i(e("./gt"),r),i(e("./gte"),r),i(e("./lt"),r),i(e("./lte"),r),i(e("./ne"),r)},{"./cmp":233,"./eq":234,"./gt":235,"./gte":236,"./lt":238,"./lte":239,"./ne":240}],238:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lt=void 0;e=e("../../_predicates");r.$lt=(0,e.createExpressionOperator)(e.$lt)},{"../../_predicates":162}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lte=void 0;e=e("../../_predicates");r.$lte=(0,e.createExpressionOperator)(e.$lte)},{"../../_predicates":162}],240:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ne=void 0;e=e("../../_predicates");r.$ne=(0,e.createExpressionOperator)(e.$ne)},{"../../_predicates":162}],241:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$cond=void 0;const s=e("../../../core"),u=e("../../../util");r.$cond=(e,t,r)=>{let n,i,o;var a="$cond: invalid arguments",a=(o=t instanceof Array?((0,u.assert)(3===t.length,a),n=t[0],i=t[1],t[2]):((0,u.assert)((0,u.isObject)(t),a),n=t.if,i=t.then,t.else),(0,u.truthy)((0,s.computeValue)(e,n,null,r),r.useStrictMode));return(0,s.computeValue)(e,a?i:o,null,r)}},{"../../../core":159,"../../../util":397}],242:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ifNull=void 0;const n=e("../../../core"),i=e("../../../util");r.$ifNull=(e,t,r)=>{return(0,n.computeValue)(e,t,null,r).find(e=>!(0,i.isNil)(e))}},{"../../../core":159,"../../../util":397}],243:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./cond"),r),i(e("./ifNull"),r),i(e("./switch"),r)},{"./cond":241,"./ifNull":242,"./switch":244}],244:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$switch=void 0;const o=e("../../../core"),a=e("../../../util");r.$switch=(r,e,n)=>{let i=null;return e.branches.some(e=>{var t=(0,a.truthy)((0,o.computeValue)(r,e.case,null,n),n.useStrictMode);return t&&(i=e.then),t}),(0,o.computeValue)(r,null!==i?i:e.default,null,n)}},{"../../../core":159,"../../../util":397}],245:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$function=void 0;const n=e("../../../core"),i=e("../../../util");r.$function=(e,t,r)=>{(0,i.assert)(r.scriptEnabled,"$function operator requires 'scriptEnabled' option to be true");e=(0,n.computeValue)(e,t,null,r);return e.body.apply(null,e.args)}},{"../../../core":159,"../../../util":397}],246:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./function"),r)},{"./function":245}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.regexStrip=n.regexQuote=n.padDigits=n.computeDate=n.adjustDate=n.formatTimezone=n.parseTimezone=n.DATE_SYM_TABLE=n.DATE_PART_INTERVAL=n.DATE_FORMAT=n.DURATION_IN_MILLIS=n.MILLIS_PER_DAY=n.MINUTES_PER_HOUR=n.isoWeekYear=n.isoWeek=n.getDayOfYear=n.isLeapYear=void 0;const i=e("../../../core"),o=e("../../../util"),r=[0,31,59,90,120,151,181,212,243,273,304,334],a=[0,31,60,91,121,152,182,213,244,274,305,335],s=e=>(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,u=e=>52+Number(4==s(e)||3==s(e-1));n.isLeapYear=e=>0==(3&e)&&(e%100!=0||e%400==0);function c(e){if((0,o.isNil)(e))return 0;var t,r=n.DATE_SYM_TABLE["%z"].re.exec(e);if(r)return t=parseInt(r[2])||0,r=parseInt(r[3])||0,(Math.abs(t*n.MINUTES_PER_HOUR)+r)*(t<0?-1:1);throw Error(`invalid or location-based timezone '${e}' not supported`)}function l(e,t){e.setUTCMinutes(e.getUTCMinutes()+t)}function d(e,t){return new Array(Math.max(t-String(e).length+1,0)).join("0")+e.toString()}n.getDayOfYear=e=>((0,n.isLeapYear)(e.getUTCFullYear())?a:r)[e.getUTCMonth()]+e.getUTCDate(),n.isoWeek=function(e){var t=Math.floor((10+(0,n.getDayOfYear)(e)-(e.getUTCDay()||7))/7);return t<1?u(e.getUTCFullYear()-1):t>u(e.getUTCFullYear())?1:t},n.isoWeekYear=function(e){return e.getUTCFullYear()-Number(0==e.getUTCMonth()&&1==e.getUTCDate()&&e.getUTCDay()<1)},n.MINUTES_PER_HOUR=60,n.MILLIS_PER_DAY=864e5,n.DURATION_IN_MILLIS={week:7*n.MILLIS_PER_DAY,day:n.MILLIS_PER_DAY,hour:36e5,minute:6e4,second:1e3,millisecond:1},n.DATE_FORMAT="%Y-%m-%dT%H:%M:%S.%LZ",n.DATE_PART_INTERVAL=[["year",0,9999],["month",1,12],["day",1,31],["hour",0,23],["minute",0,59],["second",0,59],["millisecond",0,999]],n.DATE_SYM_TABLE={"%Y":{name:"year",padding:4,re:/([0-9]{4})/},"%G":{name:"year",padding:4,re:/([0-9]{4})/},"%m":{name:"month",padding:2,re:/(0[1-9]|1[012])/},"%d":{name:"day",padding:2,re:/(0[1-9]|[12][0-9]|3[01])/},"%H":{name:"hour",padding:2,re:/([01][0-9]|2[0-3])/},"%M":{name:"minute",padding:2,re:/([0-5][0-9])/},"%S":{name:"second",padding:2,re:/([0-5][0-9]|60)/},"%L":{name:"millisecond",padding:3,re:/([0-9]{3})/},"%u":{name:"weekday",padding:1,re:/([1-7])/},"%U":{name:"week",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%V":{name:"isoWeek",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%z":{name:"timezone",padding:2,re:/(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/},"%Z":{name:"minuteOffset",padding:3,re:/([+-][0-9]{3})/}},n.parseTimezone=c,n.formatTimezone=function(e){return(e<0?"-":"+")+d(Math.abs(Math.floor(e/n.MINUTES_PER_HOUR)),2)+d(Math.abs(e)%n.MINUTES_PER_HOUR,2)},n.adjustDate=l,n.computeDate=function(e,t,r){if(e=(0,i.computeValue)(e,t,null,r),(0,o.isDate)(e))return new Date(e);if((0,o.isNumber)(e))return new Date(1e3*e);if(e.date)return r=(0,o.isDate)(e.date)?new Date(e.date):new Date(1e3*e.date),e.timezone&&l(r,c(e.timezone)),r;throw Error(`cannot convert ${null==t?void 0:t.toString()} to date`)},n.padDigits=d,n.regexQuote=function(t){return"^.-*?$".split("").forEach(e=>{t=t.replace(e,"\\"+e)}),t},n.regexStrip=function(e){return e.replace(/^\//,"").replace(/\/$/,"")}},{"../../../core":159,"../../../util":397}],248:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateAdd=void 0;const o=e("../../../core"),a=e("./_internal");function s(e,t){var r,t=e.getUTCMonth()+t,n=Math.floor(t/12);t<0?(r=t%12+12,e.setUTCFullYear(e.getUTCFullYear()+n,r,e.getUTCDate())):e.setUTCFullYear(e.getUTCFullYear()+n,t%12,e.getUTCDate())}r.$dateAdd=(e,t,r)=>{var n=(0,o.computeValue)(e,t,null,r),i=(0,a.computeDate)(e,t.startDate,r);switch(n.unit){case"year":i.setUTCFullYear(i.getUTCFullYear()+n.amount);break;case"quarter":s(i,3*n.amount);break;case"month":s(i,n.amount);break;default:i.setTime(i.getTime()+a.DURATION_IN_MILLIS[n.unit]*n.amount)}return n.timezone&&(e=(0,a.parseTimezone)(n.timezone),(0,a.adjustDate)(i,e)),i}},{"../../../core":159,"./_internal":247}],249:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateDiff=void 0;const d=e("../../../core"),f=e("./_internal");r.$dateDiff=(e,t,r)=>{var n,i,o,a,s=(0,d.computeValue)(e,t,null,r),u=(0,f.computeDate)(e,t.startDate,r),c=(0,f.computeDate)(e,t.endDate,r);let l;switch(s.unit){case"year":case"quarter":case"month":l=(n=u,i=c,o=s.unit,a=12*(i.getUTCFullYear()-n.getUTCFullYear()),a=(a-=n.getUTCMonth())+i.getUTCMonth(),Math.trunc(a/p[o]));break;default:l=(c.getTime()-u.getTime())/f.DURATION_IN_MILLIS[s.unit]}return l};const p={year:12,quarter:3,month:1}},{"../../../core":159,"./_internal":247}],250:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateFromParts=void 0;const l=e("../../../core"),d=e("./_internal"),f=[31,28,31,30,31,30,31,31,30,31,30,31];r.$dateFromParts=(e,t,r)=>{var n=(0,l.computeValue)(e,t,null,r),i=(0,d.parseTimezone)(n.timezone);for(let t=d.DATE_PART_INTERVAL.length-1,r=0;0<=t;t--){var o=d.DATE_PART_INTERVAL[t],a=o[0],s=o[1],o=o[2];let e=(n[a]||0)+r;r=0;var u,c=o+1;"hour"==a&&(e+=-1*Math.floor(i/d.MINUTES_PER_HOUR)),"minute"==a&&(e+=i%d.MINUTES_PER_HOUR*-1),e<s?(u=s-e,r=-1*Math.ceil(u/c),e=c-u%c):e>o&&(e+=s,r=Math.trunc(e/c),e%=c),n[a]=e}return n.day=Math.min(n.day,2==(e=n).month&&(0,d.isLeapYear)(e.year)?29:f[e.month-1]),new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond))}},{"../../../core":159,"./_internal":247}],251:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateFromString=void 0;const d=e("../../../core"),f=e("../../../util"),p=e("./_internal");e=(e,r)=>{const n={};return e.split("").forEach((e,t)=>n[e]=r*(t+1)),n};const h=Object.assign(Object.assign(Object.assign({},e("ABCDEFGHIKLM",1)),e("NOPQRSTUVWXY",-1)),{Z:0});r.$dateFromString=(e,t,r)=>{e=(0,d.computeValue)(e,t,null,r);e.format=e.format||p.DATE_FORMAT,e.onNull=e.onNull||null;let n=e.dateString;if((0,f.isNil)(n))return e.onNull;var i=e.format.split(/%[YGmdHMSLuVzZ]/),o=(i.reverse(),e.format.match(/(%%|%Y|%G|%m|%d|%H|%M|%S|%L|%u|%V|%z|%Z)/g)),a={};let s="";for(let e=0,t=o.length;e<t;e++){var u=o[e],u=p.DATE_SYM_TABLE[u];if((0,f.isObject)(u)){const l=u.re.exec(n);var c=i.pop()||"";null!==l?(a[u.name]=/^\d+$/.exec(l[0])?parseInt(l[0]):l[0],n=n.substr(0,l.index)+n.substr(l.index+l[0].length),s+=(0,p.regexQuote)(c)+(0,p.regexStrip)(u.re.toString())):a[u.name]=null}}if((0,f.isNil)(a.year)||(0,f.isNil)(a.month)||(0,f.isNil)(a.day)||!new RegExp("^"+s+"[A-Z]?$").exec(e.dateString))return e.onError;const l=e.dateString.match(/([A-Z])$/);(0,f.assert)(!(l&&e.timezone),`$dateFromString: you cannot pass in a date/time string with time zone information ('${l&&l[0]}') together with a timezone argument`);t=l?h[l[0]]*p.MINUTES_PER_HOUR:(0,p.parseTimezone)(e.timezone),r=new Date(Date.UTC(a.year,a.month-1,a.day,0,0,0));return(0,f.isNil)(a.hour)||r.setUTCHours(a.hour),(0,f.isNil)(a.minute)||r.setUTCMinutes(a.minute),(0,f.isNil)(a.second)||r.setUTCSeconds(a.second),(0,f.isNil)(a.millisecond)||r.setUTCMilliseconds(a.millisecond),(0,p.adjustDate)(r,-t),r}},{"../../../core":159,"../../../util":397,"./_internal":247}],252:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateSubtract=void 0;const i=e("../../../core"),o=e("./dateAdd");r.$dateSubtract=(e,t,r)=>{var n=(0,i.computeValue)(e,null==t?void 0:t.amount,null,r);return(0,o.$dateAdd)(e,Object.assign(Object.assign({},t),{amount:-1*n}),r)}},{"../../../core":159,"./dateAdd":248}],253:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateToParts=void 0;const n=e("../../../core"),i=e("./_internal");r.$dateToParts=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=new Date(e.date),r=(0,i.parseTimezone)(e.timezone),(0,i.adjustDate)(t,r),r={hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()};return 1==e.iso8601?Object.assign(r,{isoWeekYear:(0,i.isoWeekYear)(t),isoWeek:(0,i.isoWeek)(t),isoDayOfWeek:t.getUTCDay()||7}):Object.assign(r,{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate()})}},{"../../../core":159,"./_internal":247}],254:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dateToString=void 0;const d=e("../../../core"),f=e("../../../util"),p=e("./_internal");var n=e("./dayOfMonth"),i=e("./hour"),o=e("./isoDayOfWeek"),a=e("./isoWeek"),s=e("./millisecond"),u=e("./minute"),c=e("./month"),l=e("./second"),h=e("./week"),e=e("./year");const m={"%Y":e.$year,"%G":e.$year,"%m":c.$month,"%d":n.$dayOfMonth,"%H":i.$hour,"%M":u.$minute,"%S":l.$second,"%L":s.$millisecond,"%u":o.$isoDayOfWeek,"%U":h.$week,"%V":a.$isoWeek};r.$dateToString=(r,e,n)=>{e=(0,d.computeValue)(r,e,null,n);if((0,f.isNil)(e.onNull)&&(e.onNull=null),(0,f.isNil)(e.date))return e.onNull;var i=(0,p.computeDate)(r,e.date,n);let o=e.format||p.DATE_FORMAT;var a=(0,p.parseTimezone)(e.timezone),s=o.match(/(%%|%Y|%G|%m|%d|%H|%M|%S|%L|%u|%U|%V|%z|%Z)/g);(0,p.adjustDate)(i,a);for(let t=0,e=s.length;t<e;t++){var u=s[t],c=p.DATE_SYM_TABLE[u],l=m[u];let e;(0,f.isObject)(c)&&(e="timezone"===c.name?(0,p.formatTimezone)(a):"minuteOffset"===c.name?a.toString():((0,f.assert)(!!l,`unsupported date format specifier '${u}'`),(0,p.padDigits)(l(r,i,n),c.padding))),o=o.replace(u,e)}return o}},{"../../../core":159,"../../../util":397,"./_internal":247,"./dayOfMonth":255,"./hour":258,"./isoDayOfWeek":260,"./isoWeek":261,"./millisecond":263,"./minute":264,"./month":265,"./second":266,"./week":267,"./year":268}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dayOfMonth=void 0;const n=e("./_internal");r.$dayOfMonth=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCDate()},{"./_internal":247}],256:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dayOfWeek=void 0;const n=e("./_internal");r.$dayOfWeek=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCDay()+1},{"./_internal":247}],257:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$dayOfYear=void 0;const n=e("./_internal");r.$dayOfYear=(e,t,r)=>(0,n.getDayOfYear)((0,n.computeDate)(e,t,r))},{"./_internal":247}],258:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$hour=void 0;const n=e("./_internal");r.$hour=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCHours()},{"./_internal":247}],259:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./dateAdd"),r),i(e("./dateDiff"),r),i(e("./dateFromParts"),r),i(e("./dateFromString"),r),i(e("./dateSubtract"),r),i(e("./dateToParts"),r),i(e("./dateToString"),r),i(e("./dayOfMonth"),r),i(e("./dayOfWeek"),r),i(e("./dayOfYear"),r),i(e("./hour"),r),i(e("./isoDayOfWeek"),r),i(e("./isoWeek"),r),i(e("./isoWeekYear"),r),i(e("./millisecond"),r),i(e("./minute"),r),i(e("./month"),r),i(e("./second"),r),i(e("./week"),r),i(e("./year"),r)},{"./dateAdd":248,"./dateDiff":249,"./dateFromParts":250,"./dateFromString":251,"./dateSubtract":252,"./dateToParts":253,"./dateToString":254,"./dayOfMonth":255,"./dayOfWeek":256,"./dayOfYear":257,"./hour":258,"./isoDayOfWeek":260,"./isoWeek":261,"./isoWeekYear":262,"./millisecond":263,"./minute":264,"./month":265,"./second":266,"./week":267,"./year":268}],260:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$isoDayOfWeek=void 0;const n=e("./_internal");r.$isoDayOfWeek=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCDay()||7},{"./_internal":247}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$isoWeek=void 0;const n=e("./_internal");r.$isoWeek=(e,t,r)=>(0,n.isoWeek)((0,n.computeDate)(e,t,r))},{"./_internal":247}],262:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$isoWeekYear=void 0;const n=e("./_internal");r.$isoWeekYear=(e,t,r)=>{e=(0,n.computeDate)(e,t,r);return e.getUTCFullYear()-Number(0==e.getUTCMonth()&&1==e.getUTCDate()&&e.getUTCDay()<1)}},{"./_internal":247}],263:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$millisecond=void 0;const n=e("./_internal");r.$millisecond=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCMilliseconds()},{"./_internal":247}],264:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$minute=void 0;const n=e("./_internal");r.$minute=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCMinutes()},{"./_internal":247}],265:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$month=void 0;const n=e("./_internal");r.$month=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCMonth()+1},{"./_internal":247}],266:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$second=void 0;const n=e("./_internal");r.$second=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCSeconds()},{"./_internal":247}],267:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$week=void 0;const n=e("./_internal");r.$week=(e,t,r)=>{e=(0,n.computeDate)(e,t,r),t=(0,n.isoWeek)(e);return 0<e.getUTCDay()&&1==e.getUTCDate()&&0==e.getUTCMonth()?0:0==e.getUTCDay()?t+1:t}},{"./_internal":247}],268:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$year=void 0;const n=e("./_internal");r.$year=(e,t,r)=>(0,n.computeDate)(e,t,r).getUTCFullYear()},{"./_internal":247}],269:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./arithmetic"),r),i(e("./array"),r),i(e("./boolean"),r),i(e("./comparison"),r),i(e("./conditional"),r),i(e("./custom"),r),i(e("./date"),r),i(e("./literal"),r),i(e("./misc"),r),i(e("./object"),r),i(e("./set"),r),i(e("./string"),r),i(e("./trignometry"),r),i(e("./type"),r),i(e("./variable"),r)},{"./arithmetic":195,"./array":213,"./boolean":230,"./comparison":237,"./conditional":243,"./custom":246,"./date":259,"./literal":270,"./misc":272,"./object":275,"./set":282,"./string":290,"./trignometry":320,"./type":327,"./variable":337}],270:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$literal=void 0;r.$literal=(e,t,r)=>t},{}],271:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$getField=void 0;const o=e("../../../core"),a=e("../../../util");r.$getField=(e,t,r)=>{t=(0,o.computeValue)(e,t,null,r);let n=e,i=t;return(0,a.isObject)(t)&&t.input&&t.field&&(n=t.input,i=t.field),(0,a.isNil)(n)?null:((0,a.assert)((0,a.isObject)(n),"$getField expression 'input' must evaluate to an object"),(0,a.assert)((0,a.isString)(i),"$getField expression 'field' must evaluate to a string"),n[i])}},{"../../../core":159,"../../../util":397}],272:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./getField"),r),i(e("./rand"),r),i(e("./sampleRate"),r)},{"./getField":271,"./rand":273,"./sampleRate":274}],273:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$rand=void 0;r.$rand=(e,t,r)=>Math.random()},{}],274:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sampleRate=void 0;const n=e("../../../core");r.$sampleRate=(e,t,r)=>Math.random()<=(0,n.computeValue)(e,t,null,r)},{"../../../core":159}],275:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./mergeObjects"),r),i(e("./objectToArray"),r),i(e("./setField"),r),i(e("./unsetField"),r)},{"./mergeObjects":276,"./objectToArray":277,"./setField":278,"./unsetField":279}],276:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$mergeObjects=void 0;const n=e("../../../core"),i=e("../../../util");r.$mergeObjects=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e instanceof Array?e.reduce((e,t)=>(0,i.into)(e,t),{}):{}}},{"../../../core":159,"../../../util":397}],277:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$objectToArray=void 0;const s=e("../../../core"),u=e("../../../util");r.$objectToArray=(e,t,r)=>{var n,i,e=(0,s.computeValue)(e,t,null,r),t=((0,u.assert)((0,u.isObject)(e),"$objectToArray expression must resolve to an object"),Object.entries(e)),o=new Array(t.length);let a=0;for([n,i]of t)o[a++]={k:n,v:i};return o}},{"../../../core":159,"../../../util":397}],278:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setField=void 0;const n=e("../../../core"),i=e("../../../util");r.$setField=(e,t,r)=>{r=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(r.input)?null:((0,i.assert)((0,i.isObject)(r.input),"$setField expression 'input' must evaluate to an object"),(0,i.assert)((0,i.isString)(r.field),"$setField expression 'field' must evaluate to a string"),"$$REMOVE"==t.value?delete e[r.field]:e[r.field]=r.value,e)}},{"../../../core":159,"../../../util":397}],279:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$unsetField=void 0;const n=e("./setField");r.$unsetField=(e,t,r)=>(0,n.$setField)(e,Object.assign(Object.assign({},t),{value:"$$REMOVE"}),r)},{"./setField":278}],280:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$allElementsTrue=void 0;const n=e("../../../core"),i=e("../../../util");r.$allElementsTrue=(e,t,r)=>{return(0,n.computeValue)(e,t,null,r)[0].every(e=>(0,i.truthy)(e,r.useStrictMode))}},{"../../../core":159,"../../../util":397}],281:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$anyElementTrue=void 0;const n=e("../../../core"),i=e("../../../util");r.$anyElementTrue=(e,t,r)=>{return(0,n.computeValue)(e,t,null,r)[0].some(e=>(0,i.truthy)(e,r.useStrictMode))}},{"../../../core":159,"../../../util":397}],282:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./allElementsTrue"),r),i(e("./anyElementTrue"),r),i(e("./setDifference"),r),i(e("./setEquals"),r),i(e("./setIntersection"),r),i(e("./setIsSubset"),r),i(e("./setUnion"),r)},{"./allElementsTrue":280,"./anyElementTrue":281,"./setDifference":283,"./setEquals":284,"./setIntersection":285,"./setIsSubset":286,"./setUnion":287}],283:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setDifference=void 0;const n=e("../../../core"),i=e("../../../util");r.$setDifference=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return e[0].filter(i.notInArray.bind(null,e[1]))}},{"../../../core":159,"../../../util":397}],284:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setEquals=void 0;const n=e("../../../core"),i=e("../../../util");r.$setEquals=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=(0,i.unique)(e[0],null==r?void 0:r.hashFunction),e=(0,i.unique)(e[1],null==r?void 0:r.hashFunction);return t.length===e.length&&t.length===(0,i.intersection)([t,e],null==r?void 0:r.hashFunction).length}},{"../../../core":159,"../../../util":397}],285:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setIntersection=void 0;const n=e("../../../core"),i=e("../../../util");r.$setIntersection=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(e)&&e.every(i.isArray),"$setIntersection: expresssion must resolve to array of arrays"),(0,i.intersection)(e,null==r?void 0:r.hashFunction)}},{"../../../core":159,"../../../util":397}],286:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setIsSubset=void 0;const n=e("../../../core"),i=e("../../../util");r.$setIsSubset=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.intersection)(e,null==r?void 0:r.hashFunction).length===e[0].length}},{"../../../core":159,"../../../util":397}],287:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setUnion=void 0;const n=e("../../../core"),i=e("../../../util");r.$setUnion=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.assert)((0,i.isArray)(e)&&2==e.length&&e.every(i.isArray),"$setUnion: arguments must be arrays"),(0,i.unique)(e[0].concat(e[1]),null==r?void 0:r.hashFunction)}},{"../../../core":159,"../../../util":397}],288:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.regexSearch=r.trimString=void 0;const l=e("../../../core"),d=e("../../../util"),u=[0,32,9,10,11,12,13,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202];r.trimString=function(e,t,r,n){var i=(e=(0,l.computeValue)(e,t,null,r)).input;if((0,d.isNil)(i))return null;var o=(0,d.isNil)(e.chars)?u:e.chars.split("").map(e=>e.codePointAt(0));let a=0,s=i.length-1;for(;n.left&&a<=s&&-1!==o.indexOf(i[a].codePointAt(0));)a++;for(;n.right&&a<=s&&-1!==o.indexOf(i[s].codePointAt(0));)s--;return i.substring(a,s+1)},r.regexSearch=function(e,t,r,n){if(e=(0,l.computeValue)(e,t,null,r),!(0,d.isString)(e.input))return[];(t=e.options)&&((0,d.assert)(-1===t.indexOf("x"),"extended capability option 'x' not supported"),(0,d.assert)(-1===t.indexOf("g"),"global option 'g' not supported"));let i=e.input;var o,a=new RegExp(e.regex,t),s=new Array;let u=0;for(;o=a.exec(i);){var c={match:o[0],idx:o.index+u,captures:[]};for(let e=1;e<o.length;e++)c.captures.push(o[e]||null);if(s.push(c),!n.global)break;u=o.index+o[0].length,i=i.substring(u)}return s}},{"../../../core":159,"../../../util":397}],289:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$concat=void 0;const n=e("../../../core"),i=e("../../../util");r.$concat=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return[null,void 0].some(i.inArray.bind(null,e))?null:e.join("")}},{"../../../core":159,"../../../util":397}],290:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./concat"),r),i(e("./indexOfBytes"),r),i(e("./ltrim"),r),i(e("./regexFind"),r),i(e("./regexFindAll"),r),i(e("./regexMatch"),r),i(e("./replaceAll"),r),i(e("./replaceOne"),r),i(e("./rtrim"),r),i(e("./split"),r),i(e("./strcasecmp"),r),i(e("./strLenBytes"),r),i(e("./strLenCP"),r),i(e("./substr"),r),i(e("./substrBytes"),r),i(e("./substrCP"),r),i(e("./toLower"),r),i(e("./toUpper"),r),i(e("./trim"),r)},{"./concat":289,"./indexOfBytes":291,"./ltrim":292,"./regexFind":293,"./regexFindAll":294,"./regexMatch":295,"./replaceAll":296,"./replaceOne":297,"./rtrim":298,"./split":299,"./strLenBytes":300,"./strLenCP":301,"./strcasecmp":302,"./substr":303,"./substrBytes":304,"./substrCP":305,"./toLower":306,"./toUpper":307,"./trim":308}],291:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$indexOfBytes=void 0;const a=e("../../../core"),s=e("../../../util");r.$indexOfBytes=(e,t,r)=>{e=(0,a.computeValue)(e,t,null,r),t="$indexOfBytes expression resolves to invalid an argument";if((0,s.isNil)(e[0]))return null;(0,s.assert)((0,s.isString)(e[0])&&(0,s.isString)(e[1]),t);var r=e[0],n=e[1],i=e[2],e=e[3],o=((0,s.isNil)(i)||(0,s.isNumber)(i)&&0<=i&&Math.round(i)===i)&&((0,s.isNil)(e)||(0,s.isNumber)(e)&&0<=e&&Math.round(e)===e);return(0,s.assert)(o,t),(e=e||r.length)<(i=i||0)?-1:-1<(o=r.substring(i,e).indexOf(n))?o+i:o}},{"../../../core":159,"../../../util":397}],292:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ltrim=void 0;const n=e("./_internal");r.$ltrim=(e,t,r)=>(0,n.trimString)(e,t,r,{left:!0,right:!1})},{"./_internal":288}],293:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$regexFind=void 0;const n=e("./_internal");r.$regexFind=(e,t,r)=>{e=(0,n.regexSearch)(e,t,r,{global:!1});return e&&0<e.length?e[0]:null}},{"./_internal":288}],294:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$regexFindAll=void 0;const n=e("./_internal");r.$regexFindAll=(e,t,r)=>(0,n.regexSearch)(e,t,r,{global:!0})},{"./_internal":288}],295:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$regexMatch=void 0;const n=e("./_internal");r.$regexMatch=(e,t,r)=>0!=(0,n.regexSearch)(e,t,r,{global:!1}).length},{"./_internal":288}],296:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$replaceAll=void 0;const n=e("../../../core"),i=e("../../../util");r.$replaceAll=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=[e.input,e.find,e.replacement];return t.some(i.isNil)?null:((0,i.assert)(t.every(i.isString),"$replaceAll expression fields must evaluate to string"),e.input.replace(new RegExp(e.find,"g"),e.replacement))}},{"../../../core":159,"../../../util":397}],297:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$replaceOne=void 0;const n=e("../../../core"),i=e("../../../util");r.$replaceOne=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=[e.input,e.find,e.replacement];return t.some(i.isNil)?null:((0,i.assert)(t.every(i.isString),"$replaceOne expression fields must evaluate to string"),e.input.replace(e.find,e.replacement))}},{"../../../core":159,"../../../util":397}],298:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$rtrim=void 0;const n=e("./_internal");r.$rtrim=(e,t,r)=>(0,n.trimString)(e,t,r,{left:!1,right:!0})},{"./_internal":288}],299:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$split=void 0;const n=e("../../../core"),i=e("../../../util");r.$split=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e[0])?null:((0,i.assert)(e.every(i.isString),"$split expression must result to array(2) of strings"),e[0].split(e[1]))}},{"../../../core":159,"../../../util":397}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$strLenBytes=void 0;const n=e("../../../core");r.$strLenBytes=(e,t,r)=>~-encodeURI((0,n.computeValue)(e,t,null,r)).split(/%..|./).length},{"../../../core":159}],301:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$strLenCP=void 0;const n=e("../../../core");r.$strLenCP=(e,t,r)=>(0,n.computeValue)(e,t,null,r).length},{"../../../core":159}],302:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$strcasecmp=void 0;const o=e("../../../core"),a=e("../../../util");r.$strcasecmp=(e,t,r)=>{e=(0,o.computeValue)(e,t,null,r);let n=e[0],i=e[1];return!(0,a.isEqual)(n,i)&&!e.every(a.isNil)&&((0,a.assert)(e.every(a.isString),"$strcasecmp must resolve to array(2) of strings"),n=n.toUpperCase(),i=i.toUpperCase(),n>i?1:n<i&&-1)||0}},{"../../../core":159,"../../../util":397}],303:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$substr=void 0;const n=e("../../../core"),i=e("../../../util");r.$substr=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r),t=e[0],r=e[1],e=e[2];return!(0,i.isString)(t)||r<0?"":e<0?t.substr(r):t.substr(r,e)}},{"../../../core":159,"../../../util":397}],304:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$substrBytes=void 0;const s=e("../../../core"),u=e("../../../util"),i=[192,224,240];function c(r){var n=[];for(let e=0,t=r.length;e<t;e++)n.push(function(e){if(e<128)return[e];let t=(e<2048?1:e<65536&&2)||3;for(var r=i[t-1],n=[(e>>6*t)+r];0<t;)n.push(128|e>>6*--t&63);return n}(r.codePointAt(e)));return n}r.$substrBytes=(e,t,r)=>{var e=(0,s.computeValue)(e,t,null,r),t=e[0],r=e[1],e=e[2],n=((0,u.assert)((0,u.isString)(t)&&(0,u.isNumber)(r)&&0<=r&&(0,u.isNumber)(e)&&0<=e,"$substrBytes: invalid arguments"),c(t)),i=[];let o=0;for(let e=0;e<n.length;e++)i.push(o),o+=n[e].length;var a=i.indexOf(r),r=i.indexOf(r+e);return(0,u.assert)(-1<a&&-1<r,"$substrBytes: invalid range, start or end index is a UTF-8 continuation byte."),t.substring(a,r)}},{"../../../core":159,"../../../util":397}],305:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$substrCP=void 0;const n=e("./substr");r.$substrCP=(e,t,r)=>(0,n.$substr)(e,t,r)},{"./substr":303}],306:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toLower=void 0;const n=e("../../../core"),i=e("../../../util");r.$toLower=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isEmpty)(e)?"":e.toLowerCase()}},{"../../../core":159,"../../../util":397}],307:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toUpper=void 0;const n=e("../../../core"),i=e("../../../util");r.$toUpper=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isEmpty)(e)?"":e.toUpperCase()}},{"../../../core":159,"../../../util":397}],308:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$trim=void 0;const n=e("./_internal");r.$trim=(e,t,r)=>(0,n.trimString)(e,t,r,{left:!0,right:!0})},{"./_internal":288}],309:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTrignometryOperator=void 0;const a=e("../../../core"),s={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};r.createTrignometryOperator=function(n,e=s){const i=Object.assign({},s,e),o=new Set(Object.keys(i));return(e,t,r)=>{e=(0,a.computeValue)(e,t,null,r);if(o.has(""+e)){t=i[""+e];if(t instanceof Error)throw new Error(`cannot apply $${n.name} to -inf, value must in (-inf,inf)`);return t}return n(e)}}},{"../../../core":159}],310:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$acos=void 0;e=e("./_internal");r.$acos=(0,e.createTrignometryOperator)(Math.acos,{Infinity:1/0,0:new Error})},{"./_internal":309}],311:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$acosh=void 0;e=e("./_internal");r.$acosh=(0,e.createTrignometryOperator)(Math.acosh,{Infinity:1/0,0:new Error})},{"./_internal":309}],312:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$asin=void 0;e=e("./_internal");r.$asin=(0,e.createTrignometryOperator)(Math.asin)},{"./_internal":309}],313:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$asinh=void 0;e=e("./_internal");r.$asinh=(0,e.createTrignometryOperator)(Math.asinh,{Infinity:1/0,"-Infinity":-1/0})},{"./_internal":309}],314:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$atan=void 0;e=e("./_internal");r.$atan=(0,e.createTrignometryOperator)(Math.atan)},{"./_internal":309}],315:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$atan2=void 0;const n=e("../../../core"),i=e("../../../util");r.$atan2=(e,t,r)=>{var[e,t]=(0,n.computeValue)(e,t,null,r);return isNaN(e)||(0,i.isNil)(e)?e:isNaN(t)||(0,i.isNil)(t)?t:Math.atan2(e,t)}},{"../../../core":159,"../../../util":397}],316:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$atanh=void 0;e=e("./_internal");r.$atanh=(0,e.createTrignometryOperator)(Math.atanh,{1:1/0,"-1":-1/0})},{"./_internal":309}],317:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$cos=void 0;e=e("./_internal");r.$cos=(0,e.createTrignometryOperator)(Math.cos)},{"./_internal":309}],318:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$cosh=void 0;e=e("./_internal");r.$cosh=(0,e.createTrignometryOperator)(Math.cosh,{"-Infinity":1/0,Infinity:1/0})},{"./_internal":309}],319:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$degreesToRadians=void 0;e=e("./_internal");const n=Math.PI/180;r.$degreesToRadians=(0,e.createTrignometryOperator)(e=>e*n,{Infinity:1/0,"-Infinity":1/0})},{"./_internal":309}],320:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./acos"),r),i(e("./acosh"),r),i(e("./asin"),r),i(e("./asinh"),r),i(e("./atan"),r),i(e("./atan2"),r),i(e("./atanh"),r),i(e("./cos"),r),i(e("./cosh"),r),i(e("./degreesToRadians"),r),i(e("./radiansToDegrees"),r),i(e("./sin"),r),i(e("./sinh"),r),i(e("./tan"),r)},{"./acos":310,"./acosh":311,"./asin":312,"./asinh":313,"./atan":314,"./atan2":315,"./atanh":316,"./cos":317,"./cosh":318,"./degreesToRadians":319,"./radiansToDegrees":321,"./sin":322,"./sinh":323,"./tan":324}],321:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$radiansToDegrees=void 0;e=e("./_internal");const n=180/Math.PI;r.$radiansToDegrees=(0,e.createTrignometryOperator)(e=>e*n,{Infinity:1/0,"-Infinity":-1/0})},{"./_internal":309}],322:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sin=void 0;e=e("./_internal");r.$sin=(0,e.createTrignometryOperator)(Math.sin)},{"./_internal":309}],323:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sinh=void 0;e=e("./_internal");r.$sinh=(0,e.createTrignometryOperator)(Math.sinh,{"-Infinity":-1/0,Infinity:1/0})},{"./_internal":309}],324:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$tan=void 0;e=e("./_internal");r.$tan=(0,e.createTrignometryOperator)(Math.tan)},{"./_internal":309}],325:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toInteger=r.TypeConvertError=void 0;const a=e("../../../core"),s=e("../../../util");class u extends Error{constructor(e){super(e)}}r.TypeConvertError=u,r.toInteger=function(e,t,r,n,i,o){if(e=(0,a.computeValue)(e,t,null,r),(0,s.isNil)(e))return null;if(e instanceof Date)return e.getTime();if(!0===e)return 1;if(!1===e)return 0;if(t=Number(e),(0,s.isNumber)(t)&&i<=t&&t<=n&&(!(0,s.isString)(e)||-1===t.toString().indexOf(".")))return Math.trunc(t);throw new u(`cannot convert '${e}' to `+o)}},{"../../../core":159,"../../../util":397}],326:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$convert=void 0;const i=e("../../../core"),o=e("../../../util"),a=e("./_internal"),s=e("./toBool"),u=e("./toDate"),c=e("./toDouble"),l=e("./toInt"),d=e("./toLong"),f=e("./toString");r.$convert=(e,t,r)=>{var n=(0,i.computeValue)(e,t,null,r);if(n.onNull=void 0===n.onNull?null:n.onNull,(0,o.isNil)(n.input))return n.onNull;try{switch(n.to){case 2:case"string":return(0,f.$toString)(e,n.input,r);case 8:case"boolean":case"bool":return(0,s.$toBool)(e,n.input,r);case 9:case"date":return(0,u.$toDate)(e,n.input,r);case 1:case 19:case"double":case"decimal":case"number":return(0,c.$toDouble)(e,n.input,r);case 16:case"int":return(0,l.$toInt)(e,n.input,r);case 18:case"long":return(0,d.$toLong)(e,n.input,r)}}catch(e){}if(void 0!==n.onError)return n.onError;throw new a.TypeConvertError(`could not convert to type ${n.to}.`)}},{"../../../core":159,"../../../util":397,"./_internal":325,"./toBool":329,"./toDate":330,"./toDouble":332,"./toInt":333,"./toLong":334,"./toString":335}],327:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./convert"),r),i(e("./isNumber"),r),i(e("./toBool"),r),i(e("./toDate"),r),i(e("./toDecimal"),r),i(e("./toDouble"),r),i(e("./toInt"),r),i(e("./toLong"),r),i(e("./toString"),r),i(e("./type"),r)},{"./convert":326,"./isNumber":328,"./toBool":329,"./toDate":330,"./toDecimal":331,"./toDouble":332,"./toInt":333,"./toLong":334,"./toString":335,"./type":336}],328:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$isNumber=void 0;const n=e("../../../core"),i=e("../../../util");r.$isNumber=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNumber)(e)}},{"../../../core":159,"../../../util":397}],329:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toBool=void 0;const n=e("../../../core"),i=e("../../../util");r.$toBool=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);return(0,i.isNil)(e)?null:!!(0,i.isString)(e)||Boolean(e)}},{"../../../core":159,"../../../util":397}],330:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toDate=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("./_internal");r.$toDate=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);if(e instanceof Date)return e;if((0,i.isNil)(e))return null;t=new Date(e),r=t.getTime();if(isNaN(r))throw new o.TypeConvertError(`cannot convert '${e}' to date`);return t}},{"../../../core":159,"../../../util":397,"./_internal":325}],331:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toDecimal=void 0;e=e("./toDouble");r.$toDecimal=e.$toDouble},{"./toDouble":332}],332:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toDouble=void 0;const n=e("../../../core"),i=e("../../../util"),o=e("./_internal");r.$toDouble=(e,t,r)=>{e=(0,n.computeValue)(e,t,null,r);if((0,i.isNil)(e))return null;if(e instanceof Date)return e.getTime();if(!0===e)return 1;if(!1===e)return 0;t=Number(e);if((0,i.isNumber)(t))return t;throw new o.TypeConvertError(`cannot convert '${e}' to double/decimal`)}},{"../../../core":159,"../../../util":397,"./_internal":325}],333:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toInt=void 0;const n=e("../../../util"),i=e("./_internal");r.$toInt=(e,t,r)=>(0,i.toInteger)(e,t,r,n.MAX_INT,n.MIN_INT,"int")},{"../../../util":397,"./_internal":325}],334:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toLong=void 0;const n=e("../../../util"),i=e("./_internal");r.$toLong=(e,t,r)=>(0,i.toInteger)(e,t,r,n.MAX_LONG,n.MIN_LONG,"long")},{"../../../util":397,"./_internal":325}],335:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$toString=void 0;const i=e("../../../core"),o=e("../../../util"),a=e("../date/dateToString");r.$toString=(e,t,r)=>{var n=(0,i.computeValue)(e,t,null,r);return(0,o.isNil)(n)?null:n instanceof Date?(t={date:t,format:"%Y-%m-%dT%H:%M:%S.%LZ"},(0,a.$dateToString)(e,t,r)):n.toString()}},{"../../../core":159,"../../../util":397,"../date/dateToString":254}],336:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$type=void 0;const o=e("../../../core"),a=e("../../../util");r.$type=(e,t,r)=>{var n=(0,o.computeValue)(e,t,null,r),i=(0,a.getType)(n).toLowerCase();switch(i){case"boolean":return"bool";case"number":return 0<=n.toString().indexOf(".")?"double":n>=a.MIN_INT&&n<=a.MAX_INT?"int":"long";case"regexp":return"regex";default:return i}}},{"../../../core":159,"../../../util":397}],337:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./let"),r)},{"./let":338}],338:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$let=void 0;const a=e("../../../core");r.$let=(e,t,r)=>{var n,i,o={};for([n,i]of Object.entries(t.vars))o[n]=(0,a.computeValue)(e,i,null,r);return(0,a.computeValue)(e,t.in,null,a.ComputeOptions.init(r,e,{variables:o}))}},{"../../../core":159}],339:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isUnbounded=void 0;r.isUnbounded=e=>{e=(null==e?void 0:e.documents)||(null==e?void 0:e.range);return!e||"unbounded"===e[0]&&"unbounded"===e[1]}},{}],340:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$addFields=void 0;const s=e("../../core"),u=e("../../util");r.$addFields=(e,i,o)=>{const a=Object.keys(i);return 0===a.length?e:e.map(e=>{var t=Object.assign({},e);for(const n of a){var r=(0,s.computeValue)(e,i[n],null,o);void 0!==r?(0,u.setValue)(t,n,r):(0,u.removeValue)(t,n)}return t})}},{"../../core":159,"../../util":397}],341:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$bucket=void 0;const f=e("../../core"),p=e("../../lazy"),h=e("../../util");r.$bucket=(e,r,n)=>{const i=[...r.boundaries],o=r.default,a=i[0],s=i[i.length-1],u=r.output||{count:{$sum:1}};(0,h.assert)(2<r.boundaries.length,"$bucket 'boundaries' expression must have at least 3 elements");var c=(0,h.getType)(a);for(let e=0,t=i.length-1;e<t;e++)(0,h.assert)(c===(0,h.getType)(i[e+1]),"$bucket 'boundaries' must all be of the same type"),(0,h.assert)((0,h.compare)(i[e],i[e+1])<0,"$bucket 'boundaries' must be sorted in ascending order");(0,h.isNil)(o)||(0,h.getType)(r.default)!==(0,h.getType)(a)||(0,h.assert)(0<=(0,h.compare)(r.default,s)||(0,h.compare)(r.default,a)<0,"$bucket 'default' expression must be out of boundaries range");const l={};for(const d of i)l[d]=[];(0,h.isNil)(o)||(l[o]=[]);let t;return(0,p.Lazy)(()=>(t||(e.each(e=>{var t=(0,f.computeValue)(e,r.groupBy,null,n);((0,h.isNil)(t)||(0,h.compare)(t,a)<0||0<=(0,h.compare)(t,s)?((0,h.assert)(!(0,h.isNil)(o),"$bucket require a default for out of range values"),l[o]):((0,h.assert)(0<=(0,h.compare)(t,a)&&(0,h.compare)(t,s)<0,"$bucket 'groupBy' expression must resolve to a value in range of boundaries"),t=function(e,t){let r=0,n=e.length-1;for(;r<=n;){var i=Math.round(r+(n-r)/2);if((0,h.compare)(t,e[i])<0)n=i-1;else{if(!(0<(0,h.compare)(t,e[i])))return i;r=i+1}}return r}(i,t),t=i[Math.max(0,t-1)],l[t])).push(e)}),i.pop(),(0,h.isNil)(o)||i.push(o),t=(0,p.Lazy)(i).map(e=>{var t=(0,f.computeValue)(l[e],u,null,n);return(0,h.into)(t,{_id:e})})),t.next()))}},{"../../core":159,"../../lazy":161,"../../util":397}],342:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$bucketAuto=void 0;const y=e("../../core"),b=e("../../util");r.$bucketAuto=(e,t,f)=>{const p=t.output||{count:{$sum:1}},h=t.groupBy,m=t.buckets;(0,b.assert)(0<m,"The $bucketAuto 'buckets' field must be greater than 0, but found: "+m);return e.transform(e=>{var r=Math.max(1,Math.round(e.length/m));const n=(0,b.memoize)(y.computeValue,null==f?void 0:f.hashFunction),i=new Map,o=[];var a=(0,b.sortBy)(e,e=>{var t=n(e,h,null,f);return((0,b.isNil)(t)?o:(i.has(t)||i.set(t,[]),i.get(t))).push(e),t}),s=[];let u=0;for(let e=0,t=a.length;e<m&&u<t;e++){var c={},l=[];for(let e=0;e<r&&u<t;e++){let e=n(a[u],h,null,f);(0,b.isNil)(e)&&(e=null),(0,b.into)(l,(0,b.isNil)(e)?o:i.get(e)),u+=((0,b.isNil)(e)?o:i.get(e)).length,(0,b.has)(c,"min")||(c.min=e),0<s.length&&(s[s.length-1]._id.max=c.min)}e==m-1&&(0,b.into)(l,a.slice(u));var d=(0,y.computeValue)(l,p,null,f);s.push((0,b.into)(d,{_id:c}))}return 0<s.length&&(s[s.length-1]._id.max=n(a[a.length-1],h,null,f)),s})}},{"../../core":159,"../../util":397}],343:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$count=void 0;const n=e("../../lazy"),i=e("../../util");r.$count=(e,t,r)=>((0,i.assert)((0,i.isString)(t)&&""!==t.trim()&&-1===t.indexOf(".")&&"$"!==t.trim()[0],"Invalid expression value for $count"),(0,n.Lazy)([{[t]:e.size()}]))},{"../../lazy":161,"../../util":397}],344:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$facet=void 0;const a=e("../../aggregator"),s=e("../../core");r.$facet=(e,i,o)=>e.transform(e=>{var t,r,n={};for([t,r]of Object.entries(i))n[t]=new a.Aggregator(r,Object.assign(Object.assign({},o),{processingMode:s.ProcessingMode.CLONE_INPUT})).run(e);return[n]})},{"../../aggregator":158,"../../core":159}],345:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$fill=void 0;const c=e("../../core"),l=e("../../util"),d=e("../expression/conditional/ifNull"),f=e("../window/linearFill"),p=e("../window/locf"),h=e("./addFields"),m=e("./setWindowFields"),y={locf:"$locf",linear:"$linearFill"};r.$fill=(e,t,r)=>{(0,l.assert)(!t.sortBy||(0,l.isObject)(t.sortBy),"sortBy must be an object."),(0,l.assert)(!!t.sortBy||Object.values(t.output).every(e=>(0,l.has)(e,"value")),"sortBy required if any output field specifies a 'method'."),(0,l.assert)(!(t.partitionBy&&t.partitionByFields),"specify either partitionBy or partitionByFields."),(0,l.assert)(!t.partitionByFields||(null==(a=null==t?void 0:t.partitionByFields)?void 0:a.every(e=>"$"!==e[0])),"fields in partitionByFields cannot begin with '$'."),(r=(0,c.initOptions)(r)).context.addExpressionOps({$ifNull:d.$ifNull}),r.context.addWindowOps({$locf:p.$locf,$linearFill:f.$linearFill});var n,i,o,a=t.partitionBy||(null==(a=null==t?void 0:t.partitionByFields)?void 0:a.map(e=>"$"+e)),s={},u={};for([n,i]of Object.entries(t.output))(0,l.has)(i,"value")?s[n]={$ifNull:["$$CURRENT."+n,i.value]}:(o=y[i.method],(0,l.assert)(!!o,`invalid fill method '${i.method}'.`),u[n]={[o]:"$"+n});return 0<Object.keys(u).length&&(e=(0,m.$setWindowFields)(e,{sortBy:t.sortBy||{},partitionBy:a,output:u},r)),e=0<Object.keys(s).length?(0,h.$addFields)(e,s,r):e}},{"../../core":159,"../../util":397,"../expression/conditional/ifNull":242,"../window/linearFill":394,"../window/locf":395,"./addFields":340,"./setWindowFields":359}],346:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$group=void 0;const l=e("../../core"),n=e("../../util");r.$group=(e,u,t)=>{(0,n.assert)((0,n.has)(u,"_id"),"a group specification must include an _id");const r=u._id,c=l.ComputeOptions.init(t);return e.transform(e=>{const i=(0,n.groupBy)(e,e=>(0,l.computeValue)(e,r,null,t),t.hashFunction);delete(u=Object.assign({},u))._id;let o=-1;const a=Array.from(i.keys()),s=i.size;return()=>{if(++o===s)return{done:!0};var e,t,r=a[o],n={};void 0!==r&&(n._id=r);for([e,t]of Object.entries(u))n[e]=(0,l.computeValue)(i.get(r),t,e,c.update(null,{groupId:r}));return{value:n,done:!1}}})}},{"../../core":159,"../../util":397}],347:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./addFields"),r),i(e("./bucket"),r),i(e("./bucketAuto"),r),i(e("./count"),r),i(e("./facet"),r),i(e("./fill"),r),i(e("./group"),r),i(e("./limit"),r),i(e("./lookup"),r),i(e("./match"),r),i(e("./merge"),r),i(e("./out"),r),i(e("./project"),r),i(e("./redact"),r),i(e("./replaceRoot"),r),i(e("./replaceWith"),r),i(e("./sample"),r),i(e("./set"),r),i(e("./setWindowFields"),r),i(e("./skip"),r),i(e("./sort"),r),i(e("./sortByCount"),r),i(e("./unionWith"),r),i(e("./unset"),r),i(e("./unwind"),r)},{"./addFields":340,"./bucket":341,"./bucketAuto":342,"./count":343,"./facet":344,"./fill":345,"./group":346,"./limit":348,"./lookup":349,"./match":350,"./merge":351,"./out":352,"./project":353,"./redact":354,"./replaceRoot":355,"./replaceWith":356,"./sample":357,"./set":358,"./setWindowFields":359,"./skip":360,"./sort":361,"./sortByCount":362,"./unionWith":363,"./unset":364,"./unwind":365}],348:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$limit=void 0;r.$limit=(e,t,r)=>e.take(t)},{}],349:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lookup=void 0;const s=e("../../util");r.$lookup=(e,r,n)=>{var t=(0,s.isString)(r.from)?null==n?void 0:n.collectionResolver(r.from):r.from;(0,s.assert)(t instanceof Array,"'from' field must resolve to an array");const i={};for(const a of t){var o=(0,s.hashCode)((0,s.resolve)(a,r.foreignField),null==n?void 0:n.hashFunction);i[o]=i[o]||[],i[o].push(a)}return e.map(e=>{var t=(0,s.hashCode)((0,s.resolve)(e,r.localField),null==n?void 0:n.hashFunction),e=(0,s.into)({},e);return e[r.as]=i[t]||[],e})}},{"../../util":397}],350:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$match=void 0;const i=e("../../query");r.$match=(e,t,r)=>{const n=new i.Query(t,r);return e.filter(e=>n.test(e))}},{"../../query":396}],351:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$merge=void 0;const d=e("../../aggregator"),f=e("../../core"),p=e("../../util"),h=e("../expression");r.$merge=(e,o,a)=>{const s=(0,p.isString)(o.into)?null==a?void 0:a.collectionResolver(o.into):o.into,r=((0,p.assert)(s instanceof Array,"$merge: option 'into' must resolve to an array"),o.on||a.idKey),u=t=>{var e=(0,p.isString)(r)?(0,p.resolve)(t,r):r.map(e=>(0,p.resolve)(t,e));return(0,p.hashCode)(e,a.hashFunction)},c={};for(let e=0;e<s.length;e++){var t=s[e],n=u(t);(0,p.assert)(!c[n],"$merge: 'into' collection must have unique entries for the 'on' field."),c[n]=[t,e]}const l=f.ComputeOptions.init(a);return e.map(e=>{var t=u(e);if(c[t]){var[r,n]=c[t],i=(0,f.computeValue)(r,o.let||{new:"$$ROOT"},null,l.update(e));if((0,p.isArray)(o.whenMatched)){t=new d.Aggregator(o.whenMatched,Object.assign(Object.assign({},a),{variables:i}));s[n]=t.run([r])[0]}else switch(o.whenMatched){case"replace":s[n]=e;break;case"fail":throw new Error("$merge: failed due to matching as specified by 'whenMatched' option.");case"keepExisting":break;default:s[n]=(0,h.$mergeObjects)(r,[r,e],l.update(e,{variables:i}))}}else switch(o.whenNotMatched){case"discard":break;case"fail":throw new Error("$merge: failed due to matching as specified by 'whenMatched' option.");default:s.push(e)}return e})}},{"../../aggregator":158,"../../core":159,"../../util":397,"../expression":269}],352:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$out=void 0;const i=e("../../util");r.$out=(e,t,r)=>{const n=(0,i.isString)(t)?null==r?void 0:r.collectionResolver(t):t;return(0,i.assert)(n instanceof Array,"expression must resolve to an array"),e.map(e=>(n.push((0,i.cloneDeep)(e)),e))}},{"../../util":397}],353:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$project=void 0;const v=e("../../core"),g=e("../../util");function _(e,t){var r,n,i=[!1,!1];for([r,n]of Object.entries(e)){if(r===(null==t?void 0:t.idKey))return;0===n||!1===n?i[0]=!0:1!==n&&!0!==n||(i[1]=!0),(0,g.assert)(!(i[0]&&i[1]),"Projection cannot have a mix of inclusion and exclusion.")}}r.$project=(e,t,r)=>{if((0,g.isEmpty)(t))return e;let n=Object.keys(t),i=!1;_(t,r);var o,a=r.idKey;(0,g.inArray)(n,a)?0!==(o=t[a])&&!1!==o||(n=n.filter(g.notInArray.bind(null,[a])),i=0==n.length):n.push(a);const s=v.ComputeOptions.init(r);return e.map(e=>function r(n,e,i,t,o){let a={};let s=!1;let u=!1;const c=[];o&&c.push(i.idKey);for(const l of t){let t=void 0;const d=e[l];if(l!==i.idKey&&(0,g.inArray)([0,!1],d)&&(u=!0),l===i.idKey&&(0,g.isEmpty)(d))t=n[l];else if((0,g.isString)(d))t=(0,v.computeValue)(n,d,l,i);else if(!(0,g.inArray)([1,!0],d))if(d instanceof Array)t=d.map(e=>{const t=(0,v.computeValue)(n,e,null,i);return(0,g.isNil)(t)?null:t});else{if(!(0,g.isObject)(d)){c.push(l);continue}{const p=d,h=Object.keys(d),m=1==h.length?h[0]:"",y=(0,v.getOperator)(v.OperatorType.PROJECTION,m,i);if(y)"$slice"===m?(0,g.ensureArray)(p[m]).every(g.isNumber)?(t=y(n,p[m],l,i),s=!0):t=(0,v.computeValue)(n,p,l,i):t=y(n,p[m],l,i);else if((0,g.isOperator)(m))t=(0,v.computeValue)(n,p[m],m,i);else if((0,g.has)(n,l)){_(p,i);let e=n[l];t=e instanceof Array?e.map(e=>r(e,p,i,h,!1)):(e=(0,g.isObject)(e)?e:n,r(e,p,i,h,!1))}else t=(0,v.computeValue)(n,d,null,i)}}const f=(0,g.resolveGraph)(n,l,{preserveMissing:!0});void 0!==f&&(0,g.merge)(a,f,{flatten:!0}),(0,g.notInArray)([0,1,!1,!0],d)&&(void 0===t?(0,g.removeValue)(a,l,{descendArray:!0}):(0,g.setValue)(a,l,t))}(0,g.filterMissing)(a);if((s||u||o)&&(a=(0,g.into)({},n,a),0<c.length))for(const b of c)(0,g.removeValue)(a,b,{descendArray:!0});return a}(e,t,s.update(e),n,i))}},{"../../core":159,"../../util":397}],354:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$redact=void 0;const i=e("../../core");r.$redact=(e,t,r)=>{const n=i.ComputeOptions.init(r);return e.map(e=>(0,i.redact)(e,t,n.update(e)))}},{"../../core":159}],355:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$replaceRoot=void 0;const n=e("../../core"),i=e("../../util");r.$replaceRoot=(e,t,r)=>e.map(e=>(e=(0,n.computeValue)(e,t.newRoot,null,r),(0,i.assert)((0,i.isObject)(e),"$replaceRoot expression must return an object"),e))},{"../../core":159,"../../util":397}],356:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$replaceWith=void 0;e=e("./replaceRoot");r.$replaceWith=e.$replaceRoot},{"./replaceRoot":355}],357:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sample=void 0;r.$sample=(e,i,t)=>e.transform(t=>{const r=t.length;let n=-1;return()=>{var e;return++n===i.size?{done:!0}:(e=Math.floor(Math.random()*r),{value:t[e],done:!1})}})},{}],358:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$set=void 0;e=e("./addFields");r.$set=e.$addFields},{"./addFields":340}],359:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$setWindowFields=void 0;const i=e("../../core"),O=e("../../lazy"),S=e("../../util"),o=e("../expression"),E=e("../expression/date/dateAdd"),x=e("./_internal"),P=e("./addFields"),a=e("./group"),s=e("./sort"),u=new Set(["$denseRank","$documentNumber","$first","$last","$linearFill","$rank","$shift"]),c=new Set(["$denseRank","$expMovingAvg","$linearFill","$locf","$rank","$shift"]);r.$setWindowFields=(e,_,w)=>{(w=(0,i.initOptions)(w)).context.addExpressionOps({$function:o.$function});for(const n of Object.values(_.output)){var t=Object.keys(n),r=t.find(S.isOperator);(0,S.assert)(!!(0,i.getOperator)(i.OperatorType.WINDOW,r,w)||!!(0,i.getOperator)(i.OperatorType.ACCUMULATOR,r,w),`'${r}' is not a valid window operator`),(0,S.assert)(0<t.length&&t.length<=2&&(1==t.length||t.includes("window")),"'output' option should have a single window operator."),null!==n&&void 0!==n&&n.window&&({documents:r,range:t}=n.window,(0,S.assert)(!!r&&!t||!r&&!!t||!r&&!t,"'window' option supports only one of 'documents' or 'range'."))}return _.sortBy&&(e=(0,s.$sort)(e,_.sortBy,w)),(e=(0,a.$group)(e,{_id:_.partitionBy,items:{$push:"$$CURRENT"}},w)).transform(e=>{const v=[],g=[];for(var[t,r]of Object.entries(_.output)){var n=Object.keys(r).find(S.isOperator),t={operatorName:n,func:{left:(0,i.getOperator)(i.OperatorType.ACCUMULATOR,n,w),right:(0,i.getOperator)(i.OperatorType.WINDOW,n,w)},args:r[n],field:t,window:r.window};(0,S.assert)(!!_.sortBy||!(u.has(n)||!t.window),`${u.has(n)?`'${n}'`:"bounded window operation"} requires a sortBy.`),(0,S.assert)(!t.window||!c.has(n),n+" does not accept a 'window' field."),g.push(t)}return e.forEach(e=>{const s=e.items;let t=(0,O.Lazy)(s);const r={};for(const i of g){const{func:o,args:a,field:u,window:c}=i;var n=t=>{let r=-1;return e=>(++r,o.left?o.left(t(e,r),a,w):o.right?o.right(e,t(e,r),{parentExpr:_,inputExpr:a,documentNumber:r+1,field:u},w):void 0)};if(c){const{documents:l,range:d,unit:f}=c,p=l||d;if(!(0,x.isUnbounded)(c)){const[h,m]=p,y=e=>"current"==h?e:"unbounded"==h?0:Math.max(h+e,0),b=e=>"current"==m?e+1:"unbounded"==m?s.length:m+e+1;r[u]=n((t,e)=>{if(l||p.every(S.isString))return s.slice(y(e),b(e));const r=Object.keys(_.sortBy)[0];let n,i;var o;i=f?(o=e=>(0,E.$dateAdd)(t,{startDate:new Date(t[r]),unit:f,amount:e},w).getTime(),n=(0,S.isNumber)(h)?o(h):-1/0,(0,S.isNumber)(m)?o(m):1/0):(o=t[r],n=(0,S.isNumber)(h)?o+h:-1/0,(0,S.isNumber)(m)?o+m:1/0);let a=s;return"current"==h&&(a=s.slice(e)),(a="current"==m?s.slice(0,e+1):a).filter(e=>{e=+e[r];return e>=n&&e<=i})})}}r[u]||(r[u]=n(e=>s)),t=(0,P.$addFields)(t,{[u]:{$function:{body:e=>r[u](e),args:["$$CURRENT"]}}},w)}v.push(t)}),(0,O.compose)(...v)})}},{"../../core":159,"../../lazy":161,"../../util":397,"../expression":269,"../expression/date/dateAdd":248,"./_internal":339,"./addFields":340,"./group":346,"./sort":361}],360:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$skip=void 0;r.$skip=(e,t,r)=>e.drop(t)},{}],361:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sort=void 0;const s=e("../../util");r.$sort=(e,i,o)=>{if((0,s.isEmpty)(i)||!(0,s.isObject)(i))return e;let a=s.compare;var t=o.collation;return(0,s.isObject)(t)&&(0,s.isString)(t.locale)&&(a=function(e){var t={sensitivity:u[e.strength||3],caseFirst:"off"!==e.caseFirst&&e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:"shifted"===e.alternate};!0===(e.caseLevel||!1)&&("base"===t.sensitivity&&(t.sensitivity="case"),"accent"===t.sensitivity)&&(t.sensitivity="variant");const n=new Intl.Collator(e.locale,t);return(e,t)=>{var r;return(0,s.isString)(e)&&(0,s.isString)(t)?(r=n.compare(e,t))<0?-1:0<r?1:0:(0,s.compare)(e,t)}}(t)),e.transform(e=>{for(const r of Object.keys(i).reverse()){const n=(0,s.groupBy)(e,e=>(0,s.resolve)(e,r),o.hashFunction);var t=Array.from(n.keys()).sort(a);-1===i[r]&&t.reverse(),t.reduce((e,t)=>(0,s.into)(e,n.get(t)),e=[])}return e})};const u={1:"base",2:"accent",3:"variant"}},{"../../util":397}],362:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$sortByCount=void 0;const i=e("./group"),o=e("./sort");r.$sortByCount=(e,t,r)=>{var n={count:{$sum:1}};return n._id=t,(0,o.$sort)((0,i.$group)(e,n,r),{count:-1},r)}},{"./group":346,"./sort":361}],363:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$unionWith=void 0;const i=e("../../aggregator"),o=e("../../lazy"),a=e("../../util");r.$unionWith=(e,t,r)=>{var n=(0,a.isString)(t.coll)?r.collectionResolver(t.coll):t.coll,e=[e];return e.push(t.pipeline?new i.Aggregator(t.pipeline,r).stream(n):(0,o.Lazy)(n)),(0,o.compose)(...e)}},{"../../aggregator":158,"../../lazy":161,"../../util":397}],364:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$unset=void 0;const o=e("../../util"),a=e("./project");r.$unset=(e,t,r)=>{var n={};for(const i of t=(0,o.ensureArray)(t))n[i]=0;return(0,a.$project)(e,n,r)}},{"../../util":397,"./project":353}],365:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$unwind=void 0;const u=e("../../lazy"),c=e("../../util");r.$unwind=(t,e,r)=>{const i=(e=(0,c.isString)(e)?{path:e}:e).path.substring(1),n=(null==e?void 0:e.includeArrayIndex)||!1,o=e.preserveNullAndEmptyArrays||!1,a=(e,t)=>(!1!==n&&(e[n]=t),e);let s;return(0,u.Lazy)(()=>{for(;;){if(s instanceof u.Iterator){var e=s.next();if(!e.done)return e}e=t.next();if(e.done)return e;const n=e.value;if((s=(0,c.resolve)(n,i))instanceof Array){if(0===s.length&&!0===o)return(s=null,c.removeValue)(n,i),{value:a(n,null),done:!1};s=(0,u.Lazy)(s).map((e,t)=>{var r=(0,c.resolveGraph)(n,i,{preserveKeys:!0});return(0,c.setValue)(r,i,e),a(r,t)})}else if(!(0,c.isEmpty)(s)||!0===o)return{value:a(n,null),done:!1}}})}},{"../../lazy":161,"../../util":397}],366:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$all=void 0;e=e("../../_predicates");r.$all=(0,e.createQueryOperator)(e.$all)},{"../../_predicates":162}],367:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$elemMatch=void 0;e=e("../../_predicates");r.$elemMatch=(0,e.createQueryOperator)(e.$elemMatch)},{"../../_predicates":162}],368:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./all"),r),i(e("./elemMatch"),r),i(e("./size"),r)},{"./all":366,"./elemMatch":367,"./size":369}],369:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$size=void 0;e=e("../../_predicates");r.$size=(0,e.createQueryOperator)(e.$size)},{"../../_predicates":162}],370:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$eq=void 0;e=e("../../_predicates");r.$eq=(0,e.createQueryOperator)(e.$eq)},{"../../_predicates":162}],371:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$gt=void 0;e=e("../../_predicates");r.$gt=(0,e.createQueryOperator)(e.$gt)},{"../../_predicates":162}],372:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$gte=void 0;e=e("../../_predicates");r.$gte=(0,e.createQueryOperator)(e.$gte)},{"../../_predicates":162}],373:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$in=void 0;e=e("../../_predicates");r.$in=(0,e.createQueryOperator)(e.$in)},{"../../_predicates":162}],374:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$nin=r.$ne=r.$lte=r.$lt=r.$in=r.$gte=r.$gt=r.$eq=void 0;var n=e("./eq"),i=(Object.defineProperty(r,"$eq",{enumerable:!0,get:function(){return n.$eq}}),e("./gt")),o=(Object.defineProperty(r,"$gt",{enumerable:!0,get:function(){return i.$gt}}),e("./gte")),a=(Object.defineProperty(r,"$gte",{enumerable:!0,get:function(){return o.$gte}}),e("./in")),s=(Object.defineProperty(r,"$in",{enumerable:!0,get:function(){return a.$in}}),e("./lt")),u=(Object.defineProperty(r,"$lt",{enumerable:!0,get:function(){return s.$lt}}),e("./lte")),c=(Object.defineProperty(r,"$lte",{enumerable:!0,get:function(){return u.$lte}}),e("./ne")),l=(Object.defineProperty(r,"$ne",{enumerable:!0,get:function(){return c.$ne}}),e("./nin"));Object.defineProperty(r,"$nin",{enumerable:!0,get:function(){return l.$nin}})},{"./eq":370,"./gt":371,"./gte":372,"./in":373,"./lt":375,"./lte":376,"./ne":377,"./nin":378}],375:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lt=void 0;e=e("../../_predicates");r.$lt=(0,e.createQueryOperator)(e.$lt)},{"../../_predicates":162}],376:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$lte=void 0;e=e("../../_predicates");r.$lte=(0,e.createQueryOperator)(e.$lte)},{"../../_predicates":162}],377:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$ne=void 0;e=e("../../_predicates");r.$ne=(0,e.createQueryOperator)(e.$ne)},{"../../_predicates":162}],378:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$nin=void 0;e=e("../../_predicates");r.$nin=(0,e.createQueryOperator)(e.$nin)},{"../../_predicates":162}],379:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$exists=void 0;e=e("../../_predicates");r.$exists=(0,e.createQueryOperator)(e.$exists)},{"../../_predicates":162}],380:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./exists"),r),i(e("./type"),r)},{"./exists":379,"./type":381}],381:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$type=void 0;e=e("../../_predicates");r.$type=(0,e.createQueryOperator)(e.$type)},{"../../_predicates":162}],382:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$expr=void 0;const n=e("../../../core");r.$expr=function(e,t,r){return e=>(0,n.computeValue)(e,t,null,r)}},{"../../../core":159}],383:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./expr"),r),i(e("./jsonSchema"),r),i(e("./mod"),r),i(e("./regex"),r),i(e("./where"),r)},{"./expr":382,"./jsonSchema":384,"./mod":385,"./regex":386,"./where":387}],384:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$jsonSchema=void 0,r.$jsonSchema=function(e,t,r){if(null==r||!r.jsonSchemaValidator)throw new Error("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");const n=null==r?void 0:r.jsonSchemaValidator(t);return e=>n(e)}},{}],385:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$mod=void 0;e=e("../../_predicates");r.$mod=(0,e.createQueryOperator)(e.$mod)},{"../../_predicates":162}],386:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$regex=void 0;e=e("../../_predicates");r.$regex=(0,e.createQueryOperator)(e.$regex)},{"../../_predicates":162}],387:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$where=void 0;const i=e("../../../util");r.$where=function(e,t,r){(0,i.assert)(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");const n=t;return(0,i.assert)((0,i.isFunction)(n),"$where only accepts a Function object"),e=>(0,i.truthy)(n.call(e),null==r?void 0:r.useStrictMode)}},{"../../../util":397}],388:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$and=void 0;const i=e("../../../query"),o=e("../../../util");r.$and=(e,t,r)=>{(0,o.assert)((0,o.isArray)(t),"Invalid expression: $and expects value to be an Array.");const n=t.map(e=>new i.Query(e,r));return t=>n.every(e=>e.test(t))}},{"../../../query":396,"../../../util":397}],389:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./and"),r),i(e("./nor"),r),i(e("./not"),r),i(e("./or"),r)},{"./and":388,"./nor":390,"./not":391,"./or":392}],390:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$nor=void 0;const i=e("../../../util"),o=e("./or");r.$nor=(e,t,r)=>{(0,i.assert)((0,i.isArray)(t),"Invalid expression. $nor expects value to be an array.");const n=(0,o.$or)("$or",t,r);return e=>!n(e)}},{"../../../util":397,"./or":392}],391:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$not=void 0;const o=e("../../../query"),a=e("../../../util");r.$not=(e,t,r)=>{var n={};n[e]=(0,a.normalize)(t);const i=new o.Query(n,r);return e=>!i.test(e)}},{"../../../query":396,"../../../util":397}],392:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$or=void 0;const i=e("../../../query"),o=e("../../../util");r.$or=(e,t,r)=>{(0,o.assert)((0,o.isArray)(t),"Invalid expression. $or expects value to be an Array");const n=t.map(e=>new i.Query(e,r));return t=>n.some(e=>e.test(t))}},{"../../../query":396,"../../../util":397}],393:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rank=r.withMemo=r.MILLIS_PER_UNIT=void 0;const c=e("../../util"),n=e("../accumulator");var i=e("../expression/date/_internal");const a=e("../pipeline/_internal"),s=(r.MILLIS_PER_UNIT={week:7*i.MILLIS_PER_DAY,day:i.MILLIS_PER_DAY,hour:i.MILLIS_PER_DAY/24,minute:6e4,second:1e3,millisecond:1},new WeakMap);function o(e,t,r,n){if(!(0,a.isUnbounded)(t.parentExpr.output[t.field].window))return n(r());s.has(e)||s.set(e,{[t.field]:r()});var i=s.get(e);void 0===i[t.field]&&(i[t.field]=r());let o=!1;try{return n(i[t.field])}catch(e){o=!0}finally{!o&&t.documentNumber!==e.length||(delete i[t.field],0!==Object.keys(i).length)||s.delete(e)}}r.withMemo=o,r.rank=function(e,a,s,t,u){return o(a,s,()=>{var e="$"+Object.keys(s.parentExpr.sortBy)[0];const r=(0,n.$push)(a,e,t);e=(0,c.groupBy)(r,(e,t)=>r[t],t.hashFunction);return{values:r,groups:e}},e=>{var{values:e,groups:t}=e;if(t.size==a.length)return s.documentNumber;var r=e[s.documentNumber-1];let n=0,i=0;for(const o of t.keys()){if((0,c.isEqual)(r,o))return u?n+1:i+1;n++,i+=t.get(o).length}throw new Error("rank: invalid return value. please submit a bug report.")})}},{"../../util":397,"../accumulator":174,"../expression/date/_internal":247,"../pipeline/_internal":339}],394:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$linearFill=void 0;const f=e("../../util"),p=e("../accumulator"),n=e("./_internal");r.$linearFill=function(e,c,l,d){return(0,n.withMemo)(c,l,()=>{var e,t,r,n,i,o="$"+Object.keys(l.parentExpr.sortBy)[0],a=(0,p.$push)(c,[o,l.inputExpr],d).filter(([e])=>(0,f.isNumber)(+e));if(a.length!==c.length)return null;let s=-1,u=0;for(;u<a.length;){for(;s+1<a.length&&(0,f.isNumber)(a[s+1][1]);)s++,u=s;for(;u+1<a.length&&!(0,f.isNumber)(a[u+1][1]);)u++;if(u+1>=a.length)break;for(u++;s+1<u;)a[s+1][1]=(e=a[s][0],t=a[s][1],r=a[u][0],n=a[u][1],i=a[s+1][0],t+(n-t)/(r-e)*(i-e)),s++;s=u}return a.map(([,e])=>e)},e=>e[l.documentNumber-1])}},{"../../util":397,"../accumulator":174,"./_internal":393}],395:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$locf=void 0;const o=e("../../util"),a=e("../accumulator/push"),s=e("./_internal");r.$locf=function(e,r,n,i){return(0,s.withMemo)(r,n,()=>{var t=(0,a.$push)(r,n.inputExpr,i);for(let e=1;e<t.length;e++)(0,o.isNil)(t[e])&&(t[e]=t[e-1]);return t},e=>e[n.documentNumber-1])}},{"../../util":397,"../accumulator/push":182,"./_internal":393}],396:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Query=void 0;const i=e("./core"),n=e("./cursor"),o=e("./util");r.Query=class{constructor(e,t){this.condition=e,this.options=(0,i.initOptions)(t),this.compiled=[],this.compile()}compile(){(0,o.assert)((0,o.isObject)(this.condition),"query criteria must be an object");var e,t,r={};for([e,t]of Object.entries(this.condition)){if("$where"===e)Object.assign(r,{field:e,expr:t});else if((0,o.inArray)(["$and","$or","$nor","$expr","$jsonSchema"],e))this.processOperator(e,e,t);else{(0,o.assert)(!(0,o.isOperator)(e),"unknown top level operator: "+e);for(var[n,i]of Object.entries((0,o.normalize)(t)))this.processOperator(e,n,i)}r.field&&this.processOperator(r.field,r.field,r.expr)}}processOperator(e,t,r){var n=(0,i.getOperator)(i.OperatorType.QUERY,t,this.options);if(!n)throw new Error("unknown operator "+t);t=n(e,r,this.options);this.compiled.push(t)}test(r){for(let e=0,t=this.compiled.length;e<t;e++)if(!this.compiled[e](r))return!1;return!0}find(e,t){return new n.Cursor(e,e=>this.test(e),t||{},this.options)}remove(e){return e.reduce((e,t)=>(this.test(t)||e.push(t),e),[])}}},{"./core":159,"./cursor":160,"./util":397}],397:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.normalize=l.isOperator=l.removeValue=l.setValue=l.walk=l.filterMissing=l.resolveGraph=l.resolve=l.memoize=l.into=l.groupBy=l.sortBy=l.hashCode=l.stringify=l.unique=l.isEqual=l.flatten=l.intersection=l.merge=l.has=l.ensureArray=l.isMissing=l.isEmpty=l.truthy=l.notInArray=l.inArray=l.isNil=l.isFunction=l.isRegExp=l.isDate=l.isObjectLike=l.isObject=l.isArray=l.isNotNaN=l.isNumber=l.isString=l.isBoolean=l.getType=l.cloneDeep=l.assert=l.compare=l.MIN_LONG=l.MAX_LONG=l.MIN_INT=l.MAX_INT=void 0,l.MAX_INT=2147483647,l.MIN_INT=-2147483648,l.MAX_LONG=Number.MAX_SAFE_INTEGER,l.MIN_LONG=Number.MIN_SAFE_INTEGER;const h=Symbol("missing"),r=Object.getPrototypeOf({}),n=/^\[object ([a-zA-Z0-9]+)\]$/,m=e=>{var t=c(e);let r=0,n=t.length;for(;n;)r=(r<<5)-r^t.charCodeAt(--n);return r>>>0},o=new Set(["null","undefined","boolean","number","string","date","regexp"]),i={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8};l.compare=(e,t)=>{var[r,n]=[e=e===h?void 0:e,t=t===h?void 0:t].map(e=>i[(0,l.getType)(e).toLowerCase()]);return r!==n?r-n:1!==r&&2!==r&&6!==r&&b(e,t)?0:e<t?-1:t<e?1:0},l.assert=function(e,t){if(!e)throw new Error(t)};l.cloneDeep=e=>{const t=new Map,o=e=>{if(t.has(e))throw new Error("cycle detected during clone operation.");t.set(e,!0)},a=t=>{if(t instanceof Date)return new Date(t);if((0,l.isArray)(t)){o(t);var r=new Array(t.length),n=t.length;for(let e=0;e<n;e++)r[e]=a(t[e]);return r}if((0,l.isObject)(t)){o(t);var e={};for(const i in t)e[i]=a(t[i]);return e}return t};return a(e)},l.getType=e=>n.exec(Object.prototype.toString.call(e))[1],l.isBoolean=e=>"boolean"==typeof e,l.isString=e=>"string"==typeof e,l.isNumber=e=>!isNaN(e)&&"number"==typeof e,l.isNotNaN=e=>!(isNaN(e)&&"number"==typeof e),l.isArray=Array.isArray,l.isObject=e=>{var t;return!!e&&((t=Object.getPrototypeOf(e))===r||null===t)&&"[object Object]"===Object.prototype.toString.call(e)},l.isObjectLike=e=>e===Object(e),l.isDate=e=>e instanceof Date,l.isRegExp=e=>e instanceof RegExp,l.isFunction=e=>"function"==typeof e,l.isNil=e=>null==e,l.inArray=(e,t)=>e.includes(t),l.notInArray=(e,t)=>!(0,l.inArray)(e,t),l.truthy=(e,t=!0)=>!!e||t&&""===e,l.isEmpty=e=>(0,l.isNil)(e)||(0,l.isString)(e)&&!e||e instanceof Array&&0===e.length||(0,l.isObject)(e)&&0===Object.keys(e).length,l.isMissing=e=>e===h,l.ensureArray=e=>e instanceof Array?e:[e];l.has=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t);function y(n,i=m){const o=new Map;return n.forEach((t,e)=>{var r=d(t,i);o.has(r)?o.get(r).some(e=>b(n[e],t))||o.get(r).push(e):o.set(r,[e])}),o}function b(r,n){for(var i=[r],o=[n];0<i.length;)if((r=i.pop())!==(n=o.pop())){var e=(0,l.getType)(r).toLowerCase();if(e!==(0,l.getType)(n).toLowerCase()||"function"===e)return!1;if("array"===e){var t=r,a=n;if(t.length!==a.length)return!1;t.length===a.length&&0===t.length||(v(i,t),v(o,a))}else if("object"===e){var s=Object.keys(r),t=Object.keys(n);if(s.length!==t.length)return!1;for(let e=0,t=s.length;e<t;e++){var u=s[e];if(!(0,l.has)(n,u))return!1;i.push(r[u]),o.push(n[u])}}else if(c(r)!==c(n))return!1}return 0===i.length}function c(t){var e=(0,l.getType)(t).toLowerCase();switch(e){case"boolean":case"number":case"regexp":return t.toString();case"string":return JSON.stringify(t);case"date":return t.toISOString();case"null":case"undefined":return e;case"array":return"["+t.map(c).join(",")+"]"}var r="object"===e?"":""+(0,l.getType)(t),n=Object.keys(t);return n.sort(),r+"{"+n.map(e=>c(e)+":"+c(t[e])).join(",")+"}"}function d(e,t){return t=t||m,(0,l.isNil)(e)?null:t(e).toString()}function a(t,r,n=l.compare){if((0,l.isEmpty)(t))return t;var i=new Array,o=new Array;for(let e=0;e<t.length;e++){var a=t[e],s=r(a,e);(0,l.isNil)(s)?o.push(a):i.push([s,a])}return i.sort((e,t)=>n(e[0],t[0])),v(o,i.map(e=>e[1]))}l.merge=function r(e,n,i){if(i=i||{flatten:!1},(0,l.isMissing)(e)||(0,l.isNil)(e))return n;if(!(0,l.isMissing)(n)&&!(0,l.isNil)(n)){if(t=e,o=n,!((0,l.isObject)(t)&&(0,l.isObject)(o)||(0,l.isArray)(t)&&(0,l.isArray)(o))){if(i.skipValidation)return n||e;throw Error("mismatched types. must both be array or object")}var t,o;if(i.skipValidation=!0,(0,l.isArray)(e)){var a=e,s=n;if(i.flatten){let e=0,t=0;for(;e<a.length&&t<s.length;)a[e]=r(a[e++],s[t++],i);for(;t<s.length;)a.push(n[t++])}else v(a,s)}else for(const u in n)e[u]=r(e[u],n[u],i)}return e},l.intersection=function(i,e=m){if(i.some(e=>0==e.length))return[];if(1===i.length)return Array.from(i);const d=a(i.map((e,t)=>[t,e.length]),e=>e[1]),o=i[d[0][0]],f=(e=y(o,e),new Map),p=new Array;return e.forEach((e,a)=>{const r=e.map(e=>o[e]),s=r.map(e=>0),u=r.map(e=>[d[0][0],0]);let t=!1;for(let o=1;o<i.length;o++){const[c,,]=d[o],n=i[c];if(f.has(o)||f.set(o,y(n)),f.get(o).has(a)){const l=f.get(o).get(a).map(e=>n[e]);t=r.map((n,i)=>l.some((e,t)=>{var r=s[i];return b(n,e)&&(s[i]++,c<u[i][0])&&(u[i]=[c,f.get(o).get(a)[t]]),r<s[i]})).some(Boolean)}if(!t)return}t&&v(p,s.map((e,t)=>e===i.length-1?[r[t],u[t]]:h).filter(e=>e!==h))}),p.sort((e,t)=>{var[,[e,r]]=e,[,[t,n]]=t,e=(0,l.compare)(e,t);return 0!==e?e:(0,l.compare)(r,n)}).map(e=>e[0])},l.flatten=function(e,t=0){const o=new Array;return function r(n,i){for(let e=0,t=n.length;e<t;e++)(0,l.isArray)(n[e])&&(0<i||i<0)?r(n[e],Math.max(-1,i-1)):o.push(n[e])}(e,t),o},l.isEqual=b,l.unique=function(r,e=m){const n=r.map(e=>h);return y(r,e).forEach((e,t)=>{e.forEach(e=>n[e]=r[e])}),n.filter(e=>e!==h)},l.stringify=c,l.hashCode=d,l.sortBy=a,l.groupBy=function(t,r,n=m){if(t.length<1)return new Map;var i=new Map,o=new Map;for(let e=0;e<t.length;e++){var a=t[e];const c=r(a,e);var s,u=d(c,n);null===u?o.has(null)?o.get(null).push(a):o.set(null,[a]):(s=i.has(u)?i.get(u).find(e=>b(e,c)):null,(0,l.isNil)(s)?(o.set(c,[a]),i.has(u)?i.get(u).push(c):i.set(u,[c])):o.get(s).push(a))}return o};const s=5e4;function v(e,...t){return e instanceof Array?t.reduce((e,t)=>{let r=Math.ceil(t.length/s),n=0;for(;0<r--;)Array.prototype.push.apply(e,t.slice(n,n+s)),n+=s;return e},e):t.filter(l.isObjectLike).reduce((e,t)=>(Object.assign(e,t),e),e)}function f(e,t){return(0,l.isObjectLike)(e)?e[t]:void 0}l.into=v,l.memoize=function(r,n=m){return i={},(...e)=>{var t=d(e,n)||"";return(0,l.has)(i,t)||(i[t]=r.apply(this,e)),i[t]};var i},l.resolve=function(e,t,r){let a=0;if((e=o.has((0,l.getType)(e).toLowerCase())?e:function r(e,t){let n=e;for(let e=0;e<t.length;e++){var i=t[e];if(null===/^\d+$/.exec(i)&&n instanceof Array){if(0===e&&0<a)break;a+=1;const o=t.slice(e);n=n.reduce((e,t)=>(void 0!==(t=r(t,o))&&e.push(t),e),[]);break}if(void 0===(n=f(n,i)))break}return n}(e,t.split(".")))instanceof Array&&null!=r&&r.unwrapArray){var n=e,i=a;if(!(i<1))for(;i--&&1===n.length;)n=n[0];return n}return e},l.resolveGraph=function e(t,r,n){var i=r.split("."),o=i[0],a=i.slice(1).join("."),s=null!==/^\d+$/.exec(o),i=1<i.length;let u,c;if(t instanceof Array)if(s)u=f(t,Number(o)),u=[u=i?e(u,a,n):u];else{u=[];for(const l of t)c=e(l,r,n),null!=n&&n.preserveMissing?(void 0===c&&(c=h),u.push(c)):void 0!==c&&u.push(c)}else{if(c=f(t,o),void 0===(c=i?e(c,a,n):c))return;(u=null!=n&&n.preserveKeys?Object.assign({},t):{})[o]=c}return u},l.filterMissing=function t(r){if(r instanceof Array)for(let e=r.length-1;0<=e;e--)r[e]===h?r.splice(e,1):t(r[e]);else if((0,l.isObject)(r))for(const e in r)(0,l.has)(r,e)&&t(r[e])};const u=/^\d+$/;function p(e,t,r,n){var t=t.split("."),i=t[0];const o=t.slice(1).join(".");1===t.length?((0,l.isObject)(e)||(0,l.isArray)(e)&&u.test(i))&&r(e,i):(null!=n&&n.buildGraph&&(0,l.isNil)(e[i])&&(e[i]={}),(e=e[i])&&(i=!!(1<t.length&&u.test(t[1])),e instanceof Array&&null!=n&&n.descendArray&&!i?e.forEach(e=>p(e,o,r,n)):p(e,o,r,n)))}l.walk=p,l.setValue=function(e,t,r){p(e,t,(e,t)=>{e[t]=r},{buildGraph:!0})},l.removeValue=function(e,t,n){p(e,t,(e,t)=>{if(e instanceof Array){if(/^\d+$/.test(t))e.splice(parseInt(t),1);else if(n&&n.descendArray)for(const r of e)(0,l.isObject)(r)&&delete r[t]}else(0,l.isObject)(e)&&delete e[t]},n)};const g=/^\$[a-zA-Z0-9_]+$/;function _(e){return g.test(e)}l.isOperator=_,l.normalize=function(e){if(o.has((0,l.getType)(e).toLowerCase()))return(0,l.isRegExp)(e)?{$regex:e}:{$eq:e};if((0,l.isObjectLike)(e)){var t;if(!Object.keys(e).some(_))return{$eq:e};if((0,l.has)(e,"$regex"))return(t=Object.assign({},e)).$regex=new RegExp(e.$regex,e.$options),delete t.$options,t}return e}},{}],398:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(t,r){Object.keys(t).forEach(function(e){r(t[e],e)})}function o(r,e,a){if(a=a||{},!m(e))throw y("Modifier must be an object");var s;if(e=u(e),h(e)?(s=u(r),b.each(e,function(e,i){var o=_[i];if(!o)throw y("Invalid modifier specified "+i);b.each(e,function(e,t){if(""===t)throw y("An empty update path is not valid.");var r=t.split(".");if(!b.all(r))throw y("The update path '"+t+"' contains an empty field name, which is not allowed.");var n=v(s,r,{noCreate:g[i],forbidArray:"$rename"===i,arrayIndices:a.arrayIndices}),r=r.pop();o(n,r,e,t,s)})})):s=e,a.returnInsteadOfReplacing)return s;b.each(b.keys(r),function(e){"_id"!==e&&delete r[e]}),b.each(s,function(e,t){r[t]=e})}var u=n(e("clone")),c=n(e("deep-equal")),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},d=function(e){return Array.isArray(e)},f=i,p=function(e){return d(e)&&!s(e)},h=function(r,n){var i;return!!m(r)&&(i=void 0,f(r,function(e,t){t="$"===t.substr(0,1);if(void 0===i)i=t;else if(i!==t){if(!n)throw new Error("Inconsistent operator: "+JSON.stringify(r));i=!1}}),!!i)},m=function(e){return!!e&&"number"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&!p(e)&&null!==e&&!(e instanceof RegExp||"function"==typeof e||e instanceof Date||s(e))},y=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=("string"==typeof e&&t.field&&(e+=" for field '"+t.field+"'"),new Error(e));return t.name="ModifyJsError",t},b={all:function(e,t){return e.every(function(e){return t&&t(e)||e})},each:i,keys:function(e){return Object.keys(e)},has:function(e,t){return e.hasOwnProperty(t)},isObject:function(e){return"object"===(void 0===e?"undefined":l(e))&&null!==e}},v=function(e,t,r){r=r||{};for(var n=!1,i=0;i<t.length;i++){var o=i===t.length-1,a=t[i];if(!(p(s=e)||m(s))){if(r.noCreate)return;var s=y("cannot use the part '"+a+"' to traverse "+e);throw s.setPropertyError=!0,s}if(e instanceof Array){if(r.forbidArray)return null;if("$"===a){if(n)throw y("Too many positional (i.e. '$') elements");if(!r.arrayIndices||!r.arrayIndices.length)throw y("The positional operator did not find the match needed from the query");a=r.arrayIndices[0],n=!0}else{if(s=a,!/^[0-9]+$/.test(s)){if(r.noCreate)return;throw y("can't append to array using string field name ["+a+"]")}a=parseInt(a)}if(o&&(t[i]=a),r.noCreate&&a>=e.length)return;for(;e.length<a;)e.push(null);if(!o)if(e.length===a)e.push({});else if("object"!==l(e[a]))throw y("can't modify field '"+t[i+1]+"' of list value "+JSON.stringify(e[a]))}else if(!(a in e)){if(r.noCreate)return;o||(e[a]={})}if(o)return e;e=e[a]}},g={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},_={$currentDate:function(e,t,r){if("object"===(void 0===r?"undefined":l(r))&&r.hasOwnProperty("$type")){if("date"!==r.$type)throw y("Minimongo does currently only support the date type in $currentDate modifiers",{field:t})}else if(!0!==r)throw y("Invalid $currentDate modifier",{field:t});e[t]=new Date},$min:function(e,t,r){if("number"!=typeof r)throw y("Modifier $min allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw y("Cannot apply $min modifier to non-number",{field:t});e[t]>r&&(e[t]=r)}else e[t]=r},$max:function(e,t,r){if("number"!=typeof r)throw y("Modifier $max allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw y("Cannot apply $max modifier to non-number",{field:t});e[t]<r&&(e[t]=r)}else e[t]=r},$inc:function(e,t,r){if("number"!=typeof r)throw y("Modifier $inc allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw y("Cannot apply $inc modifier to non-number",{field:t});e[t]+=r}else e[t]=r},$set:function(e,t,r){var n;if(!b.isObject(e))throw(n=y("Cannot set property on non-object field",{field:t})).setPropertyError=!0,n;if(null===e)throw(n=y("Cannot set property on null",{field:t})).setPropertyError=!0,n;e[t]=r},$setOnInsert:function(e,t,r){},$unset:function(e,t,r){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(e,t,r){if(void 0===e[t]&&(e[t]=[]),!(e[t]instanceof Array))throw y("Cannot apply $push modifier to non-array",{field:t});if(r&&r.$each){var n=r.$each;if(!(n instanceof Array))throw y("$each must be an array",{field:t});var i=void 0;if("$position"in r){if("number"!=typeof r.$position)throw y("$position must be a numeric value",{field:t});if(r.$position<0)throw y("$position in $push must be zero or positive",{field:t});i=r.$position}var o=void 0;if("$slice"in r){if("number"!=typeof r.$slice)throw y("$slice must be a numeric value",{field:t});if(0<r.$slice)throw y("$slice in $push must be zero or negative",{field:t});o=r.$slice}if(r.$sort)throw y("$sort in $push not implemented yet");if(void 0===i)for(var a=0;a<n.length;a++)e[t].push(n[a]);else{for(var s=[i,0],a=0;a<n.length;a++)s.push(n[a]);Array.prototype.splice.apply(e[t],s)}void 0!==o&&(e[t]=0===o?[]:e[t].slice(o))}else e[t].push(r)},$pushAll:function(e,t,r){if(!("object"===(void 0===r?"undefined":l(r))&&r instanceof Array))throw y("Modifier $pushAll/pullAll allowed for arrays only");var n=e[t];if(void 0===n)e[t]=r;else{if(!(n instanceof Array))throw y("Cannot apply $pushAll modifier to non-array",{field:t});for(var i=0;i<r.length;i++)n.push(r[i])}},$addToSet:function(e,t,r){var n=!1,n=(n="object"===(void 0===r?"undefined":l(r))&&"$each"===Object.keys(r)[0]?!0:n)?r.$each:[r],i=e[t];if(void 0===i)e[t]=n;else{if(!(i instanceof Array))throw y("Cannot apply $addToSet modifier to non-array",{field:t});b.each(n,function(e){for(var t=0;t<i.length;t++)if(c(e,i[t]))return;i.push(e)})}},$pop:function(e,t,r){if(void 0!==e){e=e[t];if(void 0!==e){if(!(e instanceof Array))throw y("Cannot apply $pop modifier to non-array",{field:t});"number"==typeof r&&r<0?e.splice(0,1):e.pop()}}},$pull:function(e,t,r){if(void 0!==e){e=e[t];if(void 0!==e)throw e instanceof Array?y("$pull not implemented yet"):y("Cannot apply $pull/pullAll modifier to non-array",{field:t})}},$pullAll:function(e,t,r){if(!("object"===(void 0===r?"undefined":l(r))&&r instanceof Array))throw y("Modifier $pushAll/pullAll allowed for arrays only",{field:t});if(void 0!==e){var n=e[t];if(void 0!==n){if(!(n instanceof Array))throw y("Cannot apply $pull/pullAll modifier to non-array",{field:t});for(var i=[],o=0;o<n.length;o++){for(var a=!1,s=0;s<r.length;s++)if(c(n[o],r[s])){a=!0;break}a||i.push(n[o])}e[t]=i}}},$rename:function(e,t,r,n,i){if(n===r)throw y("$rename source must differ from target",{field:t});if(null===e)throw y("$rename source field invalid",{field:t});if("string"!=typeof r)throw y("$rename target must be a string",{field:t});if(-1<r.indexOf("\0"))throw y("The 'to' field for $rename cannot contain an embedded null byte",{field:t});if(void 0!==e){n=e[t],e=(delete e[t],r.split(".")),r=v(i,e,{forbidArray:!0});if(null===r)throw y("$rename target field invalid",{field:t});r[e.pop()]=n}},$bit:function(e,t,r){throw y("$bit is not supported",{field:t})}};t.exports=function(e,t,r){if(!r||!r.each)return o(e,t,a({},r,{returnInsteadOfReplacing:!0}))}},{clone:100,"deep-equal":112}],399:[function(e,t,r){"use strict";function n(e){return e!=e}t.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!n(e)||!n(t))}},{}],400:[function(e,t,r){"use strict";var n=e("define-properties"),i=e("call-bind"),o=e("./implementation"),a=e("./polyfill"),e=e("./shim"),i=i(a(),Object);n(i,{getPolyfill:a,implementation:o,shim:e}),t.exports=i},{"./implementation":399,"./polyfill":401,"./shim":402,"call-bind":99,"define-properties":114}],401:[function(e,t,r){"use strict";var n=e("./implementation");t.exports=function(){return"function"==typeof Object.is?Object.is:n}},{"./implementation":399}],402:[function(e,t,r){"use strict";var n=e("./polyfill"),i=e("define-properties");t.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},{"./polyfill":401,"define-properties":114}],403:[function(e,t,r){"use strict";var f,p,h,m,y,b,v,n,g,i;Object.keys||(f=Object.prototype.hasOwnProperty,p=Object.prototype.toString,h=e("./isArguments"),e=Object.prototype.propertyIsEnumerable,m=!e.call({toString:null},"toString"),y=e.call(function(){},"prototype"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],v=function(e){var t=e.constructor;return t&&t.prototype===e},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g=function(){if("undefined"!=typeof window)for(var e in window)try{if(!n["$"+e]&&f.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{v(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),i=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===p.call(e),n=h(e),i=t&&"[object String]"===p.call(e),o=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=y&&r;if(i&&0<e.length&&!f.call(e,0))for(var s=0;s<e.length;++s)o.push(String(s));if(n&&0<e.length)for(var u=0;u<e.length;++u)o.push(String(u));else for(var c in e)a&&"prototype"===c||!f.call(e,c)||o.push(String(c));if(m)for(var l=function(e){if("undefined"==typeof window||!g)return v(e);try{return v(e)}catch(e){return!1}}(e),d=0;d<b.length;++d)l&&"constructor"===b[d]||!f.call(e,b[d])||o.push(b[d]);return o}),t.exports=i},{"./isArguments":405}],404:[function(e,t,r){"use strict";var n=Array.prototype.slice,i=e("./isArguments"),o=Object.keys,a=o?function(e){return o(e)}:e("./implementation"),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?s(n.call(e)):s(e)}):Object.keys=a,Object.keys||a},t.exports=a},{"./implementation":403,"./isArguments":405}],405:[function(e,t,r){"use strict";var n=Object.prototype.toString;t.exports=function(e){var t=n.call(e);return"[object Arguments]"===t||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===n.call(e.callee)}},{}],406:[function(e,t,r){"use strict";function n(e){this.ttl=e,this.map=new Map,this._to=!1}function i(e){for(var t=o()-e.ttl,r=e.map[Symbol.iterator]();;){var n=r.next().value;if(!n)return;var i=n[0];if(!(n[1]<t))return;e.map.delete(i)}}function o(){return(new Date).getTime()}Object.defineProperty(r,"__esModule",{value:!0}),r.now=r.removeTooOldValues=r.ObliviousSet=void 0,n.prototype.has=function(e){return this.map.has(e)},n.prototype.add=function(e){var t=this;this.map.set(e,o()),this._to||(this._to=!0,setTimeout(function(){t._to=!1,i(t)},0))},n.prototype.clear=function(){this.map.clear()},r.ObliviousSet=n,r.removeTooOldValues=i,r.now=o},{}],407:[function(e,t,_){!function(g){!function(){"use strict";const r=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function a(e,t){t=function o(u){let t="";let c=new Map;const l=e=>{t+=e};return{toString(){return t},getContext(){return c},dispatch(e){const t=null===(e=u.replacer?u.replacer(e):e)?"null":typeof e;return this[t](e)},object(r){if(r&&"function"==typeof r.toJSON)return this.object(r.toJSON());const e=Object.prototype.toString.call(r);let t="";const n=e.length;t=(t=n<10?"unknown:["+e+"]":e.slice(8,n-1)).toLowerCase();let i=null;if(void 0!==(i=c.get(r)))return this.dispatch("[CIRCULAR:"+i+"]");if(c.set(r,c.size),void 0!==g&&g.isBuffer&&g.isBuffer(r))return l("buffer:"),l(r.toString("utf8"));if("object"!==t&&"function"!==t&&"asyncfunction"!==t)this[t]?this[t](r):u.ignoreUnknown||this.unkown(r,t);else{let e=Object.keys(r),t=(u.unorderedObjects&&(e=e.sort()),[]);!1===u.respectType||f(r)||(t=d),u.excludeKeys&&(e=e.filter(e=>!u.excludeKeys(e)),t=t.filter(e=>!u.excludeKeys(e))),l("object:"+(e.length+t.length)+":");const o=e=>{this.dispatch(e),l(":"),u.excludeValues||this.dispatch(r[e]),l(",")};for(const a of e)o(a);for(const s of t)o(s)}},array(e,t){if(t=void 0===t?!1!==u.unorderedArrays:t,l("array:"+e.length+":"),t&&!(e.length<=1)){const i=new Map,r=e.map(e=>{const t=o(u);t.dispatch(e);for(var[r,n]of t.getContext())i.set(r,n);return t.toString()});return c=i,r.sort(),this.array(r,!1)}for(const n of e)this.dispatch(n)},date(e){return l("date:"+e.toJSON())},symbol(e){return l("symbol:"+e.toString())},unkown(e,t){if(l(t),e)return l(":"),e&&"function"==typeof e.entries?this.array(Array.from(e.entries()),!0):void 0},error(e){return l("error:"+e.toString())},boolean(e){return l("bool:"+e)},string(e){l("string:"+e.length+":"),l(e)},function(e){l("fn:"),f(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==u.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),u.respectFunctionProperties&&this.object(e)},number(e){return l("number:"+e)},xml(e){return l("xml:"+e.toString())},null(){return l("Null")},undefined(){return l("Undefined")},regexp(e){return l("regex:"+e.toString())},uint8array(e){return l("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},uint8clampedarray(e){return l("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},int8array(e){return l("int8array:"),this.dispatch(Array.prototype.slice.call(e))},uint16array(e){return l("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},int16array(e){return l("int16array:"),this.dispatch(Array.prototype.slice.call(e))},uint32array(e){return l("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},int32array(e){return l("int32array:"),this.dispatch(Array.prototype.slice.call(e))},float32array(e){return l("float32array:"),this.dispatch(Array.prototype.slice.call(e))},float64array(e){return l("float64array:"),this.dispatch(Array.prototype.slice.call(e))},arraybuffer(e){return l("arraybuffer:"),this.dispatch(new Uint8Array(e))},url(e){return l("url:"+e.toString())},map(e){l("map:");const t=[...e];return this.array(t,!1!==u.unorderedSets)},set(e){l("set:");const t=[...e];return this.array(t,!1!==u.unorderedSets)},file(e){return l("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},blob(){if(u.ignoreUnknown)return l("[blob]");throw new Error('Hashing Blob objects is currently not supported\nUse "options.replacer" or "options.ignoreUnknown"\n')},domwindow(){return l("domwindow")},bigint(e){return l("bigint:"+e.toString())},process(){return l("process")},timer(){return l("timer")},pipe(){return l("pipe")},tcp(){return l("tcp")},udp(){return l("udp")},tty(){return l("tty")},statwatcher(){return l("statwatcher")},securecontext(){return l("securecontext")},connection(){return l("connection")},zlib(){return l("zlib")},context(){return l("context")},nodescript(){return l("nodescript")},httpparser(){return l("httpparser")},dataview(){return l("dataview")},signal(){return l("signal")},fsevent(){return l("fsevent")},tlswrap(){return l("tlswrap")}}}(t=t?{...r,...t}:r);return t.dispatch(e),t.toString()}const d=Object.freeze(["prototype","__proto__","constructor"]);const t="[native code] }",n=t.length;function f(e){return"function"==typeof e&&Function.prototype.toString.call(e).slice(-n)===t}class i{constructor(e,t){e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}toString(e){return(e||o).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){var r=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=r<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new i([...this.words])}}const o={stringify(t){var r=[];for(let e=0;e<t.sigBytes;e++){var n=t.words[e>>>2]>>>24-e%4*8&255;r.push((n>>>4).toString(16),(15&n).toString(16))}return r.join("")}},s={stringify(r){var n=[];for(let t=0;t<r.sigBytes;t+=3){var i=(r.words[t>>>2]>>>24-t%4*8&255)<<16|(r.words[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|r.words[t+2>>>2]>>>24-(t+2)%4*8&255;for(let e=0;e<4&&8*t+6*e<8*r.sigBytes;e++)n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i>>>6*(3-e)&63))}return n.join("")}},u={parse(t){var r=t.length,n=[];for(let e=0;e<r;e++)n[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new i(n,r)}},c={parse(e){return u.parse(unescape(encodeURIComponent(e)))}};const e=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],m=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],y=[];class l extends class extends class{constructor(){this._data=new i,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new i,this._nDataBytes=0}_append(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t,r=this._data.sigBytes/(4*this.blockSize);var n=(r=e?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0))*this.blockSize,e=Math.min(4*n,this._data.sigBytes);if(n){for(let e=0;e<n;e+=this.blockSize)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,n),this._data.sigBytes-=e}return new i(t,e)}}{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}{constructor(){super(...arguments),this._hash=new i([...e])}reset(){super.reset(),this._hash=new i([...e])}_doProcessBlock(t,r){var e=this._hash.words;let n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7];for(let e=0;e<64;e++){e<16?y[e]=0|t[r+e]:(d=((d=y[e-15])<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,f=((f=y[e-2])<<15|f>>>17)^(f<<13|f>>>19)^f>>>10,y[e]=d+y[e-7]+f+y[e-16]);var d=s&u^~s&c,f=n&i^n&o^i&o,p=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),h=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),h=l+h+d+m[e]+y[e];l=c,c=u,u=s,s=a+h|0,a=o,o=i,i=n,n=h+(p+f)|0}e[0]=e[0]+n|0,e[1]=e[1]+i|0,e[2]=e[2]+o|0,e[3]=e[3]+a|0,e[4]=e[4]+s|0,e[5]=e[5]+u|0,e[6]=e[6]+c|0,e[7]=e[7]+l|0}finalize(e){super.finalize(e);var e=8*this._nDataBytes,t=8*this._data.sigBytes;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[14+(64+t>>>9<<4)]=Math.floor(e/4294967296),this._data.words[15+(64+t>>>9<<4)]=e,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}function p(e){return(new l).finalize(e).toString(s)}function h(e,t,r=""){if(e&&"object"!=typeof e)return new v(r,e,a(e,t));var n={},i=[];for(const o in e)n[o]=h(e[o],t,r?r+"."+o:o),i.push(n[o].hash);return new v(r,e,`{${i.join(":")}}`,n)}class b{constructor(e,t,r,n){this.key=e,this.type=t,this.newValue=r,this.oldValue=n}toString(){return this.toJSON()}toJSON(){switch(this.type){case"added":return`Added   \`${this.key}\``;case"removed":return`Removed \`${this.key}\``;case"changed":return`Changed \`${this.key}\` from \`${this.oldValue?.toString()||"-"}\` to \`${this.newValue.toString()}\``}}}class v{constructor(e,t,r,n){this.key=e,this.value=t,this.hash=r,this.props=n}toString(){return this.props?`{${Object.keys(this.props).join(",")}}`:JSON.stringify(this.value)}toJSON(){var e=this.key||".";return this.props?`${e}({${Object.keys(this.props).join(",")}})`:`${e}(${this.value})`}}_.diff=function(e,t,r={}){return function e(t,r,n={}){const i=[];const o=new Set([...Object.keys(t.props||{}),...Object.keys(r.props||{})]);if(t.props&&r.props)for(const a of o){const s=t.props[a],u=r.props[a];s&&u?i.push(...e(t.props?.[a],r.props?.[a],n)):(s||u)&&i.push(new b((u||s).key,s?"removed":"added",u,s))}0===o.size&&t.hash!==r.hash&&i.push(new b((r||t).key,"changed",r,t));return i}(h(e,r),h(t,r),r)},_.hash=function(e,t={}){return p("string"==typeof e?e:a(e,t)).slice(0,10)},_.isEqual=function(e,t,r={}){return e===t||a(e,r)===a(t,r)},_.murmurHash=function(e,t=0){var r;"string"==typeof e&&(a=e,e=(new TextEncoder).encode(a));let n=0,i=t,o;for(var a=3&e.length,s=e.length-a,u=3432918353,c=461845907;n<s;)o=255&e[n]|(255&e[++n])<<8|(255&e[++n])<<16|(255&e[++n])<<24,++n,o=(65535&(o=(o=(65535&o)*u+(((o>>>16)*u&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295,r=5*(65535&(i=(i^=o)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(o=0,a){case 3:o^=(255&e[n+2])<<16;break;case 2:o^=(255&e[n+1])<<8;break;case 1:o=(65535&(o=(o=(65535&(o^=255&e[n]))*u+(((o>>>16)*u&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295,i^=o}return i=2246822507*(65535&(i=(i^=e.length)^i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0},_.objectHash=a,_.sha256=function(e){return(new l).finalize(e).toString()},_.sha256base64=p}.call(this)}.call(this,e("buffer").Buffer)},{buffer:908}],408:[function(e,t,r){"use strict";var{Deflate:n,deflate:i,deflateRaw:o,gzip:a}=e("./lib/deflate"),{Inflate:s,inflate:u,inflateRaw:c,ungzip:l}=e("./lib/inflate"),e=e("./lib/zlib/constants");t.exports.Deflate=n,t.exports.deflate=i,t.exports.deflateRaw=o,t.exports.gzip=a,t.exports.Inflate=s,t.exports.inflate=u,t.exports.inflateRaw=c,t.exports.ungzip=l,t.exports.constants=e},{"./lib/deflate":409,"./lib/inflate":410,"./lib/zlib/constants":414}],409:[function(e,t,r){"use strict";const a=e("./zlib/deflate"),n=e("./utils/common"),s=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:d,Z_FINISH:f,Z_OK:p,Z_STREAM_END:h,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:b}=e("./zlib/constants");function v(t){this.options=n.assign({level:m,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},t||{});var t=this.options,r=(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0,a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy));if(r!==p)throw new Error(i[r]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=a.deflateSetDictionary(this.strm,e))!==p)throw new Error(i[r]);this._dict_set=!0}}function g(e,t){t=new v(t);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}v.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?f:c,"string"==typeof e?r.input=s.string2buf(e):"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===l||o===d)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(a.deflate(r,o)===h)return 0<r.next_out&&this.onData(r.output.subarray(0,r.next_out)),i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===p;if(0===r.avail_out)this.onData(r.output);else if(0<o&&0<r.next_out)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===p&&(this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Deflate=v,t.exports.deflate=g,t.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},t.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)},t.exports.constants=e("./zlib/constants")},{"./utils/common":411,"./utils/strings":412,"./zlib/constants":414,"./zlib/deflate":416,"./zlib/messages":421,"./zlib/zstream":423}],410:[function(e,t,r){"use strict";const d=e("./zlib/inflate"),n=e("./utils/common"),f=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),a=e("./zlib/gzheader"),p=Object.prototype.toString,{Z_NO_FLUSH:h,Z_FINISH:m,Z_OK:y,Z_STREAM_END:b,Z_NEED_DICT:v,Z_STREAM_ERROR:g,Z_DATA_ERROR:_,Z_MEM_ERROR:w}=e("./zlib/constants");function s(e){this.options=n.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0,d.inflateInit2(this.strm,t.windowBits));if(e!==y)throw new Error(i[e]);if(this.header=new a,d.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=f.string2buf(t.dictionary):"[object ArrayBuffer]"===p.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(e=d.inflateSetDictionary(this.strm,t.dictionary))!==y)throw new Error(i[e])}function u(e,t){t=new s(t);if(t.push(e),t.err)throw t.msg||i[t.err];return t.result}s.prototype.push=function(e,t){var r,n,i,o=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let u,c,l;if(this.ended)return!1;for(c=t===~~t?t:!0===t?m:h,"[object ArrayBuffer]"===p.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(u=d.inflate(o,c))===v&&s&&((u=d.inflateSetDictionary(o,s))===y?u=d.inflate(o,c):u===_&&(u=v));0<o.avail_in&&u===b&&0<o.state.wrap&&0!==e[o.next_in];)d.inflateReset(o),u=d.inflate(o,c);switch(u){case g:case _:case v:case w:return this.onEnd(u),!(this.ended=!0)}if(l=o.avail_out,!o.next_out||0!==o.avail_out&&u!==b||("string"===this.options.to?(r=f.utf8border(o.output,o.next_out),n=o.next_out-r,i=f.buf2string(o.output,r),o.next_out=n,o.avail_out=a-n,n&&o.output.set(o.output.subarray(r,r+n),0),this.onData(i)):this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out))),u!==y||0!==l){if(u===b)return u=d.inflateEnd(this.strm),this.onEnd(u),this.ended=!0;if(0===o.avail_in)break}}return!0},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){e===y&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=s,t.exports.inflate=u,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.exports.ungzip=u,t.exports.constants=e("./zlib/constants")},{"./utils/common":411,"./utils/strings":412,"./zlib/constants":414,"./zlib/gzheader":417,"./zlib/inflate":419,"./zlib/messages":421,"./zlib/zstream":423}],411:[function(e,t,r){"use strict";t.exports.assign=function(e){for(var t,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const o in i)t=i,r=o,Object.prototype.hasOwnProperty.call(t,r)&&(e[o]=i[o])}}return e},t.exports.flattenChunks=n=>{let r=0;for(let e=0,t=n.length;e<t;e++)r+=n[e].length;var i=new Uint8Array(r);for(let e=0,t=0,r=n.length;e<r;e++){var o=n[e];i.set(o,t),t+=o.length}return i}},{}],412:[function(e,t,r){"use strict";let c=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){c=!1}const l=new Uint8Array(256);for(let e=0;e<256;e++)l[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;l[254]=l[254]=1,t.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t};t.exports.buf2string=(r,e)=>{var n=e||r.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(r.subarray(0,e));let i,o;var a=new Array(2*n);for(o=0,i=0;i<n;){let t=r[i++];if(t<128)a[o++]=t;else{let e=l[t];if(4<e)a[o++]=65533,i+=e-1;else{for(t&=2===e?31:3===e?15:7;1<e&&i<n;)t=t<<6|63&r[i++],e--;1<e?a[o++]=65533:t<65536?a[o++]=t:(t-=65536,a[o++]=55296|t>>10&1023,a[o++]=56320|1023&t)}}}{var s=a,u=o;if(u<65534&&s.subarray&&c)return String.fromCharCode.apply(null,s.length===u?s:s.subarray(0,u));let t="";for(let e=0;e<u;e++)t+=String.fromCharCode(s[e]);return t}},t.exports.utf8border=(e,t)=>{let r=(t=(t=t||e.length)>e.length?e.length:t)-1;for(;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+l[e[r]]>t?r:t}},{}],413:[function(e,t,r){"use strict";t.exports=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;0!==r;){for(r-=a=2e3<r?2e3:r;i=i+t[n++]|0,o=o+i|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],414:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],415:[function(e,t,r){"use strict";const a=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());t.exports=(t,r,e,n)=>{var i=a,o=n+e;t^=-1;for(let e=n;e<o;e++)t=t>>>8^i[255&(t^r[e])];return-1^t}},{}],416:[function(e,t,o){"use strict";const{_tr_init:N,_tr_stored_block:u,_tr_flush_block:L,_tr_tally:s,_tr_align:F}=e("./trees"),B=e("./adler32"),a=e("./crc32"),U=e("./messages"),{Z_NO_FLUSH:c,Z_PARTIAL_FLUSH:z,Z_FULL_FLUSH:W,Z_FINISH:l,Z_BLOCK:q,Z_OK:d,Z_STREAM_END:K,Z_STREAM_ERROR:f,Z_DATA_ERROR:V,Z_BUF_ERROR:p,Z_DEFAULT_COMPRESSION:H,Z_FILTERED:G,Z_HUFFMAN_ONLY:h,Z_RLE:Z,Z_FIXED:Y,Z_DEFAULT_STRATEGY:Q,Z_UNKNOWN:J,Z_DEFLATED:m}=e("./constants"),X=9;const r=286,ee=30,te=19,re=2*r+1,ne=15,y=3,b=258,v=b+y+1,g=42,_=57,ie=69,oe=73,ae=91,se=103,w=113,O=666,S=1,E=2,x=3,P=4,j=(e,t)=>(e.msg=U[t],t),ue=e=>2*e-(4<e?9:0),A=e=>{let t=e.length;for(;0<=--t;)e[t]=0},ce=e=>{let t,r,n;var i=e.w_size;for(t=e.hash_size,n=t;r=e.head[--n],e.head[n]=r>=i?r-i:0,--t;);for(t=i,n=t;r=e.prev[--n],e.prev[n]=r>=i?r-i:0,--t;);};let M=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const I=e=>{var t=e.state;let r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending)&&(t.pending_out=0)},R=(e,t)=>{L(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,I(e.strm)},C=(e,t)=>{e.pending_buf[e.pending++]=t},k=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},le=(e,t,r,n)=>{let i=e.avail_in;return 0===(i=i>n?n:i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=B(e.adler,t,i,r):2===e.state.wrap&&(e.adler=a(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},de=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i;var o;let a=e.prev_length,s=e.nice_match;var u=e.strstart>e.w_size-v?e.strstart-(e.w_size-v):0,c=e.window,l=e.w_mask,d=e.prev,f=e.strstart+b;let p=c[n+a-1],h=c[n+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(i=t)+a]===h&&c[i+a-1]===p&&c[i]===c[n]&&c[++i]===c[n+1]){for(n+=2,i++;c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<f;);if(o=b-(f-n),n=f-b,o>a){if(e.match_start=t,(a=o)>=s)break;p=c[n+a-1],h=c[n+a]}}}while((t=d[t&l])>u&&0!=--r);return a<=e.lookahead?a:e.lookahead},$=e=>{var t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-v)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ce(e),n+=t),0===e.strm.avail_in)break;if(r=le(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=y)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=M(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=M(e,e.ins_h,e.window[i+y-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<y)););}while(e.lookahead<v&&0!==e.strm.avail_in)},fe=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,o,a=0;for(var s=e.strm.avail_in;n=65535,o=e.bi_valid+42>>3,!(e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,(n=(n=n>i+e.strm.avail_in?i+e.strm.avail_in:n)>o?o:n)<r&&(0===n&&t!==l||t===c||n!==i+e.strm.avail_in))||(a=t===l&&n===i+e.strm.avail_in?1:0,u(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,I(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(le(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n),0!==a)););return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart)&&(e.insert=e.strstart),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?P:t!==c&&t!==l&&0===e.strm.avail_in&&e.strstart===e.block_start?E:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart)&&(e.insert=e.strstart),(o=o>e.strm.avail_in?e.strm.avail_in:o)&&(le(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=65535<e.pending_buf_size-o?65535:e.pending_buf_size-o,r=o>e.w_size?e.w_size:o,((i=e.strstart-e.block_start)>=r||(i||t===l)&&t!==c&&0===e.strm.avail_in&&i<=o)&&(n=i>o?o:i,a=t===l&&0===e.strm.avail_in&&n===i?1:0,u(e,e.block_start,n,a),e.block_start+=n,I(e.strm)),a?x:S)};var e=(e,t)=>{let r,n;for(;;){if(e.lookahead<v){if($(e),e.lookahead<v&&t===c)return S;if(0===e.lookahead)break}if(r=0,e.lookahead>=y&&(e.ins_h=M(e,e.ins_h,e.window[e.strstart+y-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-v&&(e.match_length=de(e,r)),e.match_length>=y)if(n=s(e,e.strstart-e.match_start,e.match_length-y),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=y){for(e.match_length--;e.strstart++,e.ins_h=M(e,e.ins_h,e.window[e.strstart+y-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=M(e,e.ins_h,e.window[e.strstart+1]);else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(R(e,!1),0===e.strm.avail_out))return S}return e.insert=e.strstart<y-1?e.strstart:y-1,t===l?(R(e,!0),0===e.strm.avail_out?x:P):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?S:E},n=(e,t)=>{let r,n;for(var i;;){if(e.lookahead<v){if($(e),e.lookahead<v&&t===c)return S;if(0===e.lookahead)break}if(r=0,e.lookahead>=y&&(e.ins_h=M(e,e.ins_h,e.window[e.strstart+y-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=y-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-v&&(e.match_length=de(e,r),e.match_length<=5)&&(e.strategy===G||e.match_length===y&&4096<e.strstart-e.match_start)&&(e.match_length=y-1),e.prev_length>=y&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-y,n=s(e,e.strstart-1-e.prev_match,e.prev_length-y),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=M(e,e.ins_h,e.window[e.strstart+y-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=y-1,e.strstart++,n&&(R(e,!1),0===e.strm.avail_out))return S}else if(e.match_available){if((n=s(e,0,e.window[e.strstart-1]))&&R(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return S}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<y-1?e.strstart:y-1,t===l?(R(e,!0),0===e.strm.avail_out?x:P):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?S:E};function i(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const D=[new i(0,0,0,0,fe),new i(4,4,8,4,e),new i(4,5,16,8,e),new i(4,6,32,32,e),new i(4,4,16,16,n),new i(8,16,32,32,n),new i(8,16,128,128,n),new i(8,32,128,256,n),new i(32,128,258,1024,n),new i(32,258,258,4096,n)];function pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*re),this.dyn_dtree=new Uint16Array(2*(2*ee+1)),this.bl_tree=new Uint16Array(2*(2*te+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ne+1),this.heap=new Uint16Array(2*r+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*r+1),A(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const T=e=>{var t;return!e||!(t=e.state)||t.strm!==e||t.status!==g&&t.status!==_&&t.status!==ie&&t.status!==oe&&t.status!==ae&&t.status!==se&&t.status!==w&&t.status!==O?1:0},he=e=>{if(T(e))return j(e,f);e.total_in=e.total_out=0,e.data_type=J;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?_:t.wrap?g:w,e.adler=2===t.wrap?0:1,t.last_flush=-2,N(t),d},me=e=>{var t=he(e);return t===d&&((e=e.state).window_size=2*e.w_size,A(e.head),e.max_lazy_match=D[e.level].max_lazy,e.good_match=D[e.level].good_length,e.nice_match=D[e.level].nice_length,e.max_chain_length=D[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=y-1,e.match_available=0,e.ins_h=0),t};const ye=(e,t,r,n,i,o)=>{if(!e)return f;let a=1;if(t===H&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||i>X||r!==m||n<8||15<n||t<0||9<t||o<0||o>Y||8===n&&1!==a)return j(e,f);8===n&&(n=9);var s=new pe;return(e.state=s).strm=e,s.status=g,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+y-1)/y),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,me(e)};t.exports.deflateInit=(e,t)=>ye(e,t,m,15,8,Q),t.exports.deflateInit2=ye,t.exports.deflateReset=me,t.exports.deflateResetKeep=he,t.exports.deflateSetHeader=(e,t)=>T(e)||2!==e.state.wrap?f:(e.state.gzhead=t,d),t.exports.deflate=(r,e)=>{if(T(r)||e>q||e<0)return r?j(r,f):f;var n=r.state;if(!r.output||0!==r.avail_in&&!r.input||n.status===O&&e!==l)return j(r,0===r.avail_out?p:f);var i=n.last_flush;if(n.last_flush=e,0!==n.pending){if(I(r),0===r.avail_out)return n.last_flush=-1,d}else if(0===r.avail_in&&ue(e)<=ue(i)&&e!==l)return j(r,p);if(n.status===O&&0!==r.avail_in)return j(r,p);if(n.status===g&&0===n.wrap&&(n.status=w),n.status===g){let e=m+(n.w_bits-8<<4)<<8,t=-1;if(t=n.strategy>=h||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=t<<6,0!==n.strstart&&(e|=32),e+=31-e%31,k(n,e),0!==n.strstart&&(k(n,r.adler>>>16),k(n,65535&r.adler)),r.adler=1,n.status=w,I(r),0!==n.pending)return n.last_flush=-1,d}if(n.status===_)if(r.adler=0,C(n,31),C(n,139),C(n,8),n.gzhead)C(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),C(n,255&n.gzhead.time),C(n,n.gzhead.time>>8&255),C(n,n.gzhead.time>>16&255),C(n,n.gzhead.time>>24&255),C(n,9===n.level?2:n.strategy>=h||n.level<2?4:0),C(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(C(n,255&n.gzhead.extra.length),C(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(r.adler=a(r.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=ie;else if(C(n,0),C(n,0),C(n,0),C(n,0),C(n,0),C(n,9===n.level?2:n.strategy>=h||n.level<2?4:0),C(n,3),n.status=w,I(r),0!==n.pending)return n.last_flush=-1,d;if(n.status===ie){if(n.gzhead.extra){let e=n.pending,t=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+t>n.pending_buf_size;){var o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=o,I(r),0!==n.pending)return n.last_flush=-1,d;e=0,t-=o}i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+t),n.pending),n.pending+=t,n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=oe}if(n.status===oe){if(n.gzhead.name){let e=n.pending,t;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e)),I(r),0!==n.pending)return n.last_flush=-1,d;e=0}}while(t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,C(n,t),0!==t);n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=ae}if(n.status===ae){if(n.gzhead.comment){let e=n.pending,t;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e)),I(r),0!==n.pending)return n.last_flush=-1,d;e=0}}while(t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,C(n,t),0!==t);n.gzhead.hcrc&&n.pending>e&&(r.adler=a(r.adler,n.pending_buf,n.pending-e,e))}n.status=se}if(n.status===se){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(I(r),0!==n.pending))return n.last_flush=-1,d;C(n,255&r.adler),C(n,r.adler>>8&255),r.adler=0}if(n.status=w,I(r),0!==n.pending)return n.last_flush=-1,d}if(0!==r.avail_in||0!==n.lookahead||e!==c&&n.status!==O){i=0===n.level?fe(n,e):n.strategy===h?((e,t)=>{for(var r;;){if(0===e.lookahead&&($(e),0===e.lookahead)){if(t===c)return S;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(R(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===l?(R(e,!0),0===e.strm.avail_out?x:P):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?S:E})(n,e):n.strategy===Z?((e,t)=>{let r;var n;let i,o;for(var a=e.window;;){if(e.lookahead<=b){if($(e),e.lookahead<=b&&t===c)return S;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=y&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){for(o=e.strstart+b;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o;);e.match_length=b-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=y?(r=s(e,1,e.match_length-y),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(R(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===l?(R(e,!0),0===e.strm.avail_out?x:P):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?S:E})(n,e):D[n.level].func(n,e);if(i!==x&&i!==P||(n.status=O),i===S||i===x)return 0===r.avail_out&&(n.last_flush=-1),d;if(i===E&&(e===z?F(n):e!==q&&(u(n,0,0,!1),e===W)&&(A(n.head),0===n.lookahead)&&(n.strstart=0,n.block_start=0,n.insert=0),I(r),0===r.avail_out))return n.last_flush=-1,d}return e!==l||!(n.wrap<=0)&&(2===n.wrap?(C(n,255&r.adler),C(n,r.adler>>8&255),C(n,r.adler>>16&255),C(n,r.adler>>24&255),C(n,255&r.total_in),C(n,r.total_in>>8&255),C(n,r.total_in>>16&255),C(n,r.total_in>>24&255)):(k(n,r.adler>>>16),k(n,65535&r.adler)),I(r),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending)?d:K},t.exports.deflateEnd=e=>{var t;return T(e)?f:(t=e.state.status,e.state=null,t===w?j(e,V):d)},t.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(T(e))return f;var n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==g||n.lookahead)return f;1===i&&(e.adler=B(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(0===i&&(A(n.head),n.strstart=0,n.block_start=0,n.insert=0),(o=new Uint8Array(n.w_size)).set(t.subarray(r-n.w_size,r),0),t=o,r=n.w_size);var o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,$(n);n.lookahead>=y;){let e=n.strstart,t=n.lookahead-(y-1);for(;n.ins_h=M(n,n.ins_h,n.window[e+y-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++,--t;);n.strstart=e,n.lookahead=y-1,$(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=y-1,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,d},t.exports.deflateInfo="pako deflate (from Nodeca project)"},{"./adler32":413,"./constants":414,"./crc32":415,"./messages":421,"./trees":422}],417:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],418:[function(e,t,r){"use strict";t.exports=function(e,t){let r;var n,i,o,a,s,u,c,l,d,f,p,h,m,y,b;let v,g,_,w,O,S,E,x;var P=e.state;r=e.next_in,y=e.input,n=r+(e.avail_in-5),v=e.next_out,b=e.output,i=v-(t-e.avail_out),o=v+(e.avail_out-257),a=P.dmax,s=P.wsize,u=P.whave,c=P.wnext,l=P.window,g=P.hold,_=P.bits,d=P.lencode,f=P.distcode,p=(1<<P.lenbits)-1,h=(1<<P.distbits)-1;e:do{for(_<15&&(g+=y[r++]<<_,_+=8,g+=y[r++]<<_,_+=8),w=d[g&p];;){if(O=w>>>24,g>>>=O,_-=O,0===(O=w>>>16&255))b[v++]=65535&w;else{if(!(16&O)){if(0==(64&O)){w=d[(65535&w)+(g&(1<<O)-1)];continue}if(32&O){P.mode=16191;break e}e.msg="invalid literal/length code",P.mode=16209;break e}for(S=65535&w,(O&=15)&&(_<O&&(g+=y[r++]<<_,_+=8),S+=g&(1<<O)-1,g>>>=O,_-=O),_<15&&(g+=y[r++]<<_,_+=8,g+=y[r++]<<_,_+=8),w=f[g&h];;){if(O=w>>>24,g>>>=O,_-=O,!(16&(O=w>>>16&255))){if(0==(64&O)){w=f[(65535&w)+(g&(1<<O)-1)];continue}e.msg="invalid distance code",P.mode=16209;break e}if(m=65535&w,O&=15,_<O&&(g+=y[r++]<<_,(_+=8)<O)&&(g+=y[r++]<<_,_+=8),a<(m+=g&(1<<O)-1)){e.msg="invalid distance too far back",P.mode=16209;break e}if(g>>>=O,_-=O,m>(O=v-i)){if((O=m-O)>u&&P.sane){e.msg="invalid distance too far back",P.mode=16209;break e}if(E=0,x=l,0===c){if(E+=s-O,O<S){for(S-=O;b[v++]=l[E++],--O;);E=v-m,x=b}}else if(c<O){if(E+=s+c-O,(O-=c)<S){for(S-=O;b[v++]=l[E++],--O;);if(E=0,c<S){for(O=c,S-=O;b[v++]=l[E++],--O;);E=v-m,x=b}}}else if(E+=c-O,O<S){for(S-=O;b[v++]=l[E++],--O;);E=v-m,x=b}for(;2<S;)b[v++]=x[E++],b[v++]=x[E++],b[v++]=x[E++],S-=3;S&&(b[v++]=x[E++],1<S)&&(b[v++]=x[E++])}else{for(E=v-m;b[v++]=b[E++],b[v++]=b[E++],b[v++]=b[E++],2<(S-=3););S&&(b[v++]=b[E++],1<S)&&(b[v++]=b[E++])}break}}break}}while(r<n&&v<o);S=_>>3,r-=S,_-=S<<3,g&=(1<<_)-1,e.next_in=r,e.next_out=v,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=v<o?o-v+257:257-(v-o),P.hold=g,P.bits=_}},{}],419:[function(e,t,c){"use strict";const I=e("./adler32"),R=e("./crc32"),C=e("./inffast"),k=e("./inftrees"),$=1,D=2,{Z_FINISH:T,Z_BLOCK:N,Z_TREES:L,Z_OK:F,Z_STREAM_END:B,Z_NEED_DICT:U,Z_STREAM_ERROR:z,Z_DATA_ERROR:W,Z_MEM_ERROR:q,Z_BUF_ERROR:K,Z_DEFLATED:V}=e("./constants"),H=16180,G=16191,Z=16209,Y=16211,r=852,n=592;const Q=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function i(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const J=e=>{var t;return!e||!(t=e.state)||t.strm!==e||t.mode<H||t.mode>Y?1:0},o=e=>{var t;return J(e)?z:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=H,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(r),t.distcode=t.distdyn=new Int32Array(n),t.sane=1,t.back=-1,F)},a=e=>{var t;return J(e)?z:((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e))},s=(e,t)=>{let r;var n;return J(e)||(n=e.state,t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?z:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))},u=(e,t)=>{var r;return e?(r=new i,(e.state=r).strm=e,r.window=null,r.mode=H,(r=s(e,t))!==F&&(e.state=null),r):z};let X=!0,ee,te;const re=(e,t,r,n)=>{let i;e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new Uint8Array(e.wsize)),n>=e.wsize?(e.window.set(t.subarray(r-e.wsize,r),0),e.wnext=0,e.whave=e.wsize):((i=e.wsize-e.wnext)>n&&(i=n),e.window.set(t.subarray(r-n,r-n+i),e.wnext),(n-=i)?(e.window.set(t.subarray(r-n,r),0),e.wnext=n,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0};t.exports.inflateReset=a,t.exports.inflateReset2=s,t.exports.inflateResetKeep=o,t.exports.inflateInit=e=>u(e,15),t.exports.inflateInit2=u,t.exports.inflate=(e,t)=>{var r;let n,i,o,a,s,u,c,l,d,f,p,h,m,y=0,b,v,g,_,w,O,S,E;var x=new Uint8Array(4);let P,j;var A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(J(e)||!e.output||!e.input&&0!==e.avail_in)return z;(r=e.state).mode===G&&(r.mode=16192),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,d=s,f=u,E=F;e:for(;;)switch(r.mode){case H:if(0===r.wrap)r.mode=16192;else{for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}2&r.wrap&&35615===c?(0===r.wbits&&(r.wbits=15),x[r.check=0]=255&c,x[1]=c>>>8&255,r.check=R(r.check,x,2,0),c=0,l=0,r.mode=16181):(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31?(e.msg="incorrect header check",r.mode=Z):(15&c)!==V?(e.msg="unknown compression method",r.mode=Z):(c>>>=4,l-=4,S=8+(15&c),0===r.wbits&&(r.wbits=S),15<S||S>r.wbits?(e.msg="invalid window size",r.mode=Z):(r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:G,c=0,l=0)))}break;case 16181:for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==V){e.msg="unknown compression method",r.mode=Z;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Z;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(x[0]=255&c,x[1]=c>>>8&255,r.check=R(r.check,x,2,0)),c=0,l=0,r.mode=16182;case 16182:for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,r.check=R(r.check,x,4,0)),c=0,l=0,r.mode=16183;case 16183:for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(x[0]=255&c,x[1]=c>>>8&255,r.check=R(r.check,x,2,0)),c=0,l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(x[0]=255&c,x[1]=c>>>8&255,r.check=R(r.check,x,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((p=(p=r.length)>s?s:p)&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),S)),512&r.flags&&4&r.wrap&&(r.check=R(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;for(p=0;S=n[o+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S)),S&&p<s;);if(512&r.flags&&4&r.wrap&&(r.check=R(r.check,n,p,o)),s-=p,o+=p,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;for(p=0;S=n[o+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S)),S&&p<s;);if(512&r.flags&&4&r.wrap&&(r.check=R(r.check,n,p,o)),s-=p,o+=p,S)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Z;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=G;break;case 16189:for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}e.adler=r.check=Q(c),c=0,l=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,U;e.adler=r.check=1,r.mode=G;case G:if(t===N||t===L)break e;case 16192:if(r.last)c>>>=7&l,l-=7&l,r.mode=16206;else{for(;l<3;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}switch(r.last=1&c,c>>>=1,--l,3&c){case 0:r.mode=16193;break;case 1:var M=r;if(X){ee=new Int32Array(512),te=new Int32Array(32);let e=0;for(;e<144;)M.lens[e++]=8;for(;e<256;)M.lens[e++]=9;for(;e<280;)M.lens[e++]=7;for(;e<288;)M.lens[e++]=8;for(k($,M.lens,0,288,ee,0,M.work,{bits:9}),e=0;e<32;)M.lens[e++]=5;k(D,M.lens,0,32,te,0,M.work,{bits:5}),X=!1}if(M.lencode=ee,M.lenbits=9,M.distcode=te,M.distbits=5,r.mode=16199,t!==L)break;c>>>=2,l-=2;break e;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Z}c>>>=2,l-=2}break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Z;break}if(r.length=65535&c,c=0,l=0,r.mode=16194,t===L)break e;case 16194:r.mode=16195;case 16195:if(p=r.length){if(0===(p=(p=p>s?s:p)>u?u:p))break e;i.set(n.subarray(o,o+p),a),s-=p,o+=p,u-=p,a+=p,r.length-=p}else r.mode=G;break;case 16196:for(;l<14;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=Z;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.lens[A[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},E=k(0,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,E){e.msg="invalid code lengths set",r.mode=Z;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[c&(1<<r.lenbits)-1],b=y>>>24,v=y>>>16&255,g=65535&y,!(b<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(g<16)c>>>=b,l-=b,r.lens[r.have++]=g;else{if(16===g){for(j=b+2;l<j;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(c>>>=b,l-=b,0===r.have){e.msg="invalid bit length repeat",r.mode=Z;break}S=r.lens[r.have-1],p=3+(3&c),c>>>=2,l-=2}else if(17===g){for(j=b+3;l<j;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=b,l-=b,S=0,p=3+(7&c),c>>>=3,l-=3}else{for(j=b+7;l<j;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=b,l-=b,S=0,p=11+(127&c),c>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Z;break}for(;p--;)r.lens[r.have++]=S}}if(r.mode===Z)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Z;break}if(r.lenbits=9,P={bits:r.lenbits},E=k($,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,E){e.msg="invalid literal/lengths set",r.mode=Z;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},E=k(D,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,E){e.msg="invalid distances set",r.mode=Z;break}if(r.mode=16199,t===L)break e;case 16199:r.mode=16200;case 16200:if(6<=s&&258<=u){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,C(e,f),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,r.mode===G&&(r.back=-1);break}for(r.back=0;y=r.lencode[c&(1<<r.lenbits)-1],b=y>>>24,v=y>>>16&255,g=65535&y,!(b<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(v&&0==(240&v)){for(_=b,w=v,O=g;y=r.lencode[O+((c&(1<<_+w)-1)>>_)],b=y>>>24,v=y>>>16&255,g=65535&y,!(_+b<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=_,l-=_,r.back+=_}if(c>>>=b,l-=b,r.back+=b,r.length=g,0===v){r.mode=16205;break}if(32&v){r.back=-1,r.mode=G;break}if(64&v){e.msg="invalid literal/length code",r.mode=Z;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(j=r.extra;l<j;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;y=r.distcode[c&(1<<r.distbits)-1],b=y>>>24,v=y>>>16&255,g=65535&y,!(b<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(0==(240&v)){for(_=b,w=v,O=g;y=r.distcode[O+((c&(1<<_+w)-1)>>_)],b=y>>>24,v=y>>>16&255,g=65535&y,!(_+b<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=_,l-=_,r.back+=_}if(c>>>=b,l-=b,r.back+=b,64&v){e.msg="invalid distance code",r.mode=Z;break}r.offset=g,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(j=r.extra;l<j;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Z;break}r.mode=16204;case 16204:if(0===u)break e;if(p=f-u,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Z;break}h=p>r.wnext?(p-=r.wnext,r.wsize-p):r.wnext-p,p>r.length&&(p=r.length),m=r.window}else m=i,h=a-r.offset,p=r.length;for(p>u&&(p=u),u-=p,r.length-=p;i[a++]=m[h++],--p;);0===r.length&&(r.mode=16200);break;case 16205:if(0===u)break e;i[a++]=r.length,u--,r.mode=16200;break;case 16206:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[o++]<<l,l+=8}if(f-=u,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=(r.flags?R:I)(r.check,i,f,a-f)),f=u,4&r.wrap&&(r.flags?c:Q(c))!==r.check){e.msg="incorrect data check",r.mode=Z;break}c=0,l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Z;break}c=0,l=0}r.mode=16208;case 16208:E=B;break e;case Z:E=W;break e;case 16210:return q;default:Y;return z}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||f!==e.avail_out&&r.mode<Z&&(r.mode<16206||t!==T))&&re(e,e.output,e.next_out,f-e.avail_out)?(r.mode=16210,q):(d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=(r.flags?R:I)(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===G?128:0)+(16199===r.mode||16194===r.mode?256:0),E=(0==d&&0===f||t===T)&&E===F?K:E)},t.exports.inflateEnd=e=>{var t;return J(e)?z:((t=e.state).window&&(t.window=null),e.state=null,F)},t.exports.inflateGetHeader=(e,t)=>{return J(e)||0==(2&(e=e.state).wrap)?z:((e.head=t).done=!1,F)},t.exports.inflateSetDictionary=(e,t)=>{var r,n=t.length;return J(e)||0!==(r=e.state).wrap&&16190!==r.mode?z:16190===r.mode&&I(1,t,n,0)!==r.check?W:re(e,t,n,n)?(r.mode=16210,q):(r.havedict=1,F)},t.exports.inflateInfo="pako inflate (from Nodeca project)"},{"./adler32":413,"./constants":414,"./crc32":415,"./inffast":418,"./inftrees":420}],420:[function(e,t,r){"use strict";const C=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),k=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),D=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(e,t,r,n,i,o,a,s)=>{var u,c=s.bits;let l=0,d=0,f=0,p=0,h=0,m=0,y=0,b=0,v=0,g=0,_,w,O,S,E=null,x;var P=new Uint16Array(16),j=new Uint16Array(16);let A=null,M,I,R;for(l=0;l<=15;l++)P[l]=0;for(d=0;d<n;d++)P[t[r+d]]++;for(h=c,p=15;1<=p&&0===P[p];p--);if(h>p&&(h=p),0===p)i[o++]=20971520,i[o++]=20971520,s.bits=1;else{for(f=1;f<p&&0===P[f];f++);for(h<f&&(h=f),b=1,l=1;l<=15;l++)if((b=(b<<=1)-P[l])<0)return-1;if(0<b&&(0===e||1!==p))return-1;for(j[1]=0,l=1;l<15;l++)j[l+1]=j[l]+P[l];for(d=0;d<n;d++)0!==t[r+d]&&(a[j[t[r+d]]++]=d);if(x=0===e?(E=A=a,20):1===e?(E=C,A=k,257):(E=$,A=D,0),g=0,d=0,l=f,S=o,m=h,y=0,O=-1,u=(v=1<<h)-1,1===e&&852<v||2===e&&592<v)return 1;for(;;){for(M=l-y,R=a[d]+1<x?(I=0,a[d]):a[d]>=x?(I=A[a[d]-x],E[a[d]-x]):(I=96,0),_=1<<l-y,w=1<<m,f=w;w-=_,i[S+(g>>y)+w]=M<<24|I<<16|R|0,0!==w;);for(_=1<<l-1;g&_;)_>>=1;if(g=0!==_?(g&=_-1)+_:0,d++,0==--P[l]){if(l===p)break;l=t[r+a[d]]}if(l>h&&(g&u)!==O){for(0===y&&(y=h),S+=f,m=l-y,b=1<<m;m+y<p&&!((b-=P[m+y])<=0);)m++,b<<=1;if(v+=1<<m,1===e&&852<v||2===e&&592<v)return 1;i[O=g&u]=h<<24|m<<16|S-o|0}}0!==g&&(i[S+g]=l-y<<24|64<<16|0),s.bits=h}return 0}},{}],421:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],422:[function(o,e,N){"use strict";const c=0,l=1;function t(e){let t=e.length;for(;0<=--t;)e[t]=0}const a=29,d=256,s=d+1+a,u=30,f=19,y=2*s+1,b=15,n=16,L=7,p=256,h=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),m=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const g=new Array(2*(s+2)),_=(t(g),new Array(2*u)),w=(t(_),new Array(512)),O=(t(w),new Array(256)),S=(t(O),new Array(a)),E=(t(S),new Array(u));function x(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}t(E);let P,j,A;function r(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const M=e=>e<256?w[e]:w[256+(e>>>7)],i=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},I=(e,t,r)=>{e.bi_valid>n-r?(e.bi_buf|=t<<e.bi_valid&65535,i(e,e.bi_buf),e.bi_buf=t>>n-e.bi_valid,e.bi_valid+=r-n):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},R=(e,t,r)=>{I(e,r[2*t],r[2*t+1])},C=(e,t)=>{let r=0;for(;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},B=(e,t)=>{var r,n=t.dyn_tree,i=t.max_code,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,f,p,h,m=0;for(p=0;p<=b;p++)e.bl_count[p]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<y;l++)d=e.heap[l],(p=n[2*n[2*d+1]+1]+1)>c&&(p=c,m++),n[2*d+1]=p,d>i||(e.bl_count[p]++,h=0,d>=u&&(h=s[d-u]),r=n[2*d],e.opt_len+=r*(p+h),a&&(e.static_len+=r*(o[2*d+1]+h)));if(0!==m){do{for(p=c-1;0===e.bl_count[p];)p--}while(e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,0<(m-=2));for(p=c;0!==p;p--)for(d=e.bl_count[p];0!==d;)i<(f=e.heap[--l])||(n[2*f+1]!==p&&(e.opt_len+=(p-n[2*f+1])*n[2*f],n[2*f+1]=p),d--)}},k=(e,t,r)=>{var n=new Array(b+1);let i=0,o,a;for(o=1;o<=b;o++)i=i+r[o-1]<<1,n[o]=i;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=C(n[s]++,s))}},$=e=>{let t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<u;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*p]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},U=e=>{8<e.bi_valid?i(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},z=(e,t,r,n)=>{var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},D=(e,t,r)=>{var n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},W=(e,t,r)=>{var n,i,o,a;let s=0;if(0!==e.sym_next)for(;n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0==n?R(e,i,t):(o=O[i],R(e,o+d+1,t),0!==(a=h[o])&&(i-=S[o],I(e,i,a)),n--,o=M(n),R(e,o,r),0!==(a=m[o])&&(n-=E[o],I(e,n,a))),s<e.sym_next;);R(e,p,t)},T=(e,t)=>{var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,u=-1,c;for(e.heap_len=0,e.heap_max=y,a=0;a<o;a++)0!==r[2*a]?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)r[2*(c=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=u,a=e.heap_len>>1;1<=a;a--)D(e,r,a);for(c=o;a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[2*c]=r[2*a]+r[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[2*a+1]=r[2*s+1]=c,e.heap[1]=c++,D(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],B(e,t),k(r,u,e.bl_count)},q=(e,t,r)=>{let n,i=-1;var o;let a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=a,a=t[2*(n+1)+1],++s<u&&o===a||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=o,c=0===a?(u=138,3):o===a?(u=6,3):(u=7,4))},K=(e,t,r)=>{let n,i=-1;var o;let a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(o=a,a=t[2*(n+1)+1],!(++s<u&&o===a)){if(s<c)for(;R(e,o,e.bl_tree),0!=--s;);else 0!==o?(o!==i&&(R(e,o,e.bl_tree),s--),R(e,16,e.bl_tree),I(e,s-3,2)):s<=10?(R(e,17,e.bl_tree),I(e,s-3,3)):(R(e,18,e.bl_tree),I(e,s-11,7));s=0,i=o,c=0===a?(u=138,3):o===a?(u=6,3):(u=7,4)}};let V=!1;const H=(e,t,r,n)=>{I(e,0+(n?1:0),3),U(e),i(e,r),i(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};e.exports._tr_init=e=>{if(!V){{let e,t,r,n,i;var o=new Array(b+1);for(r=0,n=0;n<a-1;n++)for(S[n]=r,e=0;e<1<<h[n];e++)O[r++]=n;for(O[r-1]=n,i=0,n=0;n<16;n++)for(E[n]=i,e=0;e<1<<m[n];e++)w[i++]=n;for(i>>=7;n<u;n++)for(E[n]=i<<7,e=0;e<1<<m[n]-7;e++)w[256+i++]=n;for(t=0;t<=b;t++)o[t]=0;for(e=0;e<=143;)g[2*e+1]=8,e++,o[8]++;for(;e<=255;)g[2*e+1]=9,e++,o[9]++;for(;e<=279;)g[2*e+1]=7,e++,o[7]++;for(;e<=287;)g[2*e+1]=8,e++,o[8]++;for(k(g,s+1,o),e=0;e<u;e++)_[2*e+1]=5,_[2*e]=C(e,5);P=new x(g,h,d+1,s,b),j=new x(_,m,0,u,b),A=new x(new Array(0),F,0,f,L)}V=!0}e.l_desc=new r(e.dyn_ltree,P),e.d_desc=new r(e.dyn_dtree,j),e.bl_desc=new r(e.bl_tree,A),e.bi_buf=0,e.bi_valid=0,$(e)},e.exports._tr_stored_block=H,e.exports._tr_flush_block=(t,r,n,e)=>{let i,o,a=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=(e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return c;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return l;for(r=32;r<d;r++)if(0!==e.dyn_ltree[2*r])return l;return c})(t)),T(t,t.l_desc),T(t,t.d_desc),a=(e=>{let t;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),T(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==r)H(t,r,n,e);else if(4===t.strategy||o===i)I(t,2+(e?1:0),3),W(t,g,_);else{I(t,4+(e?1:0),3);{var s=t;r=t.l_desc.max_code+1;n=t.d_desc.max_code+1;var u=a+1;let e;for(I(s,r-257,5),I(s,n-1,5),I(s,u-4,4),e=0;e<u;e++)I(s,s.bl_tree[2*v[e]+1],3);K(s,s.dyn_ltree,r-1),K(s,s.dyn_dtree,n-1)}W(t,t.dyn_ltree,t.dyn_dtree)}$(t),e&&U(t)},e.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(O[r]+d+1)]++,e.dyn_dtree[2*M(t)]++),e.sym_next===e.sym_end),e.exports._tr_align=e=>{I(e,2,3),R(e,p,g),16===(e=e).bi_valid?(i(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{}],423:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],424:[function(e,t,r){"use strict";var e=e("set-function-name"),n=Object,i=TypeError;t.exports=e(function(){if(null!=this&&this!==n(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)},{"set-function-name":779}],425:[function(e,t,r){"use strict";var n=e("define-properties"),i=e("call-bind"),o=e("./implementation"),a=e("./polyfill"),e=e("./shim"),i=i(a());n(i,{getPolyfill:a,implementation:o,shim:e}),t.exports=i},{"./implementation":424,"./polyfill":426,"./shim":427,"call-bind":99,"define-properties":114}],426:[function(e,t,r){"use strict";var n=e("./implementation"),i=e("define-properties").supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var e=o(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var t="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(r,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return n}},{"./implementation":424,"define-properties":114}],427:[function(e,t,r){"use strict";var n=e("define-properties").supportsDescriptors,i=e("./polyfill"),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,u=Object.getPrototypeOf,c=/a/;t.exports=function(){var e,t,r;if(n&&u)return e=i(),t=u(c),(r=o(t,"flags"))&&r.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e;throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")}},{"./polyfill":426,"define-properties":114}],428:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeEventBuffer=void 0,r.createChangeEventBuffer=function(e){return new i(e)};var n=e("rxjs/operators"),i=function(){function e(e){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=e,this.subs.push(this.collection.$.pipe((0,n.filter)(e=>!e.isLocal)).subscribe(e=>this._handleChangeEvent(e)))}var t=e.prototype;return t._handleChangeEvent=function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(e){var t=this.buffer[0],t=this.eventCounterMap.get(t);return e<t?null:e-t},t.getFrom=function(e){var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var n=this.buffer[r];if(r++,!n)return t;t.push(n)}},t.runFrom=function(e,t){e=this.getFrom(e);if(null===e)throw new Error("out of bounds");e.forEach(e=>t(e))},t.reduceByLastOfDoc=function(e){return e.slice(0)},t.destroy=function(){this.subs.forEach(e=>e.unsubscribe())},e}();r.ChangeEventBuffer=i},{"rxjs/operators":777}],429:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIndexMeta=o,r.getIndexStringLength=function(e,t){var e=o(e,t),n=0;return e.forEach(e=>{var t=e.schemaPart,r=t.type;"string"===r?n+=t.maxLength:"boolean"===r?n+=1:(t=e.parsedLengths,n=n+t.nonDecimals+t.decimals)}),n},r.getIndexableStringMonad=function(e,t){var e=o(e,t),n=e.length,i=e.map(e=>e.getIndexStringPart);return function(e){for(var t="",r=0;r<n;++r)t+=i[r](e);return t}},r.getNumberIndexString=m,r.getPrimaryKeyFromIndexableString=function(e,t){return e.slice(-1*t).trim()},r.getStartIndexStringFromLowerBound=function(s,e,u,c){var l="";return e.forEach((e,t)=>{var r=(0,d.getSchemaByObjectPath)(s,e),n=u[t],i=r.type;switch(i){case"string":var o=(0,f.ensureNotFalsy)(r.maxLength);l+=("string"==typeof n?n:"").padEnd(o," ");break;case"boolean":l+=null===n?c?"0":p.INDEX_MAX:n?"1":"0";break;case"number":case"integer":var a,o=h(r);null===n||n===p.INDEX_MIN?(a=c?"0":p.INDEX_MAX,l+=a.repeat(o.nonDecimals+o.decimals)):l+=m(o,n);break;default:throw new Error("unknown index type "+i)}}),l},r.getStartIndexStringFromUpperBound=function(a,e,s,u){var c="";return e.forEach((e,t)=>{var r=(0,d.getSchemaByObjectPath)(a,e),n=s[t],i=r.type;switch(i){case"string":var o=(0,f.ensureNotFalsy)(r.maxLength);"string"==typeof n&&n!==p.INDEX_MAX?c+=n.padEnd(o," "):c+="".padEnd(o,u?p.INDEX_MAX:" ");break;case"boolean":c+=null===n?u?"0":"1":n?"1":"0";break;case"number":case"integer":o=h(r);null===n||n===p.INDEX_MAX?c+=(u?"9":"0").repeat(o.nonDecimals+o.decimals):c+=m(o,n);break;default:throw new Error("unknown index type "+i)}}),c},r.getStringLengthOfIndexNumber=h;var d=e("./rx-schema-helper"),f=e("./plugins/utils"),p=e("./query-planner");function o(a,e){return e.map(e=>{var t,r,n,i,o=(0,d.getSchemaByObjectPath)(a,e);if(o)return"number"!==(t=o.type)&&"integer"!==t||(r=h(o)),n=(0,f.objectPathMonad)(e),i=o.maxLength||0,{fieldName:e,schemaPart:o,parsedLengths:r,getValue:n,getIndexStringPart:"string"===t?e=>{return(n(e)||"").padEnd(i," ")}:"boolean"===t?e=>{return n(e)?"1":"0"}:e=>{e=n(e);return m(r,e)}};throw new Error("not in schema: "+e)})}function h(e){var t=Math.floor(e.minimum),r=Math.ceil(e.maximum),e=e.multipleOf,n=(r-t).toString().length,e=e.toString().split("."),i=0;return{minimum:t,maximum:r,nonDecimals:n,decimals:i=1<e.length?e[1].length:i,roundedMinimum:t}}function m(e,t){(t=(t=void 0===t?0:t)<e.minimum?e.minimum:t)>e.maximum&&(t=e.maximum);var r=(Math.floor(t)-e.roundedMinimum).toString().padStart(e.nonDecimals,"0");return 0<e.decimals&&(r+=(1<(t=t.toString().split(".")).length?t[1]:"0").padEnd(e.decimals,"0")),r}},{"./plugins/utils":494,"./query-planner":516,"./rx-schema-helper":535}],430:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DocumentCache=void 0;var a=e("./plugins/utils"),s=e("./overwritable"),n=e("./rx-change-event");r.DocumentCache=function(){function e(e,t,r){this.cacheItemByDocId=new Map,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry(e=>{var t=e.docId,r=this.cacheItemByDocId.get(t);r&&(r.documentByRevisionHeight.delete(e.revisionHeight),0===r.documentByRevisionHeight.size)&&this.cacheItemByDocId.delete(t)}):void 0,this.primaryPath=e,this.changes$=t,this.documentCreator=r,t.subscribe(e=>{var t=e.documentId,t=this.cacheItemByDocId.get(t);t&&(e=(0,n.getDocumentDataOfRxChangeEvent)(e),t.latestDoc=e)})}var t=e.prototype;return t.getCachedRxDocument=function(t){var e,r=t[this.primaryPath],n=(0,a.getHeightOfRevision)(t._rev),i=(0,a.getFromMapOrCreate)(this.cacheItemByDocId,r,()=>{return e=t,{documentByRevisionHeight:new Map,latestDoc:e};var e}),o=i.documentByRevisionHeight.get(n),o=o?o.deref():void 0;return o||(t=s.overwritable.deepFreezeWhenDevMode(t),o=this.documentCreator(t),i.documentByRevisionHeight.set(n,(e=o,u?new WeakRef(e):{deref(){return e}})),this.registry&&this.registry.register(o,{docId:r,revisionHeight:n})),o},t.getLatestDocumentData=function(e){return(0,a.getFromMapOrThrow)(this.cacheItemByDocId,e).latestDoc},t.getLatestDocumentDataIfExists=function(e){e=this.cacheItemByDocId.get(e);if(e)return e.latestDoc},e}();var u="function"==typeof WeakRef},{"./overwritable":435,"./plugins/utils":494,"./rx-change-event":524}],431:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RXQUERY_QUERY_PARAMS_CACHE=void 0,r.calculateNewResults=function(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=d(e),n=(0,u.ensureNotFalsy)(e._result).docsData.slice(0),i=(0,u.ensureNotFalsy)(e._result).docsDataMap,o=!1;return t.map(e=>(0,s.rxChangeEventToEventReduceChangeEvent)(e)).filter(u.arrayFilterNotEmpty).find(e=>{var t=(0,a.calculateActionName)({queryParams:r,changeEvent:e,previousResults:n,keyDocumentMap:i});return"runFullQueryAgain"===t||("doNothing"!==t?(o=!0,(0,a.runAction)(t,r,e,n,i),!1):void 0)})?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}},r.getQueryParams=d,r.getSortFieldsOfQuery=l;var a=e("event-reduce-js"),s=e("./rx-change-event"),u=e("./plugins/utils"),c=e("./rx-query-helper");function l(e,t){return t.sort&&0!==t.sort.length?t.sort.map(e=>Object.keys(e)[0]):[e]}var n=new WeakMap;function d(o){return(0,u.getFromMapOrCreate)(n,o,()=>{var e=o.collection,t=(0,c.normalizeMangoQuery)(e.storageInstance.schema,(0,u.clone)(o.mangoQuery)),r=e.schema.primaryPath,n=(0,c.getSortComparator)(e.schema.jsonSchema,t),i=(0,c.getQueryMatcher)(e.schema.jsonSchema,t);return{primaryKey:o.collection.schema.primaryPath,skip:t.skip,limit:t.limit,sortFields:l(r,t),sortComparator:(e,t)=>{e={docA:e,docB:t,rxQuery:o};return n(e.docA,e.docB)},queryMatcher:e=>{return i({doc:e,rxQuery:o}.doc)}}})}r.RXQUERY_QUERY_PARAMS_CACHE=n},{"./plugins/utils":494,"./rx-change-event":524,"./rx-query-helper":532,"event-reduce-js":119}],432:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HOOKS=void 0,r._clearHook=function(e,t){n[e]=n[e].filter(e=>e!==t)},r.runAsyncPluginHooks=function(e,t){return Promise.all(n[e].map(e=>e(t)))},r.runPluginHooks=function(e,t){n[e]&&n[e].forEach(e=>e(t))};var n={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};r.HOOKS=n},{}],433:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IncrementalWriteQueue=void 0,r.findNewestOfDocumentStates=o,r.modifierFromPublicToInternal=function(r){return async e=>{var t=(0,u.stripMetaDataFromDocument)(e),t=(t._deleted=e._deleted,await r(t)),t=Object.assign({},t,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:(void 0!==t._deleted?t:e)._deleted});return void 0===t._deleted&&(t._deleted=!1),t}};var s=e("./rx-error"),u=e("./plugins/utils");function o(e){var r=e[0],n=(0,u.parseRevision)(r._rev).height;return e.forEach(e=>{var t=(0,u.parseRevision)(e._rev).height;n<t&&(r=e,n=t)}),r}r.IncrementalWriteQueue=function(){function e(e,t,r,n){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=r,this.postWrite=n}var t=e.prototype;return t.addWrite=function(r,n){var e=r[this.primaryPath],i=(0,u.getFromMapOrCreate)(this.queueByDocId,e,()=>[]);return new Promise((e,t)=>{e={lastKnownDocumentState:r,modifier:n,resolve:e,reject:t};(0,u.ensureNotFalsy)(i).push(e),this.triggerRun()})},t.triggerRun=async function(){var i,a,e;if(!0!==this.isRunning&&0!==this.queueByDocId.size)return this.isRunning=!0,i=[],a=this.queueByDocId,this.queueByDocId=new Map,await Promise.all(Array.from(a.entries()).map(async([,e])=>{var t,r=o(e.map(e=>e.lastKnownDocumentState)),n=r;for(t of e)try{n=await t.modifier((0,u.clone)(n))}catch(e){t.reject(e),t.reject=()=>{},t.resolve=()=>{}}try{await this.preWrite(n,r)}catch(t){return void e.forEach(e=>e.reject(t))}i.push({previous:r,document:n})})),e=0<i.length?await this.storageInstance.bulkWrite(i,"incremental-write"):{error:{},success:{}},await Promise.all(Array.from(Object.entries(e.success)).map(([e,t])=>{this.postWrite(t),(0,u.getFromMapOrThrow)(a,e).forEach(e=>e.resolve(t))})),Array.from(Object.entries(e.error)).forEach(([e,t])=>{var r,n,i=(0,u.getFromMapOrThrow)(a,e),o=(0,s.isBulkWriteConflictError)(t);o?(r=(0,u.getFromMapOrCreate)(this.queueByDocId,e,()=>[]),i.reverse().forEach(e=>{e.lastKnownDocumentState=(0,u.ensureNotFalsy)(o.documentInDb),(0,u.ensureNotFalsy)(r).unshift(e)})):(n=(0,s.rxStorageWriteErrorToRxError)(t),i.forEach(e=>e.reject(n)))}),this.isRunning=!1,this.triggerRun()},e}()},{"./plugins/utils":494,"./rx-error":531}],434:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={addRxPlugin:!0},i=(Object.defineProperty(r,"addRxPlugin",{enumerable:!0,get:function(){return i.addRxPlugin}}),e("./plugin")),o=e("./rx-database"),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./rx-error")),s=(Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),e("./rx-database-internal-store")),u=(Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),e("./overwritable")),c=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./rx-collection")),l=(Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),e("./rx-collection-helper")),d=(Object.keys(l).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),e("./rx-document")),f=(Object.keys(d).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===d[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})}),e("./rx-change-event")),p=(Object.keys(f).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===f[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})}),e("./rx-document-prototype-merge")),h=(Object.keys(p).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===p[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})}),e("./rx-query")),m=(Object.keys(h).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===h[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}})}),e("./rx-query-helper")),y=(Object.keys(m).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===m[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})}),e("./rx-schema")),b=(Object.keys(y).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===y[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})}),e("./rx-schema-helper")),v=(Object.keys(b).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===b[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return b[e]}})}),e("./rx-storage-helper")),g=(Object.keys(v).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===v[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return v[e]}})}),e("./rx-storage-statics")),_=(Object.keys(g).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===g[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return g[e]}})}),e("./replication-protocol/index")),w=(Object.keys(_).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===_[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}})}),e("./rx-storage-multiinstance")),O=(Object.keys(w).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===w[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return w[e]}})}),e("./custom-index")),S=(Object.keys(O).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===O[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return O[e]}})}),e("./query-planner")),E=(Object.keys(S).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===S[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return S[e]}})}),e("./plugin-helpers")),x=(Object.keys(E).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===E[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return E[e]}})}),e("./plugins/utils")),P=(Object.keys(x).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===x[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return x[e]}})}),e("./hooks")),j=(Object.keys(P).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===P[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return P[e]}})}),e("./query-cache"));Object.keys(j).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===j[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return j[e]}})})},{"./custom-index":429,"./hooks":432,"./overwritable":435,"./plugin":437,"./plugin-helpers":436,"./plugins/utils":494,"./query-cache":515,"./query-planner":516,"./replication-protocol/index":521,"./rx-change-event":524,"./rx-collection":526,"./rx-collection-helper":525,"./rx-database":528,"./rx-database-internal-store":527,"./rx-document":530,"./rx-document-prototype-merge":529,"./rx-error":531,"./rx-query":534,"./rx-query-helper":532,"./rx-schema":536,"./rx-schema-helper":535,"./rx-storage-helper":537,"./rx-storage-multiinstance":538,"./rx-storage-statics":539}],435:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=void 0;r.overwritable={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "}}},{}],436:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapRxStorageInstance=function(o,t,r,n=e=>e){async function a(e){return e&&t(e)}async function s(e){return e&&r(e)}var u=new d.BehaviorSubject(0);return{databaseName:o.databaseName,internals:o.internals,cleanup:o.cleanup.bind(o),options:o.options,close:o.close.bind(o),schema:o.schema,collectionName:o.collectionName,count:o.count.bind(o),remove:o.remove.bind(o),originalStorageInstance:o,bulkWrite:async(e,t)=>{var r=[],e=(await Promise.all(e.map(async e=>{var[e,t]=await Promise.all([e.previous?a(e.previous):void 0,a(e.document)]);r.push({previous:e,document:t})})),await o.bulkWrite(r,t)),n={success:{},error:{}},i=[];return Object.entries(e.success).forEach(([t,e])=>{i.push(s(e).then(e=>n.success[t]=e))}),Object.entries(e.error).forEach(([t,e])=>{i.push(async function(e){return(e=(0,l.flatClone)(e)).writeRow=(0,l.flatClone)(e.writeRow),e.documentInDb&&(e.documentInDb=await s(e.documentInDb)),e.writeRow.previous&&(e.writeRow.previous=await s(e.writeRow.previous)),e.writeRow.document=await s(e.writeRow.document),e}(e).then(e=>n.error[t]=e))}),await Promise.all(i),await(0,d.firstValueFrom)(u.pipe((0,c.filter)(e=>0===e))),n},query:e=>o.query(e).then(e=>Promise.all(e.documents.map(e=>s(e)))).then(e=>({documents:e})),getAttachmentData:async(e,t,r)=>{e=await o.getAttachmentData(e,t,r);return await n(e)},findDocumentsById:(e,t)=>o.findDocumentsById(e,t).then(async e=>{var r={};return await Promise.all(Object.entries(e).map(async([e,t])=>{r[e]=await s(t)})),r}),getChangedDocumentsSince:(e,t)=>o.getChangedDocumentsSince(e,t).then(async e=>({checkpoint:e.checkpoint,documents:await Promise.all(e.documents.map(e=>s(e)))})),changeStream:()=>o.changeStream().pipe((0,c.tap)(()=>u.next(u.getValue()+1)),(0,c.mergeMap)(async e=>{var t=await Promise.all(e.events.map(async e=>{var[t,r]=await Promise.all([s(e.documentData),s(e.previousDocumentData)]);return{operation:e.operation,eventId:e.eventId,documentId:e.documentId,endTime:e.endTime,startTime:e.startTime,documentData:t,previousDocumentData:r,isLocal:!1}}));return{id:e.id,events:t,checkpoint:e.checkpoint,context:e.context}}),(0,c.tap)(()=>u.next(u.getValue()-1))),conflictResultionTasks:()=>o.conflictResultionTasks().pipe((0,c.mergeMap)(async e=>{var t=await s(e.input.assumedMasterState),r=await s(e.input.newDocumentState),n=await s(e.input.realMasterState);return{id:e.id,context:e.context,input:{assumedMasterState:t,realMasterState:n,newDocumentState:r}}})),resolveConflictResultionTask:e=>{return e.output.isEqual||(e={id:e.id,output:{isEqual:!1,documentData:e.output.documentData}}),o.resolveConflictResultionTask(e)}}},r.wrappedValidateStorageFactory=function(r,e){var n=(0,l.getFromMapOrCreate)(o,e,()=>new Map);function u(e){var t=(0,l.defaultHashSha256)(JSON.stringify(e));return(0,l.getFromMapOrCreate)(n,t,()=>r(e))}return t=>Object.assign({},t.storage,{async createStorageInstance(r){var o,e=await t.storage.createStorageInstance(r),a=(0,i.getPrimaryFieldOfPrimaryKey)(r.schema.primaryKey),s=((0,l.requestIdleCallbackIfAvailable)(()=>o=u(r.schema)),e.bulkWrite.bind(e));return e.bulkWrite=(e,t)=>{o=o||u(r.schema);var n=[],i=[];return e.forEach(e=>{var t=e.document[a],r=o(e.document);0<r.length?n.push({status:422,isError:!0,documentId:t,writeRow:e,validationErrors:r}):i.push(e)}),(0<i.length?s(i,t):Promise.resolve({error:{},success:{}})).then(t=>(n.forEach(e=>{t.error[e.documentId]=e}),t))},e}})};var c=e("rxjs/operators"),i=e("./rx-schema-helper"),l=e("./plugins/utils"),d=e("rxjs"),o=new Map},{"./plugins/utils":494,"./rx-schema-helper":535,rxjs:552,"rxjs/operators":777}],437:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addRxPlugin=function(e){if((0,u.runPluginHooks)("preAddRxPlugin",{plugin:e,plugins:d}),!d.has(e)){if(f.has(e.name))throw(0,c.newRxError)("PL3",{name:e.name,plugin:e});if(d.add(e),f.add(e.name),!e.rxdb)throw(0,c.newRxTypeError)("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([e,t])=>t(l[e])),e.overwritable&&Object.assign(s.overwritable,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([e,t])=>{t.after&&u.HOOKS[e].push(t.after),t.before&&u.HOOKS[e].unshift(t.before)})}};var r=e("./rx-schema"),n=e("./rx-document"),i=e("./rx-query"),o=e("./rx-collection"),a=e("./rx-database"),s=e("./overwritable"),u=e("./hooks"),c=e("./rx-error"),l={RxSchema:r.RxSchema.prototype,RxDocument:n.basePrototype,RxQuery:i.RxQueryBase.prototype,RxCollection:o.RxCollectionBase.prototype,RxDatabase:a.RxDatabaseBase.prototype},d=new Set,f=new Set},{"./hooks":432,"./overwritable":435,"./rx-collection":526,"./rx-database":528,"./rx-document":530,"./rx-error":531,"./rx-query":534,"./rx-schema":536}],438:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compressBase64=a,r.decompressBase64=s,r.wrappedAttachmentsCompressionStorage=function(n){return Object.assign({},n.storage,{async createStorageInstance(e){if(!e.schema.attachments||!e.schema.attachments.compression)return n.storage.createStorageInstance(e);var t=e.schema.attachments.compression;if("deflate"!==t)throw new Error("unknown compression mode "+t);var r=(0,o.flatClone)(e.schema),e=(r.attachments=(0,o.flatClone)(r.attachments),delete(0,o.ensureNotFalsy)(r.attachments).compression,await n.storage.createStorageInstance(Object.assign({},e,{schema:r})));return(0,i.wrapRxStorageInstance)(e,async function(e){return await Promise.all(Object.values(e._attachments).map(async e=>{e.data&&(e.data=await a(0,e.data))})),e},e=>e,function(e){return s(0,e)})}})};var i=e("../../plugin-helpers"),n=e("pako"),o=e("../utils");function a(e,t){t=(0,o.base64ToArrayBuffer)(t),t=(0,n.deflate)(t,{});return(0,o.arrayBufferToBase64)(t)}function s(e,t){t=(0,o.base64ToArrayBuffer)(t),t=(0,n.inflate)(t);return(0,o.arrayBufferToBase64)(t)}},{"../../plugin-helpers":436,"../utils":494,pako:408}],439:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clearFolder=function(e){c(e),u(e)},r.deleteFolder=c,r.documentFolder=function(e,t){return o.join(e.directory,t)},r.ensureFolderExists=u,r.getMeta=function(e){var t=f(e);return new Promise((r,n)=>{i.readFile(t,"utf-8",(e,t)=>{e?n(e):(e=JSON.parse(t),r(e))})})},r.metaFileLocation=f,r.prepareFolders=function(e,t){u(t.directory);var r=f(t);{var n;i.existsSync(r)||(n=(0,a.now)(),n={createdAt:n,updatedAt:n,collectionStates:{}},i.writeFileSync(r,JSON.stringify(n),"utf-8"))}Object.keys(e.collections).forEach(e=>{u(o.join(t.directory,e))})},r.setMeta=function(e,t){return d(f(e),t)},r.writeJsonToFile=d,r.writeToFile=l;var i=n(e("fs")),o=n(e("path")),a=e("../../plugins/utils");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}function u(e){i.existsSync(e)||i.mkdirSync(e,{recursive:!0})}function c(e){i.existsSync(e)&&i.rmdirSync(e,{recursive:!0})}async function l(e,n){return"string"!=typeof n&&(n=await(0,a.blobToString)(n)),new Promise(function(t,r){i.writeFile(e,n,"utf-8",e=>{e?r(e):t()})})}function d(e,t){return l(e,JSON.stringify(t))}function f(e){return o.join(e.directory,"backup_meta.json")}},{"../../plugins/utils":494,fs:904,path:929}],440:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={backupSingleDocument:!0,RxBackupState:!0,backup:!0,RxDBBackupPlugin:!0},s=(r.RxDBBackupPlugin=r.RxBackupState=void 0,r.backup=p,r.backupSingleDocument=d,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("path"))),i=e("rxjs"),o=e("rxjs/operators"),a=e("../../plugins/utils"),l=e("./file-util");function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}async function d(e,t){var r,n=e.toJSON(!0),i=[],o=(0,l.documentFolder)(t,e.primary),a=(await(0,l.clearFolder)(o),s.join(o,"document.json"));return await(0,l.writeJsonToFile)(a,n),i.push(a),t.attachments&&(r=s.join(o,"attachments"),(0,l.ensureFolderExists)(r),n=e.allAttachments(),await Promise.all(n.map(async e=>{var t=await e.getData(),e=s.join(r,e.id);await(0,l.writeToFile)(e,t),i.push(e)}))),i}Object.keys(l).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})});var c=new WeakMap;var f=function(){function e(e,t){var r;this.isStopped=!1,this.subs=[],this.persistRunning=a.PROMISE_RESOLVE_VOID,this.initialReplicationDone$=new i.BehaviorSubject(!1),this.internalWriteEvents$=new i.Subject,this.writeEvents$=this.internalWriteEvents$.asObservable(),this.database=e,this.options=t,this.options.batchSize||(this.options.batchSize=10),r=this,(0,a.getFromMapOrCreate)(c,e,()=>[]).push(r),(0,l.prepareFolders)(e,t)}var t=e.prototype;return t.persistOnce=function(){return this.persistRunning=this.persistRunning.then(()=>this._persistOnce())},t._persistOnce=async function(){var u=this,c=await(0,l.getMeta)(this.options);await Promise.all(Object.entries(this.database.collections).map(async([r,n])=>{for(var i=n.schema.primaryPath,o=new Set,a=(await this.database.requestIdlePromise(),c.collectionStates[r]||(c.collectionStates[r]={}),c.collectionStates[r].checkpoint),s=!0;s&&!this.isStopped;)await async function(){await u.database.requestIdlePromise();var e=await n.storageInstance.getChangedDocumentsSince(u.options.batchSize||0,a),e=(a=0<e.documents.length?e.checkpoint:a,c.collectionStates[r].checkpoint=a,e.documents.map(e=>e[i]).filter(e=>!o.has(e)&&(o.add(e),!0)).filter((e,t,r)=>r.indexOf(e)===t)),t=(await u.database.requestIdlePromise(),await n.findByIds(e).exec());if(0===t.size)return s=!1;await Promise.all(Array.from(t.values()).map(async e=>{var t=await d(e,u.options);u.internalWriteEvents$.next({collectionName:n.name,documentId:e.primary,files:t,deleted:!1})})),await Promise.all(e.filter(e=>!t.has(e)).map(async e=>{await(0,l.deleteFolder)((0,l.documentFolder)(u.options,e)),u.internalWriteEvents$.next({collectionName:n.name,documentId:e,files:[],deleted:!0})}))}();c.collectionStates[r].checkpoint=a,await(0,l.setMeta)(this.options,c)})),this.initialReplicationDone$.getValue()||this.initialReplicationDone$.next(!0)},t.watchForChanges=function(){Object.values(this.database.collections).forEach(e=>{e=e.storageInstance.changeStream().subscribe(()=>{this.persistOnce()});this.subs.push(e)})},t.awaitInitialBackup=function(){return(0,i.firstValueFrom)(this.initialReplicationDone$.pipe((0,o.filter)(e=>!!e),(0,o.map)(()=>!0)))},t.cancel=function(){return this.isStopped?a.PROMISE_RESOLVE_FALSE:(this.isStopped=!0,this.subs.forEach(e=>e.unsubscribe()),a.PROMISE_RESOLVE_TRUE)},e}();function p(e){var t=new f(this,e);return t.persistOnce(),e.live&&t.watchForChanges(),t}r.RxBackupState=f,r.RxDBBackupPlugin={name:"backup",rxdb:!0,prototypes:{RxDatabase(e){e.backup=p}},hooks:{preDestroyRxDatabase:{after:function(e){e=c.get(e);e&&e.forEach(e=>e.cancel())}}}}},{"../../plugins/utils":494,"./file-util":439,path:929,rxjs:552,"rxjs/operators":777}],441:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CLEANUP_POLICY=void 0;r.DEFAULT_CLEANUP_POLICY={minimumDeletedTime:26784e5,minimumCollectionAge:6e4,runEach:3e5,awaitReplicationsInSync:!0,waitForLeadership:!0}},{}],442:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cleanupRxCollection=i,r.runCleanupAfterDelete=o,r.startCleanupForRxCollection=async function(e){var t=e.database,r=Object.assign({},n.DEFAULT_CLEANUP_POLICY,t.cleanupPolicy||{});await e.promiseWait(r.minimumCollectionAge),e.destroyed||(r.waitForLeadership&&await t.waitForLeadership(),e.destroyed)||(await i(e,r),await o(e,r))};var r=e("../../plugins/utils"),a=e("../replication"),n=e("./cleanup-helper"),s=r.PROMISE_RESOLVE_TRUE;async function i(e,t){for(var r,n=e.database,i=e.storageInstance,o=!1;!o&&!e.destroyed;){if(t.awaitReplicationsInSync&&(r=a.REPLICATION_STATE_BY_COLLECTION.get(e))&&await Promise.all(r.map(e=>{if(!e.isStopped())return e.awaitInSync()})),await n.requestIdlePromise(),e.destroyed)return;o=await(s=s.then(()=>!!e.destroyed||i.cleanup(t.minimumDeletedTime)))}}async function o(e,t){for(;!e.destroyed;){if(await e.promiseWait(t.runEach),e.destroyed)return;await i(e,t)}}},{"../../plugins/utils":494,"../replication":469,"./cleanup-helper":441}],443:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={RxDBCleanupPlugin:!0},i=(r.RxDBCleanupPlugin=void 0,e("./cleanup")),e=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),{name:"cleanup",rxdb:!0,prototypes:{},hooks:{createRxCollection:{after:e=>{(0,i.startCleanupForRxCollection)(e.collection)}}}});r.RxDBCleanupPlugin=e},{"./cleanup":442}],444:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),u=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxDBcrdtPlugin=r.RX_CRDT_CONTEXT=void 0,r.getCRDTConflictHandler=m,r.getCRDTSchemaPart=function(){return{type:"object",properties:{operations:{type:"array",items:{type:"array",items:{type:"object",properties:{body:{type:"array",items:{type:"object",properties:{selector:{type:"object"},ifMatch:{type:"object"},ifNotMatch:{type:"object"}},additionalProperties:!1},minItems:1},creator:{type:"string"},time:{type:"number",minimum:1,maximum:1e15,multipleOf:.01}},additionalProperties:!1,required:["body","creator","time"]}}},hash:{type:"string",minLength:2}},additionalProperties:!1,required:["operations","hash"]}},r.hashCRDTOperations=f,r.insertCRDT=a,r.mergeCRDTFields=p,r.rebuildFromCRDT=h,r.sortOperationComparator=s,r.updateCRDT=o,e("../../rx-error")),c=e("../../plugins/utils"),i=n(e("modifyjs")),l=e("../..");async function o(n){n=l.overwritable.deepFreezeWhenDevMode(n);var i,o,e=this.collection.schema.jsonSchema;if(e.crdt)return i=(0,c.ensureNotFalsy)(e.crdt),o=await this.collection.database.storageToken,this.incrementalModify(e=>{var t=(0,c.clone)((0,c.getProperty)(e,i.field)),r={body:(0,c.toArray)(n),creator:o,time:(0,c.now)()};return t.operations.push([r]),t.hash=f(this.collection.database.hashFunction,t),e=d(this.collection.database.storage.statics,this.collection.schema.jsonSchema,e,r),(0,c.setProperty)(e,i.field,t),e},y);throw(0,u.newRxError)("CRDT1",{schema:e,queryObj:n})}async function a(t){t=l.overwritable.deepFreezeWhenDevMode(t);var e,r,n,i=this.schema.jsonSchema;if(i.crdt)return n=(0,c.ensureNotFalsy)(i.crdt),e=await this.database.storageToken,e={body:Array.isArray(t)?t:[t],creator:e,time:(0,c.now)()},r=d(this.database.storage.statics,this.schema.jsonSchema,r={},e),(0,c.setProperty)(r,n.field,n={operations:[],hash:""}),n.operations.push([e]),n.hash=f(this.database.hashFunction,n),await this.insert(r).catch(async e=>{if("CONFLICT"===e.code)return(await this.findOne(e.parameters.id).exec(!0)).updateCRDT(t);throw e});throw(0,u.newRxError)("CRDT1",{schema:i,queryObj:t})}function s(e,t){return e.creator>t.creator?1:-1}function d(e,r,n,t){return t.body.forEach(e=>{var t;!e.selector||(t={selector:(0,c.ensureNotFalsy)(e.selector),sort:[],skip:0},(0,l.getQueryMatcher)(r,t)(n))?e.ifMatch&&(n=(0,i.default)(n,e.ifMatch)):e.ifNotMatch&&(n=(0,i.default)(n,e.ifNotMatch))}),n}function f(e,t){t=t.operations.map(e=>e.map(e=>e.creator));return e(JSON.stringify(t))}function p(e,t,i){t.operations.length<i.operations.length&&([t,i]=[i,t]);var o={operations:[],hash:""};return t.operations.forEach((e,t)=>{var r=[],n=new Set;e.forEach(e=>{n.add(e.creator),r.push(e)}),i.operations[t]&&i.operations[t].forEach(e=>{n.has(e.creator)||r.push(e)}),r=r.sort(s),o.operations[t]=r}),o.hash=f(e,o),o}function h(e,t,r,n){var i={_deleted:!1};return(0,c.setProperty)(i,(0,c.ensureNotFalsy)(t.crdt).field,n),n.operations.forEach(e=>{e.forEach(e=>{i=d(0,t,i,e)})}),i}function m(i,e,o){var t=(0,c.ensureNotFalsy)(o.crdt).field,a=(0,c.objectPathMonad)(t);return(e,t)=>{var r=a(e.newDocumentState),n=a(e.realMasterState);return r.hash===n.hash?Promise.resolve({isEqual:!0}):(r=p(i,r,n),n=h(0,o,e.newDocumentState,r),Promise.resolve({isEqual:!1,documentData:n}))}}var y="rx-crdt",n=(r.RX_CRDT_CONTEXT=y,{name:"crdt",rxdb:!0,prototypes:{RxDocument:e=>{e.updateCRDT=o;var t=e.remove,r=(e.remove=function(){return this.collection.schema.jsonSchema.crdt?this.updateCRDT({ifMatch:{$set:{_deleted:!0}}}):t.bind(this)()},e.incrementalPatch),n=(e.incrementalPatch=function(e){return this.collection.schema.jsonSchema.crdt?this.updateCRDT({ifMatch:{$set:e}}):r.bind(this)(e)},e.incrementalModify);e.incrementalModify=function(e,t){if(!this.collection.schema.jsonSchema.crdt)return n.bind(this)(e);if(t===y)return n.bind(this)(e);throw(0,u.newRxError)("CRDT2",{id:this.primary,args:{context:t}})}},RxCollection:e=>{e.insertCRDT=a}},overwritable:{},hooks:{preCreateRxCollection:{after:e=>{if(e.schema.crdt){if(e.conflictHandler)throw(0,u.newRxError)("CRDT3",{collection:e.name,schema:e.schema});e.conflictHandler=m(e.database.hashFunction,e.database.storage.statics,e.schema)}}},createRxCollection:{after:({collection:i})=>{var o,a,s,r,t;i.schema.jsonSchema.crdt&&(o=(0,c.ensureNotFalsy)(i.schema.jsonSchema.crdt),a=o.field,s=(0,c.objectPathMonad)(o.field),l.overwritable.isDevMode()&&(r=i.storageInstance.bulkWrite.bind(i.storageInstance),i.storageInstance.bulkWrite=function(e,t){return e.forEach(e=>{var e=(0,c.clone)(e.document),t=s(e),r=h(i.database.storage.statics,i.schema.jsonSchema,0,t);function n(e){var r={};return Object.entries(e).forEach(([e,t])=>{e.startsWith("_")||(r[e]=t)}),r}if(!(0,c.deepEqual)(n(e),n(r)))throw(0,u.newRxError)("SNH",{document:e});r=f(i.database.hashFunction,t);if(t.hash!==r)throw(0,u.newRxError)("SNH",{document:e,args:{hash:t.hash,recalculatedHash:r}})}),r(e,t)}),t=i.bulkInsert.bind(i),i.bulkInsert=async function(e){var n=await i.database.storageToken,e=e.map(e=>{var r={},t=(Object.entries(e).forEach(([e,t])=>{e.startsWith("_")||e===a||(r[e]=t)}),{operations:[[{creator:n,body:[{ifMatch:{$set:r}}],time:(0,c.now)()}]],hash:""});return t.hash=f(i.database.hashFunction,t),(0,c.setProperty)(e,o.field,t),e});return t(e)})}}}});r.RxDBcrdtPlugin=n},{"../..":434,"../../plugins/utils":494,"../../rx-error":531,"@babel/runtime/helpers/interopRequireDefault":544,modifyjs:398}],445:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ensurePrimaryKeyValid=function(e,t){if(!e)throw(0,n.newRxError)("DOC20",{primaryKey:e,document:t});if(e!==e.trim())throw(0,n.newRxError)("DOC21",{primaryKey:e,document:t});if(e.includes("\r")||e.includes("\n"))throw(0,n.newRxError)("DOC22",{primaryKey:e,document:t});if(e.includes('"'))throw(0,n.newRxError)("DOC23",{primaryKey:e,document:t})};var n=e("../../rx-error")},{"../../rx-error":531}],446:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkMigrationStrategies=function(t,r){if("object"!=typeof r||Array.isArray(r))throw(0,n.newRxTypeError)("COL11",{schema:t});var e=(0,i.getPreviousVersions)(t);if(e.length===Object.keys(r).length)return e.map(e=>({v:e,s:r[e+1]})).filter(e=>"function"!=typeof e.s).forEach(e=>{throw(0,n.newRxTypeError)("COL13",{version:e.v,type:typeof e,schema:t})}),!0;throw(0,n.newRxError)("COL12",{have:Object.keys(r),should:e})};var n=e("../../rx-error"),i=e("../../rx-schema")},{"../../rx-error":531,"../../rx-schema":536}],447:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkOrmDocumentMethods=function(e,t){var r=Object.keys(e.properties);t&&Object.keys(t).filter(e=>r.includes(e)).forEach(e=>{throw(0,n.newRxError)("COL18",{funName:e})})},r.checkOrmMethods=function(e){e&&Object.entries(e).forEach(([e,t])=>{if("string"!=typeof e)throw(0,n.newRxTypeError)("COL14",{name:e});if(e.startsWith("_"))throw(0,n.newRxTypeError)("COL15",{name:e});if("function"!=typeof t)throw(0,n.newRxTypeError)("COL16",{name:e,type:typeof e});if((0,i.rxCollectionProperties)().includes(e)||(0,i.rxDocumentProperties)().includes(e))throw(0,n.newRxError)("COL17",{name:e})})};var n=e("../../rx-error"),i=e("./entity-properties")},{"../../rx-error":531,"./entity-properties":450}],448:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.areSelectorsSatisfiedByIndex=s,r.checkMangoQuery=function(t){var r=t.rxQuery.collection.schema.jsonSchema,e=t.mangoQuery.selector,n=Object.keys(r.properties),e=(Object.keys(e).filter(e=>!e.startsWith("$")).filter(e=>!e.includes(".")).forEach(e=>{if(!n.includes(e))throw(0,o.newRxError)("QU13",{schema:r,field:e,query:t.mangoQuery})}),r.indexes||[]),i=t.mangoQuery.index;if(i)if(!e.find(e=>(0,a.deepEqual)(e,i)))throw(0,o.newRxError)("QU12",{collection:t.rxQuery.collection.name,query:t.mangoQuery,schema:r});if("count"===t.rxQuery.op&&!s(t.rxQuery.collection.schema.jsonSchema,t.mangoQuery)&&!t.rxQuery.collection.database.allowSlowCount)throw(0,o.newRxError)("QU14",{collection:t.rxQuery.collection,query:t.mangoQuery});t.mangoQuery.sort&&t.mangoQuery.sort.map(e=>Object.keys(e)[0]).filter(e=>!e.includes(".")).forEach(e=>{if(!n.includes(e))throw(0,o.newRxError)("QU13",{schema:r,field:e,query:t.mangoQuery})})},r.checkQuery=function(t){if("[object Object]"!==Object.prototype.toString.call(t.queryObj))throw(0,o.newRxTypeError)("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(t.queryObj).forEach(e=>{if(!r.includes(e))throw(0,o.newRxTypeError)("QU11",{op:t.op,collection:t.collection.name,queryObj:t.queryObj,key:e,args:{validKeys:r}})}),"count"===t.op&&(t.queryObj.limit||t.queryObj.skip))throw(0,o.newRxError)("QU15",{collection:t.collection.name,query:t.queryObj})};var o=e("../../rx-error"),n=e("../storage-dexie"),a=e("../utils");function s(e,t){return n.RxStorageDexieStatics.prepareQuery(e,t).queryPlan.selectorSatisfiedByIndex}},{"../../rx-error":531,"../storage-dexie":473,"../utils":494}],449:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkFieldNameRegex=d,r.checkPrimaryKey=u,r.checkSchema=function(a){if(!a.primaryKey)throw(0,l.newRxError)("SC30",{schema:a});if(!a.hasOwnProperty("properties"))throw(0,l.newRxError)("SC29",{schema:a});if(a.properties._rev)throw(0,l.newRxError)("SC10",{schema:a});if(!a.hasOwnProperty("version")||"number"!=typeof a.version||a.version<0)throw(0,l.newRxError)("SC11",{version:a.version});if(o(a),u(a),Object.keys(a.properties).forEach(e=>{var t=a.properties[e];if(e===a.primaryKey){if(a.indexes&&a.indexes.includes(e))throw(0,l.newRxError)("SC13",{value:t,schema:a});if(t.unique)throw(0,l.newRxError)("SC14",{value:t,schema:a});if(a.encrypted&&a.encrypted.includes(e))throw(0,l.newRxError)("SC15",{value:t,schema:a});if("string"!==t.type)throw(0,l.newRxError)("SC16",{value:t,schema:a})}if((0,n.rxDocumentProperties)().includes(e))throw(0,l.newRxError)("SC17",{key:e,schema:a})}),a.indexes){if(!(0,i.isMaybeReadonlyArray)(a.indexes))throw(0,l.newRxError)("SC18",{indexes:a.indexes,schema:a});a.indexes.forEach(o=>{if("string"!=typeof o&&!Array.isArray(o))throw(0,l.newRxError)("SC19",{index:o,schema:a});if(Array.isArray(o))for(var e=0;e<o.length;e+=1)if("string"!=typeof o[e])throw(0,l.newRxError)("SC20",{index:o,schema:a});((0,i.isMaybeReadonlyArray)(o)?o:[o]).forEach(e=>{var t=(0,s.getSchemaByObjectPath)(a,e);switch(t.type){case"string":if(t.maxLength)break;throw(0,l.newRxError)("SC34",{index:o,field:e,schema:a});case"number":case"integer":if(!t.multipleOf)throw(0,l.newRxError)("SC35",{index:o,field:e,schema:a});var r=t.maximum,n=t.minimum;if(void 0===r||void 0===n)throw(0,l.newRxError)("SC37",{index:o,field:e,schema:a});break;case"boolean":var r="",n=e,i=(e.includes(".")&&(n=(i=e.split(".")).pop(),r=i.join(".")),""===r?a:(0,s.getSchemaByObjectPath)(a,r));if(i.required&&i.required.includes(n))break;throw(0,l.newRxError)("SC38",{index:o,field:e,schema:a});default:throw(0,l.newRxError)("SC36",{fieldName:e,type:t.type,schema:a})}})})}Object.keys((0,i.flattenObject)(a)).map(e=>{e=e.split(".");return e.pop(),e.join(".")}).filter(e=>""!==e).filter((e,t,r)=>r.indexOf(e)===t).filter(e=>{e=(0,i.getProperty)(a,e);return e&&!!e.index}).forEach(e=>{throw e=(e=e.replace("properties.","")).replace(/\.properties\./g,"."),(0,l.newRxError)("SC26",{index:(0,i.trimDots)(e),schema:a})}),(a.indexes||[]).reduce((e,t)=>((0,i.isMaybeReadonlyArray)(t)?(0,i.appendToArray)(e,t):e.push(t),e),[]).filter((e,t,r)=>r.indexOf(e)===t).map(e=>{var t=c(e),t=(0,i.getProperty)(a,t);if(t&&"object"==typeof t)return{indexPath:e,schemaObj:t};throw(0,l.newRxError)("SC21",{index:e,schema:a})}).filter(e=>"string"!==e.schemaObj.type&&"integer"!==e.schemaObj.type&&"number"!==e.schemaObj.type&&"boolean"!==e.schemaObj.type).forEach(e=>{throw(0,l.newRxError)("SC22",{key:e.indexPath,type:e.schemaObj.type,schema:a})}),Object.keys((0,i.flattenObject)(a)).map(e=>{e=e.split(".");return e.pop(),e.join(".")}).filter(e=>""!==e&&"attachments"!==e).filter((e,t,r)=>r.indexOf(e)===t).filter(e=>{e=(0,i.getProperty)(a,e);return e&&!!e.encrypted}).forEach(e=>{throw e=(e=e.replace("properties.","")).replace(/\.properties\./g,"."),(0,l.newRxError)("SC27",{index:(0,i.trimDots)(e),schema:a})}),a.encrypted&&a.encrypted.forEach(e=>{var t=c(e),t=(0,i.getProperty)(a,t);if(!t||"object"!=typeof t)throw(0,l.newRxError)("SC28",{field:e,schema:a})})},r.validateFieldsDeep=o;var l=e("../../rx-error"),s=e("../../rx-schema-helper"),i=e("../../plugins/utils"),n=e("./entity-properties");function d(e){if("_deleted"!==e){if(["properties"].includes(e))throw(0,l.newRxError)("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(t);if("_id"!==e&&!e.match(r))throw(0,l.newRxError)("SC1",{regex:t,fieldName:e})}}function o(e){var c=(0,s.getPrimaryFieldOfPrimaryKey)(e.primaryKey);return function a(s,u){s&&"object"==typeof s&&Object.keys(s).forEach(e=>{var t=s[e];if(!s.properties&&t&&"object"==typeof t&&!Array.isArray(s)){var r=e,n=t,i=u;if("string"!=typeof r||"object"!=typeof n||Array.isArray(n)||d(r),n.hasOwnProperty("item")&&"array"!==n.type)throw(0,l.newRxError)("SC2",{fieldName:r});if(n.hasOwnProperty("required")&&"boolean"==typeof n.required)throw(0,l.newRxError)("SC24",{fieldName:r});if(n.hasOwnProperty("ref"))if(Array.isArray(n.type)){if(2<n.type.length||!n.type.includes("string")||!n.type.includes("null"))throw(0,l.newRxError)("SC4",{fieldName:r})}else switch(n.type){case"string":break;case"array":if(n.items&&n.items.type&&"string"===n.items.type)break;throw(0,l.newRxError)("SC3",{fieldName:r});default:throw(0,l.newRxError)("SC4",{fieldName:r})}var o=2<=i.split(".").length;if(o){if(n.primary)throw(0,l.newRxError)("SC6",{path:i,primary:n.primary});if(n.default)throw(0,l.newRxError)("SC7",{path:i})}if(!o){if("_id"===r&&"_id"!==c)throw(0,l.newRxError)("COL2",{fieldName:r});if("_"===r.charAt(0)&&"_id"!==r&&"_deleted"!==r)throw(0,l.newRxError)("SC8",{fieldName:r})}}a(t,"properties"!==e?u+"."+e:u)})}(e,""),!0}function u(r){if(!r.primaryKey)throw(0,l.newRxError)("SC30",{schema:r});function t(e){if(!e)throw(0,l.newRxError)("SC33",{schema:r});var t=e.type;if(!t||!["string","number","integer"].includes(t))throw(0,l.newRxError)("SC32",{schema:r,args:{schemaPart:e}})}"string"==typeof r.primaryKey?(e=r.primaryKey,t(r.properties[e])):(e=r.primaryKey,t((0,s.getSchemaByObjectPath)(r,e.key)),e.fields.forEach(e=>{t((0,s.getSchemaByObjectPath)(r,e))}));var e=(0,s.getPrimaryFieldOfPrimaryKey)(r.primaryKey),e=r.properties[e];if(!e.maxLength)throw(0,l.newRxError)("SC39",{schema:r,args:{primaryPathSchemaPart:e}})}function c(e){for(var t=e.split("."),r="",n=0;n<t.length;n+=1)r="[]"!==t[n]?r.concat(".properties.".concat(t[n])):r.concat(".items");return(0,i.trimDots)(r)}},{"../../plugins/utils":494,"../../rx-error":531,"../../rx-schema-helper":535,"./entity-properties":450}],450:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rxCollectionProperties=function(){{var e,t;n||(t=new o.RxCollectionBase,e=Object.getOwnPropertyNames(t),t=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...e,...t])}return n},r.rxDatabaseProperties=function(){{var e,t,r;i||(e=new a.RxDatabaseBase("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),i=[...t,...r],e.destroy())}return i},r.rxDocumentProperties=function(){{var e,t;u||(e=Object.getOwnPropertyNames(c),t=Object.getOwnPropertyNames(s.basePrototype),u=[...e,...t,"deleted","synced"])}return u};var n,i,o=e("../../rx-collection"),a=e("../../rx-database"),s=e("../../rx-document");var u,c=new((0,s.createRxDocumentConstructor)(s.basePrototype))},{"../../rx-collection":526,"../../rx-database":528,"../../rx-document":530}],451:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ERROR_MESSAGES=void 0;r.ERROR_MESSAGES={UT1:"given name is no string or empty",UT2:"collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'",UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB8:"RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",DB13:"createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_P2P_PEER:"RxReplication P2P Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",DXE1:"The dexie.js RxStorage does not support boolean indexes, see https://rxdb.info/rx-storage-dexie.html#boolean-index",SNH:"This should never happen"}},{}],452:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={deepFreezeWhenDevMode:!0,DEV_MODE_PLUGIN_NAME:!0,RxDBDevModePlugin:!0},i=(r.RxDBDevModePlugin=r.DEV_MODE_PLUGIN_NAME=void 0,r.deepFreezeWhenDevMode=p,e("./error-messages")),o=e("./check-schema"),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./check-orm")),s=e("./check-migration-strategies"),u=e("./unallowed-properties"),c=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./check-query")),l=(Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),e("../../rx-error")),d=e("../../plugins/utils"),f=e("./check-document");function p(e){return e&&"string"!=typeof e&&"number"!=typeof e?(0,d.deepFreeze)(e):e}e={name:r.DEV_MODE_PLUGIN_NAME="dev-mode",rxdb:!0,init:()=>{console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","🤗 Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium.html","","Also take part in the RxDB User Survey: https://rxdb.info/survey.html","---------------------------------------------------------------------"].join("\n"))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:p,tunnelErrorMessage(e){if(i.ERROR_MESSAGES[e])return i.ERROR_MESSAGES[e];throw console.error("RxDB: Error-Code not known: "+e),new Error("Error-Code "+e+" not known, contact the maintainer")}},hooks:{preCreateRxSchema:{after:o.checkSchema},preCreateRxDatabase:{after:function(e){(0,u.ensureDatabaseNameIsValid)(e)}},preCreateRxCollection:{after:function(e){if((0,u.ensureCollectionNameValid)(e),(0,a.checkOrmDocumentMethods)(e.schema,e.methods),"_"===e.name.charAt(0))throw(0,l.newRxError)("DB2",{name:e.name});if(!e.schema)throw(0,l.newRxError)("DB4",{name:e.name,args:e})}},createRxDocument:{before:function(e){(0,f.ensurePrimaryKeyValid)(e.primary,e.toJSON(!0))}},preCreateRxQuery:{after:function(e){(0,c.checkQuery)(e)}},prePrepareQuery:{after:e=>{(0,c.checkMangoQuery)(e)}},createRxCollection:{after:e=>{(0,a.checkOrmMethods)(e.creator.statics),(0,a.checkOrmMethods)(e.creator.methods),(0,a.checkOrmMethods)(e.creator.attachments),e.creator.schema&&e.creator.migrationStrategies&&(0,s.checkMigrationStrategies)(e.creator.schema,e.creator.migrationStrategies)}}}};r.RxDBDevModePlugin=e},{"../../plugins/utils":494,"../../rx-error":531,"./check-document":445,"./check-migration-strategies":446,"./check-orm":447,"./check-query":448,"./check-schema":449,"./error-messages":451,"./unallowed-properties":453}],453:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ensureCollectionNameValid=function(e){if((0,i.rxDatabaseProperties)().includes(e.name))throw(0,n.newRxError)("DB5",{name:e.name});u(e.name)},r.ensureDatabaseNameIsValid=function(e){if(u(e.name),e.name.includes("$"))throw(0,n.newRxError)("DB13",{name:e.name});if((0,o.isFolderPath)(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw(0,n.newRxError)("DB11",{name:e.name})},r.validateDatabaseName=u;var n=e("../../rx-error"),i=e("./entity-properties"),o=e("../../plugins/utils");var a="^[a-z][_$a-z0-9\\-]*$",s=new RegExp(a);function u(e){if("string"!=typeof e||0===e.length)throw(0,n.newRxTypeError)("UT1",{name:e});if((0,o.isFolderPath)(e))return!0;if(e.match(s)||":memory:"===e)return!0;throw(0,n.newRxError)("UT2",{regex:a,givenName:e})}},{"../../plugins/utils":494,"../../rx-error":531,"./entity-properties":450}],454:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.MINIMUM_PASSWORD_LENGTH=void 0,r.decryptString=p,r.encryptString=f,r.wrappedKeyEncryptionCryptoJsStorage=function(n){return Object.assign({},n.storage,{async createStorageInstance(t){if(void 0!==t.password){var e=t.password;if("string"!=typeof e)throw(0,s.newRxTypeError)("EN1",{password:e});if(e.length<d)throw(0,s.newRxError)("EN2",{minPassLength:d,password:e})}var i,r;if(!(0,u.hasEncryption)(t.schema))return await n.storage.createStorageInstance(t);if(t.password)return i=t.password,delete(e=(0,c.clone)(t.schema)).encrypted,e.attachments&&(e.attachments.encrypted=!1),r=await n.storage.createStorageInstance(Object.assign({},t,{schema:e})),(0,a.wrapRxStorageInstance)(r,function(r){var n;return r=h(r),(0,c.ensureNotFalsy)(t.schema.encrypted).forEach(e=>{var t=(0,c.getProperty)(r,e);void 0!==t&&(t=f(JSON.stringify(t),i),(0,c.setProperty)(r,e,t))}),t.schema.attachments&&t.schema.attachments.encrypted&&(n={},Object.entries(r._attachments).forEach(([e,t])=>{var r,t=(0,c.flatClone)(t);t.data&&(r=t.data,t.data=(0,c.b64EncodeUnicode)(f(r,i))),n[e]=t}),r._attachments=n),r},function(r){return r=h(r),(0,c.ensureNotFalsy)(t.schema.encrypted).forEach(e=>{var t=(0,c.getProperty)(r,e);void 0!==t&&(t=p(t,i),t=JSON.parse(t),(0,c.setProperty)(r,e,t))}),r},function(e){return t.schema.attachments&&t.schema.attachments.encrypted?p((0,c.b64DecodeUnicode)(e),i):e});throw(0,s.newRxError)("EN3",{database:t.databaseName,collection:t.collectionName,schema:t.schema})}})},n(e("crypto-js/aes"))),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("crypto-js/enc-utf8")),a=e("../../plugin-helpers"),s=e("../../rx-error"),u=e("../../rx-storage-helper"),c=e("../../plugins/utils");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}var d=8;function f(e,t){return i.default.encrypt(e,t).toString()}function p(e,t){if("string"!=typeof e)throw(0,s.newRxError)("SNH",{args:{cipherText:e}});return i.default.decrypt(e,t).toString(o)}function h(e){var t=e._attachments;return delete(e=(0,c.flatClone)(e))._attachments,(e=(0,c.clone)(e))._attachments=t,e}r.MINIMUM_PASSWORD_LENGTH=d},{"../../plugin-helpers":436,"../../plugins/utils":494,"../../rx-error":531,"../../rx-storage-helper":537,"@babel/runtime/helpers/interopRequireDefault":544,"crypto-js/aes":101,"crypto-js/enc-utf8":105}],455:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxDBJsonDumpPlugin=void 0;var n=e("../../rx-query"),i=e("../../rx-error"),o=e("../../plugins/utils");function a(t){var r={name:this.name,instanceToken:this.token,collections:[]},e=Object.keys(this.collections).filter(e=>!t||t.includes(e)).filter(e=>"_"!==e.charAt(0)).map(e=>this.collections[e]);return Promise.all(e.map(e=>e.exportJSON())).then(e=>(r.collections=e,r))}function s(e){var t=e.collections.filter(e=>!this.collections[e.name]).map(e=>e.name);if(0<t.length)throw(0,i.newRxError)("JD1",{missingCollections:t});return Promise.all(e.collections.map(e=>this.collections[e.name].importJSON(e)))}function u(){var t={name:this.name,schemaHash:this.schema.hash,docs:[]},e=(0,n.createRxQuery)("find",(0,n._getDefaultQuery)(),this);return(0,n.queryCollection)(e).then(e=>(t.docs=e.map(e=>(delete(e=(0,o.flatClone)(e))._rev,delete e._attachments,e)),t))}function c(e){if(e.schemaHash!==this.schema.hash)throw(0,i.newRxError)("JD2",{schemaHash:e.schemaHash,own:this.schema.hash});e=e.docs;return this.storageInstance.bulkWrite(e.map(e=>{return{document:Object.assign({},e,{_meta:{lwt:(0,o.now)()},_rev:(0,o.getDefaultRevision)(),_attachments:{},_deleted:!1})}}),"json-dump-import")}r.RxDBJsonDumpPlugin={name:"json-dump",rxdb:!0,prototypes:{RxDatabase:e=>{e.exportJSON=a,e.importJSON=s},RxCollection:e=>{e.exportJSON=u,e.importJSON=c}},overwritable:{}}},{"../../plugins/utils":494,"../../rx-error":531,"../../rx-query":534}],456:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compressDocumentData=d,r.decompressDocumentData=f,r.getCompressionStateByRxJsonSchema=l,r.wrappedKeyCompressionStorage=function(n){var e=Object.assign({},n.storage.statics,{prepareQuery(e,t){var r;return e.keyCompression?(r=l(e),t=(0,i.compressQuery)(r.table,t),n.storage.statics.prepareQuery(r.compressedSchema,t)):n.storage.statics.prepareQuery(e,t)}});return Object.assign({},n.storage,{statics:e,async createStorageInstance(e){var t,r;return e.schema.keyCompression?(t=l(e.schema),(r=(0,u.flatClone)(t.compressedSchema)).keyCompression=!1,r=await n.storage.createStorageInstance(Object.assign({},e,{schema:r})),(0,a.wrapRxStorageInstance)(r,function(e){return d(t,e)},function(e){return f(t,e)})):n.storage.createStorageInstance(e)}})};var i=e("jsonschema-key-compression"),o=e("../../overwritable"),a=e("../../plugin-helpers"),s=e("../../rx-schema-helper"),n=e("../../rx-storage-helper"),u=e("../../plugins/utils"),c=new WeakMap;function l(n){return o.overwritable.deepFreezeWhenDevMode(n),(0,u.getFromMapOrCreate)(c,n,()=>{var e,t=(0,u.flatClone)(n),r=(delete t.primaryKey,(0,i.createCompressionTable)(t,i.DEFAULT_COMPRESSION_FLAG,[(0,s.getPrimaryFieldOfPrimaryKey)(n.primaryKey),"_rev","_attachments","_deleted","_meta"])),t=(delete t.primaryKey,(0,i.createCompressedJsonSchema)(r,t));return"string"!=typeof n.primaryKey?(e=n.primaryKey,e={key:(0,i.compressedPath)(r,e.key),fields:e.fields.map(e=>(0,i.compressedPath)(r,e)),separator:e.separator},t.primaryKey=e):t.primaryKey=(0,i.compressedPath)(r,n.primaryKey),n.indexes&&(e=n.indexes.map(e=>(0,u.isMaybeReadonlyArray)(e)?e.map(e=>(0,i.compressedPath)(r,e)):(0,i.compressedPath)(r,e)),t.indexes=e),{table:r,schema:n,compressedSchema:t}})}function d(e,t){var r=(t=(0,n.flatCloneDocWithMeta)(t))._attachments;return delete t._attachments,(t=(0,i.compressObject)(e.table,t))._attachments=r,t}function f(e,t){return(0,i.decompressObject)(e.table,t)}},{"../../overwritable":435,"../../plugin-helpers":436,"../../plugins/utils":494,"../../rx-schema-helper":535,"../../rx-storage-helper":537,"jsonschema-key-compression":151}],457:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxDBLeaderElectionPlugin=void 0,r.getForDatabase=c,r.getLeaderElectorByBroadcastChannel=u,r.isLeader=l,r.onDestroy=f,r.rxdb=r.prototypes=void 0,r.waitForLeadership=d;var n=e("broadcast-channel"),i=e("../../rx-storage-multiinstance"),o=e("../utils"),a=new WeakMap,s=new WeakMap;function u(e){return(0,o.getFromMapOrCreate)(s,e,()=>(0,n.createLeaderElection)(e))}function c(){var e=(0,i.getBroadcastChannelReference)(this.token,this.name,this),t=this.destroy.bind(this),r=(this.destroy=function(){return(0,i.removeBroadcastChannelReference)(this.token,this),t()},u(e));return r||(r=u(e),a.set(this,r)),this.leaderElector=()=>r,r}function l(){return!this.multiInstance||this.leaderElector().isLeader}function d(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):o.PROMISE_RESOLVE_TRUE}function f(e){e=a.get(e);e&&e.die()}e={RxDatabase:e=>{e.leaderElector=c,e.isLeader=l,e.waitForLeadership=d}},e={name:"leader-election",rxdb:r.rxdb=!0,prototypes:r.prototypes=e,hooks:{preDestroyRxDatabase:{after:f}}};r.RxDBLeaderElectionPlugin=e},{"../../rx-storage-multiinstance":538,"../utils":494,"broadcast-channel":85}],458:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={RxDBLocalDocumentsPlugin:!0},i=(r.RxDBLocalDocumentsPlugin=void 0,e("./local-documents")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("./local-documents-helper")),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./rx-local-document"));Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),r.RxDBLocalDocumentsPlugin={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=i.insertLocal,e.upsertLocal=i.upsertLocal,e.getLocal=i.getLocal,e.getLocal$=i.getLocal$},RxDatabase:e=>{e.insertLocal=i.insertLocal,e.upsertLocal=i.upsertLocal,e.getLocal=i.getLocal,e.getLocal$=i.getLocal$}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&(0,o.createLocalDocStateByParent)(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&(0,o.createLocalDocStateByParent)(e.collection)}},preDestroyRxDatabase:{after:e=>(0,o.closeStateByParent)(e)},postDestroyRxCollection:{after:e=>(0,o.closeStateByParent)(e)},postRemoveRxDatabase:{after:e=>(0,o.removeLocalDocumentsStorageInstance)(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>(0,o.removeLocalDocumentsStorageInstance)(e.storage,e.databaseName,e.collectionName)}},overwritable:{}}},{"./local-documents":460,"./local-documents-helper":459,"./rx-local-document":461}],459:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RX_LOCAL_DOCUMENT_SCHEMA=r.LOCAL_DOC_STATE_BY_PARENT_RESOLVED=r.LOCAL_DOC_STATE_BY_PARENT=void 0,r.closeStateByParent=function(e){var t=p.get(e);if(t)return p.delete(e),t.then(e=>e.storageInstance.close())},r.createLocalDocStateByParent=function(o){var a=o.database||o,s=o.database?o.name:"",e=(async()=>{var e=await m(a.token,a.storage,a.name,s,a.instanceCreationOptions,a.multiInstance),e=(0,d.getWrappedStorageInstance)(a,e,y),t=new c.DocumentCache("id",o.$.pipe((0,u.filter)(e=>e.isLocal)),e=>(0,f.createRxLocalDocument)(e,o)),r=new l.IncrementalWriteQueue(e,"id",()=>{},()=>{}),n=await a.storageToken,i=e.changeStream().subscribe(e=>{e={id:e.id,internal:!1,collectionName:o.database?o.name:void 0,storageToken:n,events:e.events.map(e=>(0,d.storageChangeEventToRxChangeEvent)(!0,e,o.database?o:void 0)),databaseToken:a.token,checkpoint:e.checkpoint,context:e.context};a.$emit(e)}),i=(o._subs.push(i),{database:a,parent:o,storageInstance:e,docCache:t,incrementalWriteQueue:r});return h.set(o,i),i})();p.set(o,e)},r.createLocalDocumentStorageInstance=m,r.getCollectionLocalInstanceName=s,r.getLocalDocStateByParent=function(e){var t=p.get(e);if(t)return t;t=e.database||e,e=e.database?e.name:"";throw(0,n.newRxError)("LD8",{database:t.name,collection:e})},r.removeLocalDocumentsStorageInstance=async function(e,t,r){await(await m((0,o.randomCouchString)(10),e,t,r,{},!1)).remove()};var u=e("rxjs/operators"),c=e("../../doc-cache"),l=e("../../incremental-write"),n=e("../../rx-error"),i=e("../../rx-schema-helper"),d=e("../../rx-storage-helper"),o=e("../../plugins/utils"),f=e("./rx-local-document"),a=e("../../overwritable"),p=new WeakMap,h=(r.LOCAL_DOC_STATE_BY_PARENT=p,new WeakMap);function m(e,t,r,n,i,o){return t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:s(n),schema:y,options:i,multiInstance:o,devMode:a.overwritable.isDevMode()})}function s(e){return"plugin-local-documents-"+e}r.LOCAL_DOC_STATE_BY_PARENT_RESOLVED=h;var y=(0,i.fillWithDefaultSettings)({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});r.RX_LOCAL_DOCUMENT_SCHEMA=y},{"../../doc-cache":430,"../../incremental-write":433,"../../overwritable":435,"../../plugins/utils":494,"../../rx-error":531,"../../rx-schema-helper":535,"../../rx-storage-helper":537,"./rx-local-document":461,"rxjs/operators":777}],460:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLocal=async function(e){var t=await(0,o.getLocalDocStateByParent)(this),r=t.docCache,n=r.getLatestDocumentDataIfExists(e);if(n)return Promise.resolve(r.getCachedRxDocument(n));return(0,a.getSingleDocument)(t.storageInstance,e).then(e=>e?t.docCache.getCachedRxDocument(e):null)},r.getLocal$=function(r){return this.$.pipe((0,i.startWith)(null),(0,i.mergeMap)(async e=>{return e?{changeEvent:e}:{doc:await this.getLocal(r)}}),(0,i.mergeMap)(async e=>{var t;return e.changeEvent?(t=e.changeEvent).isLocal&&t.documentId===r?{use:!0,doc:await this.getLocal(r)}:{use:!1}:{use:!0,doc:e.doc}}),(0,i.filter)(e=>e.use),(0,i.map)(e=>e.doc))},r.insertLocal=async function(e,t){var r=await(0,o.getLocalDocStateByParent)(this),e={id:e,data:t,_deleted:!1,_meta:(0,n.getDefaultRxDocumentMeta)(),_rev:(0,n.getDefaultRevision)(),_attachments:{}};return(0,a.writeSingle)(r.storageInstance,{document:e},"local-document-insert").then(e=>r.docCache.getCachedRxDocument(e))},r.upsertLocal=function(t,r){return this.getLocal(t).then(e=>{return e?e.incrementalModify(()=>r):this.insertLocal(t,r)})};var n=e("../../plugins/utils"),i=e("rxjs/operators"),o=e("./local-documents-helper"),a=e("../../rx-storage-helper")},{"../../plugins/utils":494,"../../rx-storage-helper":537,"./local-documents-helper":459,"rxjs/operators":777}],461:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.createRxLocalDocument=function(e,t){y();e=new p(e.id,e,t);return Object.setPrototypeOf(e,h),e.prototype=h,e},n(e("@babel/runtime/helpers/inheritsLoose"))),o=e("rxjs/operators"),a=e("../../overwritable"),s=e("../../rx-change-event"),u=e("../../rx-document"),c=e("../../rx-error"),l=e("../../rx-storage-helper"),d=e("../../plugins/utils"),f=e("./local-documents-helper"),p=function(n){function e(e,t,r){t=n.call(this,null,t)||this;return t.id=e,t.parent=r,t}return(0,i.default)(e,n),e}((0,u.createRxDocumentConstructor)()),h={get isLocal(){return!0},get allAttachments$(){throw(0,c.newRxError)("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){return this.parent.$.pipe((0,o.filter)(e=>e.isLocal),(0,o.filter)(e=>e.documentId===this.primary),(0,o.map)(e=>(0,s.getDocumentDataOfRxChangeEvent)(e)),(0,o.startWith)(this._data),(0,o.distinctUntilChanged)((e,t)=>e._rev===t._rev),(0,o.shareReplay)(d.RXJS_SHARE_REPLAY_DEFAULTS))},getLatest(){var e=(0,d.getFromMapOrThrow)(f.LOCAL_DOC_STATE_BY_PARENT_RESOLVED,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,this._data){if("string"!=typeof e)throw(0,c.newRxTypeError)("LD2",{objPath:e});e=(0,d.getProperty)(this._data,e);return a.overwritable.deepFreezeWhenDevMode(e)}},get$(t){if(t="data."+t,a.overwritable.isDevMode()){if(t.includes(".item."))throw(0,c.newRxError)("LD3",{objPath:t});if(t===this.primaryPath)throw(0,c.newRxError)("LD4")}return this.$.pipe((0,o.map)(e=>(0,d.getProperty)(e,t)),(0,o.distinctUntilChanged)())},async incrementalModify(t){var r=await(0,f.getLocalDocStateByParent)(this.parent);return r.incrementalWriteQueue.addWrite(this._data,async e=>(e.data=await t(e.data,this),e)).then(e=>r.docCache.getCachedRxDocument(e))},incrementalPatch(e){return this.incrementalModify(r=>(Object.entries(e).forEach(([e,t])=>{r[e]=t}),r))},async _saveData(r){var e=await(0,f.getLocalDocStateByParent)(this.parent),t=this._data;return r.id=this.id,e.storageInstance.bulkWrite([{previous:t,document:r}],"local-document-save-data").then(e=>{var t=e.success[r.id];if(!t)throw(0,d.getFromObjectOrThrow)(e.error,r.id);(r=(0,d.flatClone)(r))._rev=t._rev})},async remove(){var t=await(0,f.getLocalDocStateByParent)(this.parent),e={id:this._data.id,data:{},_deleted:!0,_meta:(0,d.getDefaultRxDocumentMeta)(),_rev:(0,d.getDefaultRevision)(),_attachments:{}};return(0,l.writeSingle)(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(e=>t.docCache.getCachedRxDocument(e))}},m=!1,y=()=>{var r;m||(m=!0,r=u.basePrototype,Object.getOwnPropertyNames(r).forEach(e=>{var t;Object.getOwnPropertyDescriptor(h,e)||(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(h,e,t))}),["populate","update","putAttachment","getAttachment","allAttachments"].forEach(e=>{return h[e]=(t=e,()=>{throw(0,c.newRxError)("LD6",{functionName:t})});var t}))}},{"../../overwritable":435,"../../plugins/utils":494,"../../rx-change-event":524,"../../rx-document":530,"../../rx-error":531,"../../rx-storage-helper":537,"./local-documents-helper":459,"@babel/runtime/helpers/inheritsLoose":543,"@babel/runtime/helpers/interopRequireDefault":544,"rxjs/operators":777}],462:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DataMigrator=void 0,r._getOldCollections=b,r._migrateDocuments=S,r.createOldCollection=m,r.deleteOldCollection=E,r.getBatchOfOldCollection=_,r.getOldCollectionDocs=y,r.isDocumentDataWithoutRevisionEqual=O,r.migrateDocumentData=w,r.migrateOldCollection=x,r.migratePromise=function(r,n){r._migratePromise||(r._migratePromise=new Promise((e,t)=>{x(r,n).subscribe(null,t,e)}));return r._migratePromise},r.mustMigrate=v,r.runStrategyIfNotNull=g;var u=e("rxjs"),c=e("../../plugins/utils"),o=e("../../rx-schema"),l=e("../../rx-error"),s=e("../../hooks"),n=e("./migration-state"),d=e("rxjs/operators"),a=e("../../rx-storage-helper"),i=e("../../rx-database-internal-store"),f=e("../../rx-query-helper"),p=e("../../overwritable"),h=e("./migration-helpers");async function m(e,t,r){var n=r.newestCollection.database,i={databaseInstanceToken:n.token,databaseName:n.name,collectionName:r.newestCollection.name,schema:t,options:r.newestCollection.instanceCreationOptions,multiInstance:n.multiInstance,devMode:p.overwritable.isDevMode()},i=((0,s.runPluginHooks)("preCreateRxStorageInstance",i),await n.storage.createStorageInstance(i)),e={version:e,dataMigrator:r,newestCollection:r.newestCollection,database:n,schema:(0,o.createRxSchema)(t,n.hashFunction,!1),storageInstance:i};return e.storageInstance=(0,a.getWrappedStorageInstance)(e.database,i,t),e}function y(t){var e=(0,o.getPreviousVersions)(t.currentSchema.jsonSchema).map(e=>t.name+"-"+e);return t.database.internalStore.findDocumentsById(e.map(e=>(0,i.getPrimaryKeyOfInternalDocument)(e,i.INTERNAL_CONTEXT_COLLECTION)),!1).then(e=>Object.values(e))}async function b(t){var e=await y(t);return Promise.all(e.map(e=>e?m(e.data.schema.version,e.data.schema,t):null).filter(e=>null!==e))}function v(e){return 0===e.currentSchema.version?c.PROMISE_RESOLVE_FALSE:y(e).then(e=>0!==e.length)}function g(e,t,r){return null===r?c.PROMISE_RESOLVE_NULL:(t=e.dataMigrator.migrationStrategies[t](r,e),(0,c.toPromise)(t))}function _(e,t){var r=e.database.storage,n=e.storageInstance,r=r.statics.prepareQuery(n.schema,{selector:{},sort:[{[e.schema.primaryPath]:"asc"}],limit:t,skip:0});return n.query(r).then(e=>e.documents.map(e=>e=(0,c.flatClone)(e)))}function w(r,e){for(var t=(0,c.flatClone)(e._attachments),e=(0,c.clone)(e),n=(e._attachments=t,r.version+1),i=Promise.resolve(e);n<=r.newestCollection.schema.version;)!function(){var t=n;i=i.then(e=>g(r,t,e)),n++}();return i.then(e=>null===e?c.PROMISE_RESOLVE_NULL:(e._meta||(e._meta=(0,c.getDefaultRxDocumentMeta)()),e))}function O(e,t){e=Object.assign({},e,{_attachments:void 0,_rev:void 0}),t=Object.assign({},t,{_attachments:void 0,_rev:void 0});return(0,c.deepEqual)(e,t)}async function S(n,e){var r=(0,c.clone)(e),i=(await Promise.all(e.map(e=>(0,s.runAsyncPluginHooks)("preMigrateDocument",{docData:e,oldCollection:n}))),await Promise.all(e.map(e=>w(n,e)))),o=[],a=[],e=(e.forEach((e,t)=>{var t=i[t],r={res:null,type:"",migrated:t,doc:e,oldCollection:n,newestCollection:n.newestCollection};a.push(r),O(e,t)?t._rev=e._rev:null!==t&&(t._rev=(0,c.createRevision)(n.newestCollection.database.token,e)),t?(e=t._attachments,(t=t)._attachments=e,t._meta.lwt=(0,c.now)(),o.push(t),r.res=t,r.type="success"):r.type="deleted"}),o.length&&await n.newestCollection.storageInstance.originalStorageInstance.bulkWrite(o.map(e=>({document:e})),"data-migrator-import"),await Promise.all(a.map(e=>(0,s.runAsyncPluginHooks)("postMigrateDocument",e))),e.map((e,t)=>{e=(0,c.flatClone)(e);return e._deleted=!0,e._attachments={},{previous:r[t],document:e}}));return e.length&&await n.storageInstance.bulkWrite(e,"data-migrator-delete"),a}function E(e){return e.storageInstance.remove().then(()=>e.database.removeCollectionDoc(e.dataMigrator.name,e.schema))}function x(t,e=h.MIGRATION_DEFAULT_BATCH_SIZE){if(t._migrate)throw(0,l.newRxError)("DM3");t._migrate=!0;var r,n,i,o=new u.Subject;return n=()=>E(t).then(()=>o.complete()),(i=()=>_(t,e).then(e=>0===e.length?(n(),!1):S(t,e).then(e=>e.forEach(e=>o.next(e))).catch(e=>r=e).then(()=>!0)).then(e=>{e&&(r?o.error(r):i())}))(),o.asObservable()}r.DataMigrator=function(){function e(e,t){this._migrated=!1,this.nonMigratedOldCollections=[],this.allOldCollections=[],this.newestCollection=e,this.migrationStrategies=t,this.currentSchema=e.schema,this.database=e.database,this.name=e.name}var t=e.prototype;return t.migrate=function(i=h.MIGRATION_DEFAULT_BATCH_SIZE){var o=this;if(this._migrated)throw(0,l.newRxError)("DM1");var a={done:!(this._migrated=!0),total:0,handled:0,success:0,deleted:0,percent:0},s=new u.Subject,e=(0,n.getMigrationStateByDatabase)(this.newestCollection.database),t=e.getValue().slice(0);return t.push(s.asObservable()),e.next(t),b(this).then(e=>{this.nonMigratedOldCollections=e,this.allOldCollections=this.nonMigratedOldCollections.slice(0);var r=this.database.storage;return Promise.all(this.nonMigratedOldCollections.map(e=>async function(e,t){return t=r.statics.prepareQuery(e.schema,(0,f.normalizeMangoQuery)(t,{})),(await e.count(t)).count}(e.storageInstance,e.schema.jsonSchema)))}).then(e=>{for(var e=e.reduce((e,t)=>e+t,0),n=(a.total=e,s.next({collection:this.newestCollection,state:(0,c.flatClone)(a)}),this.nonMigratedOldCollections.shift()),t=c.PROMISE_RESOLVE_VOID;n;)!function(){var r=x(n,i);t=t.then(()=>new Promise(e=>{var t=r.subscribe({next:e=>{a.handled++,a[e.type]=a[e.type]+1,a.percent=Math.round(a.handled/a.total*100),s.next({collection:o.newestCollection,state:(0,c.flatClone)(a)})},error:e=>{t.unsubscribe(),o.allOldCollections.forEach(e=>e.storageInstance.close().catch(()=>{})),s.error(e)},complete:()=>{n&&n.storageInstance.close().catch(()=>{}),t.unsubscribe(),e()}})})),n=o.nonMigratedOldCollections.shift()}();return t}).then(()=>{a.done=!0,a.percent=100,s.next({collection:this.newestCollection,state:(0,c.flatClone)(a)}),s.complete()}),s.pipe((0,d.map)(e=>e.state))},t.migratePromise=function(r){return this._migratePromise||(this._migratePromise=v(this).then(e=>e?new Promise((e,t)=>{this.migrate(r).subscribe(null,t,e),this.allOldCollections.forEach(e=>e.storageInstance.close().catch(()=>{}))}).catch(e=>{throw this.allOldCollections.forEach(e=>e.storageInstance.close().catch(()=>{})),e}):c.PROMISE_RESOLVE_FALSE)),this._migratePromise},e}()},{"../../hooks":432,"../../overwritable":435,"../../plugins/utils":494,"../../rx-database-internal-store":527,"../../rx-error":531,"../../rx-query-helper":532,"../../rx-schema":536,"../../rx-storage-helper":537,"./migration-helpers":464,"./migration-state":465,rxjs:552,"rxjs/operators":777}],463:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DATA_MIGRATOR_BY_COLLECTION=void 0,Object.defineProperty(r,"DataMigrator",{enumerable:!0,get:function(){return a.DataMigrator}}),r.RxDBMigrationPlugin=void 0,Object.defineProperty(r,"_getOldCollections",{enumerable:!0,get:function(){return a._getOldCollections}}),Object.defineProperty(r,"_migrateDocuments",{enumerable:!0,get:function(){return a._migrateDocuments}}),Object.defineProperty(r,"deleteOldCollection",{enumerable:!0,get:function(){return a.deleteOldCollection}}),Object.defineProperty(r,"getBatchOfOldCollection",{enumerable:!0,get:function(){return a.getBatchOfOldCollection}}),Object.defineProperty(r,"migrateDocumentData",{enumerable:!0,get:function(){return a.migrateDocumentData}}),Object.defineProperty(r,"migrateOldCollection",{enumerable:!0,get:function(){return a.migrateOldCollection}}),Object.defineProperty(r,"migratePromise",{enumerable:!0,get:function(){return a.migratePromise}});var n=e("rxjs"),i=e("rxjs/operators"),o=e("../../plugins/utils"),a=e("./data-migrator"),s=e("./migration-state"),u=new WeakMap,e=(r.DATA_MIGRATOR_BY_COLLECTION=u,{name:"migration",rxdb:!0,hooks:{preDestroyRxDatabase:{after:s.onDatabaseDestroy}},prototypes:{RxDatabase:e=>{e.migrationStates=function(){return(0,s.getMigrationStateByDatabase)(this).pipe((0,i.switchMap)(e=>(0,n.combineLatest)(e)),(0,i.shareReplay)(o.RXJS_SHARE_REPLAY_DEFAULTS))}},RxCollection:e=>{e.getDataMigrator=function(){return(0,o.getFromMapOrCreate)(u,this,()=>new a.DataMigrator(this.asRxCollection,this.migrationStrategies))},e.migrationNeeded=function(){return 0===this.schema.version?o.PROMISE_RESOLVE_FALSE:(0,a.mustMigrate)(this.getDataMigrator())}}}});r.RxDBMigrationPlugin=e},{"../../plugins/utils":494,"./data-migrator":462,"./migration-state":465,rxjs:552,"rxjs/operators":777}],464:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MIGRATION_DEFAULT_BATCH_SIZE=void 0;r.MIGRATION_DEFAULT_BATCH_SIZE=200},{}],465:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DATA_MIGRATION_STATE_SUBJECT_BY_DATABASE=void 0,r.getMigrationStateByDatabase=function(e){return(0,i.getFromMapOrCreate)(o,e,()=>new n.BehaviorSubject([]))},r.onDatabaseDestroy=function(e){e=o.get(e);e&&e.complete()};var n=e("rxjs"),i=e("../../plugins/utils"),o=new WeakMap;r.DATA_MIGRATION_STATE_SUBJECT_BY_DATABASE=o},{"../../plugins/utils":494,rxjs:552}],466:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={runBuildingStep:!0,applyBuildingStep:!0,RxDBQueryBuilderPlugin:!0},i=(r.RxDBQueryBuilderPlugin=void 0,r.applyBuildingStep=c,r.runBuildingStep=u,e("./mquery/nosql-query-builder")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("../../rx-query")),a=e("../../plugins/utils"),s="queryBuilderPath";function u(e,t,r){var n=(0,i.createQueryBuilder)((0,a.clone)(e.mangoQuery),e.other[s]),t=(n[t](r),n.toJSON());return(0,o.createRxQuery)(e.op,t.query,e.collection,{...e.other,[s]:t.path})}function c(e,t){e[t]=function(e){return u(this,t,e)}}r.RxDBQueryBuilderPlugin={name:"query-builder",rxdb:!0,prototypes:{RxQuery(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(e=>{c(t,e)}),i.OTHER_MANGO_ATTRIBUTES.forEach(e=>{c(t,e)}),i.OTHER_MANGO_OPERATORS.forEach(e=>{c(t,e)})}}}},{"../../plugins/utils":494,"../../rx-query":534,"./mquery/nosql-query-builder":468}],467:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=o,r.merge=function t(r,n){Object.keys(n).forEach(e=>{i.includes(e)||(void 0!==r[e]&&o(n[e])?t(r[e],n[e]):r[e]=n[e])})};var i=["__proto__","constructor","prototype"];function o(e){return"[object Object]"===e.toString()}},{}],468:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTHER_MANGO_OPERATORS=r.OTHER_MANGO_ATTRIBUTES=r.NoSqlQueryBuilderClass=void 0,r.canMerge=a,r.createQueryBuilder=function(e,t){return new n(e,t)},r.mQuerySortToRxDBSort=i;var l=e("./mquery-utils"),d=e("../../../rx-error"),n=function(){function o(e,t){var r;this.options={},this._conditions={},this._fields={},this._path=t,e&&(r=this,e.selector&&r.find(e.selector),e.limit&&r.limit(e.limit),e.skip&&r.skip(e.skip),e.sort)&&e.sort.forEach(e=>r.sort(e))}var e=o.prototype;return e.where=function(e,t){if(!arguments.length)return this;var r=typeof e;if("string"==r)return this._path=e,2===arguments.length&&(this._conditions[this._path]=t),this;if("object"!=r||Array.isArray(e))throw(0,d.newRxTypeError)("MQ1",{path:e});return this.merge(e)},e.equals=function(e){this._ensurePath("equals");var t=this._path;return this._conditions[t]=e,this},e.eq=function(e){this._ensurePath("eq");var t=this._path;return this._conditions[t]=e,this},e.or=function(e){var t=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},e.nor=function(e){var t=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},e.and=function(e){var t=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},e.mod=function(e,t){var r,t=1===arguments.length?(this._ensurePath("mod"),r=e,this._path):2!==arguments.length||Array.isArray(t)?(r=3===arguments.length?arguments.slice(1):t,e):(this._ensurePath("mod"),r=arguments.slice(),this._path);return(this._conditions[t]||(this._conditions[t]={})).$mod=r,this},e.exists=function(e,t){var r,n;return 0===arguments.length?(this._ensurePath("exists"),r=this._path,n=!0):1===arguments.length?n="boolean"==typeof e?(this._ensurePath("exists"),r=this._path,e):(r=e,!0):2===arguments.length&&(r=e,n=t),(this._conditions[r]||(this._conditions[r]={})).$exists=n,this},e.elemMatch=function(e,t){if(null===e)throw(0,d.newRxTypeError)("MQ2");var r,n,i;if("function"==typeof e)this._ensurePath("elemMatch"),n=this._path,r=e;else if((0,l.isObject)(e))this._ensurePath("elemMatch"),n=this._path,i=e;else if("function"==typeof t)n=e,r=t;else{if(!t||!(0,l.isObject)(t))throw(0,d.newRxTypeError)("MQ2");n=e,i=t}return r&&(r(i=new o),i=i._conditions),(this._conditions[n]||(this._conditions[n]={})).$elemMatch=i,this},e.sort=function(t){if(!t)return this;var e=typeof t;if(Array.isArray(t)){for(var r=t.length,n=0;n<t.length;++n){a=o=i=void 0;var i=this.options,o=t[n][0],a=t[n][1];if(i.sort=i.sort||[],!Array.isArray(i.sort))throw(0,d.newRxTypeError)("MQ8",{opts:i,field:o,value:a});i.sort.push([o,a])}return this}if(1===arguments.length&&"string"==e){r=(t=t.split(/\s+/)).length;for(var s=0;s<r;++s){var u,c=t[s];c&&(-1==(u="-"===c[0]?-1:1)&&(c=c.substring(1)),f(this.options,c,u))}return this}if((0,l.isObject)(t))return Object.keys(t).forEach(e=>f(this.options,e,t[e])),this;throw(0,d.newRxTypeError)("MQ3",{args:arguments})},e.merge=function(e){if(e){if(!a(e))throw(0,d.newRxTypeError)("MQ4",{source:e});e instanceof o?(e._conditions&&(0,l.merge)(this._conditions,e._conditions),e._fields&&(this._fields||(this._fields={}),(0,l.merge)(this._fields,e._fields)),e.options&&(this.options||(this.options={}),(0,l.merge)(this.options,e.options)),e._distinct&&(this._distinct=e._distinct)):(0,l.merge)(this._conditions,e)}return this},e.find=function(e){return a(e)&&this.merge(e),this},e._ensurePath=function(e){if(!this._path)throw(0,d.newRxError)("MQ5",{method:e})},e.toJSON=function(){var e={selector:this._conditions};return this.options.skip&&(e.skip=this.options.skip),this.options.limit&&(e.limit=this.options.limit),this.options.sort&&(e.sort=i(this.options.sort)),{query:e,path:this._path}},o}();function i(e){return Object.entries(e).map(([e,t])=>{return{[e]:1===t?"asc":"desc"}})}r.NoSqlQueryBuilderClass=n;e=["limit","skip","maxScan","batchSize","comment"],(r.OTHER_MANGO_ATTRIBUTES=e).forEach(function(t){n.prototype[t]=function(e){return this.options[t]=e,this}}),e=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function f(e,t,r){if(Array.isArray(e.sort))throw(0,d.newRxTypeError)("MQ6",{opts:e,field:t,value:r});if(r&&r.$meta)(e.sort||(e.sort={}))[t]={$meta:r.$meta};else{var n=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(n))throw Array.isArray(r)&&(r="["+r+"]"),(0,d.newRxTypeError)("MQ7",{field:t,value:r});n=e.sort||(e.sort={}),e=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");n[t]=parseInt(e,10)}}function a(e){return e instanceof n||(0,l.isObject)(e)}(r.OTHER_MANGO_OPERATORS=e).forEach(function(r){n.prototype[r]=function(){var e,t=1===arguments.length?(this._ensurePath(r),e=arguments[0],this._path):(e=arguments[1],arguments[0]);return(null===this._conditions[t]||"object"==typeof this._conditions[t]?this._conditions[t]:this._conditions[t]={})["$"+r]=e,this}})},{"../../../rx-error":531,"./mquery-utils":467}],469:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxReplicationState=r.REPLICATION_STATE_BY_COLLECTION=void 0,r.replicateRxCollection=function({replicationIdentifier:e,collection:t,deletedField:r="_deleted",pull:n,push:i,live:o=!0,retryTime:a=5e3,waitForLeadership:s=!0,autoStart:u=!0}){(0,f.addRxPlugin)(c.RxDBLeaderElectionPlugin);e=t.database.hashFunction([t.database.name,t.name,e].join("|")),e=new b(e,t,r,n,i,o,a,u);return v(s,e),e},r.startReplicationOnLeaderShip=v;var u=e("rxjs"),c=e("../leader-election"),l=e("../../plugins/utils"),n=e("../../replication-protocol"),s=e("../../rx-error"),d=e("./replication-helper"),i=e("../../rx-database-internal-store"),f=e("../../plugin"),p=e("../../rx-storage-helper"),h=e("../../overwritable"),m=e("../../hooks"),y=new WeakMap,b=(r.REPLICATION_STATE_BY_COLLECTION=y,function(){function e(e,t,r,n,i,o,a,s){this.subs=[],this.subjects={received:new u.Subject,send:new u.Subject,error:new u.Subject,canceled:new u.BehaviorSubject(!1),active:new u.BehaviorSubject(!1)},this.received$=this.subjects.received.asObservable(),this.send$=this.subjects.send.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.callOnStart=void 0,this.remoteEvents$=new u.Subject,this.replicationIdentifierHash=e,this.collection=t,this.deletedField=r,this.pull=n,this.push=i,this.live=o,this.retryTime=a,this.autoStart=s;(0,l.getFromMapOrCreate)(y,t,()=>[]).push(this),this.collection.onDestroy.push(()=>this.cancel()),Object.keys(this.subjects).forEach(e=>{Object.defineProperty(this,e+"$",{get:function(){return this.subjects[e].asObservable()}})});e=new Promise(e=>{this.callOnStart=e});this.startPromise=e}var t=e.prototype;return t.start=async function(){var a,o,e,t,r;this.isStopped()||(a=this.pull&&this.pull.modifier?this.pull.modifier:d.DEFAULT_MODIFIER,o=this.push&&this.push.modifier?this.push.modifier:d.DEFAULT_MODIFIER,e=this.collection.database,r=this.collection.name+"-rx-replication-"+this.replicationIdentifierHash,t=(0,n.getRxReplicationMetaInstanceSchema)(this.collection.schema.jsonSchema,(0,p.hasEncryption)(this.collection.schema.jsonSchema)),[r]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:e.name,collectionName:r,databaseInstanceToken:e.token,multiInstance:e.multiInstance,options:{},schema:t,password:e.password,devMode:h.overwritable.isDevMode()}),(0,i.addConnectedStorageToCollection)(this.collection,r,t)]),this.metaInstance=r,this.internalReplicationState=(0,n.replicateRxStorageInstance)({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:e.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifierHash,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe((0,u.mergeMap)(async e=>{return"RESYNC"===e||((e=(0,l.flatClone)(e)).documents=(0,d.handlePulledDocuments)(this.collection,this.deletedField,e.documents),e.documents=await Promise.all(e.documents.map(e=>a(e)))),e})),masterChangesSince:async(t,e)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var r,n=!1,i={};!n&&!this.isStopped();)try{i=await this.pull.handler(t,e),n=!0}catch(e){var o=(0,s.newRxError)("RC_PULL",{checkpoint:t,errors:(0,l.toArray)(e).map(e=>(0,l.errorToPlainJson)(e)),direction:"pull"});this.subjects.error.next(o),await(0,d.awaitRetry)(this.collection,(0,l.ensureNotFalsy)(this.retryTime))}return this.isStopped()?{checkpoint:null,documents:[]}:((r=(0,l.flatClone)(i)).documents=(0,d.handlePulledDocuments)(this.collection,this.deletedField,r.documents),r.documents=await Promise.all(r.documents.map(e=>a(e))),r)},masterWrite:async t=>{if(!this.push)return[];var e=!1,r=(await(0,m.runAsyncPluginHooks)("preReplicationMasterWrite",{rows:t,collection:this.collection}),await Promise.all(t.map(async e=>(e.newDocumentState=await o(e.newDocumentState),e.assumedMasterState&&(e.assumedMasterState=await o(e.assumedMasterState)),"_deleted"!==this.deletedField&&(e.newDocumentState=(0,d.swapDefaultDeletedTodeletedField)(this.deletedField,e.newDocumentState),e.assumedMasterState)&&(e.assumedMasterState=(0,d.swapDefaultDeletedTodeletedField)(this.deletedField,e.assumedMasterState)),e)))),n=null;for(0===r.length&&(e=!0,n=[]);!e&&!this.isStopped();)try{if(n=await this.push.handler(r),!Array.isArray(n))throw(0,s.newRxError)("RC_PUSH_NO_AR",{pushRows:t,direction:"push",args:{result:n}});e=!0}catch(e){var i=e.rxdb?e:(0,s.newRxError)("RC_PUSH",{pushRows:t,errors:(0,l.toArray)(e).map(e=>(0,l.errorToPlainJson)(e)),direction:"push"});this.subjects.error.next(i),await(0,d.awaitRetry)(this.collection,(0,l.ensureNotFalsy)(this.retryTime))}return this.isStopped()?[]:(await(0,m.runAsyncPluginHooks)("preReplicationMasterWriteDocumentsHandle",{result:n,collection:this.collection}),(0,d.handlePulledDocuments)(this.collection,this.deletedField,(0,l.ensureNotFalsy)(n)))}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(e=>{this.subjects.error.next(e)}),this.internalReplicationState.events.processed.down.subscribe(e=>this.subjects.received.next(e.document)),this.internalReplicationState.events.processed.up.subscribe(e=>{this.subjects.send.next(e.newDocumentState)}),(0,u.combineLatest)([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([e,t])=>{this.subjects.active.next(e||t)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:e=>{this.remoteEvents$.next(e)},error:e=>{this.subjects.error.next(e)}})),this.live||(await(0,n.awaitRxStorageReplicationFirstInSync)(this.internalReplicationState),await(0,n.awaitRxStorageReplicationInSync)(this.internalReplicationState),await this.cancel()),this.callOnStart())},t.isStopped=function(){return!!this.subjects.canceled.getValue()},t.awaitInitialReplication=async function(){return await this.startPromise,(0,n.awaitRxStorageReplicationFirstInSync)((0,l.ensureNotFalsy)(this.internalReplicationState))},t.awaitInSync=async function(){return await this.startPromise,await(0,n.awaitRxStorageReplicationFirstInSync)((0,l.ensureNotFalsy)(this.internalReplicationState)),await this.collection.database.requestIdlePromise(),await(0,n.awaitRxStorageReplicationInSync)((0,l.ensureNotFalsy)(this.internalReplicationState)),!0},t.reSync=function(){this.remoteEvents$.next("RESYNC")},t.emitEvent=function(e){this.remoteEvents$.next(e)},t.cancel=function(){var e;return this.isStopped()?l.PROMISE_RESOLVE_FALSE:(e=[],this.internalReplicationState&&(0,n.cancelRxStorageReplication)(this.internalReplicationState),this.metaInstance&&e.push((0,l.ensureNotFalsy)(this.internalReplicationState).checkpointQueue.then(()=>(0,l.ensureNotFalsy)(this.metaInstance).close())),this.subs.forEach(e=>e.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.send.complete(),Promise.all(e))},e}());function v(e,t){return(e&&t.collection.database.multiInstance?t.collection.database.waitForLeadership():l.PROMISE_RESOLVE_TRUE).then(()=>{t.isStopped()||t.autoStart&&t.start()})}r.RxReplicationState=b},{"../../hooks":432,"../../overwritable":435,"../../plugin":437,"../../plugins/utils":494,"../../replication-protocol":521,"../../rx-database-internal-store":527,"../../rx-error":531,"../../rx-storage-helper":537,"../leader-election":457,"./replication-helper":470,rxjs:552}],470:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MODIFIER=void 0,r.awaitRetry=function(e,t){if("undefined"==typeof window||"object"!=typeof window||void 0===window.addEventListener||navigator.onLine)return e.promiseWait(t);var r,n=new Promise(e=>{r=()=>{window.removeEventListener("online",r),e()},window.addEventListener("online",r)});return Promise.race([n,e.promiseWait(t)]).then(()=>{window.removeEventListener("online",r)})},r.handlePulledDocuments=function(r,n,e){return e.map(e=>{var e=(0,i.flatClone)(e),t=("_deleted"!==n?(t=!!e[n],e._deleted=t,delete e[n]):e._deleted=!!e._deleted,r.schema.primaryPath);return e[t]=(0,o.getComposedPrimaryKeyOfDocumentData)(r.schema.jsonSchema,e),e})},r.swapDefaultDeletedTodeletedField=function(e,t){{var r;return"_deleted"===e||(r=!!(t=(0,i.flatClone)(t))._deleted,t[e]=r,delete t._deleted),t}};var i=e("../../plugins/utils"),o=e("../../rx-schema-helper");r.DEFAULT_MODIFIER=e=>Promise.resolve(e)},{"../../plugins/utils":494,"../../rx-schema-helper":535}],471:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageDexieStatics=r.RX_STORAGE_NAME_DEXIE=r.DEXIE_PIPE_SUBSTITUTE=r.DEXIE_DOCS_TABLE_NAME=r.DEXIE_DELETED_DOCS_TABLE_NAME=r.DEXIE_CHANGES_TABLE_NAME=void 0,r.closeDexieDb=async function(e){var t=await e,r=h.get(e)-1;0==r?(t.dexieDb.close(),h.delete(e)):h.set(e,r)},r.dexieReplaceIfStartsWithPipe=o,r.dexieReplaceIfStartsWithPipeRevert=a,r.ensureNoBooleanIndex=function(r){var n;r.indexes&&(n=new Set,r.indexes.forEach(t=>{(0,u.toArray)(t).forEach(e=>{if(!n.has(e)&&(n.add(e),"boolean"===(0,c.getSchemaByObjectPath)(r,e).type))throw(0,i.newRxError)("DXE1",{schema:r,index:t,field:e})})}))},r.fromDexieToStorage=function r(n){{var i;return n&&"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n?Array.isArray(n)?n.map(e=>r(e)):"object"==typeof n?(i={},Object.entries(n).forEach(([e,t])=>{"object"!=typeof t&&!Array.isArray(n)||(t=r(t)),i[a(e)]=t}),i):void 0:n}},r.fromStorageToDexie=function r(e){{var n;return e&&"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?Array.isArray(e)?e.map(e=>r(e)):"object"==typeof e?(n={},Object.entries(e).forEach(([e,t])=>{"object"==typeof t&&(t=r(t)),n[o(e)]=t}),n):void 0:e}},r.getDexieDbWithTables=function(e,t,r,n){var i=(0,c.getPrimaryFieldOfPrimaryKey)(n.primaryKey),o="rxdb-dexie-"+e+"--"+n.version+"--"+t,a=(0,u.getFromMapOrCreate)(p,o,()=>{var e=(async()=>{var e=(0,u.flatClone)(r),e=(e.autoOpen=!1,new s.Dexie(o,e)),t={[l]:m(n),[f]:"++sequence, id",[d]:i+",_meta.lwt,[_meta.lwt+"+i+"]"};return e.version(1).stores(t),await e.open(),{dexieDb:e,dexieTable:e[l],dexieDeletedTable:e[d]}})();return p.set(o,a),h.set(a,0),e});return a},r.getDexieStoreSchema=m,r.getDocsInDb=async function(e,t){var e=await e,[e,t]=await Promise.all([e.dexieTable.bulkGet(t),e.dexieDeletedTable.bulkGet(t)]),r=t.slice(0);return e.forEach((e,t)=>{e&&(r[t]=e)}),r};var s=e("dexie"),u=e("../utils"),i=e("../../rx-error"),c=e("../../rx-schema-helper"),e=e("../../rx-storage-statics"),l="docs",d=(r.DEXIE_DOCS_TABLE_NAME=l,"deleted-docs"),f=(r.DEXIE_DELETED_DOCS_TABLE_NAME=d,"changes"),e=(r.DEXIE_CHANGES_TABLE_NAME=f,r.RX_STORAGE_NAME_DEXIE="dexie",e.RxStorageDefaultStatics),p=(r.RxStorageDexieStatics=e,new Map),h=new Map;var n="__";function o(e){var t=e.split(".");return 1<t.length?t.map(e=>o(e)).join("."):e.startsWith("|")?(t=e.substring(1),n+t):e}function a(e){var t=e.split(".");return 1<t.length?t.map(e=>a(e)).join("."):e.startsWith(n)?"|"+e.substring(n.length):e}function m(e){var t=[],r=(0,c.getPrimaryFieldOfPrimaryKey)(e.primaryKey);return t.push([r]),e.indexes&&e.indexes.forEach(e=>{e=(0,u.toArray)(e);t.push(e)}),t.push(["_meta.lwt",r]),(t=t.map(e=>e.map(e=>o(e)))).map(e=>1===e.length?e[0]:"["+e.join("+")+"]").join(", ")}r.DEXIE_PIPE_SUBSTITUTE=n},{"../../rx-error":531,"../../rx-schema-helper":535,"../../rx-storage-statics":539,"../utils":494,dexie:115}],472:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dexieCount=async function(n,e){var t=await n.internals,e=e.queryPlan,i=e.index,o=p(e,t.dexieDb._options.IDBKeyRange),a=-1;return await t.dexieDb.transaction("r",t.dexieTable,async e=>{var t,e=e.idbtrans.objectStore(f.DEXIE_DOCS_TABLE_NAME),r=(1===i.length&&i[0]===n.primaryPath?e:(t=1===i.length?(0,f.dexieReplaceIfStartsWithPipe)(i[0]):"["+i.map(e=>(0,f.dexieReplaceIfStartsWithPipe)(e)).join("+")+"]",e.index(t))).count(o);a=await new Promise((e,t)=>{r.onsuccess=function(){e(r.result)},r.onerror=e=>t(e)})}),a},r.dexieQuery=async function(r,e){var t=await r.internals,n=e.query,i=n.skip||0,n=n.limit||1/0,o=i+n,a=e.queryPlan,s=!1;a.selectorSatisfiedByIndex||(s=(0,d.getQueryMatcher)(r.schema,e.query));var u=p(a,t.dexieDb._options.IDBKeyRange),c=a.index,l=[];await t.dexieDb.transaction("r",t.dexieTable,async e=>{var t,e=e.idbtrans.objectStore(f.DEXIE_DOCS_TABLE_NAME),n=(1===c.length&&c[0]===r.primaryPath?e:(t=1===c.length?(0,f.dexieReplaceIfStartsWithPipe)(c[0]):"["+c.map(e=>(0,f.dexieReplaceIfStartsWithPipe)(e)).join("+")+"]",e.index(t))).openCursor(u);await new Promise(r=>{n.onsuccess=function(e){var t,e=e.target.result;!e||((t=(0,f.fromDexieToStorage)(e.value))._deleted||s&&!s(t)||l.push(t),a.sortFieldsSameAsIndexFields&&l.length===o)?r():e.continue()}})}),a.sortFieldsSameAsIndexFields||(n=(0,d.getSortComparator)(r.schema,e.query),l=l.sort(n));return{documents:l=l.slice(i,o)}},r.getKeyRangeByQueryPlan=p,r.mapKeyForKeyRange=o;var n=e("../../query-planner"),d=e("../../rx-query-helper"),f=e("./dexie-helper");function o(e){return e===n.INDEX_MIN?-1/0:e}function p(e,t){if(!t){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var r,n=e.startKeys.map(o),i=e.endKeys.map(o);return 1===e.index.length?(r=n[0]===i[0],t.bound(n[0],i[0],!r&&!e.inclusiveStart,!r&&!e.inclusiveEnd)):t.bound(n,i,!e.inclusiveStart,!e.inclusiveEnd)}},{"../../query-planner":516,"../../rx-query-helper":532,"./dexie-helper":471}],473:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./rx-storage-dexie"),i=(Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),e("./rx-storage-instance-dexie")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("./dexie-helper")),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./dexie-query"));Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})})},{"./dexie-helper":471,"./dexie-query":472,"./rx-storage-dexie":474,"./rx-storage-instance-dexie":475}],474:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageDexie=void 0,r.getRxStorageDexie=function(e={}){return new a(e)};var n=e("./dexie-helper"),i=e("./rx-storage-instance-dexie"),o=e("../../rx-storage-helper"),a=function(){function e(e){this.name=n.RX_STORAGE_NAME_DEXIE,this.statics=n.RxStorageDexieStatics,this.settings=e}return e.prototype.createStorageInstance=function(e){return(0,o.ensureRxStorageInstanceParamsAreCorrect)(e),(0,n.ensureNoBooleanIndex)(e.schema),(0,i.createDexieStorageInstance)(this,e,this.settings)},e}();r.RxStorageDexie=a},{"../../rx-storage-helper":537,"./dexie-helper":471,"./rx-storage-instance-dexie":475}],475:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageInstanceDexie=void 0,r.createDexieStorageInstance=function(e,t,r){var n=(0,f.getDexieDbWithTables)(t.databaseName,t.collectionName,r,t.schema),e=new o(e,t.databaseName,t.collectionName,t.schema,n,t.options,r);return(0,i.addRxStorageMultiInstanceSupport)(f.RX_STORAGE_NAME_DEXIE,t,e),Promise.resolve(e)};var s=e("rxjs"),d=e("../utils"),f=e("./dexie-helper"),n=e("./dexie-query"),u=e("../../rx-schema-helper"),p=e("../../rx-storage-helper"),i=e("../../rx-storage-multiinstance"),h=e("../../rx-error"),c=(0,d.now)(),o=function(){function e(e,t,r,n,i,o,a){this.changes$=new s.Subject,this.instanceId=c++,this.closed=!1,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=i,this.options=o,this.settings=a,this.primaryPath=(0,u.getPrimaryFieldOfPrimaryKey)(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(o,a){m(this),o.forEach(e=>{if(!e.document._rev||e.previous&&!e.previous._rev)throw(0,h.newRxError)("SNH",{args:{row:e}})});var s,e,t,u=await this.internals,c={success:{},error:{}},l=o.map(e=>e.document[this.primaryPath]);return await u.dexieDb.transaction("rw",u.dexieTable,u.dexieDeletedTable,async()=>{var t=new Map,r=((await(0,f.getDocsInDb)(this.internals,l)).forEach(e=>{e=e&&(0,f.fromDexieToStorage)(e);return e&&t.set(e[this.primaryPath],e),e}),s=(0,p.categorizeBulkWriteRows)(this,this.primaryPath,t,o,a),c.error=s.errors,[]),n=[],i=[],e=[];s.bulkInsertDocs.forEach(e=>{var t=e.document[this.primaryPath];c.success[t]=e.document,r.push(e.document)}),s.bulkUpdateDocs.forEach(e=>{var t=e.document[this.primaryPath];if(c.success[t]=e.document,e.document._deleted&&e.previous&&!e.previous._deleted)n.push(t),i.push(e.document);else if(e.document._deleted&&e.previous&&e.previous._deleted)i.push(e.document);else{if(e.document._deleted)throw(0,h.newRxError)("SNH",{args:{row:e}});r.push(e.document)}}),await Promise.all([0<r.length?u.dexieTable.bulkPut(r.map(e=>(0,f.fromStorageToDexie)(e))):d.PROMISE_RESOLVE_VOID,0<n.length?u.dexieTable.bulkDelete(n):d.PROMISE_RESOLVE_VOID,0<i.length?u.dexieDeletedTable.bulkPut(i.map(e=>(0,f.fromStorageToDexie)(e))):d.PROMISE_RESOLVE_VOID,0<e.length?u.dexieDeletedTable.bulkDelete(e):d.PROMISE_RESOLVE_VOID])}),0<(s=(0,d.ensureNotFalsy)(s)).eventBulk.events.length&&(e=(0,d.ensureNotFalsy)(s.newestRow).document,s.eventBulk.checkpoint={id:e[this.primaryPath],lwt:e._meta.lwt},t=(0,d.now)(),s.eventBulk.events.forEach(e=>e.endTime=t),this.changes$.next(s.eventBulk)),c},t.findDocumentsById=async function(e,n){m(this);var t=await this.internals,i={};return await t.dexieDb.transaction("r",t.dexieTable,t.dexieDeletedTable,async()=>{var r=n?await(0,f.getDocsInDb)(this.internals,e):await t.dexieTable.bulkGet(e);e.forEach((e,t)=>{t=r[t];!t||t._deleted&&!n||(i[e]=(0,f.fromDexieToStorage)(t))})}),i},t.query=function(e){return m(this),(0,n.dexieQuery)(this,e)},t.count=async function(e){return e.queryPlan.selectorSatisfiedByIndex?{count:await(0,n.dexieCount)(this,e),mode:"fast"}:{count:(await(0,n.dexieQuery)(this,e)).documents.length,mode:"slow"}},t.getChangedDocumentsSince=async function(t,e){m(this);var r=e?e.lwt:d.RX_META_LWT_MINIMUM,n=e?e.id:"",i=await this.internals,[i,o]=await Promise.all([i.dexieTable,i.dexieDeletedTable].map(async e=>{return(await e.where("[_meta.lwt+"+this.primaryPath+"]").above([r,n]).limit(t).toArray()).map(e=>(0,f.fromDexieToStorage)(e))})),i=i.slice(0),o=((0,d.appendToArray)(i,o),i=(i=(0,d.sortDocumentsByLastWriteTime)(this.primaryPath,i)).slice(0,t),(0,d.lastOfArray)(i));return{documents:i,checkpoint:o?{id:o[this.primaryPath],lwt:o._meta.lwt}:e||{id:"",lwt:0}}},t.remove=async function(){m(this);var e=await this.internals;return await Promise.all([e.dexieDeletedTable.clear(),e.dexieTable.clear()]),this.close()},t.changeStream=function(){return m(this),this.changes$.asObservable()},t.cleanup=async function(t){m(this);var r=await this.internals;return await r.dexieDb.transaction("rw",r.dexieDeletedTable,async()=>{var e=(0,d.now)()-t,e=(await r.dexieDeletedTable.where("_meta.lwt").below(e).toArray()).map(e=>e[this.primaryPath]);await r.dexieDeletedTable.bulkDelete(e)}),!0},t.getAttachmentData=function(e,t,r){throw m(this),new Error("Attachments are not implemented in the dexie RxStorage. Make a pull request.")},t.close=function(){return m(this),this.closed=!0,this.changes$.complete(),(0,f.closeDexieDb)(this.internals),d.PROMISE_RESOLVE_VOID},t.conflictResultionTasks=function(){return new s.Subject},t.resolveConflictResultionTask=async function(e){},e}();function m(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}r.RxStorageInstanceDexie=o},{"../../rx-error":531,"../../rx-schema-helper":535,"../../rx-storage-helper":537,"../../rx-storage-multiinstance":538,"../utils":494,"./dexie-helper":471,"./dexie-query":472,rxjs:552}],476:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./rx-storage-lokijs"),i=(Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),e("./lokijs-helper")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("./rx-storage-instance-loki"));Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})})},{"./lokijs-helper":478,"./rx-storage-instance-loki":479,"./rx-storage-lokijs":480}],477:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LokiSaveQueue=void 0;var i=e("../utils"),e=function(){function e(e,t){this.writesSinceLastRun=0,this.saveQueue=i.PROMISE_RESOLVE_VOID,this.saveQueueC=0,this.lokiDatabase=e,this.databaseSettings=t}var t=e.prototype;return t.addWrite=function(){this.writesSinceLastRun=this.writesSinceLastRun+1,this.run()},t.run=function(){return!this.databaseSettings.adapter||2<this.saveQueueC||(this.saveQueueC=this.saveQueueC+1,this.saveQueue=this.saveQueue.then(async()=>{var n;if((await(0,i.requestIdlePromise)(),0!==this.writesSinceLastRun)&&(await(0,i.requestIdlePromise)().then(()=>(0,i.requestIdlePromise)()),0!==this.writesSinceLastRun))return n=this.writesSinceLastRun,this.writesSinceLastRun=0,new Promise((t,r)=>{this.lokiDatabase.saveDatabase(e=>{e?(this.writesSinceLastRun=this.writesSinceLastRun+n,r(e)):(this.databaseSettings.autosaveCallback&&this.databaseSettings.autosaveCallback(),t())})})}).catch(()=>{}).then(()=>{this.saveQueueC=this.saveQueueC-1})),this.saveQueue},e}();r.LokiSaveQueue=e},{"../utils":494}],478:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RX_STORAGE_NAME_LOKIJS=r.OPEN_LOKIJS_STORAGE_INSTANCES=r.LOKI_KEY_OBJECT_BROADCAST_CHANNEL_MESSAGE_TYPE=r.LOKI_BROADCAST_CHANNEL_MESSAGE_TYPE=r.LOKIJS_COLLECTION_DEFAULT_OPTIONS=r.CHANGES_COLLECTION_SUFFIX=void 0,r.closeLokiCollections=async function(e,t){var n=await m.get(e);n&&(await n.saveQueue.run(),t.forEach(e=>{e=e.name;delete n.collections[e]}),0===Object.keys(n.collections).length)&&(m.delete(e),n.unloads.forEach(e=>e.remove()),await new Promise((t,r)=>{n.database.close(e=>{e?r(e):t()})}))},r.getLokiDatabase=function(a,s){return(0,l.getFromMapOrCreate)(m,a,()=>{var o=!!s.adapter;return(async()=>{var e,t=o?"adapter":"memory",n=(s.persistenceMethod&&(t=s.persistenceMethod),Object.assign({autoload:o,persistenceMethod:t,verbose:!0},s,{autoload:!1,autosave:!1,throttledSaves:!1})),i=new u.default(a+".db",(0,l.flatClone)(n)),r=new d.LokiSaveQueue(i,n),t=(o&&(e=new Promise((t,r)=>{try{i.loadDatabase({recursiveWait:!1},e=>{n.autoloadCallback&&n.autoloadCallback(e),e?r(e):t()})}catch(e){r(e)}}),r.saveQueue=r.saveQueue.then(()=>e),await e),[]);return o&&t.push((0,c.add)(()=>r.run())),{database:i,databaseSettings:n,saveQueue:r,collections:{},unloads:t}})()})},r.getLokiLeaderElector=function(e,t,r){e=(0,o.getBroadcastChannelReference)(e,r,t);return(0,s.getLeaderElectorByBroadcastChannel)(e)},r.getLokiSortComparator=function(e,t){var r;if(t.sort)return r=t.sort,(n,i)=>{var o=0;if(r.find(e=>{var t=Object.keys(e)[0],e="asc"===Object.values(e)[0]?1:-1,r=(0,l.getProperty)(n,t),t=(0,l.getProperty)(i,t);return r!==t&&(o=t<r?e:-1*e,!0)}),o)return o;throw(0,a.newRxError)("SNH",{args:{query:t,a:n,b:i}})};throw(0,a.newRxError)("SNH",{query:t})},r.handleRemoteRequest=async function(e,t){if(t.type===p&&t.requestId&&t.databaseName===e.databaseName&&t.collectionName===e.collectionName&&!t.response){var r,n=t.operation,i=t.params,o=!1;try{r=await e[n](...i)}catch(e){console.dir(e),o=!0,r=e}n={response:!0,requestId:t.requestId,databaseName:e.databaseName,collectionName:e.collectionName,result:r,isError:o,type:t.type};(0,l.ensureNotFalsy)(e.internals.leaderElector).broadcastChannel.postMessage(n)}},r.mustUseLocalState=async function(e){if(e.closed)throw(0,a.newRxError)("SNH",{args:{instanceClosed:e.closed,databaseName:e.databaseName,collectionName:e.collectionName}});if(e.internals.localState)return e.internals.localState;var t=(0,l.ensureNotFalsy)(e.internals.leaderElector);if(await y(t),e.internals.localState)return e.internals.localState;return!(!t.isLeader||e.internals.localState)&&(e.internals.localState=(0,i.createLokiLocalState)({databaseInstanceToken:e.databaseInstanceToken,databaseName:e.databaseName,collectionName:e.collectionName,options:e.options,schema:e.schema,multiInstance:!!e.internals.leaderElector,devMode:f.overwritable.isDevMode()},e.databaseSettings),(0,l.ensureNotFalsy)(e.internals.localState))},r.requestRemoteInstance=async function(t,r,n){var i,o,a="function"==typeof t.query?p:h,e=(0,l.ensureNotFalsy)(t.internals.leaderElector),s=(await y(e),e.broadcastChannel),e=new Promise(t=>{i=e=>{"leader"===e.context&&"death"===e.action&&t({retry:!0})},s.addEventListener("internal",i)}),u=(0,l.randomCouchString)(12),c=new Promise((t,e)=>{o=e=>{e.type===a&&!0===e.response&&e.requestId===u&&(e.isError?t({retry:!1,error:e.result}):t({retry:!1,result:e.result}))},s.addEventListener("message",o)});return s.postMessage({response:!1,type:a,operation:r,params:n,requestId:u,databaseName:t.databaseName,collectionName:t.collectionName}),Promise.race([e,c]).then(e=>{if(s.removeEventListener("message",o),s.removeEventListener("internal",i),e.retry)return t[r](...n);if(e.error)throw e.error;return e.result})},r.stripLokiKey=function(e){if(!e.$loki)return e;e=(0,l.flatClone)(e);e.$lastWriteAt&&(e._meta={lwt:e.$lastWriteAt},delete e.$lastWriteAt);return delete e.$loki,e},r.transformRegexToRegExp=function n(i){if("object"!=typeof i||null===i)return i;var e=Object.keys(i);var o={};e.forEach(e=>{var t,r=i[e];"$options"!==e&&("$regex"!==e||r instanceof RegExp?Array.isArray(r)?o[e]=r.map(e=>n(e)):o[e]=n(r):(t=i.$options,o[e]=new RegExp(r,t)))});return o},r.waitUntilHasLeader=y,e("./rx-storage-instance-loki")),u=n(e("lokijs")),c=e("unload"),l=e("../utils"),d=e("./loki-save-queue"),a=e("../../rx-error"),o=e("../../rx-storage-multiinstance"),s=e("../leader-election"),f=e("../../overwritable"),p=(r.CHANGES_COLLECTION_SUFFIX="-rxdb-changes","rxdb-lokijs-remote-request"),h=(r.LOKI_BROADCAST_CHANNEL_MESSAGE_TYPE=p,"rxdb-lokijs-remote-request-key-object");r.LOKI_KEY_OBJECT_BROADCAST_CHANNEL_MESSAGE_TYPE=h;r.RX_STORAGE_NAME_LOKIJS="lokijs";var n=new Set,m=(r.OPEN_LOKIJS_STORAGE_INSTANCES=n,r.LOKIJS_COLLECTION_DEFAULT_OPTIONS={disableChangesApi:!0,disableMeta:!0,disableDeltaChangesApi:!0,disableFreeze:!0,cloneMethod:"shallow-assign",clone:!1,transactional:!1,autoupdate:!1},new Map);async function y(e){for(e.awaitLeadership().catch(()=>{}),await(0,l.promiseWait)(0);;){if(await e.hasLeader()||e.broadcastChannel.isClosed||e.isDead)return;e.applyOnce?await e.applyOnce():e.awaitLeadership().catch(()=>{}),await(0,l.promiseWait)(20)}}},{"../../overwritable":435,"../../rx-error":531,"../../rx-storage-multiinstance":538,"../leader-election":457,"../utils":494,"./loki-save-queue":477,"./rx-storage-instance-loki":479,"@babel/runtime/helpers/interopRequireDefault":544,lokijs:157,unload:781}],479:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageInstanceLoki=void 0,r.createLokiLocalState=y,r.createLokiStorageInstance=async function(e,t,r){var n={},i={};{var o;t.multiInstance?(o=(0,d.getLokiLeaderElector)(t.databaseInstanceToken,i,t.databaseName),n.leaderElector=o):(n.localState=y(t,r),await n.localState)}var a=new m(t.databaseInstanceToken,e,t.databaseName,t.collectionName,t.schema,n,t.options,r);{var s,u;(0,p.addRxStorageMultiInstanceSupport)(d.RX_STORAGE_NAME_LOKIJS,t,a,n.leaderElector?n.leaderElector.broadcastChannel:void 0),t.multiInstance&&(s=a.close.bind(a),a.close=function(){return(0,p.removeBroadcastChannelReference)(t.databaseInstanceToken,i),s()},u=a.remove.bind(a),a.remove=function(){return(0,p.removeBroadcastChannelReference)(t.databaseInstanceToken,i),u()},(0,l.ensureNotFalsy)(n.leaderElector).awaitLeadership().then(()=>{a.closed||(0,d.mustUseLocalState)(a)}))}return a};var c=e("rxjs"),l=e("../utils"),s=e("../../rx-error"),d=e("./lokijs-helper"),f=e("../../rx-schema-helper"),u=e("../../rx-storage-helper"),p=e("../../rx-storage-multiinstance"),h=(0,l.now)(),m=function(){function e(e,t,r,n,i,o,a,s){var u;this.changes$=new c.Subject,this.instanceId=h++,this.closed=!1,this.databaseInstanceToken=e,this.storage=t,this.databaseName=r,this.collectionName=n,this.schema=i,this.internals=o,this.options=a,this.databaseSettings=s,this.primaryPath=(0,f.getPrimaryFieldOfPrimaryKey)(this.schema.primaryKey),d.OPEN_LOKIJS_STORAGE_INSTANCES.add(this),this.internals.leaderElector&&(u={bulkWrite:this.bulkWrite.bind(this),changeStream:this.changeStream.bind(this),cleanup:this.cleanup.bind(this),close:this.close.bind(this),query:this.query.bind(this),count:this.count.bind(this),findDocumentsById:this.findDocumentsById.bind(this),collectionName:this.collectionName,databaseName:this.databaseName,conflictResultionTasks:this.conflictResultionTasks.bind(this),getAttachmentData:this.getAttachmentData.bind(this),getChangedDocumentsSince:this.getChangedDocumentsSince.bind(this),internals:this.internals,options:this.options,remove:this.remove.bind(this),resolveConflictResultionTask:this.resolveConflictResultionTask.bind(this),schema:this.schema},this.internals.leaderElector.awaitLeadership().then(()=>{(0,l.ensureNotFalsy)(this.internals.leaderElector).broadcastChannel.addEventListener("message",e=>(0,d.handleRemoteRequest)(u,e))}).catch(()=>{}))}var t=e.prototype;return t.bulkWrite=async function(e,t){if(0===e.length)throw(0,s.newRxError)("P2",{args:{documentWrites:e}});var n,r,i,o,a=await(0,d.mustUseLocalState)(this);return a?(n={success:{},error:{}},r=new Map,i=new Map,e.forEach(e=>{var e=e.document[this.primaryPath],t=a.collection.by(this.primaryPath,e);t&&(i.set(e,t),r.set(e,(0,d.stripLokiKey)(t)))}),t=(0,u.categorizeBulkWriteRows)(this,this.primaryPath,r,e,t),n.error=t.errors,t.bulkInsertDocs.forEach(e=>{var t=e.document[this.primaryPath];a.collection.insert((0,l.flatClone)(e.document)),n.success[t]=e.document}),t.bulkUpdateDocs.forEach(e=>{var t=e.document[this.primaryPath],r=(0,l.getFromMapOrThrow)(i,t),r=Object.assign({},e.document,{$loki:r.$loki});a.collection.update(r),n.success[t]=e.document}),a.databaseState.saveQueue.addWrite(),0<t.eventBulk.events.length&&(o=(0,l.ensureNotFalsy)(t.newestRow).document,t.eventBulk.checkpoint={id:o[this.primaryPath],lwt:o._meta.lwt},this.changes$.next(t.eventBulk)),n):(0,d.requestRemoteInstance)(this,"bulkWrite",[e])},t.findDocumentsById=async function(e,r){var n,i=await(0,d.mustUseLocalState)(this);return i?(n={},e.forEach(e=>{var t=i.collection.by(this.primaryPath,e);!t||t._deleted&&!r||(n[e]=(0,d.stripLokiKey)(t))}),n):(0,d.requestRemoteInstance)(this,"findDocumentsById",[e,r])},t.query=async function(e){var t=await(0,d.mustUseLocalState)(this);if(!t)return(0,d.requestRemoteInstance)(this,"query",[e]);e.selector&&((e=(0,l.flatClone)(e)).selector=(0,d.transformRegexToRegExp)(e.selector));t=t.collection.chain().find(e.selector);return e.sort&&(t=t.sort((0,d.getLokiSortComparator)(this.schema,e))),e.skip&&(t=t.offset(e.skip)),{documents:(t=e.limit?t.limit(e.limit):t).data().map(e=>(0,d.stripLokiKey)(e))}},t.count=async function(e){return{count:(await this.query(e)).documents.length,mode:"fast"}},t.getAttachmentData=function(e,t,r){throw new Error("Attachments are not implemented in the lokijs RxStorage. Make a pull request.")},t.getChangedDocumentsSince=async function(e,t){var r,n=await(0,d.mustUseLocalState)(this);return n?(r=t?t.lwt:l.RX_META_LWT_MINIMUM,r=(n=n.collection.chain().find({"_meta.lwt":{$gte:r}}).sort((0,l.getSortDocumentsByLastWriteTimeComparator)(this.primaryPath)).data())[0],t&&r&&r[this.primaryPath]===t.id&&r._meta.lwt===t.lwt&&n.shift(),n=n.slice(0,e),r=(0,l.lastOfArray)(n),{documents:n.map(e=>(0,d.stripLokiKey)(e)),checkpoint:r?{id:r[this.primaryPath],lwt:r._meta.lwt}:t||{id:"",lwt:0}}):(0,d.requestRemoteInstance)(this,"getChangedDocumentsSince",[e,t])},t.changeStream=function(){return this.changes$.asObservable()},t.cleanup=async function(e){var t,r=await(0,d.mustUseLocalState)(this);return r?(t=(0,l.now)()-e,0<(t=r.collection.chain().find({_deleted:!0,"_meta.lwt":{$lt:t}}).limit(10).data()).length&&(r.collection.remove(t),r.databaseState.saveQueue.addWrite()),10!==t.length):(0,d.requestRemoteInstance)(this,"cleanup",[e])},t.close=async function(){if(this.closed)return Promise.reject(new Error("already closed"));var e;this.closed=!0,this.changes$.complete(),d.OPEN_LOKIJS_STORAGE_INSTANCES.delete(this),this.internals.localState&&(e=await this.internals.localState,await(await(0,d.getLokiDatabase)(this.databaseName,this.databaseSettings)).saveQueue.run(),await(0,d.closeLokiCollections)(this.databaseName,[e.collection]))},t.remove=async function(){var e=await(0,d.mustUseLocalState)(this);return e?(e.databaseState.database.removeCollection(e.collection.name),await e.databaseState.saveQueue.run(),this.close()):(0,d.requestRemoteInstance)(this,"remove",[])},t.conflictResultionTasks=function(){return new c.Subject},t.resolveConflictResultionTask=async function(e){},e}();async function y(e,t){e.options||(e.options={});var t=await(0,d.getLokiDatabase)(e.databaseName,t),r=[],n=(e.schema.indexes&&e.schema.indexes.forEach(e=>{(0,l.isMaybeReadonlyArray)(e)||r.push(e)}),(0,f.getPrimaryFieldOfPrimaryKey)(e.schema.primaryKey)),i=(r.push(n),e.collectionName+"-"+e.schema.version),n=Object.assign({},i,{indices:r,unique:[n]},d.LOKIJS_COLLECTION_DEFAULT_OPTIONS),i=t.database.addCollection(i,n);return t.collections[e.collectionName]=i,{databaseState:t,collection:i}}r.RxStorageInstanceLoki=m},{"../../rx-error":531,"../../rx-schema-helper":535,"../../rx-storage-helper":537,"../../rx-storage-multiinstance":538,"../utils":494,"./lokijs-helper":478,rxjs:552}],480:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageLokiStatics=r.RxStorageLoki=void 0,r.getRxStorageLoki=function(e={}){return new u(e)};var n=e("../utils"),i=e("./rx-storage-instance-loki"),o=e("./lokijs-helper"),a=e("../../rx-storage-helper"),s={prepareQuery(e,t){return t=(0,n.flatClone)(t),0<Object.keys((0,n.ensureNotFalsy)(t.selector)).length?t.selector={$and:[{_deleted:!1},t.selector]}:t.selector={_deleted:!1},t},checkpointSchema:e("../../rx-schema-helper").DEFAULT_CHECKPOINT_SCHEMA},u=(r.RxStorageLokiStatics=s,function(){function e(e){this.name=o.RX_STORAGE_NAME_LOKIJS,this.statics=s,this.leaderElectorByLokiDbName=new Map,this.databaseSettings=e}return e.prototype.createStorageInstance=function(e){return(0,a.ensureRxStorageInstanceParamsAreCorrect)(e),(0,i.createLokiStorageInstance)(this,e,this.databaseSettings)},e}());r.RxStorageLoki=u},{"../../rx-schema-helper":535,"../../rx-storage-helper":537,"../utils":494,"./lokijs-helper":478,"./rx-storage-instance-loki":479}],481:[function(e,t,r){"use strict";function o(e,t,r,n,i){for(var o=i+1;n<=i;){var a=n+i>>>1,s=e[a];0<=(void 0!==r?r(s,t):s-t)?i=(o=a)-1:n=1+a}return o}function a(e,t,r,n,i){for(var o=i+1;n<=i;){var a=n+i>>>1,s=e[a];0<(void 0!==r?r(s,t):s-t)?i=(o=a)-1:n=1+a}return o}function s(e,t,r,n,i){for(var o=n-1;n<=i;){var a=n+i>>>1,s=e[a];(void 0!==r?r(s,t):s-t)<0?n=1+(o=a):i=a-1}return o}function u(e,t,r,n,i){for(var o=n-1;n<=i;){var a=n+i>>>1,s=e[a];(void 0!==r?r(s,t):s-t)<=0?n=1+(o=a):i=a-1}return o}function c(e,t,r,n,i){for(;n<=i;){var o=n+i>>>1,a=e[o],a=void 0!==r?r(a,t):a-t;if(0===a)return o;a<=0?n=1+o:i=o-1}return-1}function l(e,t,r,n,i,o){return"function"==typeof r?o(e,t,r,void 0===n?0:0|n,void 0===i?e.length-1:0|i):o(e,t,void 0,void 0===r?0:0|r,void 0===n?e.length-1:0|n)}Object.defineProperty(r,"__esModule",{value:!0}),r.boundEQ=function(e,t,r,n,i){return l(e,t,r,n,i,c)},r.boundGE=function(e,t,r,n,i){return l(e,t,r,n,i,o)},r.boundGT=function(e,t,r,n,i){return l(e,t,r,n,i,a)},r.boundLE=function(e,t,r,n,i){return l(e,t,r,n,i,u)},r.boundLT=function(e,t,r,n,i){return l(e,t,r,n,i,s)}},{}],482:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getRxStorageMemory:!0},i=(r.getRxStorageMemory=function(r={}){return{name:"memory",statics:a.RxStorageDefaultStatics,collectionStates:d,createStorageInstance(e){(0,i.ensureRxStorageInstanceParamsAreCorrect)(e);var t=Object.assign({},r,e.options);return(0,o.createMemoryStorageInstance)(this,e,t)}}},e("../../rx-storage-helper")),o=e("./rx-storage-instance-memory"),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("../../rx-storage-statics")),s=e("./memory-helper"),u=(Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),e("./binary-search-bounds")),c=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./memory-types")),l=(Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),e("./memory-indexes")),d=(Object.keys(l).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),new Map)},{"../../rx-storage-helper":537,"../../rx-storage-statics":539,"./binary-search-bounds":481,"./memory-helper":483,"./memory-indexes":484,"./memory-types":485,"./rx-storage-instance-memory":486}],483:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.attachmentMapKey=function(e,t){return e+"||"+t},r.compareDocsWithIndex=m,r.ensureNotRemoved=function(e){if(e.internals.removed)throw new Error("removed")},r.getMemoryCollectionKey=function(e,t,r){return[e,t,r].join("--memory--")},r.putWriteRowToState=function(e,t,r,n,i){t.documents.set(e,n.document);for(var o=0;o<r.length;++o){var a=r[o],s=a.docsWithIndex,u=a.getIndexableString(n.document),c=(0,d.pushAtSortPosition)(s,{id:e,doc:n.document,indexString:u},h,0);if(i){var l=a.getIndexableString(i);if(l===u){u=s[c-1];if(u&&u.id===e)s.splice(c-1,1);else{if(s[c+1].id!==e)throw(0,f.newRxError)("SNH",{args:{row:n,byIndex:a}});s.splice(c+1,1)}}else{u=(0,p.boundEQ)(s,{indexString:l},m);s.splice(u,1)}}}},r.removeDocFromState=function(e,t,r,n){e=n[e];r.documents.delete(e),Object.values(r.byIndex).forEach(e=>{var t=e.docsWithIndex,e=e.getIndexableString(n),e=(0,p.boundEQ)(t,{indexString:e},m);t.splice(e,1)})};var d=e("array-push-at-sort-position"),f=e("../../rx-error"),p=e("./binary-search-bounds");function h(e,t){return e.indexString<t.indexString?-1:1}function m(e,t){return e.indexString<t.indexString?-1:e.indexString===t.indexString?0:1}},{"../../rx-error":531,"./binary-search-bounds":481,"array-push-at-sort-position":64}],484:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addIndexesToInternalsState=function(t,r){var e=(0,o.getPrimaryFieldOfPrimaryKey)(r.primaryKey),n=r.indexes?r.indexes.map(e=>(0,a.toArray)(e)):[],n=(n.push([e]),n.push(["_meta.lwt",e]),n.forEach(e=>{e.unshift("_deleted"),t.byIndex[s(e)]={index:e,docsWithIndex:[],getIndexableString:(0,i.getIndexableStringMonad)(r,e)}}),["_meta.lwt",e]),e=s(n);t.byIndex[e]={index:n,docsWithIndex:[],getIndexableString:(0,i.getIndexableStringMonad)(r,n)}},r.getMemoryIndexName=s;var i=e("../../custom-index"),o=e("../../rx-schema-helper"),a=e("../../plugins/utils");function s(e){return e.join(",")}},{"../../custom-index":429,"../../plugins/utils":494,"../../rx-schema-helper":535}],485:[function(e,t,r){},{}],486:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageInstanceMemory=void 0,r.createMemoryStorageInstance=function(e,t,r){var n=(0,g.getMemoryCollectionKey)(t.databaseName,t.collectionName,t.schema.version),i=e.collectionStates.get(n);i?i.refCount=i.refCount+1:(i={removed:!1,refCount:1,documents:new Map,attachments:t.schema.attachments?new Map:void 0,byIndex:{},conflictResultionTasks$:new o.Subject,changes$:new o.Subject},(0,_.addIndexesToInternalsState)(i,t.schema),e.collectionStates.set(n,i));n=new a(e,t.databaseName,t.collectionName,t.schema,i,t.options,r);return Promise.resolve(n)};var o=e("rxjs"),m=e("../../custom-index"),s=e("../../rx-schema-helper"),b=e("../../rx-storage-helper"),v=e("../../plugins/utils"),y=e("./binary-search-bounds"),g=e("./memory-helper"),_=e("./memory-indexes"),w=e("../../rx-query-helper"),a=function(){function e(e,t,r,n,i,o,a){this.closed=!1,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=i,this.options=o,this.settings=a,this.primaryPath=(0,s.getPrimaryFieldOfPrimaryKey)(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=function(e,t){(0,g.ensureNotRemoved)(this);for(var r=this.internals,n=this.internals.documents,i=this.primaryPath,o={},e=(0,b.categorizeBulkWriteRows)(this,i,n,e,t),t=e.errors,a=Object.values(this.internals.byIndex),s=e.bulkInsertDocs,u=0;u<s.length;++u){var c=s[u],l=c.document[i];(0,g.putWriteRowToState)(l,r,a,c,void 0),o[l]=c.document}for(var d,f,p=e.bulkUpdateDocs,h=0;h<p.length;++h){var m=p[h],y=m.document[i];(0,g.putWriteRowToState)(y,r,a,m,n.get(y)),o[y]=m.document}return this.schema.attachments&&(d=r.attachments,e.attachmentsAdd.forEach(e=>{d.set((0,g.attachmentMapKey)(e.documentId,e.attachmentId),{writeData:e.attachmentData,digest:e.digest})}),this.schema.attachments)&&(e.attachmentsUpdate.forEach(e=>{d.set((0,g.attachmentMapKey)(e.documentId,e.attachmentId),{writeData:e.attachmentData,digest:e.digest})}),e.attachmentsRemove.forEach(e=>{d.delete((0,g.attachmentMapKey)(e.documentId,e.attachmentId))})),0<e.eventBulk.events.length&&(f=(0,v.ensureNotFalsy)(e.newestRow).document,e.eventBulk.checkpoint={id:f[i],lwt:f._meta.lwt},r.changes$.next(e.eventBulk)),Promise.resolve({success:o,error:t})},t.findDocumentsById=function(e,t){for(var r=this.internals.documents,n={},i=0;i<e.length;++i){var o=e[i],a=r.get(o);!a||a._deleted&&!t||(n[o]=a)}return Promise.resolve(n)},t.query=function(e){for(var t=e.queryPlan,r=(o=e.query).skip||0,n=r+(o.limit||1/0),i=!1,o=(t.selectorSatisfiedByIndex||(i=(0,w.getQueryMatcher)(this.schema,e.query)),t.index),a=!t.sortFieldsSameAsIndexFields,o=["_deleted"].concat(o),s=t.startKeys,s=[!1].concat(s),s=(0,m.getStartIndexStringFromLowerBound)(this.schema,o,s,t.inclusiveStart),u=t.endKeys,u=[!1].concat(u),u=(0,m.getStartIndexStringFromUpperBound)(this.schema,o,u,t.inclusiveEnd),o=(0,_.getMemoryIndexName)(o),c=this.internals.byIndex[o].docsWithIndex,l=(t.inclusiveStart?y.boundGE:y.boundGT)(c,{indexString:s},g.compareDocsWithIndex),d=(t.inclusiveEnd?y.boundLE:y.boundLT)(c,{indexString:u},g.compareDocsWithIndex),f=[],p=!1;!p;){var h=c[l];if(!h||d<l)break;h=h.doc;i&&!i(h)||f.push(h),(f.length>=n&&!a||l>=c.length)&&(p=!0),l++}return a&&(o=(0,w.getSortComparator)(this.schema,e.query),f=f.sort(o)),f=f.slice(r,n),Promise.resolve({documents:f})},t.count=async function(e){return{count:(await this.query(e)).documents.length,mode:"fast"}},t.getChangedDocumentsSince=function(e,t){for(var r=t?t.lwt:v.RX_META_LWT_MINIMUM,n=t?t.id:"",i=["_meta.lwt",this.primaryPath],i=(0,_.getMemoryIndexName)(i),r=(0,m.getStartIndexStringFromLowerBound)(this.schema,["_meta.lwt",this.primaryPath],[r,n],!1),o=this.internals.byIndex[i].docsWithIndex,a=(0,y.boundGT)(o,{indexString:r},g.compareDocsWithIndex),s=[];s.length<e&&a<o.length;){var u=o[a];s.push(u.doc),a++}n=(0,v.lastOfArray)(s);return Promise.resolve({documents:s,checkpoint:n?{id:n[this.primaryPath],lwt:n._meta.lwt}:t||{id:"",lwt:0}})},t.cleanup=function(e){for(var t=(0,v.now)()-e,e=["_deleted","_meta.lwt",this.primaryPath],r=(0,_.getMemoryIndexName)(e),n=this.internals.byIndex[r].docsWithIndex,r=(0,m.getStartIndexStringFromLowerBound)(this.schema,e,[!0,0,""],!1),i=(0,y.boundGT)(n,{indexString:r},g.compareDocsWithIndex),o=!1;!o;){var a=n[i];!a||a.doc._meta.lwt>t?o=!0:((0,g.removeDocFromState)(this.primaryPath,this.schema,this.internals,a.doc),i++)}return v.PROMISE_RESOLVE_TRUE},t.getAttachmentData=function(e,t,r){(0,g.ensureNotRemoved)(this);e=(0,v.getFromMapOrThrow)(this.internals.attachments,(0,g.attachmentMapKey)(e,t));if(r&&e.digest===r)return Promise.resolve(e.writeData.data);throw new Error("attachment does not exist")},t.changeStream=function(){return(0,g.ensureNotRemoved)(this),this.internals.changes$.asObservable()},t.remove=async function(){(0,g.ensureNotRemoved)(this),this.internals.removed=!0,this.storage.collectionStates.delete((0,g.getMemoryCollectionKey)(this.databaseName,this.collectionName,this.schema.version)),await this.close()},t.close=function(){return this.closed?Promise.reject(new Error("already closed")):(this.closed=!0,this.internals.refCount=this.internals.refCount-1,v.PROMISE_RESOLVE_VOID)},t.conflictResultionTasks=function(){return this.internals.conflictResultionTasks$.asObservable()},t.resolveConflictResultionTask=function(e){return v.PROMISE_RESOLVE_VOID},e}();r.RxStorageInstanceMemory=a},{"../../custom-index":429,"../../plugins/utils":494,"../../rx-query-helper":532,"../../rx-schema-helper":535,"../../rx-storage-helper":537,"./binary-search-bounds":481,"./memory-helper":483,"./memory-indexes":484,rxjs:552}],487:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./rx-storage-remote"),i=(Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),e("./storage-remote-types")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("./storage-remote-helpers")),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./message-channel-cache")),s=(Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),e("./remote"));Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})},{"./message-channel-cache":488,"./remote":489,"./rx-storage-remote":490,"./storage-remote-helpers":491,"./storage-remote-types":492}],488:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OPEN_REMOTE_MESSAGE_CHANNELS=r.MESSAGE_CHANNEL_CACHE_BY_IDENTIFIER=r.CACHE_ITEM_BY_MESSAGE_CHANNEL=void 0,r.closeMessageChannel=function(e){var t=(0,i.getFromMapOrThrow)(o,e);return t.refCount=t.refCount-1,0!==t.refCount||t.keepAlive?i.PROMISE_RESOLVE_VOID:(s(t.identifier).delete(t.cacheKey),a.delete(e),e.close())},r.getMessageChannel=function(e,t,r=!1){var n=function(e,t){return(t=t.slice(0)).unshift(e.identifier),t.join("||")}(e,t);return(0,i.getFromMapOrCreate)(s(e.identifier),n,()=>{var t={identifier:e.identifier,cacheKey:n,keepAlive:r,refCount:1,messageChannel:e.messageChannelCreator().then(e=>(a.add(e),o.set(e,t),e))};return t},e=>{e.refCount=e.refCount+1}).messageChannel};var i=e("../utils"),n=new Map,o=(r.MESSAGE_CHANNEL_CACHE_BY_IDENTIFIER=n,new WeakMap),a=(r.CACHE_ITEM_BY_MESSAGE_CHANNEL=o,new Set);function s(e){return(0,i.getFromMapOrCreate)(n,e,()=>new Map)}r.OPEN_REMOTE_MESSAGE_CHANNELS=a},{"../utils":494}],489:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exposeRxStorageRemote=function(l){var d=new Map;return l.messages$.pipe((0,f.filter)(e=>"custom"===e.method)).subscribe(async t=>{if(l.customRequestHandler)try{var e=await l.customRequestHandler(t.params);l.send((0,h.createAnswer)(t,e))}catch(e){l.send((0,h.createErrorAnswer)(t,e))}else l.send((0,h.createErrorAnswer)(t,new Error("Remote storage: cannot resolve custom request because settings.customRequestHandler is not set")))}),l.messages$.pipe((0,f.filter)(e=>"create"===e.method)).subscribe(async t=>{var r=t.connectionId;if(!Array.isArray(t.params)){var e=t.params,n=e.collectionName,i=[e.databaseName,e.collectionName,e.schema.version].join("|"),o=d.get(i);if(o){if(!(0,p.deepEqual)(e.schema,o.params.schema))return void l.send((0,h.createErrorAnswer)(t,new Error("Remote storage: schema not equal to existing storage")))}else try{o={storageInstancePromise:function(e){if(l.storage)return l.storage.createStorageInstance(e);if(l.database){var t=Array.from(l.database.storageInstances),r=e.collectionName,n=t.find(e=>e.collectionName===r);if(!n)throw console.dir(t),new Error("storageInstance does not exist "+JSON.stringify({collectionName:r}));t=e.schema;if((0,p.deepEqual)(t,n.schema))return Promise.resolve(n);throw new Error("Wrong schema "+JSON.stringify({schema:t,existingSchema:n.schema}))}throw new Error("no base given")}(e),connectionIds:new Set,params:e},d.set(i,o)}catch(e){return void l.send((0,h.createErrorAnswer)(t,e))}o.connectionIds.add(t.connectionId);var a=[],s=await o.storageInstancePromise,u=(a.push(s.changeStream().subscribe(e=>{e={connectionId:r,answerTo:"changestream",method:"changeStream",return:e};l.send(e)})),a.push(s.conflictResultionTasks().subscribe(e=>{e={connectionId:r,answerTo:"conflictResultionTasks",method:"conflictResultionTasks",return:e};l.send(e)})),!1);l.database&&((e=l.database).collections[n]||e).onDestroy.push(()=>c()),a.push(l.messages$.pipe((0,f.filter)(e=>e.connectionId===r)).subscribe(async t=>{var e;if("create"!==t.method&&"custom"!==t.method&&Array.isArray(t.params))try{"close"===t.method&&l.database?l.send((0,h.createAnswer)(t,null)):"close"===t.method&&1<(0,p.ensureNotFalsy)(o).connectionIds.size?(l.send((0,h.createAnswer)(t,null)),(0,p.ensureNotFalsy)(o).connectionIds.delete(r),a.forEach(e=>e.unsubscribe())):(e=await s[t.method](t.params[0],t.params[1],t.params[2],t.params[3]),"close"!==t.method&&"remove"!==t.method||c(),l.send((0,h.createAnswer)(t,e)))}catch(e){l.send((0,h.createErrorAnswer)(t,e))}})),l.send((0,h.createAnswer)(t,"ok"))}function c(){u||(u=!0,a.forEach(e=>e.unsubscribe()),(0,p.ensureNotFalsy)(o).connectionIds.delete(r),d.delete(i))}}),{instanceByFullName:d}};var f=e("rxjs"),p=e("../../plugins/utils"),h=e("./storage-remote-helpers")},{"../../plugins/utils":494,"./storage-remote-helpers":491,rxjs:552}],490:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageRemote=r.RxStorageInstanceRemote=void 0,r.getRxStorageRemote=function(e){e=Object.assign({mode:"storage"},e);return new i(e)};var a=e("rxjs"),n=e("../../plugins/utils"),s=e("./message-channel-cache"),u=e("../../rx-storage-helper"),i=function(){function e(e){this.name="remote",this.seed=(0,n.randomCouchString)(10),this.lastRequestId=0,this.settings=e,this.statics=e.statics,"one"===e.mode&&(this.messageChannelIfOneMode=(0,s.getMessageChannel)(e,[],!0))}var t=e.prototype;return t.getRequestId=function(){var e=this.lastRequestId++;return this.seed+"|"+e},t.createStorageInstance=async function(e){(0,u.ensureRxStorageInstanceParamsAreCorrect)(e);var t="c|"+this.getRequestId(),r=["mode-"+this.settings.mode];switch(this.settings.mode){case"collection":r.push("collection-"+e.collectionName);case"database":r.push("database-"+e.databaseName);case"storage":r.push("seed-"+this.seed)}var n=await(this.messageChannelIfOneMode||(0,s.getMessageChannel)(this.settings,r)),i=this.getRequestId(),o=(0,a.firstValueFrom)(n.messages$.pipe((0,a.filter)(e=>e.answerTo===i))),o=(n.send({connectionId:t,method:"create",requestId:i,params:e}),await o);if(o.error)throw new Error("could not create instance "+JSON.stringify(o.error));return new l(this,e.databaseName,e.collectionName,e.schema,{params:e,connectionId:t,messageChannel:n},e.options)},t.customRequest=async function(e){var t=await this.settings.messageChannelCreator(),r=this.getRequestId(),n="custom|request|"+r,i=(0,a.firstValueFrom)(t.messages$.pipe((0,a.filter)(e=>e.answerTo===r))),n=(t.send({connectionId:n,method:"custom",requestId:r,params:e}),await i);if(n.error)throw await t.close(),new Error("could not run customRequest(): "+JSON.stringify({data:e,error:n.error}));return await t.close(),n.return},e}();function c(e){return"getAttachmentData"!==e.method&&"string"==typeof e.return?JSON.parse(e.return):e.return}r.RxStorageRemote=i;var l=function(){function e(e,t,r,n,i,o){this.changes$=new a.Subject,this.conflicts$=new a.Subject,this.subs=[],this.closed=!1,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=i,this.options=o,this.messages$=this.internals.messageChannel.messages$.pipe((0,a.filter)(e=>e.connectionId===this.internals.connectionId)),this.subs.push(this.messages$.subscribe(e=>{"changeStream"===e.method&&this.changes$.next(c(e)),"conflictResultionTasks"===e.method&&this.conflicts$.next(e.return)}))}var t=e.prototype;return t.requestRemote=async function(e,t){var r=this.storage.getRequestId(),n=(0,a.firstValueFrom)(this.messages$.pipe((0,a.filter)(e=>e.answerTo===r))),i={connectionId:this.internals.connectionId,requestId:r,method:e,params:t},i=(this.internals.messageChannel.send(i),await n);if(i.error)throw new Error("could not requestRemote: "+JSON.stringify({methodName:e,params:t,error:i.error},null,4));return c(i)},t.bulkWrite=function(e,t){return this.requestRemote("bulkWrite",[e,t])},t.findDocumentsById=function(e,t){return this.requestRemote("findDocumentsById",[e,t])},t.query=function(e){return this.requestRemote("query",[e])},t.count=function(e){return this.requestRemote("count",[e])},t.getAttachmentData=function(e,t,r){return this.requestRemote("getAttachmentData",[e,t,r])},t.getChangedDocumentsSince=function(e,t){return this.requestRemote("getChangedDocumentsSince",[e,t])},t.changeStream=function(){return this.changes$.asObservable()},t.cleanup=function(e){return this.requestRemote("cleanup",[e])},t.close=async function(){if(this.closed)return Promise.reject(new Error("already closed"));this.closed=!0,this.subs.forEach(e=>e.unsubscribe()),this.changes$.complete(),await this.requestRemote("close",[]),await(0,s.closeMessageChannel)(this.internals.messageChannel)},t.remove=async function(){this.closed=!0,await this.requestRemote("remove",[]),await(0,s.closeMessageChannel)(this.internals.messageChannel)},t.conflictResultionTasks=function(){return this.conflicts$},t.resolveConflictResultionTask=async function(e){await this.requestRemote("resolveConflictResultionTask",[e])},e}();r.RxStorageInstanceRemote=l},{"../../plugins/utils":494,"../../rx-storage-helper":537,"./message-channel-cache":488,rxjs:552}],491:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createAnswer=function(e,t){return{connectionId:e.connectionId,answerTo:e.requestId,method:e.method,return:t}},r.createErrorAnswer=function(e,t){return{connectionId:e.connectionId,answerTo:e.requestId,method:e.method,error:(0,n.errorToPlainJson)(t)}};var n=e("../../plugins/utils")},{"../../plugins/utils":494}],492:[function(e,t,r){},{}],493:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxDBUpdatePlugin=void 0,r.RxQueryUpdate=s,r.incrementalUpdate=o,r.update=a,n(e("modifyjs")));function o(t){return this.incrementalModify(e=>{return(0,i.default)(e,t)})}function a(e){var t=this._data,e=(0,i.default)(t,e);return this._saveData(e,t)}function s(t){return this.exec().then(e=>e?(Array.isArray(e)?Promise.all(e.map(e=>e.update(t))):e.update(t)).then(()=>e):null)}r.RxDBUpdatePlugin={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=a,e.incrementalUpdate=o},RxQuery:e=>{e.update=s}}}},{"@babel/runtime/helpers/interopRequireDefault":544,modifyjs:398}],494:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils-array"),i=(Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),e("./utils-blob")),o=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),e("./utils-base64")),a=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),e("./utils-revision")),s=(Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),e("./utils-document")),u=(Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),e("./utils-hash")),c=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./utils-promise")),l=(Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),e("./utils-string")),d=(Object.keys(l).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),e("./utils-object-deep-equal")),f=(Object.keys(d).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===d[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})}),e("./utils-object-dot-prop")),p=(Object.keys(f).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===f[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})}),e("./utils-object")),h=(Object.keys(p).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===p[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})}),e("./utils-map")),m=(Object.keys(h).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===h[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}})}),e("./utils-error")),y=(Object.keys(m).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===m[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})}),e("./utils-time")),b=(Object.keys(y).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===y[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})}),e("./utils-regex")),v=(Object.keys(b).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===b[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return b[e]}})}),e("./utils-other")),g=(Object.keys(v).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===v[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return v[e]}})}),e("./utils-rxdb-version"));Object.keys(g).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===g[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return g[e]}})})},{"./utils-array":495,"./utils-base64":496,"./utils-blob":497,"./utils-document":498,"./utils-error":499,"./utils-hash":500,"./utils-map":501,"./utils-object":504,"./utils-object-deep-equal":502,"./utils-object-dot-prop":503,"./utils-other":505,"./utils-promise":506,"./utils-regex":507,"./utils-revision":508,"./utils-rxdb-version":509,"./utils-string":510,"./utils-time":511}],495:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.appendToArray=function(e,t){for(var r=t.length,n=0;n<r;++n){var i=t[n];e.push(i)}},r.arrayFilterNotEmpty=function(e){return null!=e},r.asyncFilter=async function(e,t){var r=await Promise.all(e.map(t));return e.filter((...[,e])=>r[e])},r.batchArray=function(e,t){e=e.slice(0);var r=[];for(;e.length;){var n=e.splice(0,t);r.push(n)}return r},r.countUntilNotMatching=function(e,t){var r,n=0,i=-1;for(r of e){if(!t(r,i+=1))break;n+=1}return n},r.isMaybeReadonlyArray=function(e){return Array.isArray(e)},r.lastOfArray=function(e){return e[e.length-1]},r.maxOfNumbers=function(e){return Math.max(...e)},r.removeOneFromArrayIfMatches=function(e,t){var r=(e=e.slice()).length,n=!1;for(;r--&&!n;)t(e[r])&&(n=!0,e.splice(r,1));return e},r.shuffleArray=function(e){return e.slice(0).sort(()=>Math.random()-.5)},r.sumNumberArray=function(e){for(var t=0,r=e.length;r--;)t+=e[r];return t},r.toArray=function(e){return Array.isArray(e)?e.slice(0):[e]}},{}],496:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.arrayBufferToBase64=function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return btoa(t)},r.b64DecodeUnicode=function(e){return(0,n.decode)(e)},r.b64EncodeUnicode=function(e){return(0,n.encode)(e)},r.base64ToArrayBuffer=function(e){for(var t=atob(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer};var n=e("js-base64")},{"js-base64":144}],497:[function(e,t,n){!function(r){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.blobToBase64String=async function(e){if("string"==typeof e)return e;"[object Uint8Array]"===Object.prototype.toString.call(e)&&(e=new Blob([e]));e=URL.createObjectURL(e),e=await fetch(e).then(e=>e.arrayBuffer());return(0,t.arrayBufferToBase64)(e)},n.blobToString=function(e){"[object Uint8Array]"===Object.prototype.toString.call(e)&&(e=new Blob([e]));return"string"!=typeof e?e.text():Promise.resolve(e)},n.createBlob=function(e,t){return new Blob([e],{type:t})},n.createBlobFromBase64=async function(e,t){return(await fetch("data:"+t+";base64,"+e)).blob()},n.getBlobSize=function(e){return e.size},n.isBlob=function(e){return!!(e instanceof Blob||void 0!==r&&r.isBuffer(e))};var t=e("./utils-base64")}.call(this)}.call(this,e("buffer").Buffer)},{"./utils-base64":496,buffer:908}],498:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RX_META_LWT_MINIMUM=void 0,r.areRxDocumentArraysEqual=function(e,t,r){if(t.length!==r.length)return!1;var n=0,i=t.length;for(;n<i;){var o=t[n],a=r[n];if(n++,o._rev!==a._rev||o[e]!==a[e])return!1}return!0},r.getDefaultRevision=function(){return""},r.getDefaultRxDocumentMeta=function(){return{lwt:n}},r.getSortDocumentsByLastWriteTimeComparator=i,r.sortDocumentsByLastWriteTime=function(e,t){return t.sort(i(e))},r.stripMetaDataFromDocument=function(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})};var n=1;function i(r){return(e,t)=>e._meta.lwt===t._meta.lwt?t[r]<e[r]?1:-1:e._meta.lwt-t._meta.lwt}r.RX_META_LWT_MINIMUM=n},{}],499:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.errorToPlainJson=function(e){return{name:e.name,message:e.message,rxdb:e.rxdb,parameters:e.parameters,code:e.code,stack:e.stack?e.stack.replaceAll("\n"," \n "):void 0}},r.pluginMissing=function(e){var t=e.split("-"),r="RxDB";return t.forEach(e=>{r+=(0,n.ucfirst)(e)}),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")};var n=e("./utils-string")},{"./utils-string":510}],500:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultHashSha256=function(e){return(0,n.sha256)(e)};var n=e("ohash")},{ohash:407}],501:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFromMapOrCreate=function(e,t,r,n){var i=e.get(t);void 0===i?(i=r(),e.set(t,i)):n&&n(i);return i},r.getFromMapOrThrow=function(e,t){e=e.get(t);if(void 0!==e)return e;throw new Error("missing value from map "+t)}},{}],502:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i;if(Array.isArray(t)){if((n=t.length)!==r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1}else{if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var o=Object.keys(t);if((n=o.length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var a=o[i];if(!e(t[a],r[a]))return!1}}return!0}return t!=t&&r!=r}},{}],503:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deepKeys=function(e){return[...function*e(t,r=[]){if(!s(t))return void(0<r.length&&(yield f(r)));for(var[n,i]of o(t))yield*e(i,[...r,n])}(e)]},r.deleteProperty=function(e,t){if(!s(e)||"string"!=typeof t)return!1;for(var r=c(t),n=0;n<r.length;n++){var i=r[n];if(d(e,i),n===r.length-1)return delete e[i],!0;if(e=e[i],!s(e))return!1}},r.getProperty=function(e,t,r){Array.isArray(t)&&(t=t.join("."));if(!s(e)||"string"!=typeof t)return void 0===r?e:r;var n=c(t);if(0===n.length)return r;for(var i=0;i<n.length;i++){var o=n[i];if(null==(e=l(e,o)?i===n.length-1?void 0:null:e[o])){if(i!==n.length-1)return r;break}}return void 0===e?r:e},r.hasProperty=function(e,t){if(!s(e)||"string"!=typeof t)return!1;var r,t=c(t);if(0===t.length)return!1;for(r of t){if(!s(e)||!(r in e)||l(e,r))return!1;e=e[r]}return!0},r.setProperty=function(e,t,r){Array.isArray(t)&&(t=t.join("."));if(!s(e)||"string"!=typeof t)return e;for(var n=e,i=c(t),o=0;o<i.length;o++){var a=i[o];d(e,a),o===i.length-1?e[a]=r:s(e[a])||(e[a]="number"==typeof i[o+1]?[]:{}),e=e[a]}return n};var s=e=>{var t=typeof e;return null!==e&&("object"==t||"function"==t)},a=new Set(["__proto__","prototype","constructor"]),u=new Set("0123456789");function c(e){var t,r=[],n="",i="start",o=!1;for(t of e)switch(t){case"\\":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");o&&(n+=t),i="property",o=!o;break;case".":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i)i="property";else if(o)o=!1,n+=t;else{if(a.has(n))return[];r.push(n),n="",i="property"}break;case"[":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i)i="index";else if(o)o=!1,n+=t;else{if("property"===i){if(a.has(n))return[];r.push(n),n=""}i="index"}break;case"]":if("index"===i){r.push(Number.parseInt(n,10)),n="",i="indexEnd";break}if("indexEnd"===i)throw new Error("Invalid character after an index");default:if("index"===i&&!u.has(t))throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");"start"===i&&(i="property"),o&&(o=!1,n+="\\"),n+=t}switch(o&&(n+="\\"),i){case"property":if(a.has(n))return[];r.push(n);break;case"index":throw new Error("Index was not closed");case"start":r.push("")}return r}function l(e,t){var r;if("number"!=typeof t&&Array.isArray(e))return r=Number.parseInt(t,10),Number.isInteger(r)&&e[r]===e[t]}function d(e,t){if(l(e,t))throw new Error("Cannot use string index")}function o(e){return Array.isArray(e)?e.map((e,t)=>[t,e]):Object.entries(e)}function f(e){var t,r,n="";for([t,r]of o(e))"number"==typeof r?n+="["+r+"]":(r=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[\\.[]/g,"\\$&")}(r),n+=0===t?r:"."+r);return n}},{}],504:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.deepFreeze=function t(r){Object.freeze(r);Object.getOwnPropertyNames(r).forEach(function(e){!r.hasOwnProperty(e)||null===r[e]||"object"!=typeof r[e]&&"function"!=typeof r[e]||Object.isFrozen(r[e])||t(r[e])});return r},r.firstPropertyNameOfObject=function(e){return Object.keys(e)[0]},r.firstPropertyValueOfObject=function(e){var t=Object.keys(e)[0];return e[t]},r.flatClone=function(e){return Object.assign({},e)},r.flattenObject=function e(t){var r={};for(var n in t)if(t.hasOwnProperty(n))if("object"==typeof t[n]){var i,o=e(t[n]);for(i in o)o.hasOwnProperty(i)&&(r[n+"."+i]=o[i])}else r[n]=t[n];return r},r.getFromObjectOrThrow=function(e,t){e=e[t];if(e)return e;throw new Error("missing value from object "+t)},r.objectPathMonad=function(t){var n=t.split("."),i=n.length;return 1!==i?e=>{for(var t=e,r=0;r<i;++r)if(void 0===(t=t[n[r]]))return t;return t}:e=>e[t]},r.overwriteGetterForCaching=function(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r},r.sortObject=function t(r,n=!1){if(!r)return r;if(!n&&Array.isArray(r))return r.sort((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"==typeof e?1:-1).map(e=>t(e,n));{var i;if("object"==typeof r&&!Array.isArray(r))return r instanceof RegExp?r:(i={},Object.keys(r).sort((e,t)=>e.localeCompare(t)).forEach(e=>{i[e]=t(r[e],n)}),i)}return r},r.stringifyFilter=function(e,t){if(t instanceof RegExp)return t.toString();return t},r.clone=function e(t){if(!t)return t;if(null===t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var r=new Array(t.length),n=r.length;n--;)r[n]=e(t[n]);return r}var i,o={};for(i in t)o[i]=e(t[i]);return o}},{}],505:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RXJS_SHARE_REPLAY_DEFAULTS=void 0,r.ensureInteger=function(e){if(Number.isInteger(e))return e;throw new Error("ensureInteger() is falsy")},r.ensureNotFalsy=function(e){if(e)return e;throw new Error("ensureNotFalsy() is falsy")},r.runXTimes=function(e,r){new Array(e).fill(0).forEach((e,t)=>r(t))};r.RXJS_SHARE_REPLAY_DEFAULTS={bufferSize:1,refCount:!0}},{}],506:[function(e,t,r){"use strict";function n(t=0){return new Promise(e=>setTimeout(e,t))}Object.defineProperty(r,"__esModule",{value:!0}),r.PROMISE_RESOLVE_VOID=r.PROMISE_RESOLVE_TRUE=r.PROMISE_RESOLVE_NULL=r.PROMISE_RESOLVE_FALSE=void 0,r.nextTick=function(){return new Promise(e=>setTimeout(e,0))},r.promiseSeries=function(e,t){return e.reduce((e,t)=>e.then(t),Promise.resolve(t))},r.promiseWait=n,r.requestIdleCallbackIfAvailable=function(e){"function"==typeof requestIdleCallback&&requestIdleCallback(()=>{e()})},r.requestIdlePromise=function(t=void 0){return o=o.then(()=>"function"==typeof requestIdleCallback?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):n(0))},r.toPromise=function(e){return e&&"function"==typeof e.then?e:Promise.resolve(e)};var i=Promise.resolve(!0),i=(r.PROMISE_RESOLVE_TRUE=i,Promise.resolve(!1)),i=(r.PROMISE_RESOLVE_FALSE=i,Promise.resolve(null)),i=(r.PROMISE_RESOLVE_NULL=i,Promise.resolve()),o=r.PROMISE_RESOLVE_VOID=i},{}],507:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.REGEX_PARSE_REGEX_EXPRESSION=r.REGEX_ALL_PIPES=r.REGEX_ALL_DOTS=void 0,r.parseRegex=function(e){e=(0,n.ensureNotFalsy)(e.toString().match(i));return{pattern:e[2],flags:e[3]}};var n=e("./utils-other"),i=(r.REGEX_ALL_DOTS=/\./g,r.REGEX_ALL_PIPES=/\|/g,/(\/?)(.+)\1([a-z]*)/i);r.REGEX_PARSE_REGEX_EXPRESSION=i},{"./utils-other":505}],508:[function(e,t,r){"use strict";function n(e){var t=e.split("-");if(2!==t.length)throw new Error("malformatted revision: "+e);return{height:parseInt(t[0],10),hash:t[1]}}Object.defineProperty(r,"__esModule",{value:!0}),r.createRevision=function(e,t){t=t?t._rev:null;return(t?n(t).height:0)+1+"-"+e},r.getHeightOfRevision=function(e){return parseInt(e.split("-")[0],10)},r.parseRevision=n},{}],509:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RXDB_VERSION=void 0;r.RXDB_VERSION="14.17.1"},{}],510:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RANDOM_STRING=void 0,r.arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))},r.isFolderPath=function(e){return!(!e.includes("/")&&!e.includes("\\"))},r.randomCouchString=function(e=10){for(var t="",r="abcdefghijklmnopqrstuvwxyz",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},r.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return t},r.trimDots=function(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e},r.ucfirst=function(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)};r.RANDOM_STRING="Fz7SZXPmYJujkzjY1rpXWvlWBqoGAfAX"},{}],511:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.now=function(){var e=(new Date).getTime();(e+=.01)<=n&&(e=n+.01);e=parseFloat(e.toFixed(2));return n=e};var n=0},{}],512:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),n=(Object.defineProperty(r,"__esModule",{value:!0}),r.getValidator=o,r.wrappedValidateAjvStorage=void 0,n(e("ajv"))),e=e("../../plugin-helpers"),i=new n.default({strict:!1});function o(e){var t=i.compile(e);return e=>{return t(e)?[]:t.errors}}n=(0,e.wrappedValidateStorageFactory)(o,"ajv");r.wrappedValidateAjvStorage=n},{"../../plugin-helpers":436,"@babel/runtime/helpers/interopRequireDefault":544,ajv:1}],513:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.getValidator=o,r.wrappedValidateIsMyJsonValidStorage=void 0,n(e("is-my-json-valid")));function o(e){var t=(0,i.default)(e);return e=>{return t(e)?[]:t.errors}}n=(0,e("../../plugin-helpers").wrappedValidateStorageFactory)(o,"is-my-json-valid");r.wrappedValidateIsMyJsonValidStorage=n},{"../../plugin-helpers":436,"@babel/runtime/helpers/interopRequireDefault":544,"is-my-json-valid":141}],514:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.getValidator=o,r.wrappedValidateZSchemaStorage=void 0,n(e("z-schema")));function o(t){var r=new i.default;return e=>{r.validate(e,t);var e=r;if(!0!==e)return(e=e.getLastErrors())?e.map(({title:e,description:t,message:r,path:n})=>({title:e,description:t,message:r,path:n})):[]}}n=(0,e("../../plugin-helpers").wrappedValidateStorageFactory)(o,"z-schema");r.wrappedValidateZSchemaStorage=n},{"../../plugin-helpers":436,"@babel/runtime/helpers/interopRequireDefault":544,"z-schema":900}],515:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QueryCache=r.DEFAULT_UNEXECUTED_LIFETIME=r.DEFAULT_TRY_TO_KEEP_MAX=r.COLLECTIONS_WITH_RUNNING_CLEANUP=void 0,r.countRxQuerySubscribers=l,r.createQueryCache=function(){return new n},r.defaultCacheReplacementPolicyMonad=r.defaultCacheReplacementPolicy=void 0,r.triggerCacheReplacement=function(e){i.has(e)||(i.add(e),(0,u.nextTick)().then(()=>(0,u.requestIdlePromise)(200)).then(()=>{e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),i.delete(e)}))},r.uncacheRxQuery=c;var u=e("./plugins/utils"),n=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return(0,u.getFromMapOrCreate)(this._map,t,()=>e)},e}();function c(e,t){t.uncached=!0;t=t.toString();e._map.delete(t)}function l(e){return e.refCount$.observers.length}r.QueryCache=n;r.DEFAULT_TRY_TO_KEEP_MAX=100;r.DEFAULT_UNEXECUTED_LIFETIME=3e4;var e=(a,s)=>(e,t)=>{if(!(t._map.size<a)){var r,n=(0,u.now)()-s,i=[];for(r of Array.from(t._map.values()))0<l(r)||(0===r._lastEnsureEqual&&r._creationTime<n?c(t,r):i.push(r));var o=i.length-a;o<=0||i.sort((e,t)=>e._lastEnsureEqual-t._lastEnsureEqual).slice(0,o).forEach(e=>c(t,e))}},e=(r.defaultCacheReplacementPolicyMonad=e)(100,3e4),i=(r.defaultCacheReplacementPolicy=e,new WeakSet);r.COLLECTIONS_WITH_RUNNING_CLEANUP=i},{"./plugins/utils":494}],516:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UPPER_BOUND_LOGICAL_OPERATORS=r.LOWER_BOUND_LOGICAL_OPERATORS=r.LOGICAL_OPERATORS=r.INDEX_MIN=r.INDEX_MAX=void 0,r.getMatcherQueryOpts=h,r.getQueryPlan=function(e,r){var t=(0,i.getPrimaryFieldOfPrimaryKey)(e.primaryKey),o=r.selector,n=e.indexes?e.indexes.slice(0):[];r.index?n=[r.index]:n.push([t]);var a,s=r.sort.map(e=>Object.keys(e)[0]).join(","),u=!!r.sort.find(e=>"desc"===Object.values(e)[0]),c=-1;n.forEach(e=>{var n=!0,i=!0,t=e.map(e=>{var t=o[e],e=t?Object.keys(t):[],r={};return t&&e.length?e.forEach(e=>{f.has(e)&&(e=h(e,t[e]),r=Object.assign(r,e))}):r={startKey:i?d:l,endKey:n?l:d,inclusiveStart:!0,inclusiveEnd:!0},void 0===r.startKey&&(r.startKey=d),void 0===r.endKey&&(r.endKey=l),void 0===r.inclusiveStart&&(r.inclusiveStart=!0),void 0===r.inclusiveEnd&&(r.inclusiveEnd=!0),i&&!r.inclusiveStart&&(i=!1),n&&!r.inclusiveEnd&&(n=!1),r}),t={index:e,startKeys:t.map(e=>e.startKey),endKeys:t.map(e=>e.endKey),inclusiveEnd:n,inclusiveStart:i,sortFieldsSameAsIndexFields:!u&&s===e.join(","),selectorSatisfiedByIndex:p(e,r.selector)},e=m(0,0,t);(0<e&&c<e||r.index)&&(c=e,a=t)}),a=a||{index:[t],startKeys:[d],endKeys:[l],inclusiveEnd:!0,inclusiveStart:!0,sortFieldsSameAsIndexFields:!u&&s===t,selectorSatisfiedByIndex:p([t],r.selector)};return a},r.isSelectorSatisfiedByIndex=p,r.rateQueryPlan=m;var o=e("./plugins/utils"),i=e("./rx-schema-helper"),l=String.fromCharCode(65535),d=(r.INDEX_MAX=l,Number.MIN_VALUE);r.INDEX_MIN=d;var f=new Set(["$eq","$gt","$gte","$lt","$lte"]),a=(r.LOGICAL_OPERATORS=f,new Set(["$eq","$gt","$gte"])),s=(r.LOWER_BOUND_LOGICAL_OPERATORS=a,new Set(["$eq","$lt","$lte"]));function p(r,t){var n,i;return!Object.entries(t).find(([e,t])=>{return!r.includes(e)||Object.entries(t).find(([e])=>!f.has(e))})&&!r.find(e=>{e=t[e];if(e){e=Object.keys(e).find(e=>a.has(e));if(n&&e)return!0;"$eq"!==e&&(n=e)}return!1})&&!r.find(e=>{e=t[e];if(e){e=Object.keys(e).find(e=>s.has(e));if(i&&e)return!0;"$eq"!==e&&(i=e)}return!1})}function h(e,t){switch(e){case"$eq":return{startKey:t,endKey:t};case"$lte":return{endKey:t};case"$gte":return{startKey:t};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function m(e,t,r){var n=0,i=e=>{0<e&&(n+=e)};return i(10*(0,o.countUntilNotMatching)(r.startKeys,e=>e!==d&&e!==l)),i(10*(0,o.countUntilNotMatching)(r.startKeys,e=>e!==l&&e!==d)),i(10*(0,o.countUntilNotMatching)(r.startKeys,(e,t)=>e===r.endKeys[t])*1.5),i(r.sortFieldsSameAsIndexFields?5:0),n}r.UPPER_BOUND_LOGICAL_OPERATORS=s},{"./plugins/utils":494,"./rx-schema-helper":535}],517:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCheckpointKey=function(e){return"rx-storage-replication-"+e.hashFunction([e.identifier,e.forkInstance.databaseName,e.forkInstance.collectionName].join("||"))},r.getLastCheckpointDoc=async function(e,t){var r=(0,a.getComposedPrimaryKeyOfDocumentData)(e.input.metaInstance.schema,{isCheckpoint:"1",itemId:t}),r=(await e.input.metaInstance.findDocumentsById([r],!1))[r];if(e.lastCheckpointDoc[t]=r)return r.data},r.setCheckpoint=async function(e,t,r){var n=e.lastCheckpointDoc[t];if(r&&!e.events.canceled.getValue()&&(!n||JSON.stringify(n.data)!==JSON.stringify(r))){var i={id:"",isCheckpoint:"1",itemId:t,_deleted:!1,_attachments:{},data:r,_meta:(0,u.getDefaultRxDocumentMeta)(),_rev:(0,u.getDefaultRevision)()};for(i.id=(0,a.getComposedPrimaryKeyOfDocumentData)(e.input.metaInstance.schema,i);!e.events.canceled.getValue();){n&&(i.data=(0,s.stackCheckpoints)([n.data,i.data])),i._meta.lwt=(0,u.now)(),i._rev=(0,u.createRevision)(e.input.identifier,n);var o=await e.input.metaInstance.bulkWrite([{previous:n,document:i}],"replication-set-checkpoint");if(o.success[i.id])return void(e.lastCheckpointDoc[t]=(0,u.getFromObjectOrThrow)(o.success,i.id));o=(0,u.getFromObjectOrThrow)(o.error,i.id);if(409!==o.status)throw o;n=(0,u.ensureNotFalsy)(o.documentInDb),i._rev=(0,u.createRevision)(e.input.identifier,n)}}};var a=e("../rx-schema-helper"),s=e("../rx-storage-helper"),u=e("../plugins/utils")},{"../plugins/utils":494,"../rx-schema-helper":535,"../rx-storage-helper":537}],518:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultConflictHandler=void 0,r.resolveConflictError=async function(e,t,r){t=await(0,e.input.conflictHandler)(t,"replication-resolve-conflict");{var n;if(!t.isEqual)return(n=Object.assign({},t.documentData,{_meta:(0,i.flatClone)(r._meta),_rev:(0,i.getDefaultRevision)(),_attachments:(0,i.flatClone)(r._attachments)}))._meta.lwt=(0,i.now)(),n._rev=(0,i.createRevision)(e.input.identifier,r),{resolvedDoc:n,output:t}}};var i=e("../plugins/utils");r.defaultConflictHandler=function(e,t){return(0,i.deepEqual)(e.newDocumentState,e.realMasterState)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})}},{"../plugins/utils":494}],519:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.startReplicationDownstream=async function(h){h.input.initialCheckpoint&&h.input.initialCheckpoint.downstream&&(await(0,v.getLastCheckpointDoc)(h,"down")||await(0,v.setCheckpoint)(h,"down",h.input.initialCheckpoint.downstream));var m=h.input.hashFunction(h.input.identifier),o=h.input.replicationHandler,a=0,s=[];function t(e){h.stats.down.addNewTask=h.stats.down.addNewTask+1;e={time:a++,task:e};s.push(e),h.streamQueue.down=h.streamQueue.down.then(()=>{for(var e,t,r,n=[];0<s.length;){h.events.active.down.next(!0);var i=(0,b.ensureNotFalsy)(s.shift());if(!(i.time<u)){if("RESYNC"===i.task){if(0!==n.length)break;n.push(i.task);break}n.push(i.task)}}if(0!==n.length)return"RESYNC"===n[0]?async function(){if(h.stats.down.downstreamResyncOnce=h.stats.down.downstreamResyncOnce+1,!h.events.canceled.getValue()){h.checkpointQueue=h.checkpointQueue.then(()=>(0,v.getLastCheckpointDoc)(h,"down"));for(var e=await h.checkpointQueue,t=[];!h.events.canceled.getValue();){u=a++;var r=await o.masterChangesSince(e,h.input.pullBatchSize);if(0===r.documents.length)break;if(e=(0,l.stackCheckpoints)([e,r.checkpoint]),t.push(c(r.documents,e)),r.documents.length<h.input.pullBatchSize)break}await Promise.all(t)}}():(e=n,h.stats.down.downstreamProcessChanges=h.stats.down.downstreamProcessChanges+1,t=[],r=null,e.forEach(e=>{if("RESYNC"===e)throw new Error("SNH");(0,b.appendToArray)(t,e.documents),r=(0,l.stackCheckpoints)([r,e.checkpoint])}),c(t,(0,b.ensureNotFalsy)(r)))}).then(()=>{h.events.active.down.next(!1),h.firstSyncDone.down.getValue()||h.events.canceled.getValue()||h.firstSyncDone.down.next(!0)})}t("RESYNC");var e=o.masterChangeStream$.subscribe(e=>{h.stats.down.masterChangeStreamEmit=h.stats.down.masterChangeStreamEmit+1,t(e)}),u=((0,i.firstValueFrom)(h.events.canceled.pipe((0,i.filter)(e=>!!e))).then(()=>e.unsubscribe()),-1);var r=b.PROMISE_RESOLVE_VOID,n={docs:{}};function c(e,t){return h.stats.down.persistFromMaster=h.stats.down.persistFromMaster+1,e.forEach(e=>{var t=e[h.primaryPath];n.docs[t]=e}),n.checkpoint=t,r=r.then(()=>{var c,l,d,f,p=n.docs,e=(n.docs={},n.checkpoint),t=Object.keys(p);return h.events.canceled.getValue()||0===t.length?b.PROMISE_RESOLVE_VOID:(c=[],l={},d={},f=[],Promise.all([h.input.forkInstance.findDocumentsById(t,!0),(0,_.getAssumedMasterState)(h,t)]).then(([s,u])=>Promise.all(t.map(async e=>{var t,r,n=s[e],i=n?(0,g.writeDocToDocState)(n):void 0,o=p[e],a=u[e];return a&&a.metaDocument.isResolvedConflict===n._rev||(!(r=await(a&&i?h.input.conflictHandler({realMasterState:a.docData,newDocumentState:i},"downstream-check-if-equal-0").then(e=>e.isEqual):b.PROMISE_RESOLVE_FALSE))&&a&&a.docData._rev&&n._meta[h.input.identifier]&&(0,b.parseRevision)(n._rev).height===n._meta[h.input.identifier]&&(r=!0),n&&a&&!1===r)||n&&!a?b.PROMISE_RESOLVE_VOID:(t=await(i?h.input.conflictHandler({realMasterState:o,newDocumentState:i},"downstream-check-if-equal-1").then(e=>e.isEqual):b.PROMISE_RESOLVE_FALSE),i&&t?(a&&!1!==r||f.push((0,_.getMetaWriteRow)(h,i,a?a.metaDocument:void 0)),b.PROMISE_RESOLVE_VOID):(t=Object.assign({},o,n?{_meta:(0,b.flatClone)(n._meta),_attachments:{},_rev:(0,b.getDefaultRevision)()}:{_meta:(0,b.getDefaultRxDocumentMeta)(),_rev:(0,b.getDefaultRevision)(),_attachments:{}}),o._rev&&(r=n?(0,b.parseRevision)(n._rev).height+1:1,t._meta[h.input.identifier]=r),(i={previous:n,document:t}).document._rev=(0,b.createRevision)(m,i.previous),c.push(i),l[e]=i,void(d[e]=(0,_.getMetaWriteRow)(h,o,a?a.metaDocument:void 0))))}))).then(()=>{if(0<c.length)return h.input.forkInstance.bulkWrite(c,h.downstreamBulkWriteFlag).then(e=>{Object.keys(e.success).forEach(e=>{h.events.processed.down.next(l[e]),f.push(d[e])}),Object.values(e.error).forEach(e=>{409!==e.status&&h.events.error.next((0,y.newRxError)("RC_PULL",{writeError:e}))})})}).then(()=>{if(0<f.length)return h.input.metaInstance.bulkWrite(f,"replication-down-write-meta").then(e=>{Object.entries(e.error).forEach(([e,t])=>{h.events.error.next((0,y.newRxError)("RC_PULL",{id:e,writeError:t}))})})}).then(()=>{h.checkpointQueue=h.checkpointQueue.then(()=>(0,v.setCheckpoint)(h,"down",e))}))}).catch(e=>h.events.error.next(e))}};var i=e("rxjs"),y=e("../rx-error"),l=e("../rx-storage-helper"),b=e("../plugins/utils"),v=e("./checkpoint"),g=e("./helper"),_=e("./meta-instance")},{"../plugins/utils":494,"../rx-error":531,"../rx-storage-helper":537,"./checkpoint":517,"./helper":520,"./meta-instance":522,rxjs:552}],520:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.docStateToWriteDoc=function(e,t,r){t=Object.assign({},t,{_attachments:{},_meta:{lwt:(0,n.now)()},_rev:(0,n.getDefaultRevision)()});return t._rev=(0,n.createRevision)(e,r),t},r.writeDocToDocState=function(e){e=(0,n.flatClone)(e);return delete e._attachments,delete e._meta,delete e._rev,e};var n=e("../plugins/utils")},{"../plugins/utils":494}],521:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={replicateRxStorageInstance:!0,awaitRxStorageReplicationFirstInSync:!0,awaitRxStorageReplicationInSync:!0,awaitRxStorageReplicationIdle:!0,rxStorageInstanceToReplicationHandler:!0,cancelRxStorageReplication:!0},i=(r.awaitRxStorageReplicationFirstInSync=p,r.awaitRxStorageReplicationIdle=async function(e){await p(e);for(;;){var{down:t,up:r}=e.streamQueue;if(await Promise.all([r,t]),t===e.streamQueue.down&&r===e.streamQueue.up)return}},r.awaitRxStorageReplicationInSync=function(e){return Promise.all([e.streamQueue.up,e.streamQueue.down,e.checkpointQueue])},r.cancelRxStorageReplication=function(e){e.events.canceled.next(!0),e.events.active.up.complete(),e.events.active.down.complete(),e.events.processed.up.complete(),e.events.processed.down.complete(),e.events.resolvedConflicts.complete(),e.events.canceled.complete()},r.replicateRxStorageInstance=function(e){var t=(0,a.getCheckpointKey)(e),e={primaryPath:(0,o.getPrimaryFieldOfPrimaryKey)(e.forkInstance.schema.primaryKey),input:e,checkpointKey:t,downstreamBulkWriteFlag:"replication-downstream-"+t,events:{canceled:new i.BehaviorSubject(!1),active:{down:new i.BehaviorSubject(!0),up:new i.BehaviorSubject(!0)},processed:{down:new i.Subject,up:new i.Subject},resolvedConflicts:new i.Subject,error:new i.Subject},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new i.BehaviorSubject(!1),up:new i.BehaviorSubject(!1)},streamQueue:{down:l.PROMISE_RESOLVE_VOID,up:l.PROMISE_RESOLVE_VOID},checkpointQueue:l.PROMISE_RESOLVE_VOID,lastCheckpointDoc:{}};return(0,s.startReplicationDownstream)(e),(0,u.startReplicationUpstream)(e),e},r.rxStorageInstanceToReplicationHandler=function(a,s,u){var c=(0,o.getPrimaryFieldOfPrimaryKey)(a.schema.primaryKey);return{masterChangeStream$:a.changeStream().pipe((0,i.map)(e=>{return{checkpoint:e.checkpoint,documents:e.events.map(e=>(0,d.writeDocToDocState)((0,l.ensureNotFalsy)(e.documentData)))}})),masterChangesSince(t,e){return a.getChangedDocumentsSince(e,t).then(e=>({checkpoint:0<e.documents.length?e.checkpoint:t,documents:e.documents.map(e=>(0,d.writeDocToDocState)(e))}))},async masterWrite(e){var r={},e=(e.forEach(e=>{var t=e.newDocumentState[c];r[t]=e}),Object.keys(r)),n=await a.findDocumentsById(e,!0),i=[],o=[];return await Promise.all(Object.entries(r).map(async([e,t])=>{e=n[e];e?t.assumedMasterState&&!0===(await s({realMasterState:(0,d.writeDocToDocState)(e),newDocumentState:(0,l.ensureNotFalsy)(t.assumedMasterState)},"rxStorageInstanceToReplicationHandler-masterWrite")).isEqual?o.push({previous:e,document:(0,d.docStateToWriteDoc)(u,t.newDocumentState,e)}):i.push((0,d.writeDocToDocState)(e)):o.push({document:(0,d.docStateToWriteDoc)(u,t.newDocumentState)})})),0<o.length&&(e=await a.bulkWrite(o,"replication-master-write"),Object.values(e.error).forEach(e=>{if(409!==e.status)throw new Error("non conflict error");i.push((0,d.writeDocToDocState)((0,l.ensureNotFalsy)(e.documentInDb)))})),i}}},e("rxjs")),o=e("../rx-schema-helper"),l=e("../plugins/utils"),a=e("./checkpoint"),s=(Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),e("./downstream")),d=(Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),e("./helper")),u=(Object.keys(d).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===d[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})}),e("./upstream")),c=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./meta-instance")),f=(Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),e("./conflicts"));function p(e){return(0,i.firstValueFrom)((0,i.combineLatest)([e.firstSyncDone.down.pipe((0,i.filter)(e=>!!e)),e.firstSyncDone.up.pipe((0,i.filter)(e=>!!e))])).then(()=>{})}Object.keys(f).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===f[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})})},{"../plugins/utils":494,"../rx-schema-helper":535,"./checkpoint":517,"./conflicts":518,"./downstream":519,"./helper":520,"./meta-instance":522,"./upstream":523,rxjs:552}],522:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAssumedMasterState=function(t,e){return t.input.metaInstance.findDocumentsById(e.map(e=>{return(0,o.getComposedPrimaryKeyOfDocumentData)(t.input.metaInstance.schema,{itemId:e,isCheckpoint:"0"})}),!0).then(e=>{var t={};return Object.values(e).forEach(e=>{t[e.itemId]={docData:e.data,metaDocument:e}}),t})},r.getMetaWriteRow=function(e,t,r,n){var i=t[e.primaryPath],i=r?(0,a.flatCloneDocWithMeta)(r):{id:"",isCheckpoint:"0",itemId:i,data:t,_attachments:{},_deleted:!1,_rev:(0,s.getDefaultRevision)(),_meta:{lwt:0}};return i.data=t,i.isResolvedConflict=n,i._meta.lwt=(0,s.now)(),i.id=(0,o.getComposedPrimaryKeyOfDocumentData)(e.input.metaInstance.schema,i),i._rev=(0,s.createRevision)(e.input.identifier,r),{previous:r,document:i}},r.getRxReplicationMetaInstanceSchema=function(e,t){e=(0,o.getLengthOfPrimaryKey)(e),e={primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:0,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:e+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:e},data:{type:"object",additionalProperties:!0},isResolvedConflict:{type:"string"}},required:["id","isCheckpoint","itemId","data"]};t&&(e.encrypted=["data"]);return(0,o.fillWithDefaultSettings)(e)};var o=e("../rx-schema-helper"),a=e("../rx-storage-helper"),s=e("../plugins/utils")},{"../plugins/utils":494,"../rx-schema-helper":535,"../rx-storage-helper":537}],523:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.startReplicationUpstream=async function(m){m.input.initialCheckpoint&&m.input.initialCheckpoint.upstream&&(await(0,g.getLastCheckpointDoc)(m,"up")||await(0,g.setCheckpoint)(m,"up",m.input.initialCheckpoint.upstream));var y=m.input.replicationHandler,o=(m.streamQueue.up=m.streamQueue.up.then(()=>async function e(){m.stats.up.upstreamInitialSync=m.stats.up.upstreamInitialSync+1;if(m.events.canceled.getValue())return;m.checkpointQueue=m.checkpointQueue.then(()=>(0,g.getLastCheckpointDoc)(m,"up"));var t=await m.checkpointQueue;var r=[];for(;!m.events.canceled.getValue();){a=o++;var n=await m.input.forkInstance.getChangedDocumentsSince(m.input.pushBatchSize,t);if(0===n.documents.length)break;t=(0,c.stackCheckpoints)([t,n.checkpoint]),r.push(s(n.documents,(0,v.ensureNotFalsy)(t)))}var i=await Promise.all(r);i=i.find(e=>!!e);i?await e():m.firstSyncDone.up.getValue()||m.events.canceled.getValue()||m.firstSyncDone.up.next(!0)}().then(()=>{i()})),0),a=-1,n=[],e=m.input.forkInstance.changeStream().pipe((0,u.filter)(e=>e.context!==m.downstreamBulkWriteFlag)).subscribe(e=>(m.stats.up.forkChangeStreamEmit=m.stats.up.forkChangeStreamEmit+1,n.push({task:e,time:o++}),m.input.waitBeforePersist?m.input.waitBeforePersist().then(()=>i()):i()));function i(){m.events.canceled.getValue()||0===n.length?m.events.active.up.next(!1):(m.stats.up.processTasks=m.stats.up.processTasks+1,m.events.active.up.next(!0),m.streamQueue.up=m.streamQueue.up.then(()=>{for(var e=[],t={};0<n.length;){var r=(0,v.ensureNotFalsy)(n.shift());r.time<a||((0,v.appendToArray)(e,r.task.events.map(e=>e.documentData)),t=(0,c.stackCheckpoints)([t,r.task.checkpoint]))}return(0===e.length?v.PROMISE_RESOLVE_FALSE:s(e,t)).then(()=>{0===n.length?m.events.active.up.next(!1):i()})}))}(0,u.firstValueFrom)(m.events.canceled.pipe((0,u.filter)(e=>!!e))).then(()=>e.unsubscribe());var r=v.PROMISE_RESOLVE_FALSE,b={docs:{}};function s(e,t){return m.stats.up.persistToMaster=m.stats.up.persistToMaster+1,e.forEach(e=>{var t=e[m.primaryPath];b.docs[t]=e}),b.checkpoint=t,r=r.then(async()=>{var i,e,o,a,s,u,c,r,n,t,l,d,f,p,h;return!m.events.canceled.getValue()&&(i=b.docs,b.docs={},e=b.checkpoint,0!==(l=Object.keys(i)).length)&&(o=await(0,O.getAssumedMasterState)(m,l),a={},s=[],u={},c={},await Promise.all(l.map(async e=>{var t=i[e],r=(c[e]=t,(0,w.writeDocToDocState)(t)),n=o[e];n&&n.metaDocument.isResolvedConflict!==t._rev&&(await m.input.conflictHandler({realMasterState:n.docData,newDocumentState:r},"upstream-check-if-equal")).isEqual||n&&n.docData._rev&&(0,v.parseRevision)(t._rev).height===t._meta[m.input.identifier]||(s.push(e),a[e]={assumedMasterState:n?n.docData:void 0,newDocumentState:r},u[e]=(0,O.getMetaWriteRow)(m,r,n?n.metaDocument:void 0))})),0!==s.length)&&(l=Object.values(a),r=new Set,n={},l=(0,v.batchArray)(l,m.input.pushBatchSize),await Promise.all(l.map(async e=>{(await y.masterWrite(e)).forEach(e=>{var t=e[m.primaryPath];r.add(t),n[t]=e})})),t=[],s.forEach(e=>{r.has(e)||(m.events.processed.up.next(a[e]),t.push(u[e]))}),0<t.length&&await m.input.metaInstance.bulkWrite(t,"replication-up-write-meta"),l=!1,0<r.size&&(m.stats.up.persistToMasterHadConflicts=m.stats.up.persistToMasterHadConflicts+1,d=[],f={},await Promise.all(Object.entries(n).map(([r,n])=>{var e=a[r],i={newDocumentState:e.newDocumentState,assumedMasterState:e.assumedMasterState,realMasterState:n};return(0,_.resolveConflictError)(m,i,c[r]).then(e=>{var t;e&&(m.events.resolvedConflicts.next({input:i,output:e.output}),d.push({previous:c[r],document:e.resolvedDoc}),t=o[r],f[r]=(0,O.getMetaWriteRow)(m,(0,v.ensureNotFalsy)(n),t?t.metaDocument:void 0,e.resolvedDoc._rev))})})),0<d.length)&&(l=!0,m.stats.up.persistToMasterConflictWrites=m.stats.up.persistToMasterConflictWrites+1,p=await m.input.forkInstance.bulkWrite(d,"replication-up-write-conflict"),h=[],Object.keys(p.success).forEach(e=>{h.push(f[e])}),0<h.length)&&await m.input.metaInstance.bulkWrite(h,"replication-up-write-conflict-meta"),m.checkpointQueue=m.checkpointQueue.then(()=>(0,g.setCheckpoint)(m,"up",e)),l)}).catch(e=>(m.events.error.next(e),!1))}};var u=e("rxjs"),c=e("../rx-storage-helper"),v=e("../plugins/utils"),g=e("./checkpoint"),_=e("./conflicts"),w=e("./helper"),O=e("./meta-instance")},{"../plugins/utils":494,"../rx-storage-helper":537,"./checkpoint":517,"./conflicts":518,"./helper":520,"./meta-instance":522,rxjs:552}],524:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenEvents=function t(e){var r=[];Array.isArray(e)?e.forEach(e=>{e=t(e);(0,o.appendToArray)(r,e)}):e.id&&e.events?e.events.forEach(e=>r.push(e)):r.push(e);var n=new Set;var i=[];r.forEach(e=>{n.has(e.eventId)||(n.add(e.eventId),i.push(e))});return i},r.getDocumentDataOfRxChangeEvent=function(e){return e.documentData||e.previousDocumentData},r.rxChangeEventToEventReduceChangeEvent=function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:n.overwritable.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData||"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}};var n=e("./overwritable"),o=e("./plugins/utils")},{"./overwritable":435,"./plugins/utils":494}],525:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRxCollectionStorageInstance=async function(e,t){return t.multiInstance=e.multiInstance,e.storage.createStorageInstance(t)},r.fillObjectDataBeforeInsert=function(e,t){t=(0,c.flatClone)(t),t=(0,n.fillObjectWithDefaults)(e,t),(t=(0,n.fillPrimaryKey)(e.primaryPath,e.jsonSchema,t))._meta=(0,c.getDefaultRxDocumentMeta)(),t.hasOwnProperty("_deleted")||(t._deleted=!1);t.hasOwnProperty("_attachments")||(t._attachments={});t.hasOwnProperty("_rev")||(t._rev=(0,c.getDefaultRevision)());return t},r.removeCollectionStorages=async function(t,e,r,n,i,o){var a=(await(0,d.getAllCollectionDocuments)(t.statics,e)).filter(e=>e.data.name===i),s=[],u=(a.forEach(e=>{s.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach(e=>s.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema}))}),new Set);s=s.filter(e=>{e=e.collectionName+"||"+e.schema.version;return!u.has(e)&&(u.add(e),!0)}),await Promise.all(s.map(async e=>{await(await t.createStorageInstance({collectionName:e.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:e.schema,devMode:p.overwritable.isDevMode()})).remove(),e.isCollection&&await(0,l.runAsyncPluginHooks)("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:i})})),o&&(o=a.map(e=>{var t=(0,f.flatCloneDocWithMeta)(e);return t._deleted=!0,t._meta.lwt=(0,c.now)(),t._rev=(0,c.createRevision)(r,e),{previous:e,document:t}}),await e.bulkWrite(o,"rx-database-remove-collection-all"))};var c=e("./plugins/utils"),n=e("./rx-schema-helper"),l=e("./hooks"),d=e("./rx-database-internal-store"),f=e("./rx-storage-helper"),p=e("./overwritable")},{"./hooks":432,"./overwritable":435,"./plugins/utils":494,"./rx-database-internal-store":527,"./rx-schema-helper":535,"./rx-storage-helper":537}],526:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxCollectionBase=void 0,r.createRxCollection=function({database:e,name:n,schema:i,instanceCreationOptions:o={},migrationStrategies:a={},autoMigrate:s=!0,statics:u={},methods:c={},attachments:l={},options:d={},localDocuments:f=!1,cacheReplacementPolicy:p=b.defaultCacheReplacementPolicy,conflictHandler:h=g.defaultConflictHandler}){var t={databaseInstanceToken:e.token,databaseName:e.name,collectionName:n,schema:i.jsonSchema,options:o,multiInstance:e.multiInstance,password:e.password,devMode:_.overwritable.isDevMode()};return(0,v.runPluginHooks)("preCreateRxStorageInstance",t),(0,y.createRxCollectionStorageInstance)(e,t).then(t=>{var r=new S(e,n,i,t,o,a,c,l,d,p,u,h);return r.prepare().then(()=>{Object.entries(u).forEach(([e,t])=>{Object.defineProperty(r,e,{get:()=>t.bind(r)})});var e=m.PROMISE_RESOLVE_VOID;return e=s&&0!==r.schema.version?r.migratePromise():e}).then(()=>((0,v.runPluginHooks)("createRxCollection",{collection:r,creator:{name:n,schema:i,storageInstance:t,instanceCreationOptions:o,migrationStrategies:a,methods:c,attachments:l,options:d,cacheReplacementPolicy:p,localDocuments:f,statics:u}}),r)).catch(e=>t.close().then(()=>Promise.reject(e)))})},r.isRxCollection=function(e){return e instanceof S},n(e("@babel/runtime/helpers/createClass"))),o=e("rxjs/operators"),m=e("./plugins/utils"),y=e("./rx-collection-helper"),a=e("./rx-query"),s=e("./rx-error"),u=e("./doc-cache"),b=e("./query-cache"),c=e("./change-event-buffer"),v=e("./hooks"),l=e("./rx-document-prototype-merge"),d=e("./rx-storage-helper"),g=e("./replication-protocol"),f=e("./incremental-write"),p=e("./rx-document"),_=e("./overwritable"),h=["pre","post"],w=["insert","save","remove","create"],O=!1,S=function(){function e(e,t,r,n,i={},o={},a={},s={},u={},c=b.defaultCacheReplacementPolicy,l={},d=g.defaultConflictHandler){var f;this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=(0,b.createQueryCache)(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=e,this.name=t,this.schema=r,this.internalStorageInstance=n,this.instanceCreationOptions=i,this.migrationStrategies=o,this.methods=a,this.attachments=s,this.options=u,this.cacheReplacementPolicy=c,this.statics=l,this.conflictHandler=d,e=this.asRxCollection,O||(O=!0,f=Object.getPrototypeOf(e),w.forEach(n=>{h.map(r=>{var e=r+(0,m.ucfirst)(n);f[e]=function(e,t){return this.addHook(r,n,e,t)}})}))}var t=e.prototype;return t.prepare=async function(){this.storageInstance=(0,d.getWrappedStorageInstance)(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new f.IncrementalWriteQueue(this.storageInstance,this.schema.primaryPath,(e,t)=>(0,p.beforeDocumentUpdateWrite)(this,e,t),e=>this._runHooks("post","save",e));var e=this.database.eventBulks$.pipe((0,o.filter)(e=>e.collectionName===this.name)),t=(this.$=e.pipe((0,o.mergeMap)(e=>e.events)),this.checkpoint$=e.pipe((0,o.map)(e=>e.checkpoint)),this._changeEventBuffer=(0,c.createChangeEventBuffer)(this.asRxCollection),this._docCache=new u.DocumentCache(this.schema.primaryPath,this.$.pipe((0,o.filter)(e=>!e.isLocal)),e=>(0,l.createNewRxDocument)(this.asRxCollection,e)),await this.database.storageToken),e=this.storageInstance.changeStream().subscribe(e=>{e={id:e.id,internal:!1,collectionName:this.name,storageToken:t,events:e.events.map(e=>(0,d.storageChangeEventToRxChangeEvent)(!1,e,this)),databaseToken:this.database.token,checkpoint:e.checkpoint,context:e.context};this.database.$emit(e)});return this._subs.push(e),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(t=>{this.conflictHandler(t.input,t.context).then(e=>{this.storageInstance.resolveConflictResultionTask({id:t.id,output:e})})})),m.PROMISE_RESOLVE_VOID},t.migrationNeeded=function(){throw(0,m.pluginMissing)("migration")},t.getDataMigrator=function(){throw(0,m.pluginMissing)("migration")},t.migrate=function(e=10){return this.getDataMigrator().migrate(e)},t.migratePromise=function(e=10){return this.getDataMigrator().migratePromise(e)},t.insert=async function(e){var t=await this.bulkInsert([e]),r=t.error[0];return(0,d.throwIfIsStorageWriteError)(this,e[this.schema.primaryPath],e,r),(0,m.ensureNotFalsy)(t.success[0])},t.bulkInsert=async function(e){var t,r,n;return 0===e.length?{success:[],error:[]}:(t=this.schema.primaryPath,e=e.map(e=>{return(0,y.fillObjectDataBeforeInsert)(this.schema,e)}),e=this.hasHooks("pre","insert")?await Promise.all(e.map(e=>this._runHooks("pre","insert",e).then(()=>e))):e,r=new Map,e=e.map(e=>{return r.set(e[t],e),{document:e}}),e=await this.storageInstance.bulkWrite(e,"rx-collection-bulk-insert"),n=Object.values(e.success).map(e=>this._docCache.getCachedRxDocument(e)),this.hasHooks("post","insert")&&await Promise.all(n.map(e=>this._runHooks("post","insert",r.get(e.primary),e))),{success:n,error:Object.values(e.error)})},t.bulkRemove=async function(e){var r,n,i,t;return 0===e.length?{success:[],error:[]}:(r=await this.findByIds(e).exec(),n=[],i=new Map,Array.from(r.values()).forEach(e=>{var t=e.toMutableJSON(!0);n.push(t),i.set(e.primary,t)}),await Promise.all(n.map(e=>{var t=e[this.schema.primaryPath];return this._runHooks("pre","remove",e,r.get(t))})),e=n.map(e=>{var t=(0,m.flatClone)(e);return t._deleted=!0,{previous:e,document:t}}),e=await this.storageInstance.bulkWrite(e,"rx-collection-bulk-remove"),t=Object.keys(e.success),await Promise.all(t.map(e=>this._runHooks("post","remove",i.get(e),r.get(e)))),{success:t.map(e=>(0,m.getFromMapOrThrow)(r,e)),error:Object.values(e.error)})},t.bulkUpsert=async function(e){var r=[],n=new Map,e=(e.forEach(e=>{var e=(0,y.fillObjectDataBeforeInsert)(this.schema,e),t=e[this.schema.primaryPath];if(!t)throw(0,s.newRxError)("COL3",{primaryPath:this.schema.primaryPath,data:e,schema:this.schema.jsonSchema});n.set(t,e),r.push(e)}),await this.bulkInsert(r)),t=e.success.slice(0),e=await Promise.all(e.error.map(async e=>{if(409!==e.status)throw(0,s.newRxError)("VD2",{collection:this.name,writeError:e});var t=e.documentId,r=(0,m.getFromMapOrThrow)(n,t),t=(0,m.ensureNotFalsy)(e.documentInDb);return await this._docCache.getCachedRxDocument(t).incrementalModify(()=>r)}));return(0,m.appendToArray)(t,e),t},t.upsert=function(e){return this.bulkUpsert([e]).then(e=>e[0])},t.incrementalUpsert=function(e){var t,i=(0,y.fillObjectDataBeforeInsert)(this.schema,e),o=i[this.schema.primaryPath];if(o)return t=(t=(t=this._incrementalUpsertQueues.get(o))||m.PROMISE_RESOLVE_VOID).then(()=>{var t=this,e=o,r=i,n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocument(n),inserted:!1}):t.findOne(e).exec().then(e=>e?{doc:e,inserted:!1}:t.insert(r).then(e=>({doc:e,inserted:!0})))}).then(e=>{return e.inserted?e.doc:(e=e.doc,t=i,e.incrementalModify(e=>t));var t}),this._incrementalUpsertQueues.set(o,t),t;throw(0,s.newRxError)("COL4",{data:e})},t.find=function(e){if("string"==typeof e)throw(0,s.newRxError)("COL5",{queryObj:e});return e=e||(0,a._getDefaultQuery)(),(0,a.createRxQuery)("find",e,this)},t.findOne=function(e){var t;if("string"==typeof e)t=(0,a.createRxQuery)("findOne",{selector:{[this.schema.primaryPath]:e},limit:1},this);else{if((e=e||(0,a._getDefaultQuery)()).limit)throw(0,s.newRxError)("QU6");e.limit=1,t=(0,a.createRxQuery)("findOne",e,this)}if("number"==typeof e||Array.isArray(e))throw(0,s.newRxTypeError)("COL6",{queryObj:e});return t},t.count=function(e){return e=e||(0,a._getDefaultQuery)(),(0,a.createRxQuery)("count",e,this)},t.findByIds=function(e){e={selector:{[this.schema.primaryPath]:{$in:e.slice(0)}}};return(0,a.createRxQuery)("findByIds",e,this)},t.exportJSON=function(){throw(0,m.pluginMissing)("json-dump")},t.importJSON=function(e){throw(0,m.pluginMissing)("json-dump")},t.insertCRDT=function(e){throw(0,m.pluginMissing)("crdt")},t.addHook=function(e,t,r,n=!1){if("function"!=typeof r)throw(0,s.newRxTypeError)("COL7",{key:t,when:e});if(!h.includes(e))throw(0,s.newRxTypeError)("COL8",{key:t,when:e});if(!w.includes(t))throw(0,s.newRxError)("COL9",{key:t});if("post"===e&&"create"===t&&!0===n)throw(0,s.newRxError)("COL10",{when:e,key:t,parallel:n});r=r.bind(this),n=n?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][n].push(r)},t.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},t.hasHooks=function(e,t){e=this.getHooks(e,t);return!!e&&(0<e.series.length||0<e.parallel.length)},t._runHooks=function(e,t,r,n){var i=this.getHooks(e,t);return i?(e=i.series.map(e=>()=>e(r,n)),(0,m.promiseSeries)(e).then(()=>Promise.all(i.parallel.map(e=>e(r,n))))):m.PROMISE_RESOLVE_VOID},t._runHooksSync=function(e,t,r,n){e=this.getHooks(e,t);e&&e.series.forEach(e=>e(r,n))},t.promiseWait=function(r){return new Promise(e=>{var t=setTimeout(()=>{this.timeouts.delete(t),e()},r);this.timeouts.add(t)})},t.destroy=function(){return this.destroyed?m.PROMISE_RESOLVE_FALSE:(this.destroyed=!0,Array.from(this.timeouts).forEach(e=>clearTimeout(e)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(e=>e()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(e=>e.unsubscribe()),delete this.database.collections[this.name],(0,v.runAsyncPluginHooks)("postDestroyRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.destroy(),await(0,y.removeCollectionStorages)(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.hashFunction)},(0,i.default)(e,[{key:"insert$",get:function(){return this.$.pipe((0,o.filter)(e=>"INSERT"===e.operation))}},{key:"update$",get:function(){return this.$.pipe((0,o.filter)(e=>"UPDATE"===e.operation))}},{key:"remove$",get:function(){return this.$.pipe((0,o.filter)(e=>"DELETE"===e.operation))}},{key:"asRxCollection",get:function(){return this}}]),e}();r.RxCollectionBase=S},{"./change-event-buffer":428,"./doc-cache":430,"./hooks":432,"./incremental-write":433,"./overwritable":435,"./plugins/utils":494,"./query-cache":515,"./replication-protocol":521,"./rx-collection-helper":525,"./rx-document":530,"./rx-document-prototype-merge":529,"./rx-error":531,"./rx-query":534,"./rx-storage-helper":537,"@babel/runtime/helpers/createClass":541,"@babel/runtime/helpers/interopRequireDefault":544,"rxjs/operators":777}],527:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STORAGE_TOKEN_DOCUMENT_KEY=r.STORAGE_TOKEN_DOCUMENT_ID=r.INTERNAL_STORE_SCHEMA_TITLE=r.INTERNAL_STORE_SCHEMA=r.INTERNAL_CONTEXT_STORAGE_TOKEN=r.INTERNAL_CONTEXT_COLLECTION=void 0,r._collectionNamePrimary=p,r.addConnectedStorageToCollection=async function(e,t,r){var n=l(p(e.name,e.schema.jsonSchema),c);for(;;){var i=await(0,s.getSingleDocument)(e.database.internalStore,n),o=(0,u.clone)((0,u.ensureNotFalsy)(i));if(o.data.connectedStorages||(o.data.connectedStorages=[]),o.data.connectedStorages.find(e=>e.collectionName===t&&e.schema.version===r.version))return;o.data.connectedStorages.push({collectionName:t,schema:r});try{await(0,s.writeSingle)(e.database.internalStore,{previous:(0,u.ensureNotFalsy)(i),document:o},"add-connected-storage-to-collection")}catch(e){if(!(0,a.isBulkWriteConflictError)(e))throw e}}},r.ensureStorageTokenDocumentExists=async function(e){var t=(0,u.randomCouchString)(10),r=e.password?e.hashFunction(JSON.stringify(e.password)):void 0,t={id:f,context:i,key:d,data:{token:t,instanceToken:e.token,passwordHash:r},_deleted:!1,_meta:(0,u.getDefaultRxDocumentMeta)(),_rev:(0,u.getDefaultRevision)(),_attachments:{}},e=await e.internalStore.bulkWrite([{document:t}],"internal-add-storage-token");if(e.success[f])return e.success[f];t=(0,u.ensureNotFalsy)(e.error[f]);if(t.isError&&409===t.status){e=t;if(r&&r!==e.documentInDb.data.passwordHash)throw(0,a.newRxError)("DB1",{passwordHash:r,existingPasswordHash:e.documentInDb.data.passwordHash});r=e.documentInDb;return(0,u.ensureNotFalsy)(r)}throw t},r.getAllCollectionDocuments=async function(e,t){e=e.prepareQuery(t.schema,{selector:{context:c},sort:[{id:"asc"}],skip:0});return(await t.query(e)).documents},r.getPrimaryKeyOfInternalDocument=l;var a=e("./rx-error"),n=e("./rx-schema-helper"),s=e("./rx-storage-helper"),u=e("./plugins/utils"),c="collection",i=(r.INTERNAL_CONTEXT_COLLECTION=c,"storage-token"),e=(r.INTERNAL_CONTEXT_STORAGE_TOKEN=i,"RxInternalDocument"),o=(r.INTERNAL_STORE_SCHEMA_TITLE=e,(0,n.fillWithDefaultSettings)({version:0,title:e,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[c,i,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}}));function l(e,t){return(0,n.getComposedPrimaryKeyOfDocumentData)(o,{key:e,context:t})}r.INTERNAL_STORE_SCHEMA=o;var d="storageToken",f=l(r.STORAGE_TOKEN_DOCUMENT_KEY=d,i);function p(e,t){return e+"-"+t.version}r.STORAGE_TOKEN_DOCUMENT_ID=f},{"./plugins/utils":494,"./rx-error":531,"./rx-schema-helper":535,"./rx-storage-helper":537}],528:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxDatabaseBase=void 0,r.createRxDatabase=function({storage:r,instanceCreationOptions:n,name:i,password:o,multiInstance:a=!0,eventReduce:s=!1,ignoreDuplicate:u=!1,options:c={},cleanupPolicy:l,allowSlowCount:d=!1,localDocuments:f=!1,hashFunction:p=m.defaultHashSha256}){(0,b.runPluginHooks)("preCreateRxDatabase",{storage:r,instanceCreationOptions:n,name:i,password:o,multiInstance:a,eventReduce:s,ignoreDuplicate:u,options:c,localDocuments:f}),u||function(e){if(w.has(e))throw(0,y.newRxError)("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(i);w.add(i);var h=(0,m.randomCouchString)(10);return E(h,r,i,n,a,o).catch(e=>{throw w.delete(i),e}).then(e=>{var t=new S(i,h,r,n,o,a,s,c,e,p,l,d);return(0,b.runAsyncPluginHooks)("createRxDatabase",{database:t,creator:{storage:r,instanceCreationOptions:n,name:i,password:o,multiInstance:a,eventReduce:s,ignoreDuplicate:u,options:c,localDocuments:f}}).then(()=>t)})},r.createRxDatabaseStorageInstance=E,r.dbCount=function(){return O},r.ensureNoStartupErrors=d,r.isRxDatabase=function(e){return e instanceof S},r.isRxDatabaseFirstTimeInstantiated=async function(e){return(await e.storageTokenDocument).data.instanceToken===e.token},r.removeRxDatabase=o,n(e("@babel/runtime/helpers/createClass"))),f=e("custom-idle-queue"),m=e("./plugins/utils"),y=e("./rx-error"),c=e("./rx-schema"),b=e("./hooks"),p=e("rxjs"),h=e("rxjs/operators"),l=e("./rx-collection"),v=e("./rx-storage-helper"),g=e("oblivious-set"),_=e("./rx-database-internal-store"),a=e("./rx-collection-helper"),s=e("./overwritable"),w=new Set,O=0,S=function(){function e(e,t,r,n,i,o,a=!1,s={},u,c,l,d){this.idleQueue=new f.IdleQueue,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new p.Subject,this.observable$=this.eventBulks$.pipe((0,h.mergeMap)(e=>e.events)),this.storageToken=m.PROMISE_RESOLVE_FALSE,this.storageTokenDocument=m.PROMISE_RESOLVE_FALSE,this.emittedEventBulkIds=new g.ObliviousSet(6e4),this.name=e,this.token=t,this.storage=r,this.instanceCreationOptions=n,this.password=i,this.multiInstance=o,this.eventReduce=a,this.options=s,this.internalStore=u,this.hashFunction=c,this.cleanupPolicy=l,this.allowSlowCount=d,O++,"pseudoInstance"!==this.name&&(this.internalStore=(0,v.getWrappedStorageInstance)(this.asRxDatabase,u,_.INTERNAL_STORE_SCHEMA),this.storageTokenDocument=(0,_.ensureStorageTokenDocumentExists)(this.asRxDatabase).catch(e=>this.startupErrors.push(e)),this.storageToken=this.storageTokenDocument.then(e=>e.data.token).catch(e=>this.startupErrors.push(e)))}var t=e.prototype;return t.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},t.removeCollectionDoc=async function(e,t){var r=await(0,v.getSingleDocument)(this.internalStore,(0,_.getPrimaryKeyOfInternalDocument)((0,_._collectionNamePrimary)(e,t),_.INTERNAL_CONTEXT_COLLECTION));if(!r)throw(0,y.newRxError)("SNH",{name:e,schema:t});e=(0,v.flatCloneDocWithMeta)(r);e._deleted=!0,await this.internalStore.bulkWrite([{document:e,previous:r}],"rx-database-remove-collection")},t.addCollections=async function(e){var o={},a={},s=[],u={},t=(Object.entries(e).forEach(([e,t])=>{var r=e,n=t.schema,i=(o[r]=n,(0,c.createRxSchema)(n,this.hashFunction));if(a[r]=i,this.collections[e])throw(0,y.newRxError)("DB3",{name:e});n=(0,_._collectionNamePrimary)(e,n),n={id:(0,_.getPrimaryKeyOfInternalDocument)(n,_.INTERNAL_CONTEXT_COLLECTION),key:n,context:_.INTERNAL_CONTEXT_COLLECTION,data:{name:r,schemaHash:i.hash,schema:i.jsonSchema,version:i.version,connectedStorages:[]},_deleted:!1,_meta:(0,m.getDefaultRxDocumentMeta)(),_rev:(0,m.getDefaultRevision)(),_attachments:{}},s.push({document:n}),n=Object.assign({},t,{name:r,schema:i,database:this}),i=(0,m.flatClone)(t);i.database=this,i.name=e,(0,b.runPluginHooks)("preCreateRxCollection",i),n.conflictHandler=i.conflictHandler,u[r]=n}),await this.internalStore.bulkWrite(s,"rx-database-add-collection")),r=(await d(this),Object.entries(t.error).forEach(([,e])=>{if(409!==e.status)throw(0,y.newRxError)("DB12",{database:this.name,writeError:e});var e=(0,m.ensureNotFalsy)(e.documentInDb),t=e.data.name,r=a[t];if(e.data.schemaHash!==r.hash)throw(0,y.newRxError)("DB6",{database:this.name,collection:t,previousSchemaHash:e.data.schemaHash,schemaHash:r.hash,previousSchema:e.data.schema,schema:(0,m.ensureNotFalsy)(o[t])})}),{});return await Promise.all(Object.keys(e).map(async e=>{var t=await(0,l.createRxCollection)(u[e]);r[e]=t,this.collections[e]=t,this[e]||Object.defineProperty(this,e,{get:()=>this.collections[e]})})),r},t.lockedRun=function(e){return this.idleQueue.wrapCall(e)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(e){throw(0,m.pluginMissing)("json-dump")},t.importJSON=function(e){throw(0,m.pluginMissing)("json-dump")},t.backup=function(e){throw(0,m.pluginMissing)("backup")},t.leaderElector=function(){throw(0,m.pluginMissing)("leader-election")},t.isLeader=function(){throw(0,m.pluginMissing)("leader-election")},t.waitForLeadership=function(){throw(0,m.pluginMissing)("leader-election")},t.migrationStates=function(){throw(0,m.pluginMissing)("migration")},t.destroy=async function(){return this.destroyed||(this.destroyed=!0,await(0,b.runAsyncPluginHooks)("preDestroyRxDatabase",this),this.eventBulks$.complete(),O--,this._subs.map(e=>e.unsubscribe()),"pseudoInstance"===this.name)?m.PROMISE_RESOLVE_FALSE:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(e=>e()))).then(()=>Promise.all(Object.keys(this.collections).map(e=>this.collections[e]).map(e=>e.destroy()))).then(()=>this.internalStore.close()).then(()=>w.delete(this.name)).then(()=>!0)},t.remove=function(){return this.destroy().then(()=>o(this.name,this.storage))},(0,i.default)(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),e}();async function E(e,t,r,n,i,o){return await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:v.INTERNAL_STORAGE_NAME,schema:_.INTERNAL_STORE_SCHEMA,options:n,multiInstance:i,password:o,devMode:s.overwritable.isDevMode()})}async function o(t,r){var n=(0,m.randomCouchString)(10),i=await E(n,r,t,{},!1),e=await(0,_.getAllCollectionDocuments)(r.statics,i),o=new Set,e=(e.forEach(e=>o.add(e.data.name)),Array.from(o));return await Promise.all(e.map(e=>(0,a.removeCollectionStorages)(r,i,n,t,e))),await(0,b.runAsyncPluginHooks)("postRemoveRxDatabase",{databaseName:t,storage:r}),await i.remove(),e}async function d(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}r.RxDatabaseBase=S},{"./hooks":432,"./overwritable":435,"./plugins/utils":494,"./rx-collection":526,"./rx-collection-helper":525,"./rx-database-internal-store":527,"./rx-error":531,"./rx-schema":536,"./rx-storage-helper":537,"@babel/runtime/helpers/createClass":541,"@babel/runtime/helpers/interopRequireDefault":544,"custom-idle-queue":110,"oblivious-set":406,rxjs:552,"rxjs/operators":777}],529:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createNewRxDocument=function(e,t){var r=(0,n.createWithConstructor)(c(e),e,o.overwritable.deepFreezeWhenDevMode(t));return e._runHooksSync("post","create",t,r),(0,i.runPluginHooks)("postCreateRxDocument",r),r},r.getDocumentOrmPrototype=l,r.getDocumentPrototype=u,r.getRxDocumentConstructor=c;var n=e("./rx-document"),i=e("./hooks"),o=e("./overwritable"),a=e("./plugins/utils"),s=new WeakMap;function u(e){var t=e.schema.getDocumentPrototype(),e=l(e),r=n.basePrototype,i={};return[t,e,r].forEach(n=>{Object.getOwnPropertyNames(n).forEach(e=>{var t=Object.getOwnPropertyDescriptor(n,e),r=!0;(e.startsWith("_")||e.endsWith("_")||e.startsWith("$")||e.endsWith("$"))&&(r=!1),"function"==typeof t.value?Object.defineProperty(i,e,{get(){return t.value.bind(this)},enumerable:r,configurable:!1}):(t.enumerable=r,t.configurable=!1,t.writable&&(t.writable=!1),Object.defineProperty(i,e,t))})}),i}function c(e){return(0,a.getFromMapOrCreate)(s,e,()=>(0,n.createRxDocumentConstructor)(u(e)))}function l(e){var r={};return Object.entries(e.methods).forEach(([e,t])=>{r[e]=t}),r}},{"./hooks":432,"./overwritable":435,"./plugins/utils":494,"./rx-document":530}],530:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.basePrototype=void 0,r.beforeDocumentUpdateWrite=h,r.createRxDocumentConstructor=function(e=f){function t(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0}return t.prototype=e,t},r.createWithConstructor=function(e,t,r){e=new e(t,r);return(0,a.runPluginHooks)("createRxDocument",e),e},r.defineGetterSetter=p,r.isRxDocument=function(e){return"object"==typeof e&&null!==e&&"isInstanceOfRxDocument"in e};var n=e("rxjs/operators"),o=e("./plugins/utils"),i=e("./rx-error"),a=e("./hooks"),s=e("./rx-change-event"),u=e("./overwritable"),c=e("./rx-schema-helper"),l=e("./rx-storage-helper"),d=e("./incremental-write"),f={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){if(this.isInstanceOfRxDocument)return this._data[this.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,n.map)(e=>e._deleted))},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){return this.collection.$.pipe((0,n.filter)(e=>!e.isLocal),(0,n.filter)(e=>e.documentId===this.primary),(0,n.map)(e=>(0,s.getDocumentDataOfRxChangeEvent)(e)),(0,n.startWith)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,n.distinctUntilChanged)((e,t)=>e._rev===t._rev),(0,n.map)(e=>this.collection._docCache.getCachedRxDocument(e)),(0,n.shareReplay)(o.RXJS_SHARE_REPLAY_DEFAULTS))},get$(t){if(u.overwritable.isDevMode()){if(t.includes(".item."))throw(0,i.newRxError)("DOC1",{path:t});if(t===this.primaryPath)throw(0,i.newRxError)("DOC2");if(this.collection.schema.finalFields.includes(t))throw(0,i.newRxError)("DOC3",{path:t});if(!(0,c.getSchemaByObjectPath)(this.collection.schema.jsonSchema,t))throw(0,i.newRxError)("DOC4",{path:t})}return this.$.pipe((0,n.map)(e=>(0,o.getProperty)(e,t)),(0,n.distinctUntilChanged)())},populate(e){var t=(0,c.getSchemaByObjectPath)(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return o.PROMISE_RESOLVE_NULL;if(!t)throw(0,i.newRxError)("DOC5",{path:e});if(!t.ref)throw(0,i.newRxError)("DOC6",{path:e,schemaObj:t});var n=this.collection.database.collections[t.ref];if(n)return"array"===t.type?n.findByIds(r).exec().then(e=>{e=e.values();return Array.from(e)}):n.findOne(r).exec();throw(0,i.newRxError)("DOC7",{ref:t.ref,path:e,schemaObj:t})},get(e){var t;if(this._data)return this._propertyCache.get(e)||("object"!=typeof(t=(0,o.getProperty)(this._data,e))||Array.isArray(t)?u.overwritable.deepFreezeWhenDevMode(t):(t=(0,o.clone)(t),p(this.collection.schema,t,e,this),this._propertyCache.set(e,t),t))},toJSON(e=!1){return e?u.overwritable.deepFreezeWhenDevMode(this._data):(delete(e=(0,o.flatClone)(this._data))._rev,delete e._attachments,delete e._deleted,delete e._meta,u.overwritable.deepFreezeWhenDevMode(e))},toMutableJSON(e=!1){return(0,o.clone)(this.toJSON(e))},update(e){throw(0,o.pluginMissing)("update")},incrementalUpdate(e){throw(0,o.pluginMissing)("update")},updateCRDT(e){throw(0,o.pluginMissing)("crdt")},putAttachment(){throw(0,o.pluginMissing)("attachments")},getAttachment(){throw(0,o.pluginMissing)("attachments")},allAttachments(){throw(0,o.pluginMissing)("attachments")},get allAttachments$(){throw(0,o.pluginMissing)("attachments")},async modify(e,t){var r=this._data,e=await(0,d.modifierFromPublicToInternal)(e)(r);return this._saveData(e,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,(0,d.modifierFromPublicToInternal)(e)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(e){var t=this._data,r=(0,o.clone)(t);return Object.entries(e).forEach(([e,t])=>{r[e]=t}),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify(r=>(Object.entries(e).forEach(([e,t])=>{r[e]=t}),r))},async _saveData(e,t){if(e=(0,o.flatClone)(e),this._data._deleted)throw(0,i.newRxError)("DOC11",{id:this.primary,document:this});await h(this.collection,e,t);var t=await this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),r=t.error[this.primary];return(0,l.throwIfIsStorageWriteError)(this.collection,this.primary,e,r),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument((0,o.getFromObjectOrThrow)(t.success,this.primary))},remove(){var r,t,n=this.collection;return this.deleted?Promise.reject((0,i.newRxError)("DOC13",{document:this,id:this.primary})):(r=(0,o.flatClone)(this._data),n._runHooks("pre","remove",r,this).then(async()=>{r._deleted=!0;var e=await n.storageInstance.bulkWrite([{previous:this._data,document:r}],"rx-document-remove"),t=e.error[this.primary];return(0,l.throwIfIsStorageWriteError)(n,this.primary,r,t),(0,o.getFromObjectOrThrow)(e.success,this.primary)}).then(e=>(t=e,this.collection._runHooks("post","remove",r,this))).then(()=>this.collection._docCache.getCachedRxDocument(t)))},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},destroy(){throw(0,i.newRxError)("DOC14")}};function p(e,r,n="",i=!1){null!==r&&void 0!==(e=(0,c.getSchemaByObjectPath)(e.jsonSchema,n))&&(e.properties&&(e=e.properties),Object.keys(e).forEach(e=>{var t=(0,o.trimDots)(n+"."+e);r.__defineGetter__(e,function(){var e=i||this;if(e.get&&"function"==typeof e.get)return e.get(t)}),Object.defineProperty(r,e+"$",{get:function(){return(i||this).get$(t)},enumerable:!1,configurable:!1}),Object.defineProperty(r,e+"_",{get:function(){return(i||this).populate(t)},enumerable:!1,configurable:!1}),r.__defineSetter__(e,function(e){return(i||this).set(t,e)})}))}function h(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),u.overwritable.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}r.basePrototype=f},{"./hooks":432,"./incremental-write":433,"./overwritable":435,"./plugins/utils":494,"./rx-change-event":524,"./rx-error":531,"./rx-schema-helper":535,"./rx-storage-helper":537,"rxjs/operators":777}],531:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxTypeError=r.RxError=void 0,r.isBulkWriteConflictError=function(e){return!(!e||409!==e.status)&&e},r.newRxError=l,r.newRxTypeError=function(e,t){return new c(e,i.overwritable.tunnelErrorMessage(e),t)},r.rxStorageWriteErrorToRxError=function(e){return l("COL20",{name:d[e.status],document:e.documentId,writeError:e})},n(e("@babel/runtime/helpers/createClass"))),a=n(e("@babel/runtime/helpers/inheritsLoose")),n=n(e("@babel/runtime/helpers/wrapNativeSuper")),i=e("./overwritable");function s(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+(n=r,t="",0===Object.keys(n).length?"":(t+="Given parameters: {\n")+Object.keys(n).map(e=>{var t="[object Object]";try{t="errors"===e?n[e].map(e=>JSON.stringify(e,Object.getOwnPropertyNames(e))):JSON.stringify(n[e],function(e,t){return void 0===t?null:t},2)}catch(e){}return e+":"+t}).join("\n")+"}");var n}var u=function(i){function e(e,t,r={}){var t=s(t,e,r),n=i.call(this,t)||this;return n.code=e,n.message=t,n.parameters=r,n.rxdb=!0,n}return(0,a.default)(e,i),e.prototype.toString=function(){return this.message},(0,o.default)(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),e}((0,n.default)(Error)),c=(r.RxError=u,function(i){function e(e,t,r={}){var t=s(t,e,r),n=i.call(this,t)||this;return n.code=e,n.message=t,n.parameters=r,n.rxdb=!0,n}return(0,a.default)(e,i),e.prototype.toString=function(){return this.message},(0,o.default)(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),e}((0,n.default)(TypeError)));function l(e,t){return new u(e,i.overwritable.tunnelErrorMessage(e),t)}r.RxTypeError=c;var d={409:"document write conflict",422:"schema validation error",510:"attachment data missing"}},{"./overwritable":435,"@babel/runtime/helpers/createClass":541,"@babel/runtime/helpers/inheritsLoose":543,"@babel/runtime/helpers/interopRequireDefault":544,"@babel/runtime/helpers/wrapNativeSuper":551}],532:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getQueryMatcher=function(e,t){var r;if(t.sort)return r=(0,i.getMingoQuery)(t.selector),e=>{return!e._deleted&&!!r.find([e]).next()};throw(0,n.newRxError)("SNH",{query:t})},r.getSortComparator=function(e,t){var a;if(t.sort)return a=[],t.sort.forEach(e=>{var t=Object.keys(e)[0],e=Object.values(e)[0];a.push({key:t,direction:e,getValueFn:(0,c.objectPathMonad)(t)})}),(e,t)=>{for(var r=0;r<a.length;++r){var n=a[r],i=n.getValueFn(e),o=n.getValueFn(t);if(i!==o)return"asc"===n.direction?(0,l.compare)(i,o):(0,l.compare)(o,i)}};throw(0,n.newRxError)("SNH",{query:t})},r.normalizeMangoQuery=function(e,t){var r=(0,u.getPrimaryFieldOfPrimaryKey)(e.primaryKey);(t=(0,c.flatClone)(t)).selector&&(t.selector=d(t.selector));var n,i=(0,c.clone)(t);"number"!=typeof i.skip&&(i.skip=0);i.selector?(i.selector=i.selector,Object.entries(i.selector).forEach(([e,t])=>{"object"==typeof t&&null!==t||(i.selector[e]={$eq:t})})):i.selector={};i.index&&((t=(0,c.toArray)(i.index)).includes(r)||t.push(r),i.index=t);{var o,a;i.sort?i.sort.find(e=>(0,c.firstPropertyNameOfObject)(e)===r)||(i.sort=i.sort.slice(0),i.sort.push({[r]:"asc"})):i.index?i.sort=i.index.map(e=>({[e]:"asc"})):(e.indexes&&(o=new Set,Object.entries(i.selector).forEach(([e,t])=>{"object"==typeof t&&null!==t&&!Object.keys(t).find(e=>s.LOGICAL_OPERATORS.has(e))||o.add(e)}),a=-1,e.indexes.forEach(e=>{var e=(0,c.isMaybeReadonlyArray)(e)?e:[e],t=e.findIndex(e=>!o.has(e));0<t&&a<t&&(a=t,n=e)}),n)&&(i.sort=n.map(e=>({[e]:"asc"}))),i.sort||(i.sort=[{[r]:"asc"}]))}return i},r.normalizeQueryRegex=d;var s=e("./query-planner"),u=e("./rx-schema-helper"),c=e("./plugins/utils"),l=e("mingo/util"),n=e("./rx-error"),i=e("./rx-query-mingo");function d(n){var e,i;return"object"!=typeof n||null===n?n:(e=Object.keys(n),i={},e.forEach(e=>{var t,r=n[e];"$regex"===e&&r instanceof RegExp?(t=(0,c.parseRegex)(r),i.$regex=t.pattern,i.$options=t.flags):Array.isArray(r)?i[e]=r.map(e=>d(e)):i[e]=d(r)}),i)}},{"./plugins/utils":494,"./query-planner":516,"./rx-error":531,"./rx-query-mingo":533,"./rx-schema-helper":535,"mingo/util":397}],533:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMingoQuery=function(e){d||((0,n.useOperators)(n.OperatorType.PIPELINE,{$sort:o.$sort,$project:o.$project}),(0,n.useOperators)(n.OperatorType.QUERY,{$and:a.$and,$eq:s.$eq,$elemMatch:c.$elemMatch,$exists:l.$exists,$gt:s.$gt,$gte:s.$gte,$in:s.$in,$lt:s.$lt,$lte:s.$lte,$ne:s.$ne,$nin:s.$nin,$mod:u.$mod,$nor:a.$nor,$not:a.$not,$or:a.$or,$regex:u.$regex,$size:c.$size,$type:l.$type}),d=!0);return new i.Query(e)};var n=e("mingo/core"),i=e("mingo/query"),o=e("mingo/operators/pipeline"),a=e("mingo/operators/query/logical"),s=e("mingo/operators/query/comparison"),u=e("mingo/operators/query/evaluation"),c=e("mingo/operators/query/array"),l=e("mingo/operators/query/element"),d=!1},{"mingo/core":159,"mingo/operators/pipeline":347,"mingo/operators/query/array":368,"mingo/operators/query/comparison":374,"mingo/operators/query/element":380,"mingo/operators/query/evaluation":383,"mingo/operators/query/logical":389,"mingo/query":396}],534:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxQueryBase=void 0,r._getDefaultQuery=m,r.createRxQuery=function(e,t,r,n){return(0,c.runPluginHooks)("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:n}),e=y(e=new h(e,t,r,n)),(0,d.triggerCacheReplacement)(r),e},r.isFindOneByIdQuery=_,r.isRxQuery=function(e){return e instanceof h},r.queryCollection=g,r.tunnelQueryCache=y,n(e("@babel/runtime/helpers/createClass"))),o=e("rxjs"),a=e("rxjs/operators"),u=e("./plugins/utils"),s=e("./rx-error"),c=e("./hooks"),l=e("./event-reduce"),d=e("./query-cache"),f=e("./rx-query-helper"),p=0,h=function(){function e(e,t,r,n={}){this.id=++p,this._execOverDatabaseCount=0,this._creationTime=(0,u.now)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new o.BehaviorSubject(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=u.PROMISE_RESOLVE_FALSE,this.op=e,this.mangoQuery=t,this.collection=r,this.other=n,t||(this.mangoQuery=m()),this.isFindOneByIdQuery=_(this.collection.schema.primaryPath,t)}var t=e.prototype;return t._setResultData=function(e){var t,r,n;"number"==typeof e?this._result={docsData:[],docsMap:new Map,docsDataMap:new Map,count:e,docs:[],time:(0,u.now)()}:(e instanceof Map&&(e=Array.from(e.values())),t=new Map,r=new Map,n=(e=e.map(e=>this.collection._docCache.getCachedRxDocument(e))).map(e=>(t.set(e.primary,e._data),r.set(e.primary,e),e._data)),this._result={docsData:n,docsMap:r,docsDataMap:t,count:n.length,docs:e,time:(0,u.now)()})},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,u.now)(),"count"===this.op){var e=this.getPreparedQuery(),e=await this.collection.storageInstance.count(e);if("slow"!==e.mode||this.collection.database.allowSlowCount)return e.count;throw(0,s.newRxError)("QU14",{collection:this.collection,queryObj:this.mangoQuery})}var r,n;return"findByIds"===this.op?(e=(0,u.ensureNotFalsy)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,r=new Map,n=[],e.forEach(e=>{var t=this.collection._docCache.getLatestDocumentDataIfExists(e);t?t._deleted||(t=this.collection._docCache.getCachedRxDocument(t),r.set(e,t)):n.push(e)}),0<n.length&&(e=await this.collection.storageInstance.findDocumentsById(n,!1),Object.values(e).forEach(e=>{e=this.collection._docCache.getCachedRxDocument(e);r.set(e.primary,e)})),r):g(this).then(e=>(this._lastExecEnd=(0,u.now)(),e))},t.exec=function(t){if(t&&"findOne"!==this.op)throw(0,s.newRxError)("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return v(this).then(()=>(0,o.firstValueFrom)(this.$)).then(e=>{if(!e&&t)throw(0,s.newRxError)("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return e})},t.toString=function(){var e=(0,u.sortObject)({op:this.op,query:this.mangoQuery,other:this.other},!0),t=JSON.stringify(e,u.stringifyFilter);return this.toString=()=>t,t},t.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:(0,f.normalizeMangoQuery)(this.collection.schema.jsonSchema,this.mangoQuery)},t=((0,c.runPluginHooks)("prePrepareQuery",e),this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema,e.mangoQuery));return this.getPreparedQuery=()=>t,t},t.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},t.remove=function(){return this.exec().then(e=>Array.isArray(e)?Promise.all(e.map(e=>e.remove())):e.remove())},t.update=function(e){throw(0,u.pluginMissing)("update")},t.where=function(e){throw(0,u.pluginMissing)("query-builder")},t.sort=function(e){throw(0,u.pluginMissing)("query-builder")},t.skip=function(e){throw(0,u.pluginMissing)("query-builder")},t.limit=function(e){throw(0,u.pluginMissing)("query-builder")},(0,i.default)(e,[{key:"$",get:function(){var e;return this._$||(e=this.collection.$.pipe((0,a.filter)(e=>!e.isLocal),(0,a.startWith)(null),(0,a.mergeMap)(()=>v(this)),(0,a.map)(()=>this._result),(0,a.shareReplay)(u.RXJS_SHARE_REPLAY_DEFAULTS),(0,a.distinctUntilChanged)((e,t)=>!(!e||e.time!==(0,u.ensureNotFalsy)(t).time)),(0,a.filter)(e=>!!e),(0,a.map)(e=>{e=(0,u.ensureNotFalsy)(e);return"count"===this.op?e.count:"findOne"===this.op?0===e.docs.length?null:e.docs[0]:"findByIds"===this.op?e.docsMap:e.docs.slice(0)})),this._$=(0,o.merge)(e,this.refCount$.pipe((0,a.filter)(()=>!1)))),this._$}},{key:"queryMatcher",get:function(){var e=this.collection.schema.jsonSchema,t=(0,f.normalizeMangoQuery)(this.collection.schema.jsonSchema,this.mangoQuery);return(0,u.overwriteGetterForCaching)(this,"queryMatcher",(0,f.getQueryMatcher)(e,t))}},{key:"asRxQuery",get:function(){return this}}]),e}();function m(){return{selector:{}}}function y(e){return e.collection._queryCache.getByQuery(e)}function b(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function v(s){return s.collection.database.destroyed||b(s)?u.PROMISE_RESOLVE_FALSE:(s._ensureEqualQueue=s._ensureEqualQueue.then(()=>{var t,e,r,n,i,o,a=s;return a._lastEnsureEqual=(0,u.now)(),a.collection.database.destroyed||b(a)?u.PROMISE_RESOLVE_FALSE:(e=t=!1,(e=-1===a._latestChangeEvent?!0:e)||(null===(r=a.asRxQuery.collection._changeEventBuffer.getFrom(a._latestChangeEvent+1))?e=!0:(a._latestChangeEvent=a.asRxQuery.collection._changeEventBuffer.counter,r=a.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r),"count"===a.op?(i=(0,u.ensureNotFalsy)(a._result).count,n=i,r.forEach(e=>{var t=e.previousDocumentData&&a.doesDocumentDataMatch(e.previousDocumentData),e=a.doesDocumentDataMatch(e.documentData);!t&&e&&n++,t&&!e&&n--}),n!==i&&(t=!0,a._setResultData(n))):(i=(0,l.calculateNewResults)(a,r)).runFullQueryAgain?e=!0:i.changed&&(t=!0,a._setResultData(i.newResults)))),e?(o=a.collection._changeEventBuffer.counter,a._execOverDatabase().then(e=>(a._latestChangeEvent=o,"number"==typeof e?a._result&&e===a._result.count||(t=!0,a._setResultData(e)):a._result&&(0,u.areRxDocumentArraysEqual)(a.collection.schema.primaryPath,e,a._result.docsData)||(t=!0,a._setResultData(e)),t))):Promise.resolve(t))}),s._ensureEqualQueue)}async function g(t){var e,r,n,i=[],o=t.collection;return t.isFindOneByIdQuery?Array.isArray(t.isFindOneByIdQuery)?0<(e=(e=t.isFindOneByIdQuery).filter(e=>{e=t.collection._docCache.getLatestDocumentDataIfExists(e);return!e||(e._deleted||i.push(e),!1)})).length&&(e=await o.storageInstance.findDocumentsById(e,!1),Object.values(e).forEach(e=>{i.push(e)})):(e=t.isFindOneByIdQuery,(r=t.collection._docCache.getLatestDocumentDataIfExists(e))||(n=await o.storageInstance.findDocumentsById([e],!1)).hasOwnProperty(e)&&(r=n[e]),r&&!r._deleted&&i.push(r)):(n=t.getPreparedQuery(),i=(await o.storageInstance.query(n)).documents),i}function _(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){t=t.selector[e];if("string"==typeof t)return t;if(1===Object.keys(t).length&&"string"==typeof t.$eq)return t.$eq;if(1===Object.keys(t).length&&Array.isArray(t.$eq)&&!t.$eq.find(e=>"string"!=typeof e))return t.$eq}return!1}r.RxQueryBase=h},{"./event-reduce":431,"./hooks":432,"./plugins/utils":494,"./query-cache":515,"./rx-error":531,"./rx-query-helper":532,"@babel/runtime/helpers/createClass":541,"@babel/runtime/helpers/interopRequireDefault":544,rxjs:552,"rxjs/operators":777}],535:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RX_META_SCHEMA=r.DEFAULT_CHECKPOINT_SCHEMA=void 0,r.fillObjectWithDefaults=function(e,t){for(var r=Object.keys(e.defaultValues),n=0;n<r.length;++n){var i=r[n];t.hasOwnProperty(i)&&void 0!==t[i]||(t[i]=e.defaultValues[i])}return t},r.fillPrimaryKey=function(e,t,r){if("string"!=typeof t.primaryKey){var n=s(t,r),i=r[e];if(i&&i!==n)throw(0,o.newRxError)("DOC19",{args:{documentData:r,existingPrimary:i,newPrimary:n},schema:t});r[e]=n}return r},r.fillWithDefaultSettings=u,r.getComposedPrimaryKeyOfDocumentData=s,r.getFinalFields=l,r.getLengthOfPrimaryKey=function(e){var t=a(e.primaryKey),e=i(e,t);return(0,n.ensureNotFalsy)(e.maxLength)},r.getPrimaryFieldOfPrimaryKey=a,r.getPseudoSchemaForVersion=function(e,t){return u({version:e,type:"object",primaryKey:t,properties:{[t]:{type:"string",maxLength:100}},required:[t]})},r.getSchemaByObjectPath=i,r.normalizeRxJsonSchema=function(e){return(0,n.sortObject)(e,!0)};var o=e("./rx-error"),n=e("./plugins/utils");function i(e,t){t=(t=t).replace(n.REGEX_ALL_DOTS,".properties.");return t=(0,n.trimDots)(t="properties."+t),(0,n.getProperty)(e,t)}function a(e){return"string"==typeof e?e:e.key}function s(e,r){return"string"==typeof e.primaryKey?r[e.primaryKey]:(e=e.primaryKey).fields.map(e=>{var t=(0,n.getProperty)(r,e);if(void 0===t)throw(0,o.newRxError)("DOC18",{args:{field:e,documentData:r}});return t}).join(e.separator)}function u(e){var t=a((e=(0,n.flatClone)(e)).primaryKey),r=(e.properties=(0,n.flatClone)(e.properties),e.additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=c,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments"),l(e));return(0,n.appendToArray)(e.required,r),e.required=e.required.filter(e=>!e.includes(".")).filter((e,t,r)=>r.indexOf(e)===t),e.version=e.version||0,e.indexes&&(e.indexes=e.indexes.map(e=>{var e=(0,n.isMaybeReadonlyArray)(e)?e.slice(0):[e];return e.includes(t)||(e=e.slice(0)).push(t),e})),e}var c={type:"object",properties:{lwt:{type:"number",minimum:n.RX_META_LWT_MINIMUM,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function l(t){var r=Object.keys(t.properties).filter(e=>t.properties[e].final),e=a(t.primaryKey);return r.push(e),"string"!=typeof t.primaryKey&&t.primaryKey.fields.forEach(e=>r.push(e)),r}r.RX_META_SCHEMA=c;r.DEFAULT_CHECKPOINT_SCHEMA={type:"object",properties:{id:{type:"string"},lwt:{type:"number"}},required:["id","lwt"],additionalProperties:!1}},{"./plugins/utils":494,"./rx-error":531}],536:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.RxSchema=void 0,r.createRxSchema=function(e,t,r=!0){r&&(0,s.runPluginHooks)("preCreateRxSchema",e);r=(0,c.fillWithDefaultSettings)(e),r=(0,c.normalizeRxJsonSchema)(r),l.overwritable.deepFreezeWhenDevMode(r),e=new d(r,t);return(0,s.runPluginHooks)("createRxSchema",e),e},r.getIndexes=f,r.getPreviousVersions=function(e){var e=e.version||0,t=0;return new Array(e).fill(0).map(()=>t++)},r.isRxSchema=function(e){return e instanceof d},r.toTypedRxJsonSchema=function(e){return e},n(e("@babel/runtime/helpers/createClass"))),o=e("./plugins/utils"),a=e("./rx-error"),s=e("./hooks"),u=e("./rx-document"),c=e("./rx-schema-helper"),l=e("./overwritable"),d=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=f(this.jsonSchema),this.primaryPath=(0,c.getPrimaryFieldOfPrimaryKey)(this.jsonSchema.primaryKey),this.finalFields=(0,c.getFinalFields)(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(t,r){this.finalFields.forEach(e=>{if(!(0,o.deepEqual)(t[e],r[e]))throw(0,a.newRxError)("DOC9",{dataBefore:t,dataAfter:r,fieldName:e,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var e={};return(0,u.defineGetterSetter)(this,e,""),(0,o.overwriteGetterForCaching)(this,"getDocumentPrototype",()=>e),e},t.getPrimaryOfDocumentData=function(e){return(0,c.getComposedPrimaryKeyOfDocumentData)(this.jsonSchema,e)},(0,i.default)(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,e])=>e.hasOwnProperty("default")).forEach(([e,t])=>r[e]=t.default),(0,o.overwriteGetterForCaching)(this,"defaultValues",r)}},{key:"hash",get:function(){return(0,o.overwriteGetterForCaching)(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),e}();function f(e){return(e.indexes||[]).map(e=>(0,o.isMaybeReadonlyArray)(e)?e:[e])}r.RxSchema=d},{"./hooks":432,"./overwritable":435,"./plugins/utils":494,"./rx-document":530,"./rx-error":531,"./rx-schema-helper":535,"@babel/runtime/helpers/createClass":541,"@babel/runtime/helpers/interopRequireDefault":544}],537:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RX_DATABASE_LOCAL_DOCS_STORAGE_NAME=r.INTERNAL_STORAGE_NAME=void 0,r.attachmentWriteDataToNormalData=i,r.categorizeBulkWriteRows=function(e,c,l,d,t){for(var f,p=!!e.schema.attachments,h=[],m=[],y={},b=new Map,v=(0,A.randomCouchString)(10),e={id:v,events:[],checkpoint:null,context:t},g=e.events,_=[],w=[],O=[],S=(0,A.now)(),E="function"==typeof l.get,x=E?0<l.size:0<Object.keys(l).length,r=d.length,P=0;P<r;P++)!function(){var r,i=d[P],o=i.document[c],n=!1;if(n=x?E?l.get(o):l[o]:n){var e=n._rev;if(!i.previous||i.previous&&e!==i.previous._rev)return e={isError:!0,status:409,documentId:o,writeRow:i,documentInDb:n},y[o]=e;var a=p?M(i):i,e=(p&&(i.document._deleted?i.previous&&Object.keys(i.previous._attachments).forEach(e=>{w.push({documentId:o,attachmentId:e,digest:(0,A.ensureNotFalsy)(i.previous)._attachments[e].digest})}):(Object.entries(i.document._attachments).find(([e,t])=>{return(i.previous?i.previous._attachments[e]:void 0)||t.data||(r={documentId:o,documentInDb:n,isError:!0,status:510,writeRow:i,attachmentId:e}),!0}),r||Object.entries(i.document._attachments).forEach(([e,t])=>{var r,n=i.previous?i.previous._attachments[e]:void 0;n?(r=a.document._attachments[e].digest,t.data&&n.digest!==r&&O.push({documentId:o,attachmentId:e,attachmentData:t,digest:(0,A.defaultHashSha256)(t.data)})):_.push({documentId:o,attachmentId:e,attachmentData:t,digest:(0,A.defaultHashSha256)(t.data)})}))),r?y[o]=r:(m.push(a),(!f||f.document._meta.lwt<a.document._meta.lwt)&&(f=a)),i.document),t=null,s=null,u=null;if(i.previous&&i.previous._deleted&&!e._deleted)u="INSERT",t=p?I(e):e;else{if(!i.previous||i.previous._deleted||e._deleted){if(!e._deleted)throw(0,j.newRxError)("SNH",{args:{writeRow:i}});u="DELETE",t=(0,A.ensureNotFalsy)(i.document)}else u="UPDATE",t=p?I(e):e;s=i.previous}e={eventId:R(v,P,o,i),documentId:o,documentData:t,previousDocumentData:s,operation:u,startTime:S,endTime:(0,A.now)()};b.set(o,e),g.push(e)}else{t=!!i.document._deleted;p&&Object.entries(i.document._attachments).forEach(([e,t])=>{t.data?_.push({documentId:o,attachmentId:e,attachmentData:t,digest:(0,A.defaultHashSha256)(t.data)}):(r={documentId:o,isError:!0,status:510,writeRow:i,attachmentId:e},y[o]=r)}),!r&&(h.push(p?M(i):i),!f||f.document._meta.lwt<i.document._meta.lwt)&&(f=i),t||(s={eventId:R(v,P,o,i),documentId:o,operation:"INSERT",documentData:p?I(i.document):i.document,previousDocumentData:p&&i.previous?I(i.previous):i.previous,startTime:S,endTime:(0,A.now)()},b.set(o,s),g.push(s))}}();return{bulkInsertDocs:h,bulkUpdateDocs:m,newestRow:f,errors:y,changeByDocId:b,eventBulk:e,attachmentsAdd:_,attachmentsRemove:w,attachmentsUpdate:O}},r.ensureRxStorageInstanceParamsAreCorrect=function(e){if(e.schema.keyCompression)throw(0,j.newRxError)("UT5",{args:{params:e}});if(o(e.schema))throw(0,j.newRxError)("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw(0,j.newRxError)("UT7",{args:{params:e}})},r.flatCloneDocWithMeta=function(e){var t=(0,A.flatClone)(e);return t._meta=(0,A.flatClone)(e._meta),t},r.getAttachmentSize=n,r.getSingleDocument=async function(e,t){e=(await e.findDocumentsById([t],!1))[t];return e||null},r.getUniqueDeterministicEventKey=R,r.getWrappedStorageInstance=function(o,a,r){s.overwritable.deepFreezeWhenDevMode(r);var n=(0,u.getPrimaryFieldOfPrimaryKey)(r.primaryKey);var e={originalStorageInstance:a,schema:a.schema,internals:a.internals,collectionName:a.collectionName,databaseName:a.databaseName,options:a.options,bulkWrite(e,i){var t=e.map(e=>{return t=e,(e=(0,A.flatClone)(t.document))._meta=(0,A.flatClone)(e._meta),s.overwritable.isDevMode()&&(e=(0,u.fillPrimaryKey)(n,r,e),t.previous,t.previous)&&Object.keys(t.previous._meta).forEach(e=>{if(!t.document._meta.hasOwnProperty(e))throw(0,j.newRxError)("SNH",{dataBefore:t.previous,dataAfter:t.document})}),e._meta.lwt=(0,A.now)(),e._rev=(0,A.createRevision)(o.token,t.previous),{document:e,previous:t.previous};var t});return o.lockedRun(()=>a.bulkWrite(t,i)).then(e=>{var t,r,n=Object.values(e.error).filter(e=>!(409!==e.status||e.writeRow.previous||e.writeRow.document._deleted||!(0,A.ensureNotFalsy)(e.documentInDb)._deleted));return 0<n.length?(t={error:(0,A.flatClone)(e.error),success:(0,A.flatClone)(e.success)},r=n.map(e=>(delete t.error[e.documentId],{previous:e.documentInDb,document:Object.assign({},e.writeRow.document,{_rev:(0,A.createRevision)(o.token,e.documentInDb)})})),o.lockedRun(()=>a.bulkWrite(r,i)).then(e=>(t.error=Object.assign(t.error,e.error),t.success=Object.assign(t.success,e.success),t))):e})},query(e){return o.lockedRun(()=>a.query(e))},count(e){return o.lockedRun(()=>a.count(e))},findDocumentsById(e,t){return o.lockedRun(()=>a.findDocumentsById(e,t))},getAttachmentData(e,t,r){return o.lockedRun(()=>a.getAttachmentData(e,t,r))},getChangedDocumentsSince(e,t){return o.lockedRun(()=>a.getChangedDocumentsSince((0,A.ensureNotFalsy)(e),t))},cleanup(e){return o.lockedRun(()=>a.cleanup(e))},remove(){return o.storageInstances.delete(e),o.lockedRun(()=>a.remove())},close(){return o.storageInstances.delete(e),o.lockedRun(()=>a.close())},changeStream(){return a.changeStream()},conflictResultionTasks(){return a.conflictResultionTasks()},resolveConflictResultionTask(e){var t;return e.output.isEqual?a.resolveConflictResultionTask(e):(t=Object.assign({},e.output.documentData,{_meta:(0,A.getDefaultRxDocumentMeta)(),_rev:(0,A.getDefaultRevision)(),_attachments:{}}),delete(t=(0,A.flatClone)(t))._meta,delete t._rev,delete t._attachments,a.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:t}}))}};return o.storageInstances.add(e),e},r.hasEncryption=o,r.stackCheckpoints=function(e){return Object.assign({},...e)},r.storageChangeEventToRxChangeEvent=function(e,t,r){var n=t.documentData,i=t.previousDocumentData;return{eventId:t.eventId,documentId:t.documentId,collectionName:r?r.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.operation,documentData:s.overwritable.deepFreezeWhenDevMode(n),previousDocumentData:s.overwritable.deepFreezeWhenDevMode(i)}},r.stripAttachmentsDataFromDocument=I,r.stripAttachmentsDataFromRow=M,r.throwIfIsStorageWriteError=function(e,t,r,n){if(n)throw 409===n.status?(0,j.newRxError)("CONFLICT",{collection:e.name,id:t,writeError:n,data:r}):422===n.status?(0,j.newRxError)("VD2",{collection:e.name,id:t,writeError:n,data:r}):n},r.writeSingle=async function(e,t,r){e=await e.bulkWrite([t],r);{if(0<Object.keys(e.error).length)throw(0,A.firstPropertyValueOfObject)(e.error);return(0,A.firstPropertyValueOfObject)(e.success)}};var s=e("./overwritable"),j=e("./rx-error"),u=e("./rx-schema-helper"),A=e("./plugins/utils");r.INTERNAL_STORAGE_NAME="_rxdb_internal";function M(e){return{previous:e.previous,document:I(e.document)}}function n(e){return atob(e).length}function i(e){var t=e.data;return t?{digest:(0,A.defaultHashSha256)(t),length:n(t),type:e.type}:e}function I(e){var r=(0,A.flatClone)(e);return r._attachments={},Object.entries(e._attachments).forEach(([e,t])=>{r._attachments[e]=i(t)}),r}function R(e,t,r,n){return e+"|"+t+"|"+r+"|"+n.document._rev}function o(e){return!!(e.encrypted&&0<e.encrypted.length||e.attachments&&e.attachments.encrypted)}r.RX_DATABASE_LOCAL_DOCS_STORAGE_NAME="rxdatabase_storage_local"},{"./overwritable":435,"./plugins/utils":494,"./rx-error":531,"./rx-schema-helper":535}],538:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BROADCAST_CHANNEL_BY_TOKEN=void 0,r.addRxStorageMultiInstanceSupport=function(t,r,e,n){var i,o,a,s,u,c,l,d;r.multiInstance&&(i=n||h(r.databaseInstanceToken,e.databaseName,e),o=new f.Subject,a=e=>{e.storageName===t&&e.databaseName===r.databaseName&&e.collectionName===r.collectionName&&e.version===r.schema.version&&o.next(e.eventBulk)},i.addEventListener("message",a),s=e.changeStream(),u=!1,c=s.subscribe(e=>{u||i.postMessage({storageName:t,databaseName:r.databaseName,collectionName:r.collectionName,version:r.schema.version,eventBulk:e})}),e.changeStream=function(){return o.asObservable().pipe((0,p.mergeWith)(s))},l=e.close.bind(e),e.close=async function(){return u=!0,c.unsubscribe(),i.removeEventListener("message",a),n||await m(r.databaseInstanceToken,e),l()},d=e.remove.bind(e),e.remove=async function(){return u=!0,c.unsubscribe(),i.removeEventListener("message",a),n||await m(r.databaseInstanceToken,e),d()})},r.getBroadcastChannelReference=h,r.removeBroadcastChannelReference=m;var f=e("rxjs"),p=e("rxjs/operators"),i=e("broadcast-channel"),o=new Map;function h(e,t,r){var n=o.get(e);return n||(n={bc:new i.BroadcastChannel("RxDB:"+t),refs:new Set},o.set(e,n)),n.refs.add(r),n.bc}function m(e,t){var r=o.get(e);if(r)return r.refs.delete(t),0===r.refs.size?(o.delete(e),r.bc.close()):void 0}r.BROADCAST_CHANNEL_BY_TOKEN=o},{"broadcast-channel":85,rxjs:552,"rxjs/operators":777}],539:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RxStorageDefaultStatics=void 0;var n=e("./rx-error"),i=e("./query-planner"),e={prepareQuery(e,t){if(t.sort)return{query:t,queryPlan:(0,i.getQueryPlan)(e,t)};throw(0,n.newRxError)("SNH",{query:t})},checkpointSchema:e("./rx-schema-helper").DEFAULT_CHECKPOINT_SCHEMA};r.RxStorageDefaultStatics=e},{"./query-planner":516,"./rx-error":531,"./rx-schema-helper":535}],540:[function(e,n,t){var i=e("./setPrototypeOf.js"),o=e("./isNativeReflectConstruct.js");function a(e,t,r){return o()?n.exports=a=Reflect.construct.bind():n.exports=a=function(e,t,r){var n=[null];n.push.apply(n,t);t=new(Function.bind.apply(e,n));return r&&i(t,r.prototype),t},n.exports.__esModule=!0,n.exports.default=n.exports,a.apply(null,arguments)}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports},{"./isNativeReflectConstruct.js":546,"./setPrototypeOf.js":547}],541:[function(e,t,r){var i=e("./toPropertyKey.js");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":549}],542:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],543:[function(e,t,r){var n=e("./setPrototypeOf.js");t.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":547}],544:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],545:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],546:[function(e,t,r){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],547:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r.exports.__esModule=!0,r.exports.default=r.exports,n(e,t)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},{}],548:[function(e,t,r){var n=e("./typeof.js").default;t.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if(r=r.call(e,t||"default"),"object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":550}],549:[function(e,t,r){var n=e("./typeof.js").default,i=e("./toPrimitive.js");t.exports=function(e){return e=i(e,"string"),"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":548,"./typeof.js":550}],550:[function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],551:[function(e,t,r){var n=e("./getPrototypeOf.js"),i=e("./setPrototypeOf.js"),o=e("./isNativeFunction.js"),a=e("./construct.js");function s(e){var r="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":540,"./getPrototypeOf.js":542,"./isNativeFunction.js":545,"./setPrototypeOf.js":547}],552:[function(e,T,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),r=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.interval=t.iif=t.generate=t.fromEventPattern=t.fromEvent=t.from=t.forkJoin=t.empty=t.defer=t.connectable=t.concat=t.combineLatest=t.bindNodeCallback=t.bindCallback=t.UnsubscriptionError=t.TimeoutError=t.SequenceError=t.ObjectUnsubscribedError=t.NotFoundError=t.EmptyError=t.ArgumentOutOfRangeError=t.firstValueFrom=t.lastValueFrom=t.isObservable=t.identity=t.noop=t.pipe=t.NotificationKind=t.Notification=t.Subscriber=t.Subscription=t.Scheduler=t.VirtualAction=t.VirtualTimeScheduler=t.animationFrameScheduler=t.animationFrame=t.queueScheduler=t.queue=t.asyncScheduler=t.async=t.asapScheduler=t.asap=t.AsyncSubject=t.ReplaySubject=t.BehaviorSubject=t.Subject=t.animationFrames=t.observable=t.ConnectableObservable=t.Observable=void 0,t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.combineLatestWith=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=t.config=t.NEVER=t.EMPTY=t.scheduled=t.zip=t.using=t.timer=t.throwError=t.range=t.race=t.partition=t.pairs=t.onErrorResumeNext=t.of=t.never=t.merge=void 0,t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.pairwise=t.onErrorResumeNextWith=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=t.mergeAll=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=void 0,t.zipWith=t.zipAll=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=void 0,e("./internal/Observable")),o=(Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return i.Observable}}),e("./internal/observable/ConnectableObservable")),a=(Object.defineProperty(t,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}}),e("./internal/symbol/observable")),s=(Object.defineProperty(t,"observable",{enumerable:!0,get:function(){return a.observable}}),e("./internal/observable/dom/animationFrames")),u=(Object.defineProperty(t,"animationFrames",{enumerable:!0,get:function(){return s.animationFrames}}),e("./internal/Subject")),c=(Object.defineProperty(t,"Subject",{enumerable:!0,get:function(){return u.Subject}}),e("./internal/BehaviorSubject")),l=(Object.defineProperty(t,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}}),e("./internal/ReplaySubject")),d=(Object.defineProperty(t,"ReplaySubject",{enumerable:!0,get:function(){return l.ReplaySubject}}),e("./internal/AsyncSubject")),f=(Object.defineProperty(t,"AsyncSubject",{enumerable:!0,get:function(){return d.AsyncSubject}}),e("./internal/scheduler/asap")),p=(Object.defineProperty(t,"asap",{enumerable:!0,get:function(){return f.asap}}),Object.defineProperty(t,"asapScheduler",{enumerable:!0,get:function(){return f.asapScheduler}}),e("./internal/scheduler/async")),h=(Object.defineProperty(t,"async",{enumerable:!0,get:function(){return p.async}}),Object.defineProperty(t,"asyncScheduler",{enumerable:!0,get:function(){return p.asyncScheduler}}),e("./internal/scheduler/queue")),m=(Object.defineProperty(t,"queue",{enumerable:!0,get:function(){return h.queue}}),Object.defineProperty(t,"queueScheduler",{enumerable:!0,get:function(){return h.queueScheduler}}),e("./internal/scheduler/animationFrame")),y=(Object.defineProperty(t,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(t,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}}),e("./internal/scheduler/VirtualTimeScheduler")),b=(Object.defineProperty(t,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(t,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}}),e("./internal/Scheduler")),v=(Object.defineProperty(t,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}}),e("./internal/Subscription")),g=(Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return v.Subscription}}),e("./internal/Subscriber")),_=(Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return g.Subscriber}}),e("./internal/Notification")),w=(Object.defineProperty(t,"Notification",{enumerable:!0,get:function(){return _.Notification}}),Object.defineProperty(t,"NotificationKind",{enumerable:!0,get:function(){return _.NotificationKind}}),e("./internal/util/pipe")),O=(Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return w.pipe}}),e("./internal/util/noop")),S=(Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return O.noop}}),e("./internal/util/identity")),E=(Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return S.identity}}),e("./internal/util/isObservable")),x=(Object.defineProperty(t,"isObservable",{enumerable:!0,get:function(){return E.isObservable}}),e("./internal/lastValueFrom")),P=(Object.defineProperty(t,"lastValueFrom",{enumerable:!0,get:function(){return x.lastValueFrom}}),e("./internal/firstValueFrom")),j=(Object.defineProperty(t,"firstValueFrom",{enumerable:!0,get:function(){return P.firstValueFrom}}),e("./internal/util/ArgumentOutOfRangeError")),A=(Object.defineProperty(t,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return j.ArgumentOutOfRangeError}}),e("./internal/util/EmptyError")),M=(Object.defineProperty(t,"EmptyError",{enumerable:!0,get:function(){return A.EmptyError}}),e("./internal/util/NotFoundError")),I=(Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return M.NotFoundError}}),e("./internal/util/ObjectUnsubscribedError")),R=(Object.defineProperty(t,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return I.ObjectUnsubscribedError}}),e("./internal/util/SequenceError")),C=(Object.defineProperty(t,"SequenceError",{enumerable:!0,get:function(){return R.SequenceError}}),e("./internal/operators/timeout")),k=(Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return C.TimeoutError}}),e("./internal/util/UnsubscriptionError")),$=(Object.defineProperty(t,"UnsubscriptionError",{enumerable:!0,get:function(){return k.UnsubscriptionError}}),e("./internal/observable/bindCallback")),D=(Object.defineProperty(t,"bindCallback",{enumerable:!0,get:function(){return $.bindCallback}}),e("./internal/observable/bindNodeCallback")),N=(Object.defineProperty(t,"bindNodeCallback",{enumerable:!0,get:function(){return D.bindNodeCallback}}),e("./internal/observable/combineLatest")),L=(Object.defineProperty(t,"combineLatest",{enumerable:!0,get:function(){return N.combineLatest}}),e("./internal/observable/concat")),F=(Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return L.concat}}),e("./internal/observable/connectable")),B=(Object.defineProperty(t,"connectable",{enumerable:!0,get:function(){return F.connectable}}),e("./internal/observable/defer")),U=(Object.defineProperty(t,"defer",{enumerable:!0,get:function(){return B.defer}}),e("./internal/observable/empty")),z=(Object.defineProperty(t,"empty",{enumerable:!0,get:function(){return U.empty}}),e("./internal/observable/forkJoin")),W=(Object.defineProperty(t,"forkJoin",{enumerable:!0,get:function(){return z.forkJoin}}),e("./internal/observable/from")),q=(Object.defineProperty(t,"from",{enumerable:!0,get:function(){return W.from}}),e("./internal/observable/fromEvent")),K=(Object.defineProperty(t,"fromEvent",{enumerable:!0,get:function(){return q.fromEvent}}),e("./internal/observable/fromEventPattern")),V=(Object.defineProperty(t,"fromEventPattern",{enumerable:!0,get:function(){return K.fromEventPattern}}),e("./internal/observable/generate")),H=(Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return V.generate}}),e("./internal/observable/iif")),G=(Object.defineProperty(t,"iif",{enumerable:!0,get:function(){return H.iif}}),e("./internal/observable/interval")),Z=(Object.defineProperty(t,"interval",{enumerable:!0,get:function(){return G.interval}}),e("./internal/observable/merge")),Y=(Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return Z.merge}}),e("./internal/observable/never")),Q=(Object.defineProperty(t,"never",{enumerable:!0,get:function(){return Y.never}}),e("./internal/observable/of")),J=(Object.defineProperty(t,"of",{enumerable:!0,get:function(){return Q.of}}),e("./internal/observable/onErrorResumeNext")),X=(Object.defineProperty(t,"onErrorResumeNext",{enumerable:!0,get:function(){return J.onErrorResumeNext}}),e("./internal/observable/pairs")),ee=(Object.defineProperty(t,"pairs",{enumerable:!0,get:function(){return X.pairs}}),e("./internal/observable/partition")),te=(Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return ee.partition}}),e("./internal/observable/race")),re=(Object.defineProperty(t,"race",{enumerable:!0,get:function(){return te.race}}),e("./internal/observable/range")),ne=(Object.defineProperty(t,"range",{enumerable:!0,get:function(){return re.range}}),e("./internal/observable/throwError")),ie=(Object.defineProperty(t,"throwError",{enumerable:!0,get:function(){return ne.throwError}}),e("./internal/observable/timer")),oe=(Object.defineProperty(t,"timer",{enumerable:!0,get:function(){return ie.timer}}),e("./internal/observable/using")),ae=(Object.defineProperty(t,"using",{enumerable:!0,get:function(){return oe.using}}),e("./internal/observable/zip")),se=(Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return ae.zip}}),e("./internal/scheduled/scheduled")),ue=(Object.defineProperty(t,"scheduled",{enumerable:!0,get:function(){return se.scheduled}}),e("./internal/observable/empty")),ce=(Object.defineProperty(t,"EMPTY",{enumerable:!0,get:function(){return ue.EMPTY}}),e("./internal/observable/never")),le=(Object.defineProperty(t,"NEVER",{enumerable:!0,get:function(){return ce.NEVER}}),r(e("./internal/types"),t),e("./internal/config")),de=(Object.defineProperty(t,"config",{enumerable:!0,get:function(){return le.config}}),e("./internal/operators/audit")),fe=(Object.defineProperty(t,"audit",{enumerable:!0,get:function(){return de.audit}}),e("./internal/operators/auditTime")),pe=(Object.defineProperty(t,"auditTime",{enumerable:!0,get:function(){return fe.auditTime}}),e("./internal/operators/buffer")),he=(Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return pe.buffer}}),e("./internal/operators/bufferCount")),me=(Object.defineProperty(t,"bufferCount",{enumerable:!0,get:function(){return he.bufferCount}}),e("./internal/operators/bufferTime")),ye=(Object.defineProperty(t,"bufferTime",{enumerable:!0,get:function(){return me.bufferTime}}),e("./internal/operators/bufferToggle")),be=(Object.defineProperty(t,"bufferToggle",{enumerable:!0,get:function(){return ye.bufferToggle}}),e("./internal/operators/bufferWhen")),ve=(Object.defineProperty(t,"bufferWhen",{enumerable:!0,get:function(){return be.bufferWhen}}),e("./internal/operators/catchError")),ge=(Object.defineProperty(t,"catchError",{enumerable:!0,get:function(){return ve.catchError}}),e("./internal/operators/combineAll")),_e=(Object.defineProperty(t,"combineAll",{enumerable:!0,get:function(){return ge.combineAll}}),e("./internal/operators/combineLatestAll")),we=(Object.defineProperty(t,"combineLatestAll",{enumerable:!0,get:function(){return _e.combineLatestAll}}),e("./internal/operators/combineLatestWith")),Oe=(Object.defineProperty(t,"combineLatestWith",{enumerable:!0,get:function(){return we.combineLatestWith}}),e("./internal/operators/concatAll")),Se=(Object.defineProperty(t,"concatAll",{enumerable:!0,get:function(){return Oe.concatAll}}),e("./internal/operators/concatMap")),Ee=(Object.defineProperty(t,"concatMap",{enumerable:!0,get:function(){return Se.concatMap}}),e("./internal/operators/concatMapTo")),xe=(Object.defineProperty(t,"concatMapTo",{enumerable:!0,get:function(){return Ee.concatMapTo}}),e("./internal/operators/concatWith")),Pe=(Object.defineProperty(t,"concatWith",{enumerable:!0,get:function(){return xe.concatWith}}),e("./internal/operators/connect")),je=(Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return Pe.connect}}),e("./internal/operators/count")),Ae=(Object.defineProperty(t,"count",{enumerable:!0,get:function(){return je.count}}),e("./internal/operators/debounce")),Me=(Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return Ae.debounce}}),e("./internal/operators/debounceTime")),Ie=(Object.defineProperty(t,"debounceTime",{enumerable:!0,get:function(){return Me.debounceTime}}),e("./internal/operators/defaultIfEmpty")),Re=(Object.defineProperty(t,"defaultIfEmpty",{enumerable:!0,get:function(){return Ie.defaultIfEmpty}}),e("./internal/operators/delay")),Ce=(Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return Re.delay}}),e("./internal/operators/delayWhen")),ke=(Object.defineProperty(t,"delayWhen",{enumerable:!0,get:function(){return Ce.delayWhen}}),e("./internal/operators/dematerialize")),$e=(Object.defineProperty(t,"dematerialize",{enumerable:!0,get:function(){return ke.dematerialize}}),e("./internal/operators/distinct")),De=(Object.defineProperty(t,"distinct",{enumerable:!0,get:function(){return $e.distinct}}),e("./internal/operators/distinctUntilChanged")),Te=(Object.defineProperty(t,"distinctUntilChanged",{enumerable:!0,get:function(){return De.distinctUntilChanged}}),e("./internal/operators/distinctUntilKeyChanged")),Ne=(Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Te.distinctUntilKeyChanged}}),e("./internal/operators/elementAt")),Le=(Object.defineProperty(t,"elementAt",{enumerable:!0,get:function(){return Ne.elementAt}}),e("./internal/operators/endWith")),Fe=(Object.defineProperty(t,"endWith",{enumerable:!0,get:function(){return Le.endWith}}),e("./internal/operators/every")),Be=(Object.defineProperty(t,"every",{enumerable:!0,get:function(){return Fe.every}}),e("./internal/operators/exhaust")),Ue=(Object.defineProperty(t,"exhaust",{enumerable:!0,get:function(){return Be.exhaust}}),e("./internal/operators/exhaustAll")),ze=(Object.defineProperty(t,"exhaustAll",{enumerable:!0,get:function(){return Ue.exhaustAll}}),e("./internal/operators/exhaustMap")),We=(Object.defineProperty(t,"exhaustMap",{enumerable:!0,get:function(){return ze.exhaustMap}}),e("./internal/operators/expand")),qe=(Object.defineProperty(t,"expand",{enumerable:!0,get:function(){return We.expand}}),e("./internal/operators/filter")),Ke=(Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return qe.filter}}),e("./internal/operators/finalize")),Ve=(Object.defineProperty(t,"finalize",{enumerable:!0,get:function(){return Ke.finalize}}),e("./internal/operators/find")),He=(Object.defineProperty(t,"find",{enumerable:!0,get:function(){return Ve.find}}),e("./internal/operators/findIndex")),Ge=(Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return He.findIndex}}),e("./internal/operators/first")),Ze=(Object.defineProperty(t,"first",{enumerable:!0,get:function(){return Ge.first}}),e("./internal/operators/groupBy")),Ye=(Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return Ze.groupBy}}),e("./internal/operators/ignoreElements")),Qe=(Object.defineProperty(t,"ignoreElements",{enumerable:!0,get:function(){return Ye.ignoreElements}}),e("./internal/operators/isEmpty")),Je=(Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return Qe.isEmpty}}),e("./internal/operators/last")),Xe=(Object.defineProperty(t,"last",{enumerable:!0,get:function(){return Je.last}}),e("./internal/operators/map")),et=(Object.defineProperty(t,"map",{enumerable:!0,get:function(){return Xe.map}}),e("./internal/operators/mapTo")),tt=(Object.defineProperty(t,"mapTo",{enumerable:!0,get:function(){return et.mapTo}}),e("./internal/operators/materialize")),rt=(Object.defineProperty(t,"materialize",{enumerable:!0,get:function(){return tt.materialize}}),e("./internal/operators/max")),nt=(Object.defineProperty(t,"max",{enumerable:!0,get:function(){return rt.max}}),e("./internal/operators/mergeAll")),it=(Object.defineProperty(t,"mergeAll",{enumerable:!0,get:function(){return nt.mergeAll}}),e("./internal/operators/flatMap")),ot=(Object.defineProperty(t,"flatMap",{enumerable:!0,get:function(){return it.flatMap}}),e("./internal/operators/mergeMap")),at=(Object.defineProperty(t,"mergeMap",{enumerable:!0,get:function(){return ot.mergeMap}}),e("./internal/operators/mergeMapTo")),st=(Object.defineProperty(t,"mergeMapTo",{enumerable:!0,get:function(){return at.mergeMapTo}}),e("./internal/operators/mergeScan")),ut=(Object.defineProperty(t,"mergeScan",{enumerable:!0,get:function(){return st.mergeScan}}),e("./internal/operators/mergeWith")),ct=(Object.defineProperty(t,"mergeWith",{enumerable:!0,get:function(){return ut.mergeWith}}),e("./internal/operators/min")),lt=(Object.defineProperty(t,"min",{enumerable:!0,get:function(){return ct.min}}),e("./internal/operators/multicast")),dt=(Object.defineProperty(t,"multicast",{enumerable:!0,get:function(){return lt.multicast}}),e("./internal/operators/observeOn")),ft=(Object.defineProperty(t,"observeOn",{enumerable:!0,get:function(){return dt.observeOn}}),e("./internal/operators/onErrorResumeNextWith")),pt=(Object.defineProperty(t,"onErrorResumeNextWith",{enumerable:!0,get:function(){return ft.onErrorResumeNextWith}}),e("./internal/operators/pairwise")),ht=(Object.defineProperty(t,"pairwise",{enumerable:!0,get:function(){return pt.pairwise}}),e("./internal/operators/pluck")),mt=(Object.defineProperty(t,"pluck",{enumerable:!0,get:function(){return ht.pluck}}),e("./internal/operators/publish")),yt=(Object.defineProperty(t,"publish",{enumerable:!0,get:function(){return mt.publish}}),e("./internal/operators/publishBehavior")),bt=(Object.defineProperty(t,"publishBehavior",{enumerable:!0,get:function(){return yt.publishBehavior}}),e("./internal/operators/publishLast")),vt=(Object.defineProperty(t,"publishLast",{enumerable:!0,get:function(){return bt.publishLast}}),e("./internal/operators/publishReplay")),gt=(Object.defineProperty(t,"publishReplay",{enumerable:!0,get:function(){return vt.publishReplay}}),e("./internal/operators/raceWith")),_t=(Object.defineProperty(t,"raceWith",{enumerable:!0,get:function(){return gt.raceWith}}),e("./internal/operators/reduce")),wt=(Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return _t.reduce}}),e("./internal/operators/repeat")),Ot=(Object.defineProperty(t,"repeat",{enumerable:!0,get:function(){return wt.repeat}}),e("./internal/operators/repeatWhen")),St=(Object.defineProperty(t,"repeatWhen",{enumerable:!0,get:function(){return Ot.repeatWhen}}),e("./internal/operators/retry")),Et=(Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return St.retry}}),e("./internal/operators/retryWhen")),xt=(Object.defineProperty(t,"retryWhen",{enumerable:!0,get:function(){return Et.retryWhen}}),e("./internal/operators/refCount")),Pt=(Object.defineProperty(t,"refCount",{enumerable:!0,get:function(){return xt.refCount}}),e("./internal/operators/sample")),jt=(Object.defineProperty(t,"sample",{enumerable:!0,get:function(){return Pt.sample}}),e("./internal/operators/sampleTime")),At=(Object.defineProperty(t,"sampleTime",{enumerable:!0,get:function(){return jt.sampleTime}}),e("./internal/operators/scan")),Mt=(Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return At.scan}}),e("./internal/operators/sequenceEqual")),It=(Object.defineProperty(t,"sequenceEqual",{enumerable:!0,get:function(){return Mt.sequenceEqual}}),e("./internal/operators/share")),Rt=(Object.defineProperty(t,"share",{enumerable:!0,get:function(){return It.share}}),e("./internal/operators/shareReplay")),Ct=(Object.defineProperty(t,"shareReplay",{enumerable:!0,get:function(){return Rt.shareReplay}}),e("./internal/operators/single")),kt=(Object.defineProperty(t,"single",{enumerable:!0,get:function(){return Ct.single}}),e("./internal/operators/skip")),$t=(Object.defineProperty(t,"skip",{enumerable:!0,get:function(){return kt.skip}}),e("./internal/operators/skipLast")),Dt=(Object.defineProperty(t,"skipLast",{enumerable:!0,get:function(){return $t.skipLast}}),e("./internal/operators/skipUntil")),Tt=(Object.defineProperty(t,"skipUntil",{enumerable:!0,get:function(){return Dt.skipUntil}}),e("./internal/operators/skipWhile")),Nt=(Object.defineProperty(t,"skipWhile",{enumerable:!0,get:function(){return Tt.skipWhile}}),e("./internal/operators/startWith")),Lt=(Object.defineProperty(t,"startWith",{enumerable:!0,get:function(){return Nt.startWith}}),e("./internal/operators/subscribeOn")),Ft=(Object.defineProperty(t,"subscribeOn",{enumerable:!0,get:function(){return Lt.subscribeOn}}),e("./internal/operators/switchAll")),Bt=(Object.defineProperty(t,"switchAll",{enumerable:!0,get:function(){return Ft.switchAll}}),e("./internal/operators/switchMap")),Ut=(Object.defineProperty(t,"switchMap",{enumerable:!0,get:function(){return Bt.switchMap}}),e("./internal/operators/switchMapTo")),zt=(Object.defineProperty(t,"switchMapTo",{enumerable:!0,get:function(){return Ut.switchMapTo}}),e("./internal/operators/switchScan")),Wt=(Object.defineProperty(t,"switchScan",{enumerable:!0,get:function(){return zt.switchScan}}),e("./internal/operators/take")),qt=(Object.defineProperty(t,"take",{enumerable:!0,get:function(){return Wt.take}}),e("./internal/operators/takeLast")),Kt=(Object.defineProperty(t,"takeLast",{enumerable:!0,get:function(){return qt.takeLast}}),e("./internal/operators/takeUntil")),Vt=(Object.defineProperty(t,"takeUntil",{enumerable:!0,get:function(){return Kt.takeUntil}}),e("./internal/operators/takeWhile")),Ht=(Object.defineProperty(t,"takeWhile",{enumerable:!0,get:function(){return Vt.takeWhile}}),e("./internal/operators/tap")),Gt=(Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return Ht.tap}}),e("./internal/operators/throttle")),Zt=(Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return Gt.throttle}}),e("./internal/operators/throttleTime")),Yt=(Object.defineProperty(t,"throttleTime",{enumerable:!0,get:function(){return Zt.throttleTime}}),e("./internal/operators/throwIfEmpty")),Qt=(Object.defineProperty(t,"throwIfEmpty",{enumerable:!0,get:function(){return Yt.throwIfEmpty}}),e("./internal/operators/timeInterval")),Jt=(Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return Qt.timeInterval}}),e("./internal/operators/timeout")),Xt=(Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return Jt.timeout}}),e("./internal/operators/timeoutWith")),er=(Object.defineProperty(t,"timeoutWith",{enumerable:!0,get:function(){return Xt.timeoutWith}}),e("./internal/operators/timestamp")),tr=(Object.defineProperty(t,"timestamp",{enumerable:!0,get:function(){return er.timestamp}}),e("./internal/operators/toArray")),rr=(Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return tr.toArray}}),e("./internal/operators/window")),nr=(Object.defineProperty(t,"window",{enumerable:!0,get:function(){return rr.window}}),e("./internal/operators/windowCount")),ir=(Object.defineProperty(t,"windowCount",{enumerable:!0,get:function(){return nr.windowCount}}),e("./internal/operators/windowTime")),or=(Object.defineProperty(t,"windowTime",{enumerable:!0,get:function(){return ir.windowTime}}),e("./internal/operators/windowToggle")),ar=(Object.defineProperty(t,"windowToggle",{enumerable:!0,get:function(){return or.windowToggle}}),e("./internal/operators/windowWhen")),sr=(Object.defineProperty(t,"windowWhen",{enumerable:!0,get:function(){return ar.windowWhen}}),e("./internal/operators/withLatestFrom")),ur=(Object.defineProperty(t,"withLatestFrom",{enumerable:!0,get:function(){return sr.withLatestFrom}}),e("./internal/operators/zipAll")),cr=(Object.defineProperty(t,"zipAll",{enumerable:!0,get:function(){return ur.zipAll}}),e("./internal/operators/zipWith"));Object.defineProperty(t,"zipWith",{enumerable:!0,get:function(){return cr.zipWith}})},{"./internal/AsyncSubject":553,"./internal/BehaviorSubject":554,"./internal/Notification":555,"./internal/Observable":557,"./internal/ReplaySubject":558,"./internal/Scheduler":559,"./internal/Subject":560,"./internal/Subscriber":561,"./internal/Subscription":562,"./internal/config":563,"./internal/firstValueFrom":564,"./internal/lastValueFrom":565,"./internal/observable/ConnectableObservable":566,"./internal/observable/bindCallback":567,"./internal/observable/bindNodeCallback":569,"./internal/observable/combineLatest":570,"./internal/observable/concat":571,"./internal/observable/connectable":572,"./internal/observable/defer":573,"./internal/observable/dom/animationFrames":574,"./internal/observable/empty":575,"./internal/observable/forkJoin":576,"./internal/observable/from":577,"./internal/observable/fromEvent":578,"./internal/observable/fromEventPattern":579,"./internal/observable/generate":581,"./internal/observable/iif":582,"./internal/observable/interval":584,"./internal/observable/merge":585,"./internal/observable/never":586,"./internal/observable/of":587,"./internal/observable/onErrorResumeNext":588,"./internal/observable/pairs":589,"./internal/observable/partition":590,"./internal/observable/race":591,"./internal/observable/range":592,"./internal/observable/throwError":593,"./internal/observable/timer":594,"./internal/observable/using":595,"./internal/observable/zip":596,"./internal/operators/audit":598,"./internal/operators/auditTime":599,"./internal/operators/buffer":600,"./internal/operators/bufferCount":601,"./internal/operators/bufferTime":602,"./internal/operators/bufferToggle":603,"./internal/operators/bufferWhen":604,"./internal/operators/catchError":605,"./internal/operators/combineAll":606,"./internal/operators/combineLatestAll":608,"./internal/operators/combineLatestWith":609,"./internal/operators/concatAll":611,"./internal/operators/concatMap":612,"./internal/operators/concatMapTo":613,"./internal/operators/concatWith":614,"./internal/operators/connect":615,"./internal/operators/count":616,"./internal/operators/debounce":617,"./internal/operators/debounceTime":618,"./internal/operators/defaultIfEmpty":619,"./internal/operators/delay":620,"./internal/operators/delayWhen":621,"./internal/operators/dematerialize":622,"./internal/operators/distinct":623,"./internal/operators/distinctUntilChanged":624,"./internal/operators/distinctUntilKeyChanged":625,"./internal/operators/elementAt":626,"./internal/operators/endWith":627,"./internal/operators/every":628,"./internal/operators/exhaust":629,"./internal/operators/exhaustAll":630,"./internal/operators/exhaustMap":631,"./internal/operators/expand":632,"./internal/operators/filter":633,"./internal/operators/finalize":634,"./internal/operators/find":635,"./internal/operators/findIndex":636,"./internal/operators/first":637,"./internal/operators/flatMap":638,"./internal/operators/groupBy":639,"./internal/operators/ignoreElements":640,"./internal/operators/isEmpty":641,"./internal/operators/last":643,"./internal/operators/map":644,"./internal/operators/mapTo":645,"./internal/operators/materialize":646,"./internal/operators/max":647,"./internal/operators/mergeAll":649,"./internal/operators/mergeMap":651,"./internal/operators/mergeMapTo":652,"./internal/operators/mergeScan":653,"./internal/operators/mergeWith":654,"./internal/operators/min":655,"./internal/operators/multicast":656,"./internal/operators/observeOn":657,"./internal/operators/onErrorResumeNextWith":658,"./internal/operators/pairwise":659,"./internal/operators/pluck":661,"./internal/operators/publish":662,"./internal/operators/publishBehavior":663,"./internal/operators/publishLast":664,"./internal/operators/publishReplay":665,"./internal/operators/raceWith":667,"./internal/operators/reduce":668,"./internal/operators/refCount":669,"./internal/operators/repeat":670,"./internal/operators/repeatWhen":671,"./internal/operators/retry":672,"./internal/operators/retryWhen":673,"./internal/operators/sample":674,"./internal/operators/sampleTime":675,"./internal/operators/scan":676,"./internal/operators/sequenceEqual":678,"./internal/operators/share":679,"./internal/operators/shareReplay":680,"./internal/operators/single":681,"./internal/operators/skip":682,"./internal/operators/skipLast":683,"./internal/operators/skipUntil":684,"./internal/operators/skipWhile":685,"./internal/operators/startWith":686,"./internal/operators/subscribeOn":687,"./internal/operators/switchAll":688,"./internal/operators/switchMap":689,"./internal/operators/switchMapTo":690,"./internal/operators/switchScan":691,"./internal/operators/take":692,"./internal/operators/takeLast":693,"./internal/operators/takeUntil":694,"./internal/operators/takeWhile":695,"./internal/operators/tap":696,"./internal/operators/throttle":697,"./internal/operators/throttleTime":698,"./internal/operators/throwIfEmpty":699,"./internal/operators/timeInterval":700,"./internal/operators/timeout":701,"./internal/operators/timeoutWith":702,"./internal/operators/timestamp":703,"./internal/operators/toArray":704,"./internal/operators/window":705,"./internal/operators/windowCount":706,"./internal/operators/windowTime":707,"./internal/operators/windowToggle":708,"./internal/operators/windowWhen":709,"./internal/operators/withLatestFrom":710,"./internal/operators/zipAll":712,"./internal/operators/zipWith":713,"./internal/scheduled/scheduled":720,"./internal/scheduler/VirtualTimeScheduler":730,"./internal/scheduler/animationFrame":731,"./internal/scheduler/asap":733,"./internal/scheduler/async":734,"./internal/scheduler/queue":739,"./internal/symbol/observable":742,"./internal/types":743,"./internal/util/ArgumentOutOfRangeError":744,"./internal/util/EmptyError":745,"./internal/util/NotFoundError":747,"./internal/util/ObjectUnsubscribedError":748,"./internal/util/SequenceError":749,"./internal/util/UnsubscriptionError":750,"./internal/util/identity":759,"./internal/util/isObservable":766,"./internal/util/noop":772,"./internal/util/pipe":774}],553:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncSubject=void 0,e("./Subject")),e=(i=e.Subject,o(a,i),a.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this._hasValue,n=this._value,i=this.thrownError,o=this.isStopped,a=this._isComplete;t?e.error(i):(o||a)&&(r&&e.next(n),e.complete())},a.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},a.prototype.complete=function(){var e=this._hasValue,t=this._value;this._isComplete||(this._isComplete=!0,e&&i.prototype.next.call(this,t),i.prototype.complete.call(this))},a);function a(){var e=null!==i&&i.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}r.AsyncSubject=e},{"./Subject":560}],554:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.BehaviorSubject=void 0,e("./Subject")),e=(i=e.Subject,o(a,i),Object.defineProperty(a.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),a.prototype._subscribe=function(e){var t=i.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},a.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},a.prototype.next=function(e){i.prototype.next.call(this,this._value=e)},a);function a(e){var t=i.call(this)||this;return t._value=e,t}r.BehaviorSubject=e},{"./Subject":560}],555:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observeNotification=r.Notification=r.NotificationKind=void 0;var n=e("./observable/empty"),i=e("./observable/of"),o=e("./observable/throwError"),a=e("./util/isFunction"),e=((e=r.NotificationKind||(r.NotificationKind={})).NEXT="N",e.ERROR="E",e.COMPLETE="C",s.prototype.observe=function(e){return u(this,e)},s.prototype.do=function(e,t,r){var n=this.kind,i=this.value,o=this.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(o):null==r?void 0:r()},s.prototype.accept=function(e,t,r){var n;return a.isFunction(null==(n=e)?void 0:n.next)?this.observe(e):this.do(e,t,r)},s.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,t="N"===e?i.of(t):"E"===e?o.throwError(function(){return r}):"C"===e?n.EMPTY:0;if(t)return t;throw new TypeError("Unexpected notification kind "+e)},s.createNext=function(e){return new s("N",e)},s.createError=function(e){return new s("E",void 0,e)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s);function s(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}function u(e,t){var r,n=e.kind,i=e.value,e=e.error;if("string"!=typeof n)throw new TypeError('Invalid notification, missing "kind"');"N"===n?null!=(r=t.next)&&r.call(t,i):"E"===n?null!=(r=t.error)&&r.call(t,e):null!=(i=t.complete)&&i.call(t)}r.Notification=e,r.observeNotification=u},{"./observable/empty":575,"./observable/of":587,"./observable/throwError":593,"./util/isFunction":763}],556:[function(e,t,r){"use strict";function n(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(r,"__esModule",{value:!0}),r.createNotification=r.nextNotification=r.errorNotification=r.COMPLETE_NOTIFICATION=void 0,r.COMPLETE_NOTIFICATION=n("C",void 0,void 0),r.errorNotification=function(e){return n("E",void 0,e)},r.nextNotification=function(e){return n("N",e,void 0)},r.createNotification=n},{}],557:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Observable=void 0;var a=e("./Subscriber"),s=e("./Subscription"),n=e("./symbol/observable"),i=e("./util/pipe"),o=e("./config"),u=e("./util/isFunction"),c=e("./util/errorContext");function l(e){e&&(this._subscribe=e)}function d(e){return null!=(e=null!=e?e:o.config.Promise)?e:Promise}l.prototype.lift=function(e){var t=new l;return t.source=this,t.operator=e,t},l.prototype.subscribe=function(e,t,r){var n,i=this,o=(n=e)&&n instanceof a.Subscriber||function(e){return e&&u.isFunction(e.next)&&u.isFunction(e.error)&&u.isFunction(e.complete)}(n)&&s.isSubscription(n)?e:new a.SafeSubscriber(e,t,r);return c.errorContext(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},l.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},l.prototype.forEach=function(n,e){var i=this;return new(e=d(e))(function(e,t){var r=new a.SafeSubscriber({next:function(e){try{n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});i.subscribe(r)})},l.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},l.prototype[n.observable]=function(){return this},l.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.pipeFromArray(e)(this)},l.prototype.toPromise=function(e){var n=this;return new(e=d(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},l.create=function(e){return new l(e)},r.Observable=l},{"./Subscriber":561,"./Subscription":562,"./config":563,"./symbol/observable":742,"./util/errorContext":757,"./util/isFunction":763,"./util/pipe":774}],558:[function(e,t,r){"use strict";var n,a,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=(Object.defineProperty(r,"__esModule",{value:!0}),r.ReplaySubject=void 0,e("./Subject")),s=e("./scheduler/dateTimestampProvider"),e=(a=o.Subject,i(u,a),u.prototype.next=function(e){var t=this.isStopped,r=this._buffer,n=this._infiniteTimeWindow,i=this._timestampProvider,o=this._windowTime;t||(r.push(e),n)||r.push(i.now()+o),this._trimBuffer(),a.prototype.next.call(this,e)},u.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},u.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,i=(n?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!n){for(var o=t.now(),a=0,s=1;s<r.length&&r[s]<=o;s+=2)a=s;a&&r.splice(0,a+1)}},u);function u(e,t,r){void 0===e&&(e=1/0),void 0===t&&(t=1/0),void 0===r&&(r=s.dateTimestampProvider);var n=a.call(this)||this;return n._bufferSize=e,n._windowTime=t,n._timestampProvider=r,n._buffer=[],n._infiniteTimeWindow=!0,n._infiniteTimeWindow=t===1/0,n._bufferSize=Math.max(1,e),n._windowTime=Math.max(1,t),n}r.ReplaySubject=e},{"./Subject":560,"./scheduler/dateTimestampProvider":735}],559:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Scheduler=void 0;e=e("./scheduler/dateTimestampProvider");function n(e,t){void 0===t&&(t=n.now),this.schedulerActionCtor=e,this.now=t}n.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=e.dateTimestampProvider.now,r.Scheduler=n},{"./scheduler/dateTimestampProvider":735}],560:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.AnonymousSubject=r.Subject=void 0,e("./Observable")),u=e("./Subscription"),c=e("./util/ObjectUnsubscribedError"),l=e("./util/arrRemove"),d=e("./util/errorContext"),e=(i=s.Observable,o(f,i),f.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},f.prototype._throwIfClosed=function(){if(this.closed)throw new c.ObjectUnsubscribedError},f.prototype.next=function(i){var o=this;d.errorContext(function(){var t,e;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var r=a(o.currentObservers),n=r.next();!n.done;n=r.next())n.value.next(i)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},f.prototype.error=function(t){var r=this;d.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},f.prototype.complete=function(){var t=this;d.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},f.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(f.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),f.prototype._trySubscribe=function(e){return this._throwIfClosed(),i.prototype._trySubscribe.call(this,e)},f.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},f.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,i=this.observers;return r||n?u.EMPTY_SUBSCRIPTION:(this.currentObservers=null,i.push(e),new u.Subscription(function(){t.currentObservers=null,l.arrRemove(i,e)}))},f.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},f.prototype.asObservable=function(){var e=new s.Observable;return e.source=this,e},f.create=function(e,t){return new h(e,t)},f);function f(){var e=i.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}r.Subject=e;o(m,p=e),m.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},m.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},m.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},m.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:u.EMPTY_SUBSCRIPTION};var p,h=m;function m(e,t){var r=p.call(this)||this;return r.destination=e,r.source=t,r}r.AnonymousSubject=h},{"./Observable":557,"./Subscription":562,"./util/ObjectUnsubscribedError":748,"./util/arrRemove":754,"./util/errorContext":757}],561:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_OBSERVER=r.SafeSubscriber=r.Subscriber=void 0,e("./util/isFunction")),s=e("./Subscription"),u=e("./config"),c=e("./util/reportUnhandledError"),l=e("./util/noop"),d=e("./NotificationFactories"),f=e("./scheduler/timeoutProvider"),p=e("./util/errorContext"),e=(i=s.Subscription,o(h,i),h.create=function(e,t,r){return new _(e,t,r)},h.prototype.next=function(e){this.isStopped?S(d.nextNotification(e),this):this._next(e)},h.prototype.error=function(e){this.isStopped?S(d.errorNotification(e),this):(this.isStopped=!0,this._error(e))},h.prototype.complete=function(){this.isStopped?S(d.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},h.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},h.prototype._next=function(e){this.destination.next(e)},h.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},h.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},h);function h(e){var t=i.call(this)||this;return t.isStopped=!1,e?(t.destination=e,s.isSubscription(e)&&e.add(t)):t.destination=r.EMPTY_OBSERVER,t}r.Subscriber=e;var m=Function.prototype.bind;function y(e,t){return m.call(e,t)}v.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){O(e)}},v.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){O(e)}else O(e)},v.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){O(e)}};var b=v;function v(e){this.partialObserver=e}o(w,g=e);var g,_=w;function w(e,t,r){var n=g.call(this)||this;return r=a.isFunction(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:n&&u.config.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},{next:e.next&&y(e.next,t),error:e.error&&y(e.error,t),complete:e.complete&&y(e.complete,t)}):e,n.destination=new b(r),n}function O(e){u.config.useDeprecatedSynchronousErrorHandling?p.captureError(e):c.reportUnhandledError(e)}function S(e,t){var r=u.config.onStoppedNotification;r&&f.timeoutProvider.setTimeout(function(){return r(e,t)})}r.SafeSubscriber=_,r.EMPTY_OBSERVER={closed:!0,next:l.noop,error:function(e){throw e},complete:l.noop}},{"./NotificationFactories":556,"./Subscription":562,"./config":563,"./scheduler/timeoutProvider":740,"./util/errorContext":757,"./util/isFunction":763,"./util/noop":772,"./util/reportUnhandledError":775}],562:[function(e,t,r){"use strict";var d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},p=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},h=(Object.defineProperty(r,"__esModule",{value:!0}),r.isSubscription=r.EMPTY_SUBSCRIPTION=r.Subscription=void 0,e("./util/isFunction")),m=e("./util/UnsubscriptionError"),n=e("./util/arrRemove"),i=(o.prototype.unsubscribe=function(){var t,e,r;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var i=d(n),o=i.next();!o.done;o=i.next())o.value.remove(this)}catch(e){s={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(s)throw s.error}}else n.remove(this);var a=this.initialTeardown;if(h.isFunction(a))try{a()}catch(e){r=e instanceof m.UnsubscriptionError?e.errors:[e]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var u=d(s),c=u.next();!c.done;c=u.next()){var l=c.value;try{y(l)}catch(e){r=null!=r?r:[],e instanceof m.UnsubscriptionError?r=p(p([],f(r)),f(e.errors)):r.push(e)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}}if(r)throw new m.UnsubscriptionError(r)}},o.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)y(e);else{if(e instanceof o){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},o.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},o.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},o.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&n.arrRemove(t,e)},o.prototype.remove=function(e){var t=this._finalizers;t&&n.arrRemove(t,e),e instanceof o&&e._removeParent(this)},o.EMPTY=((e=new o).closed=!0,e),o);function o(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}function y(e){h.isFunction(e)?e():e.unsubscribe()}r.Subscription=i,r.EMPTY_SUBSCRIPTION=i.EMPTY,r.isSubscription=function(e){return e instanceof i||e&&"closed"in e&&h.isFunction(e.remove)&&h.isFunction(e.add)&&h.isFunction(e.unsubscribe)}},{"./util/UnsubscriptionError":750,"./util/arrRemove":754,"./util/isFunction":763}],563:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.config=void 0,r.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},{}],564:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.firstValueFrom=void 0;var a=e("./util/EmptyError"),s=e("./Subscriber");r.firstValueFrom=function(n,i){var o="object"==typeof i;return new Promise(function(t,e){var r=new s.SafeSubscriber({next:function(e){t(e),r.unsubscribe()},error:e,complete:function(){o?t(i.defaultValue):e(new a.EmptyError)}});n.subscribe(r)})}},{"./Subscriber":561,"./util/EmptyError":745}],565:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lastValueFrom=void 0;var s=e("./util/EmptyError");r.lastValueFrom=function(i,o){var a="object"==typeof o;return new Promise(function(e,t){var r,n=!1;i.subscribe({next:function(e){r=e,n=!0},error:t,complete:function(){n?e(r):a?e(o.defaultValue):t(new s.EmptyError)}})})}},{"./util/EmptyError":745}],566:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectableObservable=void 0,e("../Observable")),s=e("../Subscription"),u=e("../operators/refCount"),c=e("../operators/OperatorSubscriber"),l=e("../util/lift"),e=(i=a.Observable,o(d,i),d.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},d.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},d.prototype._teardown=function(){this._refCount=0;var e=this._connection;(this._subject=this._connection=null)!=e&&e.unsubscribe()},d.prototype.connect=function(){var t,r=this,e=this._connection;return e||(e=this._connection=new s.Subscription,t=this.getSubject(),e.add(this.source.subscribe(c.createOperatorSubscriber(t,void 0,function(){r._teardown(),t.complete()},function(e){r._teardown(),t.error(e)},function(){return r._teardown()}))),e.closed&&(this._connection=null,e=s.Subscription.EMPTY)),e},d.prototype.refCount=function(){return u.refCount()(this)},d);function d(e,t){var r=i.call(this)||this;return r.source=e,r.subjectFactory=t,r._subject=null,r._refCount=0,r._connection=null,l.hasLift(e)&&(r.lift=e.lift),r}r.ConnectableObservable=e},{"../Observable":557,"../Subscription":562,"../operators/OperatorSubscriber":597,"../operators/refCount":669,"../util/lift":770}],567:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bindCallback=void 0;var n=e("./bindCallbackInternals");r.bindCallback=function(e,t,r){return n.bindCallbackInternals(!1,e,t,r)}},{"./bindCallbackInternals":568}],568:[function(e,t,r){"use strict";var c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.bindCallbackInternals=void 0,e("../util/isScheduler")),d=e("../Observable"),a=e("../operators/subscribeOn"),f=e("../util/mapOneOrManyArgs"),p=e("../operators/observeOn"),h=e("../AsyncSubject");r.bindCallbackInternals=function r(s,u,n,i){if(n){if(!o.isScheduler(n))return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(s,u,i).apply(this,e).pipe(f.mapOneOrManyArgs(n))};i=n}return i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(s,u).apply(this,e).pipe(a.subscribeOn(i),p.observeOn(i))}:function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var o=new h.AsyncSubject,a=!0;return new d.Observable(function(e){var n,i,e=o.subscribe(e);return a&&(n=a=!1,i=!1,u.apply(t,l(l([],c(r)),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(s){var r=e.shift();if(null!=r)return void o.error(r)}o.next(1<e.length?e:e[0]),i=!0,n&&o.complete()}])),i&&o.complete(),n=!0),e})}}},{"../AsyncSubject":553,"../Observable":557,"../operators/observeOn":657,"../operators/subscribeOn":687,"../util/isScheduler":769,"../util/mapOneOrManyArgs":771}],569:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bindNodeCallback=void 0;var n=e("./bindCallbackInternals");r.bindNodeCallback=function(e,t,r){return n.bindCallbackInternals(!0,e,t,r)}},{"./bindCallbackInternals":568}],570:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.combineLatestInit=r.combineLatest=void 0;var s=e("../Observable"),u=e("../util/argsArgArrayOrObject"),l=e("./from"),d=e("../util/identity"),c=e("../util/mapOneOrManyArgs"),f=e("../util/args"),p=e("../util/createObject"),h=e("../operators/OperatorSubscriber"),n=e("../util/executeSchedule");function m(s,u,c){return void 0===c&&(c=d.identity),function(a){y(u,function(){for(var e=s.length,n=new Array(e),i=e,o=e,t=0;t<e;t++)!function(r){y(u,function(){var e=l.from(s[r],u),t=!1;e.subscribe(h.createOperatorSubscriber(a,function(e){n[r]=e,t||(t=!0,o--),o||a.next(c(n.slice()))},function(){--i||a.complete()}))},a)}(t)},a)}}function y(e,t,r){e?n.executeSchedule(r,e,t):t()}r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=f.popScheduler(e),n=f.popResultSelector(e),i=u.argsArgArrayOrObject(e),o=i.args,a=i.keys;return 0===o.length?l.from([],r):(i=new s.Observable(m(o,r,a?function(e){return p.createObject(a,e)}:d.identity)),n?i.pipe(c.mapOneOrManyArgs(n)):i)},r.combineLatestInit=m},{"../Observable":557,"../operators/OperatorSubscriber":597,"../util/args":751,"../util/argsArgArrayOrObject":752,"../util/createObject":756,"../util/executeSchedule":758,"../util/identity":759,"../util/mapOneOrManyArgs":771,"./from":577}],571:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concat=void 0;var n=e("../operators/concatAll"),i=e("../util/args"),o=e("./from");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.concatAll()(o.from(e,i.popScheduler(e)))}},{"../operators/concatAll":611,"../util/args":751,"./from":577}],572:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.connectable=void 0;var n=e("../Subject"),a=e("../Observable"),s=e("./defer"),u={connector:function(){return new n.Subject},resetOnDisconnect:!0};r.connectable=function(e,t){var r=null,n=(t=void 0===t?u:t).connector,i=void 0===(t=t.resetOnDisconnect)||t,o=n();return(t=new a.Observable(function(e){return o.subscribe(e)})).connect=function(){return r&&!r.closed||(r=s.defer(function(){return e}).subscribe(o),i&&r.add(function(){return o=n()})),r},t}},{"../Observable":557,"../Subject":560,"./defer":573}],573:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defer=void 0;var n=e("../Observable"),i=e("./innerFrom");r.defer=function(t){return new n.Observable(function(e){i.innerFrom(t()).subscribe(e)})}},{"../Observable":557,"./innerFrom":583}],574:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.animationFrames=void 0;var n=e("../../Observable"),u=e("../../scheduler/performanceTimestampProvider"),c=e("../../scheduler/animationFrameProvider");function i(s){return new n.Observable(function(r){var n=s||u.performanceTimestampProvider,i=n.now(),o=0,a=function(){r.closed||(o=c.animationFrameProvider.requestAnimationFrame(function(e){o=0;var t=n.now();r.next({timestamp:s?t:e,elapsed:t-i}),a()}))};return a(),function(){o&&c.animationFrameProvider.cancelAnimationFrame(o)}})}r.animationFrames=function(e){return e?i(e):o};var o=i()},{"../../Observable":557,"../../scheduler/animationFrameProvider":732,"../../scheduler/performanceTimestampProvider":738}],575:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.empty=r.EMPTY=void 0;var n=e("../Observable");r.EMPTY=new n.Observable(function(e){return e.complete()}),r.empty=function(e){return e?(t=e,new n.Observable(function(e){return t.schedule(function(){return e.complete()})})):r.EMPTY;var t}},{"../Observable":557}],576:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forkJoin=void 0;var i=e("../Observable"),o=e("../util/argsArgArrayOrObject"),u=e("./innerFrom"),c=e("../util/args"),l=e("../operators/OperatorSubscriber"),d=e("../util/mapOneOrManyArgs"),f=e("../util/createObject");r.forkJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popResultSelector(e),a=(n=o.argsArgArrayOrObject(e)).args,s=n.keys,n=new i.Observable(function(e){var t=a.length;if(t)for(var n=new Array(t),i=t,o=t,r=0;r<t;r++)!function(t){var r=!1;u.innerFrom(a[t]).subscribe(l.createOperatorSubscriber(e,function(e){r||(r=!0,o--),n[t]=e},function(){return i--},void 0,function(){i&&r||(o||e.next(s?f.createObject(s,n):n),e.complete())}))}(r);else e.complete()});return r?n.pipe(d.mapOneOrManyArgs(r)):n}},{"../Observable":557,"../operators/OperatorSubscriber":597,"../util/args":751,"../util/argsArgArrayOrObject":752,"../util/createObject":756,"../util/mapOneOrManyArgs":771,"./innerFrom":583}],577:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.from=void 0;var n=e("../scheduled/scheduled"),i=e("./innerFrom");r.from=function(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}},{"../scheduled/scheduled":720,"./innerFrom":583}],578:[function(e,t,r){"use strict";var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},u=(Object.defineProperty(r,"__esModule",{value:!0}),r.fromEvent=void 0,e("../observable/innerFrom")),c=e("../Observable"),l=e("../operators/mergeMap"),d=e("../util/isArrayLike"),f=e("../util/isFunction"),p=e("../util/mapOneOrManyArgs"),h=["addListener","removeListener"],m=["addEventListener","removeEventListener"],y=["on","off"];function b(r,n){return function(t){return function(e){return r[t](n,e)}}}r.fromEvent=function t(r,n,i,e){if(f.isFunction(i)&&(e=i,i=void 0),e)return t(r,n,i).pipe(p.mapOneOrManyArgs(e));var e=s((e=r,f.isFunction(e.addEventListener)&&f.isFunction(e.removeEventListener)?m.map(function(t){return function(e){return r[t](n,e,i)}}):(e=r,f.isFunction(e.addListener)&&f.isFunction(e.removeListener)?h.map(b(r,n)):(e=r,f.isFunction(e.on)&&f.isFunction(e.off)?y.map(b(r,n)):[]))),2),o=e[0],a=e[1];if(!o&&d.isArrayLike(r))return l.mergeMap(function(e){return t(e,n,i)})(u.innerFrom(r));if(o)return new c.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1<e.length?e:e[0])}return o(e),function(){return a(e)}});throw new TypeError("Invalid event target")}},{"../Observable":557,"../observable/innerFrom":583,"../operators/mergeMap":651,"../util/isArrayLike":760,"../util/isFunction":763,"../util/mapOneOrManyArgs":771}],579:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromEventPattern=void 0;var o=e("../Observable"),a=e("../util/isFunction"),s=e("../util/mapOneOrManyArgs");r.fromEventPattern=function e(n,i,t){return t?e(n,i).pipe(s.mapOneOrManyArgs(t)):new o.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)}var t=n(e);return a.isFunction(i)?function(){return i(e,t)}:void 0})}},{"../Observable":557,"../util/isFunction":763,"../util/mapOneOrManyArgs":771}],580:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromSubscribable=void 0;var n=e("../Observable");r.fromSubscribable=function(t){return new n.Observable(function(e){return t.subscribe(e)})}},{"../Observable":557}],581:[function(e,t,r){"use strict";var c=this&&this.__generator||function(n,i){var o,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=i.call(n,u)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(r,"__esModule",{value:!0}),r.generate=void 0,e("../util/identity")),d=e("../util/isScheduler"),f=e("./defer"),p=e("../scheduled/scheduleIterable");r.generate=function(e,r,n,t,i){var o,a,s;function u(){var t;return c(this,function(e){switch(e.label){case 0:t=s,e.label=1;case 1:return r&&!r(t)?[3,4]:[4,a(t)];case 2:e.sent(),e.label=3;case 3:return t=n(t),[3,1];case 4:return[2]}})}return 1===arguments.length?(s=e.initialState,r=e.condition,n=e.iterate,o=e.resultSelector,a=void 0===o?l.identity:o,i=e.scheduler):(s=e,!t||d.isScheduler(t)?(a=l.identity,i=t):a=t),f.defer(i?function(){return p.scheduleIterable(u(),i)}:u)}},{"../scheduled/scheduleIterable":716,"../util/identity":759,"../util/isScheduler":769,"./defer":573}],582:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.iif=void 0;var n=e("./defer");r.iif=function(e,t,r){return n.defer(function(){return e()?t:r})}},{"./defer":573}],583:[function(O,e,S){!function(e){!function(){"use strict";var u=this&&this.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}o((u=u.apply(e,a||[])).next())})},c=this&&this.__generator||function(n,i){var o,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=i.call(n,u)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=this&&this.__asyncValues||function(a){var e,t;if(Symbol.asyncIterator)return(e=a[Symbol.asyncIterator])?e.call(a):(a="function"==typeof s?s(a):a[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);throw new TypeError("Symbol.asyncIterator is not defined.");function r(o){t[o]=a[o]&&function(i){return new Promise(function(e,t){var r,n;i=a[o](i),r=e,e=t,n=i.done,t=i.value,Promise.resolve(t).then(function(e){r({value:e,done:n})},e)})}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},t=(Object.defineProperty(S,"__esModule",{value:!0}),S.fromReadableStreamLike=S.fromAsyncIterable=S.fromIterable=S.fromPromise=S.fromArrayLike=S.fromInteropObservable=S.innerFrom=void 0,O("../util/isArrayLike")),r=O("../util/isPromise"),n=O("../Observable"),i=O("../util/isInteropObservable"),o=O("../util/isAsyncIterable"),a=O("../util/throwUnobservableError"),d=O("../util/isIterable"),f=O("../util/isReadableStreamLike"),p=O("../util/isFunction"),h=O("../util/reportUnhandledError"),m=O("../symbol/observable");function y(r){return new n.Observable(function(e){var t=r[m.observable]();if(p.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function b(r){return new n.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function v(e){return new n.Observable(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,h.reportUnhandledError)})}function g(a){return new n.Observable(function(e){var t,r;try{for(var n=s(a),i=n.next();!i.done;i=n.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}function _(e){return new n.Observable(function(t){!function(r,n){var i,o,a,s;return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),i=l(r),e.label=1;case 1:return[4,i.next()];case 2:if((o=e.sent()).done)return[3,4];if(t=o.value,n.next(t),n.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return t=e.sent(),a={error:t},[3,11];case 6:return(e.trys.push([6,,9,10]),o&&!o.done&&(s=i.return))?[4,s.call(i)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}(e,t).catch(function(e){return t.error(e)})})}function w(e){return _(f.readableStreamLikeToAsyncGenerator(e))}S.innerFrom=function(e){if(e instanceof n.Observable)return e;if(null!=e){if(i.isInteropObservable(e))return y(e);if(t.isArrayLike(e))return b(e);if(r.isPromise(e))return v(e);if(o.isAsyncIterable(e))return _(e);if(d.isIterable(e))return g(e);if(f.isReadableStreamLike(e))return w(e)}throw a.createInvalidObservableTypeError(e)},S.fromInteropObservable=y,S.fromArrayLike=b,S.fromPromise=v,S.fromIterable=g,S.fromAsyncIterable=_,S.fromReadableStreamLike=w}.call(this)}.call(this,O("_process"))},{"../Observable":557,"../symbol/observable":742,"../util/isArrayLike":760,"../util/isAsyncIterable":761,"../util/isFunction":763,"../util/isInteropObservable":764,"../util/isIterable":765,"../util/isPromise":767,"../util/isReadableStreamLike":768,"../util/reportUnhandledError":775,"../util/throwUnobservableError":776,_process:930}],584:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.interval=void 0;var n=e("../scheduler/async"),i=e("./timer");r.interval=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.timer(e=(e=void 0===e?0:e)<0?0:e,e,t)}},{"../scheduler/async":734,"./timer":594}],585:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.merge=void 0;var o=e("../operators/mergeAll"),a=e("./innerFrom"),s=e("./empty"),u=e("../util/args"),c=e("./from");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.popScheduler(e),n=u.popNumber(e,1/0),i=e;return i.length?1===i.length?a.innerFrom(i[0]):o.mergeAll(n)(c.from(i,r)):s.EMPTY}},{"../operators/mergeAll":649,"../util/args":751,"./empty":575,"./from":577,"./innerFrom":583}],586:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.never=r.NEVER=void 0;var n=e("../Observable"),e=e("../util/noop");r.NEVER=new n.Observable(e.noop),r.never=function(){return r.NEVER}},{"../Observable":557,"../util/noop":772}],587:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.of=void 0;var n=e("../util/args"),i=e("./from");r.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.popScheduler(e);return i.from(e,r)}},{"../util/args":751,"./from":577}],588:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.onErrorResumeNext=void 0;var n=e("../Observable"),i=e("../util/argsOrArgArray"),a=e("../operators/OperatorSubscriber"),s=e("../util/noop"),u=e("./innerFrom");r.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=i.argsOrArgArray(e);return new n.Observable(function(r){var n=0,i=function(){if(n<o.length){var e=void 0;try{e=u.innerFrom(o[n++])}catch(e){return void i()}var t=new a.OperatorSubscriber(r,void 0,s.noop,s.noop);e.subscribe(t),t.add(i)}else r.complete()};i()})}},{"../Observable":557,"../operators/OperatorSubscriber":597,"../util/argsOrArgArray":753,"../util/noop":772,"./innerFrom":583}],589:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pairs=void 0;var n=e("./from");r.pairs=function(e,t){return n.from(Object.entries(e),t)}},{"./from":577}],590:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.partition=void 0;var n=e("../util/not"),i=e("../operators/filter"),o=e("./innerFrom");r.partition=function(e,t,r){return[i.filter(t,r)(o.innerFrom(e)),i.filter(n.not(t,r))(o.innerFrom(e))]}},{"../operators/filter":633,"../util/not":773,"./innerFrom":583}],591:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.raceInit=r.race=void 0;var n=e("../Observable"),o=e("./innerFrom"),i=e("../util/argsOrArgArray"),a=e("../operators/OperatorSubscriber");function s(t){return function(n){for(var i=[],e=0;i&&!n.closed&&e<t.length;e++)!function(r){i.push(o.innerFrom(t[r]).subscribe(a.createOperatorSubscriber(n,function(e){if(i){for(var t=0;t<i.length;t++)t!==r&&i[t].unsubscribe();i=null}n.next(e)})))}(e)}}r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=i.argsOrArgArray(e)).length?o.innerFrom(e[0]):new n.Observable(s(e))},r.raceInit=s},{"../Observable":557,"../operators/OperatorSubscriber":597,"../util/argsOrArgArray":753,"./innerFrom":583}],592:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.range=void 0;var o=e("../Observable"),a=e("./empty");r.range=function(r,e,n){var i;return null==e&&(e=r,r=0),e<=0?a.EMPTY:(i=e+r,new o.Observable(n?function(e){var t=r;return n.schedule(function(){t<i?(e.next(t++),this.schedule()):e.complete()})}:function(e){for(var t=r;t<i&&!e.closed;)e.next(t++);e.complete()}))}},{"../Observable":557,"./empty":575}],593:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throwError=void 0;var i=e("../Observable"),o=e("../util/isFunction");r.throwError=function(e,t){function r(e){return e.error(n())}var n=o.isFunction(e)?e:function(){return e};return new i.Observable(t?function(e){return t.schedule(r,0,e)}:r)}},{"../Observable":557,"../util/isFunction":763}],594:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.timer=void 0;var a=e("../Observable"),s=e("../scheduler/async"),u=e("../util/isScheduler"),c=e("../util/isDate");r.timer=function(n,e,i){void 0===n&&(n=0),void 0===i&&(i=s.async);var o=-1;return null!=e&&(u.isScheduler(e)?i=e:o=e),new a.Observable(function(e){var t=c.isValidDate(n)?+n-i.now():n,r=0;return i.schedule(function(){e.closed||(e.next(r++),0<=o?this.schedule(void 0,o):e.complete())},t=t<0?0:t)})}},{"../Observable":557,"../scheduler/async":734,"../util/isDate":762,"../util/isScheduler":769}],595:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.using=void 0;var o=e("../Observable"),a=e("./innerFrom"),s=e("./empty");r.using=function(n,i){return new o.Observable(function(e){var t=n(),r=i(t);return(r?a.innerFrom(r):s.EMPTY).subscribe(e),function(){t&&t.unsubscribe()}})}},{"../Observable":557,"./empty":575,"./innerFrom":583}],596:[function(e,t,r){"use strict";var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},u=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.zip=void 0,e("../Observable")),c=e("./innerFrom"),i=e("../util/argsOrArgArray"),l=e("./empty"),d=e("../operators/OperatorSubscriber"),f=e("../util/args");r.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=f.popResultSelector(e),a=i.argsOrArgArray(e);return a.length?new n.Observable(function(r){for(var n=a.map(function(){return[]}),i=a.map(function(){return!1}),e=(r.add(function(){n=i=null}),0);!r.closed&&e<a.length;e++)!function(t){c.innerFrom(a[t]).subscribe(d.createOperatorSubscriber(r,function(e){n[t].push(e),n.every(function(e){return e.length})&&(e=n.map(function(e){return e.shift()}),r.next(o?o.apply(void 0,u([],s(e))):e),n.some(function(e,t){return!e.length&&i[t]}))&&r.complete()},function(){i[t]=!0,n[t].length||r.complete()}))}(e);return function(){n=i=null}}):l.EMPTY}},{"../Observable":557,"../operators/OperatorSubscriber":597,"../util/args":751,"../util/argsOrArgArray":753,"./empty":575,"./innerFrom":583}],597:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.OperatorSubscriber=r.createOperatorSubscriber=void 0,e("../Subscriber"));r.createOperatorSubscriber=function(e,t,r,n,i){return new o(e,t,r,n,i)};s=e.Subscriber,i(a,s),a.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,s.prototype.unsubscribe.call(this),e)||null==(e=this.onFinalize)||e.call(this)};var s,o=a;function a(t,r,e,n,i,o){var a=s.call(this,t)||this;return a.onFinalize=i,a.shouldUnsubscribe=o,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:s.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:s.prototype._error,a._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:s.prototype._complete,a}r.OperatorSubscriber=o},{"../Subscriber":561}],598:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audit=void 0;var n=e("../util/lift"),c=e("../observable/innerFrom"),l=e("./OperatorSubscriber");r.audit=function(u){return n.operate(function(e,t){function r(){var e;null!=a&&a.unsubscribe(),a=null,i&&(i=!1,e=o,o=null,t.next(e)),s&&t.complete()}function n(){a=null,s&&t.complete()}var i=!1,o=null,a=null,s=!1;e.subscribe(l.createOperatorSubscriber(t,function(e){i=!0,o=e,a||c.innerFrom(u(e)).subscribe(a=l.createOperatorSubscriber(t,r,n))},function(){s=!0,i&&a&&!a.closed||t.complete()}))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],599:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.auditTime=void 0;var n=e("../scheduler/async"),i=e("./audit"),o=e("../observable/timer");r.auditTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.audit(function(){return o.timer(e,t)})}},{"../observable/timer":594,"../scheduler/async":734,"./audit":598}],600:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buffer=void 0;var i=e("../util/lift"),o=e("../util/noop"),a=e("./OperatorSubscriber"),s=e("../observable/innerFrom");r.buffer=function(n){return i.operate(function(e,t){var r=[];return e.subscribe(a.createOperatorSubscriber(t,function(e){return r.push(e)},function(){t.next(r),t.complete()})),s.innerFrom(n).subscribe(a.createOperatorSubscriber(t,function(){var e=r;r=[],t.next(e)},o.noop)),function(){r=null}})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],601:[function(e,t,r){"use strict";var y=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.bufferCount=void 0,e("../util/lift")),i=e("./OperatorSubscriber"),b=e("../util/arrRemove");r.bufferCount=function(h,m){return m=null!=(m=void 0===m?null:m)?m:h,n.operate(function(e,d){var f=[],p=0;e.subscribe(i.createOperatorSubscriber(d,function(e){var t,r,n,i,o=null;p++%m==0&&f.push([]);try{for(var a=y(f),s=a.next();!s.done;s=a.next())(l=s.value).push(e),h<=l.length&&(o=null!=o?o:[]).push(l)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}if(o)try{for(var u=y(o),c=u.next();!c.done;c=u.next()){var l=c.value;b.arrRemove(f,l),d.next(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},function(){var t,e;try{for(var r=y(f),n=r.next();!n.done;n=r.next()){var i=n.value;d.next(i)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}d.complete()},void 0,function(){f=null}))})}},{"../util/arrRemove":754,"../util/lift":770,"./OperatorSubscriber":597}],602:[function(e,t,r){"use strict";var d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=(Object.defineProperty(r,"__esModule",{value:!0}),r.bufferTime=void 0,e("../Subscription")),n=e("../util/lift"),p=e("./OperatorSubscriber"),h=e("../util/arrRemove"),i=e("../scheduler/async"),u=e("../util/args"),m=e("../util/executeSchedule");r.bufferTime=function(o){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=null!=(e=u.popScheduler(t))?e:i.asyncScheduler,s=null!=(e=t[0])?e:null,l=t[1]||1/0;return n.operate(function(e,r){var u=[],n=!1,c=function(e){var t=e.buffer;e.subs.unsubscribe(),h.arrRemove(u,e),r.next(t),n&&i()},i=function(){var e,t;u&&(e=new f.Subscription,r.add(e),u.push(t={buffer:[],subs:e}),m.executeSchedule(e,a,function(){return c(t)},o))},t=(null!==s&&0<=s?m.executeSchedule(r,a,i,s,!0):n=!0,i(),p.createOperatorSubscriber(r,function(e){var t,r,n=u.slice();try{for(var i=d(n),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.buffer;s.push(e),l<=s.length&&c(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},function(){for(;null!=u&&u.length;)r.next(u.shift().buffer);null!=t&&t.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return u=null}));e.subscribe(t)})}},{"../Subscription":562,"../scheduler/async":734,"../util/args":751,"../util/arrRemove":754,"../util/executeSchedule":758,"../util/lift":770,"./OperatorSubscriber":597}],603:[function(e,t,r){"use strict";var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.bufferToggle=void 0,e("../Subscription")),n=e("../util/lift"),u=e("../observable/innerFrom"),c=e("./OperatorSubscriber"),l=e("../util/noop"),d=e("../util/arrRemove");r.bufferToggle=function(t,i){return n.operate(function(e,n){var o=[];u.innerFrom(t).subscribe(c.createOperatorSubscriber(n,function(e){var t=[],r=(o.push(t),new s.Subscription);r.add(u.innerFrom(i(e)).subscribe(c.createOperatorSubscriber(n,function(){d.arrRemove(o,t),n.next(t),r.unsubscribe()},l.noop)))},l.noop)),e.subscribe(c.createOperatorSubscriber(n,function(e){var t,r;try{for(var n=a(o),i=n.next();!i.done;i=n.next())i.value.push(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},function(){for(;0<o.length;)n.next(o.shift());n.complete()}))})}},{"../Subscription":562,"../observable/innerFrom":583,"../util/arrRemove":754,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],604:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bufferWhen=void 0;var n=e("../util/lift"),a=e("../util/noop"),s=e("./OperatorSubscriber"),u=e("../observable/innerFrom");r.bufferWhen=function(o){return n.operate(function(e,t){var r=null,n=null,i=function(){null!=n&&n.unsubscribe();var e=r;r=[],e&&t.next(e),u.innerFrom(o()).subscribe(n=s.createOperatorSubscriber(t,i,a.noop))};i(),e.subscribe(s.createOperatorSubscriber(t,function(e){return null==r?void 0:r.push(e)},function(){r&&t.next(r),t.complete()},void 0,function(){return r=n=null}))})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],605:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.catchError=void 0;var u=e("../observable/innerFrom"),c=e("./OperatorSubscriber"),n=e("../util/lift");r.catchError=function a(s){return n.operate(function(t,r){var n,i=null,o=!1,i=t.subscribe(c.createOperatorSubscriber(r,void 0,void 0,function(e){n=u.innerFrom(s(e,a(s)(t))),i?(i.unsubscribe(),i=null,n.subscribe(r)):o=!0}));o&&(i.unsubscribe(),i=null,n.subscribe(r))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],606:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.combineAll=void 0;e=e("./combineLatestAll");r.combineAll=e.combineLatestAll},{"./combineLatestAll":608}],607:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.combineLatest=void 0,e("../observable/combineLatest")),a=e("../util/lift"),s=e("../util/argsOrArgArray"),u=e("../util/mapOneOrManyArgs"),c=e("../util/pipe"),l=e("../util/args");function d(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=l.popResultSelector(r);return t?c.pipe(d.apply(void 0,i([],n(r))),u.mapOneOrManyArgs(t)):a.operate(function(e,t){o.combineLatestInit(i([e],n(s.argsOrArgArray(r))))(t)})}r.combineLatest=d},{"../observable/combineLatest":570,"../util/args":751,"../util/argsOrArgArray":753,"../util/lift":770,"../util/mapOneOrManyArgs":771,"../util/pipe":774}],608:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.combineLatestAll=void 0;var n=e("../observable/combineLatest"),i=e("./joinAllInternals");r.combineLatestAll=function(e){return i.joinAllInternals(n.combineLatest,e)}},{"../observable/combineLatest":570,"./joinAllInternals":642}],609:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.combineLatestWith=void 0,e("./combineLatest"));r.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combineLatest.apply(void 0,i([],n(e)))}},{"./combineLatest":607}],610:[function(e,t,r){"use strict";var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.concat=void 0,e("../util/lift")),s=e("./concatAll"),u=e("../util/args"),c=e("../observable/from");r.concat=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=u.popScheduler(r);return a.operate(function(e,t){s.concatAll()(c.from(o([e],i(r)),n)).subscribe(t)})}},{"../observable/from":577,"../util/args":751,"../util/lift":770,"./concatAll":611}],611:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatAll=void 0;var n=e("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":649}],612:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatMap=void 0;var n=e("./mergeMap"),i=e("../util/isFunction");r.concatMap=function(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}},{"../util/isFunction":763,"./mergeMap":651}],613:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatMapTo=void 0;var n=e("./concatMap"),i=e("../util/isFunction");r.concatMapTo=function(e,t){return i.isFunction(t)?n.concatMap(function(){return e},t):n.concatMap(function(){return e})}},{"../util/isFunction":763,"./concatMap":612}],614:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.concatWith=void 0,e("./concat"));r.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.concat.apply(void 0,i([],n(e)))}},{"./concat":610}],615:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.connect=void 0;var n=e("../Subject"),o=e("../observable/innerFrom"),a=e("../util/lift"),s=e("../observable/fromSubscribable"),u={connector:function(){return new n.Subject}};r.connect=function(n,e){var i=(e=void 0===e?u:e).connector;return a.operate(function(e,t){var r=i();o.innerFrom(n(s.fromSubscribable(r))).subscribe(t),t.add(e.subscribe(r))})}},{"../Subject":560,"../observable/fromSubscribable":580,"../observable/innerFrom":583,"../util/lift":770}],616:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.count=void 0;var i=e("./reduce");r.count=function(n){return i.reduce(function(e,t,r){return!n||n(t,r)?e+1:e},0)}},{"./reduce":668}],617:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.debounce=void 0;var n=e("../util/lift"),s=e("../util/noop"),u=e("./OperatorSubscriber"),c=e("../observable/innerFrom");r.debounce=function(a){return n.operate(function(e,t){function r(){var e;null!=o&&o.unsubscribe(),o=null,n&&(n=!1,e=i,i=null,t.next(e))}var n=!1,i=null,o=null;e.subscribe(u.createOperatorSubscriber(t,function(e){null!=o&&o.unsubscribe(),n=!0,i=e,o=u.createOperatorSubscriber(t,r,s.noop),c.innerFrom(a(e)).subscribe(o)},function(){r(),t.complete()},void 0,function(){i=o=null}))})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],618:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.debounceTime=void 0;var n=e("../scheduler/async"),i=e("../util/lift"),c=e("./OperatorSubscriber");r.debounceTime=function(s,u){return void 0===u&&(u=n.asyncScheduler),i.operate(function(e,r){var n=null,t=null,i=null,o=function(){var e;n&&(n.unsubscribe(),e=t,t=n=null,r.next(e))};function a(){var e=i+s,t=u.now();t<e?(n=this.schedule(void 0,e-t),r.add(n)):o()}e.subscribe(c.createOperatorSubscriber(r,function(e){t=e,i=u.now(),n||(n=u.schedule(a,s),r.add(n))},function(){o(),r.complete()},void 0,function(){t=n=null}))})}},{"../scheduler/async":734,"../util/lift":770,"./OperatorSubscriber":597}],619:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultIfEmpty=void 0;var i=e("../util/lift"),o=e("./OperatorSubscriber");r.defaultIfEmpty=function(n){return i.operate(function(e,t){var r=!1;e.subscribe(o.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){r||t.next(n),t.complete()}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],620:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.delay=void 0;var n=e("../scheduler/async"),i=e("./delayWhen"),o=e("../observable/timer");r.delay=function(e,t){void 0===t&&(t=n.asyncScheduler);var r=o.timer(e,t);return i.delayWhen(function(){return r})}},{"../observable/timer":594,"../scheduler/async":734,"./delayWhen":621}],621:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.delayWhen=void 0;var i=e("../observable/concat"),o=e("./take"),a=e("./ignoreElements"),s=e("./mapTo"),u=e("./mergeMap"),c=e("../observable/innerFrom");r.delayWhen=function t(r,n){return n?function(e){return i.concat(n.pipe(o.take(1),a.ignoreElements()),e.pipe(t(r)))}:u.mergeMap(function(e,t){return c.innerFrom(r(e,t)).pipe(o.take(1),s.mapTo(e))})}},{"../observable/concat":571,"../observable/innerFrom":583,"./ignoreElements":640,"./mapTo":645,"./mergeMap":651,"./take":692}],622:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dematerialize=void 0;var n=e("../Notification"),i=e("../util/lift"),o=e("./OperatorSubscriber");r.dematerialize=function(){return i.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,function(e){return n.observeNotification(e,t)}))})}},{"../Notification":555,"../util/lift":770,"./OperatorSubscriber":597}],623:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.distinct=void 0;var n=e("../util/lift"),o=e("./OperatorSubscriber"),a=e("../util/noop"),s=e("../observable/innerFrom");r.distinct=function(i,t){return n.operate(function(e,r){var n=new Set;e.subscribe(o.createOperatorSubscriber(r,function(e){var t=i?i(e):e;n.has(t)||(n.add(t),r.next(e))})),t&&s.innerFrom(t).subscribe(o.createOperatorSubscriber(r,function(){return n.clear()},a.noop))})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],624:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.distinctUntilChanged=void 0;var n=e("../util/identity"),i=e("../util/lift"),s=e("./OperatorSubscriber");function u(e,t){return e===t}r.distinctUntilChanged=function(o,a){return void 0===a&&(a=n.identity),o=null!=o?o:u,i.operate(function(e,r){var n,i=!0;e.subscribe(s.createOperatorSubscriber(r,function(e){var t=a(e);!i&&o(n,t)||(i=!1,n=t,r.next(e))}))})}},{"../util/identity":759,"../util/lift":770,"./OperatorSubscriber":597}],625:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.distinctUntilKeyChanged=void 0;var i=e("./distinctUntilChanged");r.distinctUntilKeyChanged=function(r,n){return i.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})}},{"./distinctUntilChanged":624}],626:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.elementAt=void 0;var i=e("../util/ArgumentOutOfRangeError"),o=e("./filter"),a=e("./throwIfEmpty"),s=e("./defaultIfEmpty"),u=e("./take");r.elementAt=function(r,t){if(r<0)throw new i.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(e){return e.pipe(o.filter(function(e,t){return t===r}),u.take(1),n?s.defaultIfEmpty(t):a.throwIfEmpty(function(){return new i.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":744,"./defaultIfEmpty":619,"./filter":633,"./take":692,"./throwIfEmpty":699}],627:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.endWith=void 0,e("../observable/concat")),a=e("../observable/of");r.endWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return o.concat(e,a.of.apply(void 0,i([],n(t))))}}},{"../observable/concat":571,"../observable/of":587}],628:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.every=void 0;var n=e("../util/lift"),a=e("./OperatorSubscriber");r.every=function(i,o){return n.operate(function(t,r){var n=0;t.subscribe(a.createOperatorSubscriber(r,function(e){i.call(o,e,n++,t)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],629:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exhaust=void 0;e=e("./exhaustAll");r.exhaust=e.exhaustAll},{"./exhaustAll":630}],630:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exhaustAll=void 0;var n=e("./exhaustMap"),i=e("../util/identity");r.exhaustAll=function(){return n.exhaustMap(i.identity)}},{"../util/identity":759,"./exhaustMap":631}],631:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exhaustMap=void 0;var a=e("./map"),s=e("../observable/innerFrom"),n=e("../util/lift"),u=e("./OperatorSubscriber");r.exhaustMap=function t(o,i){return i?function(e){return e.pipe(t(function(r,n){return s.innerFrom(o(r,n)).pipe(a.map(function(e,t){return i(r,e,n,t)}))}))}:n.operate(function(e,t){var r=0,n=null,i=!1;e.subscribe(u.createOperatorSubscriber(t,function(e){n||(n=u.createOperatorSubscriber(t,void 0,function(){n=null,i&&t.complete()}),s.innerFrom(o(e,r++)).subscribe(n))},function(){i=!0,n||t.complete()}))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597,"./map":644}],632:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expand=void 0;var o=e("../util/lift"),a=e("./mergeInternals");r.expand=function(r,n,i){return n=((n=void 0===n?1/0:n)||0)<1?1/0:n,o.operate(function(e,t){return a.mergeInternals(e,t,r,n,void 0,!0,i)})}},{"../util/lift":770,"./mergeInternals":650}],633:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filter=void 0;var o=e("../util/lift"),a=e("./OperatorSubscriber");r.filter=function(n,i){return o.operate(function(e,t){var r=0;e.subscribe(a.createOperatorSubscriber(t,function(e){return n.call(i,e,r++)&&t.next(e)}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],634:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.finalize=void 0;var n=e("../util/lift");r.finalize=function(r){return n.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})}},{"../util/lift":770}],635:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFind=r.find=void 0;var n=e("../util/lift"),u=e("./OperatorSubscriber");function i(o,a,e){var s="index"===e;return function(r,n){var i=0;r.subscribe(u.createOperatorSubscriber(n,function(e){var t=i++;o.call(a,e,t,r)&&(n.next(s?t:e),n.complete())},function(){n.next(s?-1:void 0),n.complete()}))}}r.find=function(e,t){return n.operate(i(e,t,"value"))},r.createFind=i},{"../util/lift":770,"./OperatorSubscriber":597}],636:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findIndex=void 0;var n=e("../util/lift"),i=e("./find");r.findIndex=function(e,t){return n.operate(i.createFind(e,t,"index"))}},{"../util/lift":770,"./find":635}],637:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.first=void 0;var i=e("../util/EmptyError"),o=e("./filter"),a=e("./take"),s=e("./defaultIfEmpty"),u=e("./throwIfEmpty"),c=e("../util/identity");r.first=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,a.take(1),t?s.defaultIfEmpty(e):u.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":745,"../util/identity":759,"./defaultIfEmpty":619,"./filter":633,"./take":692,"./throwIfEmpty":699}],638:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flatMap=void 0;e=e("./mergeMap");r.flatMap=e.mergeMap},{"./mergeMap":651}],639:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.groupBy=void 0;var v=e("../Observable"),g=e("../observable/innerFrom"),_=e("../Subject"),n=e("../util/lift"),w=e("./OperatorSubscriber");r.groupBy=function(m,t,y,b){return n.operate(function(e,u){function c(t){return r(function(e){return e.error(t)})}t&&"function"!=typeof t?(y=t.duration,l=t.element,b=t.connector):l=t;var l,d=new Map,r=function(e){d.forEach(e),e(u)},f=0,p=!1,h=new w.OperatorSubscriber(u,function(e){try{var t,r,n=m(e),i=d.get(n);i||(d.set(n,i=b?b():new _.Subject),o=n,a=i,(s=new v.Observable(function(e){f++;var t=a.subscribe(e);return function(){t.unsubscribe(),0==--f&&p&&h.unsubscribe()}})).key=o,t=s,u.next(t),y&&(r=w.createOperatorSubscriber(i,function(){i.complete(),null!=r&&r.unsubscribe()},void 0,void 0,function(){return d.delete(n)}),h.add(g.innerFrom(y(t)).subscribe(r)))),i.next(l?l(e):e)}catch(e){c(e)}var o,a,s},function(){return r(function(e){return e.complete()})},c,function(){return d.clear()},function(){return p=!0,0===f});e.subscribe(h)})}},{"../Observable":557,"../Subject":560,"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],640:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ignoreElements=void 0;var n=e("../util/lift"),i=e("./OperatorSubscriber"),o=e("../util/noop");r.ignoreElements=function(){return n.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,o.noop))})}},{"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],641:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isEmpty=void 0;var n=e("../util/lift"),i=e("./OperatorSubscriber");r.isEmpty=function(){return n.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],642:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.joinAllInternals=void 0;var n=e("../util/identity"),i=e("../util/mapOneOrManyArgs"),o=e("../util/pipe"),a=e("./mergeMap"),s=e("./toArray");r.joinAllInternals=function(t,e){return o.pipe(s.toArray(),a.mergeMap(function(e){return t(e)}),e?i.mapOneOrManyArgs(e):n.identity)}},{"../util/identity":759,"../util/mapOneOrManyArgs":771,"../util/pipe":774,"./mergeMap":651,"./toArray":704}],643:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.last=void 0;var i=e("../util/EmptyError"),o=e("./filter"),a=e("./takeLast"),s=e("./throwIfEmpty"),u=e("./defaultIfEmpty"),c=e("../util/identity");r.last=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,a.takeLast(1),t?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":745,"../util/identity":759,"./defaultIfEmpty":619,"./filter":633,"./takeLast":693,"./throwIfEmpty":699}],644:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.map=void 0;var o=e("../util/lift"),a=e("./OperatorSubscriber");r.map=function(n,i){return o.operate(function(e,t){var r=0;e.subscribe(a.createOperatorSubscriber(t,function(e){t.next(n.call(i,e,r++))}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],645:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mapTo=void 0;var n=e("./map");r.mapTo=function(e){return n.map(function(){return e})}},{"./map":644}],646:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.materialize=void 0;var n=e("../Notification"),i=e("../util/lift"),o=e("./OperatorSubscriber");r.materialize=function(){return i.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,function(e){t.next(n.Notification.createNext(e))},function(){t.next(n.Notification.createComplete()),t.complete()},function(e){t.next(n.Notification.createError(e)),t.complete()}))})}},{"../Notification":555,"../util/lift":770,"./OperatorSubscriber":597}],647:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.max=void 0;var n=e("./reduce"),i=e("../util/isFunction");r.max=function(r){return n.reduce(i.isFunction(r)?function(e,t){return 0<r(e,t)?e:t}:function(e,t){return t<e?e:t})}},{"../util/isFunction":763,"./reduce":668}],648:[function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.merge=void 0,e("../util/lift")),u=e("../util/argsOrArgArray"),c=e("./mergeAll"),l=e("../util/args"),d=e("../observable/from");r.merge=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=l.popScheduler(r),i=l.popNumber(r,1/0),r=u.argsOrArgArray(r);return s.operate(function(e,t){c.mergeAll(i)(d.from(a([e],o(r)),n)).subscribe(t)})}},{"../observable/from":577,"../util/args":751,"../util/argsOrArgArray":753,"../util/lift":770,"./mergeAll":649}],649:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeAll=void 0;var n=e("./mergeMap"),i=e("../util/identity");r.mergeAll=function(e){return n.mergeMap(i.identity,e=void 0===e?1/0:e)}},{"../util/identity":759,"./mergeMap":651}],650:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeInternals=void 0;var h=e("../observable/innerFrom"),m=e("../util/executeSchedule"),y=e("./OperatorSubscriber");r.mergeInternals=function(e,r,n,i,o,a,s,t){var u=[],c=0,l=0,d=function(){u.length||c||r.complete()},f=function(e){return c<i?p(e):u.push(e)},p=function(e){a&&r.next(e),c++;var t=!1;h.innerFrom(n(e,l++)).subscribe(y.createOperatorSubscriber(r,function(e){null!=o&&o(e),a?f(e):r.next(e)},function(){t=!0},void 0,function(){if(t)try{c--;for(;u.length&&c<i;)!function(){var e=u.shift();s?m.executeSchedule(r,s,function(){return p(e)}):p(e)}();d()}catch(e){r.error(e)}}))};return e.subscribe(y.createOperatorSubscriber(r,f,function(){d()})),function(){null!=t&&t()}}},{"../observable/innerFrom":583,"../util/executeSchedule":758,"./OperatorSubscriber":597}],651:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMap=void 0;var a=e("./map"),s=e("../observable/innerFrom"),n=e("../util/lift"),u=e("./mergeInternals"),c=e("../util/isFunction");r.mergeMap=function e(i,o,r){return void 0===r&&(r=1/0),c.isFunction(o)?e(function(r,n){return a.map(function(e,t){return o(r,e,n,t)})(s.innerFrom(i(r,n)))},r):("number"==typeof o&&(r=o),n.operate(function(e,t){return u.mergeInternals(e,t,i,r)}))}},{"../observable/innerFrom":583,"../util/isFunction":763,"../util/lift":770,"./map":644,"./mergeInternals":650}],652:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeMapTo=void 0;var n=e("./mergeMap"),i=e("../util/isFunction");r.mergeMapTo=function(e,t,r){return void 0===r&&(r=1/0),i.isFunction(t)?n.mergeMap(function(){return e},t,r):n.mergeMap(function(){return e},r="number"==typeof t?t:r)}},{"../util/isFunction":763,"./mergeMap":651}],653:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeScan=void 0;var a=e("../util/lift"),s=e("./mergeInternals");r.mergeScan=function(n,i,o){return void 0===o&&(o=1/0),a.operate(function(e,t){var r=i;return s.mergeInternals(e,t,function(e,t){return n(r,e,t)},o,function(e){r=e},!1,void 0,function(){return r=null})})}},{"../util/lift":770,"./mergeInternals":650}],654:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.mergeWith=void 0,e("./merge"));r.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.merge.apply(void 0,i([],n(e)))}},{"./merge":648}],655:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.min=void 0;var n=e("./reduce"),i=e("../util/isFunction");r.min=function(r){return n.reduce(i.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})}},{"../util/isFunction":763,"./reduce":668}],656:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.multicast=void 0;var n=e("../observable/ConnectableObservable"),i=e("../util/isFunction"),o=e("./connect");r.multicast=function(e,t){var r=i.isFunction(e)?e:function(){return e};return i.isFunction(t)?o.connect(t,{connector:r}):function(e){return new n.ConnectableObservable(e,r)}}},{"../observable/ConnectableObservable":566,"../util/isFunction":763,"./connect":615}],657:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observeOn=void 0;var i=e("../util/executeSchedule"),o=e("../util/lift"),a=e("./OperatorSubscriber");r.observeOn=function(r,n){return void 0===n&&(n=0),o.operate(function(e,t){e.subscribe(a.createOperatorSubscriber(t,function(e){return i.executeSchedule(t,r,function(){return t.next(e)},n)},function(){return i.executeSchedule(t,r,function(){return t.complete()},n)},function(e){return i.executeSchedule(t,r,function(){return t.error(e)},n)}))})}},{"../util/executeSchedule":758,"../util/lift":770,"./OperatorSubscriber":597}],658:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.onErrorResumeNext=r.onErrorResumeNextWith=void 0,e("../util/argsOrArgArray")),a=e("../observable/onErrorResumeNext");function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.argsOrArgArray(e);return function(e){return a.onErrorResumeNext.apply(void 0,i([e],n(r)))}}r.onErrorResumeNextWith=s,r.onErrorResumeNext=s},{"../observable/onErrorResumeNext":588,"../util/argsOrArgArray":753}],659:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pairwise=void 0;var n=e("../util/lift"),o=e("./OperatorSubscriber");r.pairwise=function(){return n.operate(function(e,r){var n,i=!1;e.subscribe(o.createOperatorSubscriber(r,function(e){var t=n;n=e,i&&r.next([t,e]),i=!0}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],660:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.partition=void 0;var n=e("../util/not"),i=e("./filter");r.partition=function(t,r){return function(e){return[i.filter(t,r)(e),i.filter(n.not(t,r))(e)]}}},{"../util/not":773,"./filter":633}],661:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pluck=void 0;var n=e("./map");r.pluck=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=i.length;if(0===o)throw new Error("list of properties cannot be empty.");return n.map(function(e){for(var t=e,r=0;r<o;r++){var n=null==t?void 0:t[i[r]];if(void 0===n)return;t=n}return t})}},{"./map":644}],662:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publish=void 0;var n=e("../Subject"),i=e("./multicast"),o=e("./connect");r.publish=function(t){return t?function(e){return o.connect(t)(e)}:function(e){return i.multicast(new n.Subject)(e)}}},{"../Subject":560,"./connect":615,"./multicast":656}],663:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publishBehavior=void 0;var n=e("../BehaviorSubject"),i=e("../observable/ConnectableObservable");r.publishBehavior=function(r){return function(e){var t=new n.BehaviorSubject(r);return new i.ConnectableObservable(e,function(){return t})}}},{"../BehaviorSubject":554,"../observable/ConnectableObservable":566}],664:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publishLast=void 0;var n=e("../AsyncSubject"),i=e("../observable/ConnectableObservable");r.publishLast=function(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,function(){return t})}}},{"../AsyncSubject":553,"../observable/ConnectableObservable":566}],665:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publishReplay=void 0;var o=e("../ReplaySubject"),a=e("./multicast"),s=e("../util/isFunction");r.publishReplay=function(t,r,e,n){e&&!s.isFunction(e)&&(n=e);var i=s.isFunction(e)?e:void 0;return function(e){return a.multicast(new o.ReplaySubject(t,r,n),i)(e)}}},{"../ReplaySubject":558,"../util/isFunction":763,"./multicast":656}],666:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.race=void 0,e("../util/argsOrArgArray")),a=e("./raceWith");r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(e))))}},{"../util/argsOrArgArray":753,"./raceWith":667}],667:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.raceWith=void 0,e("../observable/race")),a=e("../util/lift"),s=e("../util/identity");r.raceWith=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?a.operate(function(e,t){o.raceInit(i([e],n(r)))(t)}):s.identity}},{"../observable/race":591,"../util/identity":759,"../util/lift":770}],668:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reduce=void 0;var n=e("./scanInternals"),i=e("../util/lift");r.reduce=function(e,t){return i.operate(n.scanInternals(e,t,2<=arguments.length,!1,!0))}},{"../util/lift":770,"./scanInternals":677}],669:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.refCount=void 0;var n=e("../util/lift"),o=e("./OperatorSubscriber");r.refCount=function(){return n.operate(function(r,n){var i=null,e=(r._refCount++,o.createOperatorSubscriber(n,void 0,void 0,void 0,function(){var e,t;!r||r._refCount<=0||0<--r._refCount?i=null:(e=r._connection,t=i,i=null,!e||t&&e!==t||e.unsubscribe(),n.unsubscribe())}));r.subscribe(e),e.closed||(i=r.connect())})}},{"../util/lift":770,"./OperatorSubscriber":597}],670:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.repeat=void 0;var n=e("../observable/empty"),i=e("../util/lift"),c=e("./OperatorSubscriber"),l=e("../observable/innerFrom"),d=e("../observable/timer");r.repeat=function(e){var t,s,u=1/0;return null!=e&&("object"==typeof e?(t=e.count,u=void 0===t?1/0:t,s=e.delay):u=e),u<=0?function(){return n.EMPTY}:i.operate(function(t,r){function n(){var e=!1;i=t.subscribe(c.createOperatorSubscriber(r,void 0,function(){++o<u?i?a():e=!0:r.complete()})),e&&a()}var i,o=0,a=function(){var e,t;null!=i&&i.unsubscribe(),(i=null)!=s?(e="number"==typeof s?d.timer(s):l.innerFrom(s(o)),t=c.createOperatorSubscriber(r,function(){t.unsubscribe(),n()}),e.subscribe(t)):n()};n()})}},{"../observable/empty":575,"../observable/innerFrom":583,"../observable/timer":594,"../util/lift":770,"./OperatorSubscriber":597}],671:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.repeatWhen=void 0;var d=e("../observable/innerFrom"),f=e("../Subject"),n=e("../util/lift"),p=e("./OperatorSubscriber");r.repeatWhen=function(l){return n.operate(function(e,t){var r,n,i=!1,o=!1,a=!1,s=function(){return a&&o&&(t.complete(),!0)},u=function(){return n||(n=new f.Subject,d.innerFrom(l(n)).subscribe(p.createOperatorSubscriber(t,function(){r?c():i=!0},function(){o=!0,s()}))),n},c=function(){a=!1,r=e.subscribe(p.createOperatorSubscriber(t,void 0,function(){a=!0,s()||u().next()})),i&&(r.unsubscribe(),r=null,i=!1,c())};c()})}},{"../Subject":560,"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],672:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.retry=void 0;var n=e("../util/lift"),d=e("./OperatorSubscriber"),i=e("../util/identity"),f=e("../observable/timer"),p=e("../observable/innerFrom");r.retry=function(e){var t=(e=(e=void 0===e?1/0:e)&&"object"==typeof e?e:{count:e}).count,c=void 0===t?1/0:t,l=e.delay,r=void 0!==(t=e.resetOnSuccess)&&t;return c<=0?i.identity:n.operate(function(e,o){var a,s=0,u=function(){var i=!1;a=e.subscribe(d.createOperatorSubscriber(o,function(e){r&&(s=0),o.next(e)},void 0,function(e){var t,r,n;s++<c?(t=function(){a?(a.unsubscribe(),a=null,u()):i=!0},null!=l?(r="number"==typeof l?f.timer(l):p.innerFrom(l(e,s)),n=d.createOperatorSubscriber(o,function(){n.unsubscribe(),t()},function(){o.complete()}),r.subscribe(n)):t()):o.error(e)})),i&&(a.unsubscribe(),a=null,u())};u()})}},{"../observable/innerFrom":583,"../observable/timer":594,"../util/identity":759,"../util/lift":770,"./OperatorSubscriber":597}],673:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.retryWhen=void 0;var s=e("../observable/innerFrom"),u=e("../Subject"),n=e("../util/lift"),c=e("./OperatorSubscriber");r.retryWhen=function(a){return n.operate(function(e,t){var r,n,i=!1,o=function(){r=e.subscribe(c.createOperatorSubscriber(t,void 0,void 0,function(e){n||(n=new u.Subject,s.innerFrom(a(n)).subscribe(c.createOperatorSubscriber(t,function(){return r?o():i=!0}))),n&&n.next(e)})),i&&(r.unsubscribe(),r=null,i=!1,o())};o()})}},{"../Subject":560,"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],674:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sample=void 0;var o=e("../observable/innerFrom"),n=e("../util/lift"),a=e("../util/noop"),s=e("./OperatorSubscriber");r.sample=function(i){return n.operate(function(e,t){var r=!1,n=null;e.subscribe(s.createOperatorSubscriber(t,function(e){r=!0,n=e})),o.innerFrom(i).subscribe(s.createOperatorSubscriber(t,function(){var e;r&&(r=!1,e=n,n=null,t.next(e))},a.noop))})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],675:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sampleTime=void 0;var n=e("../scheduler/async"),i=e("./sample"),o=e("../observable/interval");r.sampleTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.sample(o.interval(e,t))}},{"../observable/interval":584,"../scheduler/async":734,"./sample":674}],676:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scan=void 0;var n=e("../util/lift"),i=e("./scanInternals");r.scan=function(e,t){return n.operate(i.scanInternals(e,t,2<=arguments.length,!0))}},{"../util/lift":770,"./scanInternals":677}],677:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scanInternals=void 0;var l=e("./OperatorSubscriber");r.scanInternals=function(a,t,s,u,c){return function(e,r){var n=s,i=t,o=0;e.subscribe(l.createOperatorSubscriber(r,function(e){var t=o++;i=n?a(i,e,t):(n=!0,e),u&&r.next(i)},c&&function(){n&&r.next(i),r.complete()}))}}},{"./OperatorSubscriber":597}],678:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sequenceEqual=void 0;var n=e("../util/lift"),u=e("./OperatorSubscriber"),c=e("../observable/innerFrom");function l(){return{buffer:[],complete:!1}}r.sequenceEqual=function(a,s){return void 0===s&&(s=function(e,t){return e===t}),n.operate(function(e,t){function r(n,i){var r=u.createOperatorSubscriber(t,function(e){var t=i.buffer,r=i.complete;0===t.length?r?o(!1):n.buffer.push(e):s(e,t.shift())||o(!1)},function(){n.complete=!0;var e=i.complete,t=i.buffer;e&&o(0===t.length),null!=r&&r.unsubscribe()});return r}var n=l(),i=l(),o=function(e){t.next(e),t.complete()};e.subscribe(r(n,i)),c.innerFrom(a).subscribe(r(i,n))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],679:[function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},y=(Object.defineProperty(r,"__esModule",{value:!0}),r.share=void 0,e("../observable/innerFrom")),n=e("../Subject"),b=e("../Subscriber"),v=e("../util/lift");function g(e,t){for(var r,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0===t)e();else if(!1!==t)return r=new b.SafeSubscriber({next:function(){r.unsubscribe(),e()}}),y.innerFrom(t.apply(void 0,a([],o(n)))).subscribe(r)}r.share=function(e){var t=(e=void 0===e?{}:e).connector,f=void 0===t?function(){return new n.Subject}:t,p=void 0===(t=e.resetOnError)||t,h=void 0===(t=e.resetOnComplete)||t,m=void 0===(t=e.resetOnRefCountZero)||t;return function(e){function n(){var e=i;d(),null!=e&&e.unsubscribe()}var i,o,a,s=0,u=!1,c=!1,l=function(){null!=o&&o.unsubscribe(),o=void 0},d=function(){l(),i=a=void 0,u=c=!1};return v.operate(function(e,t){s++,c||u||l();var r=a=null!=a?a:f();t.add(function(){0!==--s||c||u||(o=g(n,m))}),r.subscribe(t),!i&&0<s&&(i=new b.SafeSubscriber({next:function(e){return r.next(e)},error:function(e){c=!0,l(),o=g(d,p,e),r.error(e)},complete:function(){u=!0,l(),o=g(d,h),r.complete()}}),y.innerFrom(e).subscribe(i))})(e)}}},{"../Subject":560,"../Subscriber":561,"../observable/innerFrom":583,"../util/lift":770}],680:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shareReplay=void 0;var a=e("../ReplaySubject"),s=e("./share");r.shareReplay=function(e,t,r){var n,i,o=!1;return e&&"object"==typeof e?(n=e.bufferSize,i=void 0===n?1/0:n,n=e.windowTime,t=void 0===n?1/0:n,o=void 0!==(n=e.refCount)&&n,r=e.scheduler):i=null!=e?e:1/0,s.share({connector:function(){return new a.ReplaySubject(i,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}},{"../ReplaySubject":558,"./share":679}],681:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.single=void 0;var u=e("../util/EmptyError"),c=e("../util/SequenceError"),l=e("../util/NotFoundError"),n=e("../util/lift"),d=e("./OperatorSubscriber");r.single=function(s){return n.operate(function(t,r){var n,i=!1,o=!1,a=0;t.subscribe(d.createOperatorSubscriber(r,function(e){o=!0,s&&!s(e,a++,t)||(i&&r.error(new c.SequenceError("Too many matching values")),i=!0,n=e)},function(){i?(r.next(n),r.complete()):r.error(o?new l.NotFoundError("No matching values"):new u.EmptyError)}))})}},{"../util/EmptyError":745,"../util/NotFoundError":747,"../util/SequenceError":749,"../util/lift":770,"./OperatorSubscriber":597}],682:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.skip=void 0;var n=e("./filter");r.skip=function(r){return n.filter(function(e,t){return r<=t})}},{"./filter":633}],683:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.skipLast=void 0;var n=e("../util/identity"),i=e("../util/lift"),s=e("./OperatorSubscriber");r.skipLast=function(a){return a<=0?n.identity:i.operate(function(e,n){var i=new Array(a),o=0;return e.subscribe(s.createOperatorSubscriber(n,function(e){var t,r=o++;r<a?i[r]=e:(t=i[r=r%a],i[r]=e,n.next(t))})),function(){i=null}})}},{"../util/identity":759,"../util/lift":770,"./OperatorSubscriber":597}],684:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.skipUntil=void 0;var n=e("../util/lift"),o=e("./OperatorSubscriber"),a=e("../observable/innerFrom"),s=e("../util/noop");r.skipUntil=function(i){return n.operate(function(e,t){var r=!1,n=o.createOperatorSubscriber(t,function(){null!=n&&n.unsubscribe(),r=!0},s.noop);a.innerFrom(i).subscribe(n),e.subscribe(o.createOperatorSubscriber(t,function(e){return r&&t.next(e)}))})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],685:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.skipWhile=void 0;var n=e("../util/lift"),o=e("./OperatorSubscriber");r.skipWhile=function(i){return n.operate(function(e,t){var r=!1,n=0;e.subscribe(o.createOperatorSubscriber(t,function(e){return(r=r||!i(e,n++))&&t.next(e)}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],686:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.startWith=void 0;var i=e("../observable/concat"),o=e("../util/args"),a=e("../util/lift");r.startWith=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=o.popScheduler(r);return a.operate(function(e,t){(n?i.concat(r,e,n):i.concat(r,e)).subscribe(t)})}},{"../observable/concat":571,"../util/args":751,"../util/lift":770}],687:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subscribeOn=void 0;var i=e("../util/lift");r.subscribeOn=function(r,n){return void 0===n&&(n=0),i.operate(function(e,t){t.add(r.schedule(function(){return e.subscribe(t)},n))})}},{"../util/lift":770}],688:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.switchAll=void 0;var n=e("./switchMap"),i=e("../util/identity");r.switchAll=function(){return n.switchMap(i.identity)}},{"../util/identity":759,"./switchMap":689}],689:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.switchMap=void 0;var l=e("../observable/innerFrom"),n=e("../util/lift"),d=e("./OperatorSubscriber");r.switchMap=function(u,c){return n.operate(function(e,i){function o(){t&&!a&&i.complete()}var a=null,s=0,t=!1;e.subscribe(d.createOperatorSubscriber(i,function(t){null!=a&&a.unsubscribe();var r=0,n=s++;l.innerFrom(u(t,n)).subscribe(a=d.createOperatorSubscriber(i,function(e){return i.next(c?c(t,e,n,r++):e)},function(){a=null,o()}))},function(){t=!0,o()}))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],690:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.switchMapTo=void 0;var n=e("./switchMap"),i=e("../util/isFunction");r.switchMapTo=function(e,t){return i.isFunction(t)?n.switchMap(function(){return e},t):n.switchMap(function(){return e})}},{"../util/isFunction":763,"./switchMap":689}],691:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.switchScan=void 0;var o=e("./switchMap"),a=e("../util/lift");r.switchScan=function(n,i){return a.operate(function(e,t){var r=i;return o.switchMap(function(e,t){return n(r,e,t)},function(e,t){return r=t})(e).subscribe(t),function(){r=null}})}},{"../util/lift":770,"./switchMap":689}],692:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.take=void 0;var i=e("../observable/empty"),o=e("../util/lift"),a=e("./OperatorSubscriber");r.take=function(n){return n<=0?function(){return i.EMPTY}:o.operate(function(e,t){var r=0;e.subscribe(a.createOperatorSubscriber(t,function(e){++r<=n&&(t.next(e),n<=r)&&t.complete()}))})}},{"../observable/empty":575,"../util/lift":770,"./OperatorSubscriber":597}],693:[function(e,t,r){"use strict";var s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.takeLast=void 0,e("../observable/empty")),i=e("../util/lift"),u=e("./OperatorSubscriber");r.takeLast=function(t){return t<=0?function(){return n.EMPTY}:i.operate(function(e,o){var a=[];e.subscribe(u.createOperatorSubscriber(o,function(e){a.push(e),t<a.length&&a.shift()},function(){var t,e;try{for(var r=s(a),n=r.next();!n.done;n=r.next()){var i=n.value;o.next(i)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}o.complete()},void 0,function(){a=null}))})}},{"../observable/empty":575,"../util/lift":770,"./OperatorSubscriber":597}],694:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.takeUntil=void 0;var n=e("../util/lift"),i=e("./OperatorSubscriber"),o=e("../observable/innerFrom"),a=e("../util/noop");r.takeUntil=function(r){return n.operate(function(e,t){o.innerFrom(r).subscribe(i.createOperatorSubscriber(t,function(){return t.complete()},a.noop)),t.closed||e.subscribe(t)})}},{"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],695:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.takeWhile=void 0;var n=e("../util/lift"),a=e("./OperatorSubscriber");r.takeWhile=function(i,o){return void 0===o&&(o=!1),n.operate(function(e,r){var n=0;e.subscribe(a.createOperatorSubscriber(r,function(e){var t=i(e,n++);(t||o)&&r.next(e),t||r.complete()}))})}},{"../util/lift":770,"./OperatorSubscriber":597}],696:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tap=void 0;var n=e("../util/isFunction"),o=e("../util/lift"),a=e("./OperatorSubscriber"),s=e("../util/identity");r.tap=function(e,t,r){var i=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return i?o.operate(function(e,r){null!=(t=i.subscribe)&&t.call(i);var t,n=!0;e.subscribe(a.createOperatorSubscriber(r,function(e){var t;null!=(t=i.next)&&t.call(i,e),r.next(e)},function(){var e;n=!1,null!=(e=i.complete)&&e.call(i),r.complete()},function(e){var t;n=!1,null!=(t=i.error)&&t.call(i,e),r.error(e)},function(){var e;n&&null!=(e=i.unsubscribe)&&e.call(i),null!=(e=i.finalize)&&e.call(i)}))}):s.identity}},{"../util/identity":759,"../util/isFunction":763,"../util/lift":770,"./OperatorSubscriber":597}],697:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throttle=void 0;var n=e("../util/lift"),y=e("./OperatorSubscriber"),b=e("../observable/innerFrom");r.throttle=function(h,m){return n.operate(function(e,t){function r(){var e;s&&(s=!1,e=u,u=null,t.next(e),l||p(e))}var n=null!=m?m:{},i=n.leading,o=void 0===i||i,i=n.trailing,a=void 0!==i&&i,s=!1,u=null,c=null,l=!1,d=function(){null!=c&&c.unsubscribe(),c=null,a&&(r(),l)&&t.complete()},f=function(){c=null,l&&t.complete()},p=function(e){return c=b.innerFrom(h(e)).subscribe(y.createOperatorSubscriber(t,d,f))};e.subscribe(y.createOperatorSubscriber(t,function(e){s=!0,u=e,c&&!c.closed||(o?r():p(e))},function(){l=!0,a&&s&&c&&!c.closed||t.complete()}))})}},{"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],698:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throttleTime=void 0;var i=e("../scheduler/async"),o=e("./throttle"),a=e("../observable/timer");r.throttleTime=function(e,t,r){void 0===t&&(t=i.asyncScheduler);var n=a.timer(e,t);return o.throttle(function(){return n},r)}},{"../observable/timer":594,"../scheduler/async":734,"./throttle":697}],699:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throwIfEmpty=void 0;var n=e("../util/EmptyError"),i=e("../util/lift"),o=e("./OperatorSubscriber");function a(){return new n.EmptyError}r.throwIfEmpty=function(n){return void 0===n&&(n=a),i.operate(function(e,t){var r=!1;e.subscribe(o.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){return r?t.complete():t.error(n())}))})}},{"../util/EmptyError":745,"../util/lift":770,"./OperatorSubscriber":597}],700:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimeInterval=r.timeInterval=void 0;var n=e("../scheduler/async"),i=e("../util/lift"),a=e("./OperatorSubscriber");r.timeInterval=function(o){return void 0===o&&(o=n.asyncScheduler),i.operate(function(e,n){var i=o.now();e.subscribe(a.createOperatorSubscriber(n,function(e){var t=o.now(),r=t-i;i=t,n.next(new s(e,r))}))})};var s=function(e,t){this.value=e,this.interval=t};r.TimeInterval=s},{"../scheduler/async":734,"../util/lift":770,"./OperatorSubscriber":597}],701:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=r.TimeoutError=void 0;var n=e("../scheduler/async"),i=e("../util/isDate"),o=e("../util/lift"),f=e("../observable/innerFrom"),a=e("../util/createErrorClass"),p=e("./OperatorSubscriber"),h=e("../util/executeSchedule");function m(e){throw new r.TimeoutError(e)}r.TimeoutError=a.createErrorClass(function(t){return function(e){void 0===e&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}}),r.timeout=function(e,t){var s=(e=i.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e).first,u=e.each,r=e.with,c=void 0===r?m:r,l=void 0===(r=e.scheduler)?null!=t?t:n.asyncScheduler:r,d=void 0===(t=e.meta)?null:t;if(null==s&&null==u)throw new TypeError("No timeout provided.");return o.operate(function(e,t){function r(e){n=h.executeSchedule(t,l,function(){try{a.unsubscribe(),f.innerFrom(c({meta:d,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}},e)}var n,i=null,o=0,a=e.subscribe(p.createOperatorSubscriber(t,function(e){null!=n&&n.unsubscribe(),o++,t.next(i=e),0<u&&r(u)},void 0,void 0,function(){null!=n&&n.closed||null!=n&&n.unsubscribe(),i=null}));o||r(null!=s?"number"==typeof s?s:+s-l.now():u)})}},{"../observable/innerFrom":583,"../scheduler/async":734,"../util/createErrorClass":755,"../util/executeSchedule":758,"../util/isDate":762,"../util/lift":770,"./OperatorSubscriber":597}],702:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.timeoutWith=void 0;var o=e("../scheduler/async"),a=e("../util/isDate"),s=e("./timeout");r.timeoutWith=function(e,t,r){var n,i;if(r=null!=r?r:o.async,a.isValidDate(e)?n=e:"number"==typeof e&&(i=e),!t)throw new TypeError("No observable provided to switch to");if(e=function(){return t},null==n&&null==i)throw new TypeError("No timeout provided.");return s.timeout({first:n,each:i,scheduler:r,with:e})}},{"../scheduler/async":734,"../util/isDate":762,"./timeout":701}],703:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.timestamp=void 0;var n=e("../scheduler/dateTimestampProvider"),i=e("./map");r.timestamp=function(t){return void 0===t&&(t=n.dateTimestampProvider),i.map(function(e){return{value:e,timestamp:t.now()}})}},{"../scheduler/dateTimestampProvider":735,"./map":644}],704:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toArray=void 0;function n(e,t){return e.push(t),e}var i=e("./reduce"),o=e("../util/lift");r.toArray=function(){return o.operate(function(e,t){i.reduce(n,[])(e).subscribe(t)})}},{"../util/lift":770,"./reduce":668}],705:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.window=void 0;var o=e("../Subject"),n=e("../util/lift"),a=e("./OperatorSubscriber"),s=e("../util/noop"),u=e("../observable/innerFrom");r.window=function(i){return n.operate(function(e,t){function r(e){n.error(e),t.error(e)}var n=new o.Subject;t.next(n.asObservable());return e.subscribe(a.createOperatorSubscriber(t,function(e){return null==n?void 0:n.next(e)},function(){n.complete(),t.complete()},r)),u.innerFrom(i).subscribe(a.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new o.Subject)},s.noop,r)),function(){null!=n&&n.unsubscribe(),n=null}})}},{"../Subject":560,"../observable/innerFrom":583,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],706:[function(e,t,r){"use strict";var l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=(Object.defineProperty(r,"__esModule",{value:!0}),r.windowCount=void 0,e("../Subject")),n=e("../util/lift"),i=e("./OperatorSubscriber");r.windowCount=function(u,e){var c=0<(e=void 0===e?0:e)?e:u;return n.operate(function(e,o){var a=[new d.Subject],s=0;o.next(a[0].asObservable()),e.subscribe(i.createOperatorSubscriber(o,function(e){try{for(var t=l(a),r=t.next();!r.done;r=t.next())r.value.next(e)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=t.return)&&i.call(t)}finally{if(n)throw n.error}}var n,i=s-u+1;0<=i&&i%c==0&&a.shift().complete(),++s%c==0&&(n=new d.Subject,a.push(n),o.next(n.asObservable()))},function(){for(;0<a.length;)a.shift().complete();o.complete()},function(e){for(;0<a.length;)a.shift().error(e);o.error(e)},function(){a=null}))})}},{"../Subject":560,"../util/lift":770,"./OperatorSubscriber":597}],707:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.windowTime=void 0;var p=e("../Subject"),n=e("../scheduler/async"),h=e("../Subscription"),i=e("../util/lift"),m=e("./OperatorSubscriber"),y=e("../util/arrRemove"),o=e("../util/args"),b=e("../util/executeSchedule");r.windowTime=function(c){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var l=null!=(e=o.popScheduler(t))?e:n.asyncScheduler,d=null!=(e=t[0])?e:null,f=t[1]||1/0;return i.operate(function(e,n){function r(t){u(function(e){e=e.window;return t(e)}),t(n),n.unsubscribe()}var i=[],o=!1,a=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),y.arrRemove(i,e),o&&s()},s=function(){var e,t,r;i&&(e=new h.Subscription,n.add(e),t=new p.Subject,i.push(r={window:t,subs:e,seen:0}),n.next(t.asObservable()),b.executeSchedule(e,l,function(){return a(r)},c))},u=(null!==d&&0<=d?b.executeSchedule(n,l,s,d,!0):o=!0,s(),function(e){return i.slice().forEach(e)});return e.subscribe(m.createOperatorSubscriber(n,function(t){u(function(e){e.window.next(t),f<=++e.seen&&a(e)})},function(){return r(function(e){return e.complete()})},function(t){return r(function(e){return e.error(t)})})),function(){i=null}})}},{"../Subject":560,"../Subscription":562,"../scheduler/async":734,"../util/args":751,"../util/arrRemove":754,"../util/executeSchedule":758,"../util/lift":770,"./OperatorSubscriber":597}],708:[function(e,t,r){"use strict";var u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=(Object.defineProperty(r,"__esModule",{value:!0}),r.windowToggle=void 0,e("../Subject")),l=e("../Subscription"),n=e("../util/lift"),d=e("../observable/innerFrom"),f=e("./OperatorSubscriber"),p=e("../util/noop"),h=e("../util/arrRemove");r.windowToggle=function(t,s){return n.operate(function(e,i){function o(e){for(;0<a.length;)a.shift().error(e);i.error(e)}var a=[];d.innerFrom(t).subscribe(f.createOperatorSubscriber(i,function(e){var t,r=new c.Subject,n=(a.push(r),new l.Subscription);try{t=d.innerFrom(s(e))}catch(e){return void o(e)}i.next(r.asObservable()),n.add(t.subscribe(f.createOperatorSubscriber(i,function(){h.arrRemove(a,r),r.complete(),n.unsubscribe()},p.noop,o)))},p.noop)),e.subscribe(f.createOperatorSubscriber(i,function(e){var t,r,n=a.slice();try{for(var i=u(n),o=i.next();!o.done;o=i.next())o.value.next(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},function(){for(;0<a.length;)a.shift().complete();i.complete()},o,function(){for(;0<a.length;)a.shift().unsubscribe()}))})}},{"../Subject":560,"../Subscription":562,"../observable/innerFrom":583,"../util/arrRemove":754,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],709:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.windowWhen=void 0;var s=e("../Subject"),n=e("../util/lift"),u=e("./OperatorSubscriber"),c=e("../observable/innerFrom");r.windowWhen=function(a){return n.operate(function(e,t){var r,n,i=function(e){r.error(e),t.error(e)},o=function(){var e;null!=n&&n.unsubscribe(),null!=r&&r.complete(),r=new s.Subject,t.next(r.asObservable());try{e=c.innerFrom(a())}catch(e){return void i(e)}e.subscribe(n=u.createOperatorSubscriber(t,o,o,i))};o(),e.subscribe(u.createOperatorSubscriber(t,function(e){return r.next(e)},function(){r.complete(),t.complete()},i,function(){null!=n&&n.unsubscribe(),r=null}))})}},{"../Subject":560,"../observable/innerFrom":583,"../util/lift":770,"./OperatorSubscriber":597}],710:[function(e,t,r){"use strict";var c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.withLatestFrom=void 0,e("../util/lift")),d=e("./OperatorSubscriber"),f=e("../observable/innerFrom"),p=e("../util/identity"),h=e("../util/noop"),i=e("../util/args");r.withLatestFrom=function(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var u=i.popResultSelector(s);return n.operate(function(e,r){for(var t=s.length,n=new Array(t),i=s.map(function(){return!1}),o=!1,a=0;a<t;a++)!function(t){f.innerFrom(s[t]).subscribe(d.createOperatorSubscriber(r,function(e){n[t]=e,!o&&!i[t]&&(i[t]=!0,o=i.every(p.identity))&&(i=null)},h.noop))}(a);e.subscribe(d.createOperatorSubscriber(r,function(e){o&&(e=l([e],c(n)),r.next(u?u.apply(void 0,l([],c(e))):e))}))})}},{"../observable/innerFrom":583,"../util/args":751,"../util/identity":759,"../util/lift":770,"../util/noop":772,"./OperatorSubscriber":597}],711:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.zip=void 0,e("../observable/zip")),a=e("../util/lift");r.zip=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return a.operate(function(e,t){o.zip.apply(void 0,i([e],n(r))).subscribe(t)})}},{"../observable/zip":596,"../util/lift":770}],712:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zipAll=void 0;var n=e("../observable/zip"),i=e("./joinAllInternals");r.zipAll=function(e){return i.joinAllInternals(n.zip,e)}},{"../observable/zip":596,"./joinAllInternals":642}],713:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.zipWith=void 0,e("./zip"));r.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.zip.apply(void 0,i([],n(e)))}},{"./zip":711}],714:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleArray=void 0;var i=e("../Observable");r.scheduleArray=function(r,n){return new i.Observable(function(e){var t=0;return n.schedule(function(){t===r.length?e.complete():(e.next(r[t++]),e.closed||this.schedule())})})}},{"../Observable":557}],715:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleAsyncIterable=void 0;var i=e("../Observable"),o=e("../util/executeSchedule");r.scheduleAsyncIterable=function(r,n){if(r)return new i.Observable(function(t){o.executeSchedule(t,n,function(){var e=r[Symbol.asyncIterator]();o.executeSchedule(t,n,function(){e.next().then(function(e){e.done?t.complete():t.next(e.value)})},0,!0)})});throw new Error("Iterable cannot be null")}},{"../Observable":557,"../util/executeSchedule":758}],716:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleIterable=void 0;var n=e("../Observable"),o=e("../symbol/iterator"),a=e("../util/isFunction"),s=e("../util/executeSchedule");r.scheduleIterable=function(e,t){return new n.Observable(function(n){var i;return s.executeSchedule(n,t,function(){i=e[o.iterator](),s.executeSchedule(n,t,function(){var e,t,r;try{t=(e=i.next()).value,r=e.done}catch(e){return void n.error(e)}r?n.complete():n.next(t)},0,!0)}),function(){return a.isFunction(null==i?void 0:i.return)&&i.return()}})}},{"../Observable":557,"../symbol/iterator":741,"../util/executeSchedule":758,"../util/isFunction":763}],717:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleObservable=void 0;var n=e("../observable/innerFrom"),i=e("../operators/observeOn"),o=e("../operators/subscribeOn");r.scheduleObservable=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},{"../observable/innerFrom":583,"../operators/observeOn":657,"../operators/subscribeOn":687}],718:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.schedulePromise=void 0;var n=e("../observable/innerFrom"),i=e("../operators/observeOn"),o=e("../operators/subscribeOn");r.schedulePromise=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},{"../observable/innerFrom":583,"../operators/observeOn":657,"../operators/subscribeOn":687}],719:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleReadableStreamLike=void 0;var n=e("./scheduleAsyncIterable"),i=e("../util/isReadableStreamLike");r.scheduleReadableStreamLike=function(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}},{"../util/isReadableStreamLike":768,"./scheduleAsyncIterable":715}],720:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scheduled=void 0;var n=e("./scheduleObservable"),i=e("./schedulePromise"),o=e("./scheduleArray"),a=e("./scheduleIterable"),s=e("./scheduleAsyncIterable"),u=e("../util/isInteropObservable"),c=e("../util/isPromise"),l=e("../util/isArrayLike"),d=e("../util/isIterable"),f=e("../util/isAsyncIterable"),p=e("../util/throwUnobservableError"),h=e("../util/isReadableStreamLike"),m=e("./scheduleReadableStreamLike");r.scheduled=function(e,t){if(null!=e){if(u.isInteropObservable(e))return n.scheduleObservable(e,t);if(l.isArrayLike(e))return o.scheduleArray(e,t);if(c.isPromise(e))return i.schedulePromise(e,t);if(f.isAsyncIterable(e))return s.scheduleAsyncIterable(e,t);if(d.isIterable(e))return a.scheduleIterable(e,t);if(h.isReadableStreamLike(e))return m.scheduleReadableStreamLike(e,t)}throw p.createInvalidObservableTypeError(e)}},{"../util/isArrayLike":760,"../util/isAsyncIterable":761,"../util/isInteropObservable":764,"../util/isIterable":765,"../util/isPromise":767,"../util/isReadableStreamLike":768,"../util/throwUnobservableError":776,"./scheduleArray":714,"./scheduleAsyncIterable":715,"./scheduleIterable":716,"./scheduleObservable":717,"./schedulePromise":718,"./scheduleReadableStreamLike":719}],721:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.Action=void 0,e("../Subscription")),e=(i=e.Subscription,o(a,i),a.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},a);function a(e,t){return i.call(this)||this}r.Action=e},{"../Subscription":562}],722:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.AnimationFrameAction=void 0,e("./AsyncAction")),s=e("./animationFrameProvider"),e=(i=a.AsyncAction,o(u,i),u.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?i.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=s.animationFrameProvider.requestAnimationFrame(function(){return e.flush(void 0)})))},u.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return i.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&(s.animationFrameProvider.cancelAnimationFrame(t),e._scheduled=void 0)},u);function u(e,t){var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.AnimationFrameAction=e},{"./AsyncAction":726,"./animationFrameProvider":732}],723:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.AnimationFrameScheduler=void 0,e("./AsyncScheduler")),e=(i=e.AsyncScheduler,o(a,i),a.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled,n=(this._scheduled=void 0,this.actions);e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},a);function a(){return null!==i&&i.apply(this,arguments)||this}r.AnimationFrameScheduler=e},{"./AsyncScheduler":727}],724:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.AsapAction=void 0,e("./AsyncAction")),s=e("./immediateProvider"),e=(i=a.AsyncAction,o(u,i),u.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?i.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=s.immediateProvider.setImmediate(e.flush.bind(e,void 0))))},u.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return i.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&(s.immediateProvider.clearImmediate(t),e._scheduled===t)&&(e._scheduled=void 0)},u);function u(e,t){var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.AsapAction=e},{"./AsyncAction":726,"./immediateProvider":736}],725:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.AsapScheduler=void 0,e("./AsyncScheduler")),e=(i=e.AsyncScheduler,o(a,i),a.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled,n=(this._scheduled=void 0,this.actions);e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},a);function a(){return null!==i&&i.apply(this,arguments)||this}r.AsapScheduler=e},{"./AsyncScheduler":727}],726:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncAction=void 0,e("./Action")),s=e("./intervalProvider"),u=e("../util/arrRemove"),e=(i=a.Action,o(c,i),c.prototype.schedule=function(e,t){var r;return void 0===t&&(t=0),this.closed||(this.state=e,e=this.id,r=this.scheduler,null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(r,this.id,t)),this},c.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),s.intervalProvider.setInterval(e.flush.bind(e,this),r)},c.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return t;null!=t&&s.intervalProvider.clearInterval(t)},c.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},c.prototype.unsubscribe=function(){var e,t,r;this.closed||(e=this.id,r=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,u.arrRemove(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,i.prototype.unsubscribe.call(this))},c);function c(e,t){var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}r.AsyncAction=e},{"../util/arrRemove":754,"./Action":721,"./intervalProvider":737}],727:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncScheduler=void 0,e("../Scheduler")),e=(i=a.Scheduler,o(s,i),s.prototype.flush=function(e){var t,r=this.actions;if(this._active)r.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}}},s);function s(e,t){void 0===t&&(t=a.Scheduler.now);e=i.call(this,e,t)||this;return e.actions=[],e._active=!1,e}r.AsyncScheduler=e},{"../Scheduler":559}],728:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.QueueAction=void 0,e("./AsyncAction")),e=(i=e.AsyncAction,o(a,i),a.prototype.schedule=function(e,t){return 0<(t=void 0===t?0:t)?i.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},a.prototype.execute=function(e,t){return 0<t||this.closed?i.prototype.execute.call(this,e,t):this._execute(e,t)},a.prototype.requestAsyncId=function(e,t,r){return null!=(r=void 0===r?0:r)&&0<r||null==r&&0<this.delay?i.prototype.requestAsyncId.call(this,e,t,r):(e.flush(this),0)},a);function a(e,t){var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.QueueAction=e},{"./AsyncAction":726}],729:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),r.QueueScheduler=void 0,e("./AsyncScheduler")),e=(i=e.AsyncScheduler,o(a,i),a);function a(){return null!==i&&i.apply(this,arguments)||this}r.QueueScheduler=e},{"./AsyncScheduler":727}],730:[function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualAction=r.VirtualTimeScheduler=void 0,e("./AsyncAction")),s=e("../Subscription"),e=e("./AsyncScheduler"),e=(i=e.AsyncScheduler,o(u,i),u.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},u.frameTimeFactor=10,u);function u(e,t){void 0===t&&(t=1/0);var r=i.call(this,e=void 0===e?l:e,function(){return r.frame})||this;return r.maxFrames=t,r.frame=0,r.index=-1,r}r.VirtualTimeScheduler=e;c=a.AsyncAction,o(d,c),d.prototype.schedule=function(e,t){if(void 0===t&&(t=0),Number.isFinite(t)){if(!this.id)return c.prototype.schedule.call(this,e,t);this.active=!1;var r=new d(this.scheduler,this.work);return this.add(r),r.schedule(e,t)}return s.Subscription.EMPTY},d.prototype.requestAsyncId=function(e,t,r){this.delay=e.frame+(r=void 0===r?0:r);r=e.actions;return r.push(this),r.sort(d.sortActions),1},d.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},d.prototype._execute=function(e,t){if(!0===this.active)return c.prototype._execute.call(this,e,t)},d.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1};var c,l=d;function d(e,t,r){void 0===r&&(r=e.index+=1);var n=c.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.index=r,n.active=!0,n.index=e.index=r,n}r.VirtualAction=l},{"../Subscription":562,"./AsyncAction":726,"./AsyncScheduler":727}],731:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.animationFrame=r.animationFrameScheduler=void 0;var n=e("./AnimationFrameAction"),e=e("./AnimationFrameScheduler");r.animationFrameScheduler=new e.AnimationFrameScheduler(n.AnimationFrameAction),r.animationFrame=r.animationFrameScheduler},{"./AnimationFrameAction":722,"./AnimationFrameScheduler":723}],732:[function(e,t,o){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},a=(Object.defineProperty(o,"__esModule",{value:!0}),o.animationFrameProvider=void 0,e("../Subscription"));o.animationFrameProvider={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=o.animationFrameProvider.delegate,i=(n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame),e(function(e){r=void 0,t(e)}));return new a.Subscription(function(){return null==r?void 0:r(i)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.animationFrameProvider.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.animationFrameProvider.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(e)))},delegate:void 0}},{"../Subscription":562}],733:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asap=r.asapScheduler=void 0;var n=e("./AsapAction"),e=e("./AsapScheduler");r.asapScheduler=new e.AsapScheduler(n.AsapAction),r.asap=r.asapScheduler},{"./AsapAction":724,"./AsapScheduler":725}],734:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.async=r.asyncScheduler=void 0;var n=e("./AsyncAction"),e=e("./AsyncScheduler");r.asyncScheduler=new e.AsyncScheduler(n.AsyncAction),r.async=r.asyncScheduler},{"./AsyncAction":726,"./AsyncScheduler":727}],735:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dateTimestampProvider=void 0,r.dateTimestampProvider={now:function(){return(r.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},{}],736:[function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},e=(Object.defineProperty(n,"__esModule",{value:!0}),n.immediateProvider=void 0,e("../util/Immediate")),a=e.Immediate.setImmediate,r=e.Immediate.clearImmediate;n.immediateProvider={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.immediateProvider.delegate;return((null==r?void 0:r.setImmediate)||a).apply(void 0,o([],i(e)))},clearImmediate:function(e){var t=n.immediateProvider.delegate;return((null==t?void 0:t.clearImmediate)||r)(e)},delegate:void 0}},{"../util/Immediate":746}],737:[function(e,t,o){"use strict";var a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(o,"__esModule",{value:!0}),o.intervalProvider=void 0,o.intervalProvider={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=o.intervalProvider.delegate;return null!=i&&i.setInterval?i.setInterval.apply(i,s([e,t],a(r))):setInterval.apply(void 0,s([e,t],a(r)))},clearInterval:function(e){var t=o.intervalProvider.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0}},{}],738:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.performanceTimestampProvider=void 0,r.performanceTimestampProvider={now:function(){return(r.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},{}],739:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.queue=r.queueScheduler=void 0;var n=e("./QueueAction"),e=e("./QueueScheduler");r.queueScheduler=new e.QueueScheduler(n.QueueAction),r.queue=r.queueScheduler},{"./QueueAction":728,"./QueueScheduler":729}],740:[function(e,t,o){"use strict";var a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(o,"__esModule",{value:!0}),o.timeoutProvider=void 0,o.timeoutProvider={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=o.timeoutProvider.delegate;return null!=i&&i.setTimeout?i.setTimeout.apply(i,s([e,t],a(r))):setTimeout.apply(void 0,s([e,t],a(r)))},clearTimeout:function(e){var t=o.timeoutProvider.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},{}],741:[function(e,t,r){"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(r,"__esModule",{value:!0}),r.iterator=r.getSymbolIterator=void 0,r.getSymbolIterator=n,r.iterator=n()},{}],742:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observable=void 0,r.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},{}],743:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],744:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ArgumentOutOfRangeError=void 0;e=e("./createErrorClass");r.ArgumentOutOfRangeError=e.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},{"./createErrorClass":755}],745:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EmptyError=void 0;e=e("./createErrorClass");r.EmptyError=e.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})},{"./createErrorClass":755}],746:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TestTools=r.Immediate=void 0;var n,i=1,o={};function a(e){return e in o&&(delete o[e],!0)}r.Immediate={setImmediate:function(e){var t=i++;return o[t]=!0,(n=n||Promise.resolve()).then(function(){return a(t)&&e()}),t},clearImmediate:function(e){a(e)}},r.TestTools={pending:function(){return Object.keys(o).length}}},{}],747:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NotFoundError=void 0;e=e("./createErrorClass");r.NotFoundError=e.createErrorClass(function(t){return function(e){t(this),this.name="NotFoundError",this.message=e}})},{"./createErrorClass":755}],748:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ObjectUnsubscribedError=void 0;e=e("./createErrorClass");r.ObjectUnsubscribedError=e.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},{"./createErrorClass":755}],749:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SequenceError=void 0;e=e("./createErrorClass");r.SequenceError=e.createErrorClass(function(t){return function(e){t(this),this.name="SequenceError",this.message=e}})},{"./createErrorClass":755}],750:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnsubscriptionError=void 0;e=e("./createErrorClass");r.UnsubscriptionError=e.createErrorClass(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}})},{"./createErrorClass":755}],751:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.popNumber=r.popScheduler=r.popResultSelector=void 0;var n=e("./isFunction"),i=e("./isScheduler");function o(e){return e[e.length-1]}r.popResultSelector=function(e){return n.isFunction(o(e))?e.pop():void 0},r.popScheduler=function(e){return i.isScheduler(o(e))?e.pop():void 0},r.popNumber=function(e,t){return"number"==typeof o(e)?e.pop():t}},{"./isFunction":763,"./isScheduler":769}],752:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.argsArgArrayOrObject=void 0;var n=Array.isArray,i=Object.getPrototypeOf,o=Object.prototype,a=Object.keys;r.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(n(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&i(r)===o)return{args:(r=a(t)).map(function(e){return t[e]}),keys:r}}var r;return{args:e,keys:null}}},{}],753:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.argsOrArgArray=void 0;var n=Array.isArray;r.argsOrArgArray=function(e){return 1===e.length&&n(e[0])?e[0]:e}},{}],754:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.arrRemove=void 0,r.arrRemove=function(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}},{}],755:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createErrorClass=void 0,r.createErrorClass=function(e){return(e=e(function(e){Error.call(e),e.stack=(new Error).stack})).prototype=Object.create(Error.prototype),e.prototype.constructor=e}},{}],756:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createObject=void 0,r.createObject=function(e,n){return e.reduce(function(e,t,r){return e[t]=n[r],e},{})}},{}],757:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.captureError=r.errorContext=void 0;var n=e("../config"),i=null;r.errorContext=function(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var t=i,r=t.errorThrown,t=t.error;if(i=null,r)throw t}}else e()},r.captureError=function(e){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},{"../config":563}],758:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.executeSchedule=void 0,r.executeSchedule=function(e,t,r,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),t=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n),e.add(t),!i)return t}},{}],759:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.identity=void 0,r.identity=function(e){return e}},{}],760:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=void 0,r.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},{}],761:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAsyncIterable=void 0;var n=e("./isFunction");r.isAsyncIterable=function(e){return Symbol.asyncIterator&&n.isFunction(null==e?void 0:e[Symbol.asyncIterator])}},{"./isFunction":763}],762:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isValidDate=void 0,r.isValidDate=function(e){return e instanceof Date&&!isNaN(e)}},{}],763:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isFunction=void 0,r.isFunction=function(e){return"function"==typeof e}},{}],764:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isInteropObservable=void 0;var n=e("../symbol/observable"),i=e("./isFunction");r.isInteropObservable=function(e){return i.isFunction(e[n.observable])}},{"../symbol/observable":742,"./isFunction":763}],765:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isIterable=void 0;var n=e("../symbol/iterator"),i=e("./isFunction");r.isIterable=function(e){return i.isFunction(null==e?void 0:e[n.iterator])}},{"../symbol/iterator":741,"./isFunction":763}],766:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObservable=void 0;var n=e("../Observable"),i=e("./isFunction");r.isObservable=function(e){return!!e&&(e instanceof n.Observable||i.isFunction(e.lift)&&i.isFunction(e.subscribe))}},{"../Observable":557,"./isFunction":763}],767:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=void 0;var n=e("./isFunction");r.isPromise=function(e){return n.isFunction(null==e?void 0:e.then)}},{"./isFunction":763}],768:[function(e,t,r){"use strict";var o=this&&this.__generator||function(n,i){var o,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=i.call(n,u)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},d=this&&this.__await||function(e){return this instanceof d?(this.v=e,this):new d(e)},n=this&&this.__asyncGenerator||function(e,t,r){var i,o,a;if(Symbol.asyncIterator)return i=r.apply(e,t||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.");function n(n){i[n]&&(a[n]=function(r){return new Promise(function(e,t){1<o.push([n,r,e,t])||s(n,r)})})}function s(e,t){try{(r=i[e](t)).value instanceof d?Promise.resolve(r.value.v).then(u,c):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},i=(Object.defineProperty(r,"__esModule",{value:!0}),r.isReadableStreamLike=r.readableStreamLikeToAsyncGenerator=void 0,e("./isFunction"));r.readableStreamLikeToAsyncGenerator=function(i){return n(this,arguments,function(){var t,r,n;return o(this,function(e){switch(e.label){case 0:t=i.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,d(t.read())];case 3:return(r=e.sent(),n=r.value,r.done)?[4,d(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,d(n)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},r.isReadableStreamLike=function(e){return i.isFunction(null==e?void 0:e.getReader)}},{"./isFunction":763}],769:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isScheduler=void 0;var n=e("./isFunction");r.isScheduler=function(e){return e&&n.isFunction(e.schedule)}},{"./isFunction":763}],770:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.operate=r.hasLift=void 0;var n=e("./isFunction");function i(e){return n.isFunction(null==e?void 0:e.lift)}r.hasLift=i,r.operate=function(t){return function(e){if(i(e))return e.lift(function(e){try{return t(e,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}}},{"./isFunction":763}],771:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.mapOneOrManyArgs=void 0,e("../operators/map")),a=Array.isArray;r.mapOneOrManyArgs=function(r){return o.map(function(e){return t=r,a(e=e)?t.apply(void 0,i([],n(e))):t(e);var t})}},{"../operators/map":644}],772:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=void 0,r.noop=function(){}},{}],773:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.not=void 0,r.not=function(r,n){return function(e,t){return!r.call(n,e,t)}}},{}],774:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pipeFromArray=r.pipe=void 0;var n=e("./identity");function i(t){return 0===t.length?n.identity:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}}r.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},r.pipeFromArray=i},{"./identity":759}],775:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reportUnhandledError=void 0;var n=e("../config"),i=e("../scheduler/timeoutProvider");r.reportUnhandledError=function(t){i.timeoutProvider.setTimeout(function(){var e=n.config.onUnhandledError;if(!e)throw t;e(t)})}},{"../config":563,"../scheduler/timeoutProvider":740}],776:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createInvalidObservableTypeError=void 0,r.createInvalidObservableTypeError=function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},{}],777:[function(e,T,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=t.merge=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.concat=t.combineLatestWith=t.combineLatest=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=void 0,t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.race=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.partition=t.pairwise=t.onErrorResumeNext=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=void 0,t.zipWith=t.zipAll=t.zip=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=void 0;var r=e("../internal/operators/audit"),n=(Object.defineProperty(t,"audit",{enumerable:!0,get:function(){return r.audit}}),e("../internal/operators/auditTime")),i=(Object.defineProperty(t,"auditTime",{enumerable:!0,get:function(){return n.auditTime}}),e("../internal/operators/buffer")),o=(Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return i.buffer}}),e("../internal/operators/bufferCount")),a=(Object.defineProperty(t,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}}),e("../internal/operators/bufferTime")),s=(Object.defineProperty(t,"bufferTime",{enumerable:!0,get:function(){return a.bufferTime}}),e("../internal/operators/bufferToggle")),u=(Object.defineProperty(t,"bufferToggle",{enumerable:!0,get:function(){return s.bufferToggle}}),e("../internal/operators/bufferWhen")),c=(Object.defineProperty(t,"bufferWhen",{enumerable:!0,get:function(){return u.bufferWhen}}),e("../internal/operators/catchError")),l=(Object.defineProperty(t,"catchError",{enumerable:!0,get:function(){return c.catchError}}),e("../internal/operators/combineAll")),d=(Object.defineProperty(t,"combineAll",{enumerable:!0,get:function(){return l.combineAll}}),e("../internal/operators/combineLatestAll")),f=(Object.defineProperty(t,"combineLatestAll",{enumerable:!0,get:function(){return d.combineLatestAll}}),e("../internal/operators/combineLatest")),p=(Object.defineProperty(t,"combineLatest",{enumerable:!0,get:function(){return f.combineLatest}}),e("../internal/operators/combineLatestWith")),h=(Object.defineProperty(t,"combineLatestWith",{enumerable:!0,get:function(){return p.combineLatestWith}}),e("../internal/operators/concat")),m=(Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return h.concat}}),e("../internal/operators/concatAll")),y=(Object.defineProperty(t,"concatAll",{enumerable:!0,get:function(){return m.concatAll}}),e("../internal/operators/concatMap")),b=(Object.defineProperty(t,"concatMap",{enumerable:!0,get:function(){return y.concatMap}}),e("../internal/operators/concatMapTo")),v=(Object.defineProperty(t,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}}),e("../internal/operators/concatWith")),g=(Object.defineProperty(t,"concatWith",{enumerable:!0,get:function(){return v.concatWith}}),e("../internal/operators/connect")),_=(Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return g.connect}}),e("../internal/operators/count")),w=(Object.defineProperty(t,"count",{enumerable:!0,get:function(){return _.count}}),e("../internal/operators/debounce")),O=(Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return w.debounce}}),e("../internal/operators/debounceTime")),S=(Object.defineProperty(t,"debounceTime",{enumerable:!0,get:function(){return O.debounceTime}}),e("../internal/operators/defaultIfEmpty")),E=(Object.defineProperty(t,"defaultIfEmpty",{enumerable:!0,get:function(){return S.defaultIfEmpty}}),e("../internal/operators/delay")),x=(Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return E.delay}}),e("../internal/operators/delayWhen")),P=(Object.defineProperty(t,"delayWhen",{enumerable:!0,get:function(){return x.delayWhen}}),e("../internal/operators/dematerialize")),j=(Object.defineProperty(t,"dematerialize",{enumerable:!0,get:function(){return P.dematerialize}}),e("../internal/operators/distinct")),A=(Object.defineProperty(t,"distinct",{enumerable:!0,get:function(){return j.distinct}}),e("../internal/operators/distinctUntilChanged")),M=(Object.defineProperty(t,"distinctUntilChanged",{enumerable:!0,get:function(){return A.distinctUntilChanged}}),e("../internal/operators/distinctUntilKeyChanged")),I=(Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return M.distinctUntilKeyChanged}}),e("../internal/operators/elementAt")),R=(Object.defineProperty(t,"elementAt",{enumerable:!0,get:function(){return I.elementAt}}),e("../internal/operators/endWith")),C=(Object.defineProperty(t,"endWith",{enumerable:!0,get:function(){return R.endWith}}),e("../internal/operators/every")),k=(Object.defineProperty(t,"every",{enumerable:!0,get:function(){return C.every}}),e("../internal/operators/exhaust")),$=(Object.defineProperty(t,"exhaust",{enumerable:!0,get:function(){return k.exhaust}}),e("../internal/operators/exhaustAll")),D=(Object.defineProperty(t,"exhaustAll",{enumerable:!0,get:function(){return $.exhaustAll}}),e("../internal/operators/exhaustMap")),N=(Object.defineProperty(t,"exhaustMap",{enumerable:!0,get:function(){return D.exhaustMap}}),e("../internal/operators/expand")),L=(Object.defineProperty(t,"expand",{enumerable:!0,get:function(){return N.expand}}),e("../internal/operators/filter")),F=(Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return L.filter}}),e("../internal/operators/finalize")),B=(Object.defineProperty(t,"finalize",{enumerable:!0,get:function(){return F.finalize}}),e("../internal/operators/find")),U=(Object.defineProperty(t,"find",{enumerable:!0,get:function(){return B.find}}),e("../internal/operators/findIndex")),z=(Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return U.findIndex}}),e("../internal/operators/first")),W=(Object.defineProperty(t,"first",{enumerable:!0,get:function(){return z.first}}),e("../internal/operators/groupBy")),q=(Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return W.groupBy}}),e("../internal/operators/ignoreElements")),K=(Object.defineProperty(t,"ignoreElements",{enumerable:!0,get:function(){return q.ignoreElements}}),e("../internal/operators/isEmpty")),V=(Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return K.isEmpty}}),e("../internal/operators/last")),H=(Object.defineProperty(t,"last",{enumerable:!0,get:function(){return V.last}}),e("../internal/operators/map")),G=(Object.defineProperty(t,"map",{enumerable:!0,get:function(){return H.map}}),e("../internal/operators/mapTo")),Z=(Object.defineProperty(t,"mapTo",{enumerable:!0,get:function(){return G.mapTo}}),e("../internal/operators/materialize")),Y=(Object.defineProperty(t,"materialize",{enumerable:!0,get:function(){return Z.materialize}}),e("../internal/operators/max")),Q=(Object.defineProperty(t,"max",{enumerable:!0,get:function(){return Y.max}}),e("../internal/operators/merge")),J=(Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return Q.merge}}),e("../internal/operators/mergeAll")),X=(Object.defineProperty(t,"mergeAll",{enumerable:!0,get:function(){return J.mergeAll}}),e("../internal/operators/flatMap")),ee=(Object.defineProperty(t,"flatMap",{enumerable:!0,get:function(){return X.flatMap}}),e("../internal/operators/mergeMap")),te=(Object.defineProperty(t,"mergeMap",{enumerable:!0,get:function(){return ee.mergeMap}}),e("../internal/operators/mergeMapTo")),re=(Object.defineProperty(t,"mergeMapTo",{enumerable:!0,get:function(){return te.mergeMapTo}}),e("../internal/operators/mergeScan")),ne=(Object.defineProperty(t,"mergeScan",{enumerable:!0,get:function(){return re.mergeScan}}),e("../internal/operators/mergeWith")),ie=(Object.defineProperty(t,"mergeWith",{enumerable:!0,get:function(){return ne.mergeWith}}),e("../internal/operators/min")),oe=(Object.defineProperty(t,"min",{enumerable:!0,get:function(){return ie.min}}),e("../internal/operators/multicast")),ae=(Object.defineProperty(t,"multicast",{enumerable:!0,get:function(){return oe.multicast}}),e("../internal/operators/observeOn")),se=(Object.defineProperty(t,"observeOn",{enumerable:!0,get:function(){return ae.observeOn}}),e("../internal/operators/onErrorResumeNextWith")),ue=(Object.defineProperty(t,"onErrorResumeNext",{enumerable:!0,get:function(){return se.onErrorResumeNext}}),e("../internal/operators/pairwise")),ce=(Object.defineProperty(t,"pairwise",{enumerable:!0,get:function(){return ue.pairwise}}),e("../internal/operators/partition")),le=(Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return ce.partition}}),e("../internal/operators/pluck")),de=(Object.defineProperty(t,"pluck",{enumerable:!0,get:function(){return le.pluck}}),e("../internal/operators/publish")),fe=(Object.defineProperty(t,"publish",{enumerable:!0,get:function(){return de.publish}}),e("../internal/operators/publishBehavior")),pe=(Object.defineProperty(t,"publishBehavior",{enumerable:!0,get:function(){return fe.publishBehavior}}),e("../internal/operators/publishLast")),he=(Object.defineProperty(t,"publishLast",{enumerable:!0,get:function(){return pe.publishLast}}),e("../internal/operators/publishReplay")),me=(Object.defineProperty(t,"publishReplay",{enumerable:!0,get:function(){return he.publishReplay}}),e("../internal/operators/race")),ye=(Object.defineProperty(t,"race",{enumerable:!0,get:function(){return me.race}}),e("../internal/operators/raceWith")),be=(Object.defineProperty(t,"raceWith",{enumerable:!0,get:function(){return ye.raceWith}}),e("../internal/operators/reduce")),ve=(Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return be.reduce}}),e("../internal/operators/repeat")),ge=(Object.defineProperty(t,"repeat",{enumerable:!0,get:function(){return ve.repeat}}),e("../internal/operators/repeatWhen")),_e=(Object.defineProperty(t,"repeatWhen",{enumerable:!0,get:function(){return ge.repeatWhen}}),e("../internal/operators/retry")),we=(Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return _e.retry}}),e("../internal/operators/retryWhen")),Oe=(Object.defineProperty(t,"retryWhen",{enumerable:!0,get:function(){return we.retryWhen}}),e("../internal/operators/refCount")),Se=(Object.defineProperty(t,"refCount",{enumerable:!0,get:function(){return Oe.refCount}}),e("../internal/operators/sample")),Ee=(Object.defineProperty(t,"sample",{enumerable:!0,get:function(){return Se.sample}}),e("../internal/operators/sampleTime")),xe=(Object.defineProperty(t,"sampleTime",{enumerable:!0,get:function(){return Ee.sampleTime}}),e("../internal/operators/scan")),Pe=(Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return xe.scan}}),e("../internal/operators/sequenceEqual")),je=(Object.defineProperty(t,"sequenceEqual",{enumerable:!0,get:function(){return Pe.sequenceEqual}}),e("../internal/operators/share")),Ae=(Object.defineProperty(t,"share",{enumerable:!0,get:function(){return je.share}}),e("../internal/operators/shareReplay")),Me=(Object.defineProperty(t,"shareReplay",{enumerable:!0,get:function(){return Ae.shareReplay}}),e("../internal/operators/single")),Ie=(Object.defineProperty(t,"single",{enumerable:!0,get:function(){return Me.single}}),e("../internal/operators/skip")),Re=(Object.defineProperty(t,"skip",{enumerable:!0,get:function(){return Ie.skip}}),e("../internal/operators/skipLast")),Ce=(Object.defineProperty(t,"skipLast",{enumerable:!0,get:function(){return Re.skipLast}}),e("../internal/operators/skipUntil")),ke=(Object.defineProperty(t,"skipUntil",{enumerable:!0,get:function(){return Ce.skipUntil}}),e("../internal/operators/skipWhile")),$e=(Object.defineProperty(t,"skipWhile",{enumerable:!0,get:function(){return ke.skipWhile}}),e("../internal/operators/startWith")),De=(Object.defineProperty(t,"startWith",{enumerable:!0,get:function(){return $e.startWith}}),e("../internal/operators/subscribeOn")),Te=(Object.defineProperty(t,"subscribeOn",{enumerable:!0,get:function(){return De.subscribeOn}}),e("../internal/operators/switchAll")),Ne=(Object.defineProperty(t,"switchAll",{enumerable:!0,get:function(){return Te.switchAll}}),e("../internal/operators/switchMap")),Le=(Object.defineProperty(t,"switchMap",{enumerable:!0,get:function(){return Ne.switchMap}}),e("../internal/operators/switchMapTo")),Fe=(Object.defineProperty(t,"switchMapTo",{enumerable:!0,get:function(){return Le.switchMapTo}}),e("../internal/operators/switchScan")),Be=(Object.defineProperty(t,"switchScan",{enumerable:!0,get:function(){return Fe.switchScan}}),e("../internal/operators/take")),Ue=(Object.defineProperty(t,"take",{enumerable:!0,get:function(){return Be.take}}),e("../internal/operators/takeLast")),ze=(Object.defineProperty(t,"takeLast",{enumerable:!0,get:function(){return Ue.takeLast}}),e("../internal/operators/takeUntil")),We=(Object.defineProperty(t,"takeUntil",{enumerable:!0,get:function(){return ze.takeUntil}}),e("../internal/operators/takeWhile")),qe=(Object.defineProperty(t,"takeWhile",{enumerable:!0,get:function(){return We.takeWhile}}),e("../internal/operators/tap")),Ke=(Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return qe.tap}}),e("../internal/operators/throttle")),Ve=(Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return Ke.throttle}}),e("../internal/operators/throttleTime")),He=(Object.defineProperty(t,"throttleTime",{enumerable:!0,get:function(){return Ve.throttleTime}}),e("../internal/operators/throwIfEmpty")),Ge=(Object.defineProperty(t,"throwIfEmpty",{enumerable:!0,get:function(){return He.throwIfEmpty}}),e("../internal/operators/timeInterval")),Ze=(Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return Ge.timeInterval}}),e("../internal/operators/timeout")),Ye=(Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return Ze.timeout}}),e("../internal/operators/timeoutWith")),Qe=(Object.defineProperty(t,"timeoutWith",{enumerable:!0,get:function(){return Ye.timeoutWith}}),e("../internal/operators/timestamp")),Je=(Object.defineProperty(t,"timestamp",{enumerable:!0,get:function(){return Qe.timestamp}}),e("../internal/operators/toArray")),Xe=(Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return Je.toArray}}),e("../internal/operators/window")),et=(Object.defineProperty(t,"window",{enumerable:!0,get:function(){return Xe.window}}),e("../internal/operators/windowCount")),tt=(Object.defineProperty(t,"windowCount",{enumerable:!0,get:function(){return et.windowCount}}),e("../internal/operators/windowTime")),rt=(Object.defineProperty(t,"windowTime",{enumerable:!0,get:function(){return tt.windowTime}}),e("../internal/operators/windowToggle")),nt=(Object.defineProperty(t,"windowToggle",{enumerable:!0,get:function(){return rt.windowToggle}}),e("../internal/operators/windowWhen")),it=(Object.defineProperty(t,"windowWhen",{enumerable:!0,get:function(){return nt.windowWhen}}),e("../internal/operators/withLatestFrom")),ot=(Object.defineProperty(t,"withLatestFrom",{enumerable:!0,get:function(){return it.withLatestFrom}}),e("../internal/operators/zip")),at=(Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return ot.zip}}),e("../internal/operators/zipAll")),st=(Object.defineProperty(t,"zipAll",{enumerable:!0,get:function(){return at.zipAll}}),e("../internal/operators/zipWith"));Object.defineProperty(t,"zipWith",{enumerable:!0,get:function(){return st.zipWith}})},{"../internal/operators/audit":598,"../internal/operators/auditTime":599,"../internal/operators/buffer":600,"../internal/operators/bufferCount":601,"../internal/operators/bufferTime":602,"../internal/operators/bufferToggle":603,"../internal/operators/bufferWhen":604,"../internal/operators/catchError":605,"../internal/operators/combineAll":606,"../internal/operators/combineLatest":607,"../internal/operators/combineLatestAll":608,"../internal/operators/combineLatestWith":609,"../internal/operators/concat":610,"../internal/operators/concatAll":611,"../internal/operators/concatMap":612,"../internal/operators/concatMapTo":613,"../internal/operators/concatWith":614,"../internal/operators/connect":615,"../internal/operators/count":616,"../internal/operators/debounce":617,"../internal/operators/debounceTime":618,"../internal/operators/defaultIfEmpty":619,"../internal/operators/delay":620,"../internal/operators/delayWhen":621,"../internal/operators/dematerialize":622,"../internal/operators/distinct":623,"../internal/operators/distinctUntilChanged":624,"../internal/operators/distinctUntilKeyChanged":625,"../internal/operators/elementAt":626,"../internal/operators/endWith":627,"../internal/operators/every":628,"../internal/operators/exhaust":629,"../internal/operators/exhaustAll":630,"../internal/operators/exhaustMap":631,"../internal/operators/expand":632,"../internal/operators/filter":633,"../internal/operators/finalize":634,"../internal/operators/find":635,"../internal/operators/findIndex":636,"../internal/operators/first":637,"../internal/operators/flatMap":638,"../internal/operators/groupBy":639,"../internal/operators/ignoreElements":640,"../internal/operators/isEmpty":641,"../internal/operators/last":643,"../internal/operators/map":644,"../internal/operators/mapTo":645,"../internal/operators/materialize":646,"../internal/operators/max":647,"../internal/operators/merge":648,"../internal/operators/mergeAll":649,"../internal/operators/mergeMap":651,"../internal/operators/mergeMapTo":652,"../internal/operators/mergeScan":653,"../internal/operators/mergeWith":654,"../internal/operators/min":655,"../internal/operators/multicast":656,"../internal/operators/observeOn":657,"../internal/operators/onErrorResumeNextWith":658,"../internal/operators/pairwise":659,"../internal/operators/partition":660,"../internal/operators/pluck":661,"../internal/operators/publish":662,"../internal/operators/publishBehavior":663,"../internal/operators/publishLast":664,"../internal/operators/publishReplay":665,"../internal/operators/race":666,"../internal/operators/raceWith":667,"../internal/operators/reduce":668,"../internal/operators/refCount":669,"../internal/operators/repeat":670,"../internal/operators/repeatWhen":671,"../internal/operators/retry":672,"../internal/operators/retryWhen":673,"../internal/operators/sample":674,"../internal/operators/sampleTime":675,"../internal/operators/scan":676,"../internal/operators/sequenceEqual":678,"../internal/operators/share":679,"../internal/operators/shareReplay":680,"../internal/operators/single":681,"../internal/operators/skip":682,"../internal/operators/skipLast":683,"../internal/operators/skipUntil":684,"../internal/operators/skipWhile":685,"../internal/operators/startWith":686,"../internal/operators/subscribeOn":687,"../internal/operators/switchAll":688,"../internal/operators/switchMap":689,"../internal/operators/switchMapTo":690,"../internal/operators/switchScan":691,"../internal/operators/take":692,"../internal/operators/takeLast":693,"../internal/operators/takeUntil":694,"../internal/operators/takeWhile":695,"../internal/operators/tap":696,"../internal/operators/throttle":697,"../internal/operators/throttleTime":698,"../internal/operators/throwIfEmpty":699,"../internal/operators/timeInterval":700,"../internal/operators/timeout":701,"../internal/operators/timeoutWith":702,"../internal/operators/timestamp":703,"../internal/operators/toArray":704,"../internal/operators/window":705,"../internal/operators/windowCount":706,"../internal/operators/windowTime":707,"../internal/operators/windowToggle":708,"../internal/operators/windowWhen":709,"../internal/operators/withLatestFrom":710,"../internal/operators/zip":711,"../internal/operators/zipAll":712,"../internal/operators/zipWith":713}],778:[function(e,t,r){"use strict";var n=e("get-intrinsic"),a=e("define-data-property"),s=e("has-property-descriptors")(),u=e("gopd"),c=n("%TypeError%"),l=n("%Math.floor%");t.exports=function(e,t){if("function"!=typeof e)throw new c("`fn` is not a function");if("number"!=typeof t||t<0||4294967295<t||l(t)!==t)throw new c("`length` must be a positive 32-bit integer");var r,n=2<arguments.length&&!!arguments[2],i=!0,o=!0;return"length"in e&&u&&((r=u(e,"length"))&&!r.configurable&&(i=!1),r)&&!r.writable&&(o=!1),!i&&!o&&n||(s?a(e,"length",t,!0,!0):a(e,"length",t)),e}},{"define-data-property":113,"get-intrinsic":129,gopd:130,"has-property-descriptors":131}],779:[function(e,t,r){"use strict";var n=e("define-data-property"),i=e("has-property-descriptors")(),o=e("functions-have-names").functionsHaveConfigurableNames(),a=TypeError;t.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");return 2<arguments.length&&!!arguments[2]&&!o||(i?n(e,"name",t,!0,!0):n(e,"name",t)),e}},{"define-data-property":113,"functions-have-names":126,"has-property-descriptors":131}],780:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addBrowser=function(e){{var t;"function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?(t=self.close.bind(self),self.close=function(){return e(),t()}):"function"==typeof window.addEventListener&&(window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0))}}},{}],781:[function(s,e,u){!function(a){!function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.add=function(e){if(i||(i=!0,r(o)),"function"!=typeof e)throw new Error("Listener is no function");return n.add(e),{remove:function(){return n.delete(e)},run:function(){return n.delete(e),e()}}},u.getSize=function(){return n.size},u.removeAll=function(){n.clear()},u.runAll=o;var e=s("./browser.js"),t=s("./node.js"),r="[object process]"===Object.prototype.toString.call(void 0!==a?a:0)?t.addNode:e.addBrowser,n=new Set,i=!1;function o(){var t=[];return n.forEach(function(e){t.push(e()),n.delete(e)}),Promise.all(t)}}.call(this)}.call(this,s("_process"))},{"./browser.js":780,"./node.js":782,_process:930}],782:[function(e,t,n){!function(r){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addNode=function(t){r.on("exit",function(){return t()}),r.on("beforeExit",function(){return t().then(function(){return r.exit()})}),r.on("SIGINT",function(){return t().then(function(){return r.exit()})}),r.on("uncaughtException",function(e){return t().then(function(){console.trace(e),r.exit(101)})})}}.call(this)}.call(this,e("_process"))},{_process:930}],783:[function(e,t,r){var n,i;n=this,i=function(e){"use strict";function E(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1<t.length){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function x(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function p(e){return e.toUpperCase()}function t(e){var t="[A-Za-z]",r="[0-9]",n=E(r,"[A-Fa-f]"),i=x(x("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+x("%[89A-Fa-f]"+n+"%"+n+n)+"|"+x("%"+n+n)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=E("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",e=E(t,r,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=x(t+E(t,r,"[\\+\\-\\.]")+"*"),c=x(x(i+"|"+E(e,o,"[\\:]"))+"*"),l="(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9][0-9])|(?:0?[1-9][0-9])|0?0?[0-9])",l=x(l+"\\."+l+"\\."+l+"\\."+l),d=x(n+"{1,4}"),f=x(x(d+"\\:"+d)+"|"+l),p=x(x(d+"\\:")+"{6}"+f),h=x("\\:\\:"+x(d+"\\:")+"{5}"+f),m=x(x(d)+"?\\:\\:"+x(d+"\\:")+"{4}"+f),y=x(x(x(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+x(d+"\\:")+"{3}"+f),b=x(x(x(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+x(d+"\\:")+"{2}"+f),v=x(x(x(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+f),f=x(x(x(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+f),g=x(x(x(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),d=x(x(x(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),p=x([p,h,m,y,b,v,f,g,d].join("|")),h=x(x(e+"|"+i)+"+"),m=x(p+x("\\%25|\\%(?!"+n+"{2})")+h),y=x("[vV]"+n+"+\\."+E(e,o,"[\\:]")+"+"),b=x("\\["+x(m+"|"+p+"|"+y)+"\\]"),v=x(x(i+"|"+E(e,o))+"*"),f=x(b+"|"+l+"(?!"+v+")|"+v),g="(?:[0-9]*)",d=x(x(c+"@")+"?"+f+x("\\:"+g)+"?"),m=x(i+"|"+E(e,o,"[\\:\\@]")),y=x(m+"*"),b=x(m+"+"),v=x(x(i+"|"+E(e,o,"[\\@]"))+"+"),y=x(x("\\/"+y)+"*"),_=x("\\/"+x(b+y)+"?"),v=x(v+y),b=x(b+y),w="(?!"+m+")",O=x(x(m+"|"+E("[\\/\\?]",s))+"*"),m=x(x(m+"|[\\/\\?]")+"*"),S=x(x("\\/\\/"+d+y)+"|"+_+"|"+b+"|"+w),d=(x(u+"\\:"+S+x("\\?"+O)+"?"+x("\\#"+m)+"?"),x(x("\\/\\/"+d+y)+"|"+_+"|"+v+"|"+w));x(d+x("\\?"+O)+"?"+x("\\#"+m)+"?");x(u+"\\:"+S+x("\\?"+O)+"?"),x(x("\\/\\/("+x("("+c+")@")+"?("+f+")"+x("\\:("+g+")")+"?)")+"?("+y+"|"+_+"|"+b+"|"+w+")"),x(x("\\/\\/("+x("("+c+")@")+"?("+f+")"+x("\\:("+g+")")+"?)")+"?("+y+"|"+_+"|"+v+"|"+w+")"),x(x("\\/\\/("+x("("+c+")@")+"?("+f+")"+x("\\:("+g+")")+"?)")+"?("+y+"|"+_+"|"+b+"|"+w+")");return{NOT_SCHEME:new RegExp(E("[^]",t,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(E("[^\\%\\:]",e,o),"g"),NOT_HOST:new RegExp(E("[^\\%\\[\\]\\:]",e,o),"g"),NOT_PATH:new RegExp(E("[^\\%\\/\\:\\@]",e,o),"g"),NOT_PATH_NOSCHEME:new RegExp(E("[^\\%\\/\\@]",e,o),"g"),NOT_QUERY:new RegExp(E("[^\\%]",e,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(E("[^\\%]",e,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(E("[^]",e,o),"g"),UNRESERVED:new RegExp(e,"g"),OTHER_CHARS:new RegExp(E("[^\\%]",e,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+l+")$"),IPV6ADDRESS:new RegExp("^\\[?("+p+")"+x(x("\\%25|\\%(?!"+n+"{2})")+"("+h+")")+"?\\]?$")}}var s=t(!1),u=t(!0),d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=t,n=[],i=!0,t=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!r||n.length!==r);i=!0);}catch(e){t=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(t)throw o}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},R=2147483647,C=36,k=26,A=38,M=700,I=/^xn--/,F=/[^\0-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},i=C-1,$=Math.floor,D=String.fromCharCode;function T(e){throw new RangeError(U[e])}function r(e,t){var r=e.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",e=r[1]),(e=e.replace(B,".")).split("."));return n+function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}(r,t).join(".")}function z(e){for(var t=[],r=0,n=e.length;r<n;){var i,o=e.charCodeAt(r++);55296<=o&&o<=56319&&r<n?56320==(64512&(i=e.charCodeAt(r++)))?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--):t.push(o)}return t}function N(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function L(e,t,r){var n=0;for(e=r?$(e/M):e>>1,e+=$(e/t);i*k>>1<e;n+=C)e=$(e/i);return $(n+(i+1)*e/(e+A))}function W(e){var t=[],r=e.length,n=0,i=128,o=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var s=0;s<a;++s)128<=e.charCodeAt(s)&&T("not-basic"),t.push(e.charCodeAt(s));for(var u=0<a?a+1:0;u<r;){for(var c=n,l=1,d=C;;d+=C){r<=u&&T("invalid-input");var f=(f=e.charCodeAt(u++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:C,p=((C<=f||f>$((R-n)/l))&&T("overflow"),n+=f*l,d<=o?1:o+k<=d?k:d-o);if(f<p)break;f=C-p;l>$(R/f)&&T("overflow"),l*=f}var h=t.length+1,o=L(n-c,h,0==c);$(n/h)>R-i&&T("overflow"),i+=$(n/h),n%=h,t.splice(n++,0,i)}return String.fromCodePoint.apply(String,t)}function q(e){var t=[],r=(e=z(e)).length,n=128,i=0,o=72,a=!0,s=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var d=c.value;d<128&&t.push(D(d))}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}var f=t.length,p=f;for(f&&t.push("-");p<r;){var h=R,m=!0,y=!1,b=void 0;try{for(var v,g=e[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var _=v.value;n<=_&&_<h&&(h=_)}}catch(e){y=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(y)throw b}}var w=p+1,O=(h-n>$((R-i)/w)&&T("overflow"),i+=(h-n)*w,n=h,!0),y=!1,b=void 0;try{for(var S,E=e[Symbol.iterator]();!(O=(S=E.next()).done);O=!0){var x=S.value;if(x<n&&++i>R&&T("overflow"),x==n){for(var P=i,j=C;;j+=C){var A=j<=o?1:o+k<=j?k:j-o;if(P<A)break;var M=P-A,I=C-A;t.push(D(N(A+M%I,0))),P=$(M/I)}t.push(D(N(P,0))),o=L(i,w,p==f),i=0,++p}}}catch(e){y=!0,b=e}finally{try{!O&&E.return&&E.return()}finally{if(y)throw b}}++i,++n}return t.join("")}var y=function(e){return r(e,function(e){return F.test(e)?"xn--"+q(e):e})},K=function(e){return r(e,function(e){return I.test(e)?W(e.slice(4).toLowerCase()):e})},c={};function h(e){e=e.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function l(e){for(var t="",r=0,n=e.length;r<n;){var i,o,a=parseInt(e.substr(r+1,2),16);a<128?(t+=String.fromCharCode(a),r+=3):194<=a&&a<224?(6<=n-r?(i=parseInt(e.substr(r+4,2),16),t+=String.fromCharCode((31&a)<<6|63&i)):t+=e.substr(r,6),r+=6):224<=a?(9<=n-r?(i=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16),t+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o)):t+=e.substr(r,9),r+=9):(t+=e.substr(r,3),r+=3)}return t}function f(e,r){function t(e){var t=l(e);return t.match(r.UNRESERVED)?t:e}e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,h).replace(r.PCT_ENCODED,p)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,h).replace(r.PCT_ENCODED,p)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,h).replace(r.PCT_ENCODED,p)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,h).replace(r.PCT_ENCODED,p)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,h).replace(r.PCT_ENCODED,p))}function m(e){return e.replace(/^0*(.*)/,"$1")||"0"}function b(e,t){t=e.match(t.IPV4ADDRESS)||[],t=d(t,2)[1];return t?t.split(".").map(m).join("."):e}function V(e,t){var r=e.match(t.IPV6ADDRESS)||[],r=d(r,3),n=r[1],r=r[2];if(n){for(var n=n.toLowerCase().split("::").reverse(),n=d(n,2),i=n[0],n=n[1],o=n?n.split(":").map(m):[],a=i.split(":").map(m),n=t.IPV4ADDRESS.test(a[a.length-1]),s=n?7:8,u=a.length-s,c=Array(s),l=0;l<s;++l)c[l]=o[l]||a[u+l]||"";n&&(c[s-1]=b(c[s-1],t));var i=c.reduce(function(e,t,r){return t&&"0"!==t||((t=e[e.length-1])&&t.index+t.length===r?t.length++:e.push({index:r,length:1})),e},[]).sort(function(e,t){return t.length-e.length})[0],n=void 0;return n=i&&1<i.length?(t=c.slice(0,i.index),i=c.slice(i.index+i.length),t.join(":")+"::"+i.join(":")):c.join(":"),r&&(n+="%"+r),n}return e}var H=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,G=void 0==="".match(/(){0}/)[1];function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?u:s,i=(e="suffix"===t.reference?(t.scheme?t.scheme+":":"")+"//"+e:e).match(H);if(i){G?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=V(b(r.host,n),n)),r.reference=void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?"relative":void 0===r.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");e=c[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||e&&e.unicodeSupport)f(r,n);else{if(r.host&&(t.domainHost||e&&e.domainHost))try{r.host=y(r.host.replace(n.PCT_ENCODED,l).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}f(r,s)}e&&e.parse&&e.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var Z=/^\.\.?\//,Y=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,J=/^\/?(?:.|\n)*?(?=\/|$)/;function v(e){for(var t=[];e.length;)if(e.match(Z))e=e.replace(Z,"");else if(e.match(Y))e=e.replace(Y,"/");else if(e.match(Q))e=e.replace(Q,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(J);if(!r)throw new Error("Unexpected dot segment condition");r=r[0];e=e.slice(r.length),t.push(r)}return t.join("")}function a(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=r.iri?u:s,n=[],i=c[(r.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,r),t.host&&!e.IPV6ADDRESS.test(t.host)&&(r.domainHost||i&&i.domainHost))try{t.host=r.iri?K(t.host):y(t.host.replace(e.PCT_ENCODED,l).toLowerCase())}catch(e){t.error=t.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+e}f(t,e),"suffix"!==r.reference&&t.scheme&&(n.push(t.scheme),n.push(":"));e=t,a=!1!==(a=r).iri?u:s,o=[],void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(V(b(String(e.host),a),a).replace(a.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"!=typeof e.port&&"string"!=typeof e.port||(o.push(":"),o.push(String(e.port)));var o,a=o.length?o.join(""):void 0;return void 0!==a&&("suffix"!==r.reference&&n.push("//"),n.push(a),t.path)&&"/"!==t.path.charAt(0)&&n.push("/"),void 0!==t.path&&(e=t.path,r.absolutePath||i&&i.absolutePath||(e=v(e)),void 0===a&&(e=e.replace(/^\/\//,"/%2F")),n.push(e)),void 0!==t.query&&(n.push("?"),n.push(t.query)),void 0!==t.fragment&&(n.push("#"),n.push(t.fragment)),n.join("")}function X(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=o(a(e,r),r),t=o(a(t,r),r)),!(r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=v(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=v(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=v(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=v(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function g(e,t){return e&&e.toString().replace((t&&t.iri?u:s).PCT_ENCODED,l)}var _={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ee={scheme:"https",domainHost:_.domainHost,parse:_.parse,serialize:_.serialize};function te(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var w={scheme:"ws",domainHost:!0,parse:function(e,t){return e.secure=te(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e,t){var r,n;return e.port!==(te(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName&&(n=e.resourceName.split("?"),r=(n=d(n,2))[0],n=n[1],e.path=r&&"/"!==r?r:void 0,e.query=n,e.resourceName=void 0),e.fragment=void 0,e}},re={scheme:"wss",domainHost:w.domainHost,parse:w.parse,serialize:w.serialize},ne={},O="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",S="[0-9A-Fa-f]",S=(x(x("%[EFef]"+S+"%"+S+S+"%"+S+S)+"|"+x("%[89A-Fa-f]"+S+"%"+S+S)+"|"+x("%"+S+S)),E("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]')),ie=new RegExp(O,"g"),P=new RegExp("(?:(?:%[EFef][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f])|(?:%[89A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f])|(?:%[0-9A-Fa-f][0-9A-Fa-f]))","g"),oe=new RegExp(E("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',S),"g"),ae=new RegExp(E("[^]",O,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ae;function j(e){var t=l(e);return t.match(ie)?t:e}var S={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},a=r.query.split("&"),s=0,u=a.length;s<u;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),d=0,f=l.length;d<f;++d)n.push(l[d]);break;case"subject":r.subject=g(c[1],t);break;case"body":r.body=g(c[1],t);break;default:i=!0,o[g(c[0],t)]=g(c[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var p=0,h=n.length;p<h;++p){var m=n[p].split("@");if(m[0]=g(m[0]),t.unicodeSupport)m[1]=g(m[1],t).toLowerCase();else try{m[1]=y(g(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[p]=m.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var o=0,a=i.length;o<a;++o){var s=String(i[o]),u=s.lastIndexOf("@"),c=s.slice(0,u).replace(P,j).replace(P,p).replace(oe,h),s=s.slice(u+1);try{s=t.iri?K(s):y(g(s,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[o]=c+"@"+s}n.path=i.join(",")}var l,d=e.headers=e.headers||{},f=(e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body),[]);for(l in d)d[l]!==ne[l]&&f.push(l.replace(P,j).replace(P,p).replace(ae,h)+"="+d[l].replace(P,j).replace(P,p).replace(se,h));return f.length&&(n.query=f.join("&")),n}},ue=/^([^\:]+)\:(.*)/,O={scheme:"urn",parse:function(e,t){var r,n,i=e.path&&e.path.match(ue);return i?(n=t.scheme||e.scheme||"urn",r=i[1].toLowerCase(),i=i[2],n=n+":"+(t.nid||r),n=c[n],e.nid=r,e.nss=i,e.path=void 0,n&&(e=n.parse(e,t))):e.error=e.error||"URN can not be parsed.",e},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,r=r+":"+(t.nid||n),r=c[r],r=e=r?r.serialize(e,t):e,e=e.nss;return r.path=(n||t.nid)+":"+e,r}},ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,le={scheme:"urn:uuid",parse:function(e,t){return e.uuid=e.nss,e.nss=void 0,t.tolerant||e.uuid&&e.uuid.match(ce)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};c[_.scheme]=_,c[ee.scheme]=ee,c[w.scheme]=w,c[re.scheme]=re,c[S.scheme]=S,c[O.scheme]=O,c[le.scheme]=le,e.SCHEMES=c,e.pctEncChar=h,e.pctDecChars=l,e.parse=o,e.removeDotSegments=v,e.serialize=a,e.resolveComponents=X,e.resolve=function(e,t,r){return r=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r),a(X(o(e,r),o(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=a(o(e,t),t):"object"===n(e)&&(e=o(a(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=a(o(e,r),r):"object"===n(e)&&(e=a(e,r)),"string"==typeof t?t=a(o(t,r),r):"object"===n(t)&&(t=a(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace((t&&t.iri?u:s).ESCAPE,h)},e.unescapeComponent=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i(n.URI=n.URI||{})},{}],784:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=D(e("./lib/toDate")),i=D(e("./lib/toFloat")),o=D(e("./lib/toInt")),s=D(e("./lib/toBoolean")),u=D(e("./lib/equals")),c=D(e("./lib/contains")),l=D(e("./lib/matches")),d=D(e("./lib/isEmail")),f=D(e("./lib/isURL")),p=D(e("./lib/isMACAddress")),h=D(e("./lib/isIP")),m=D(e("./lib/isIPRange")),y=D(e("./lib/isFQDN")),b=D(e("./lib/isDate")),v=D(e("./lib/isTime")),g=D(e("./lib/isBoolean")),_=D(e("./lib/isLocale")),w=$(e("./lib/isAlpha")),O=$(e("./lib/isAlphanumeric")),S=D(e("./lib/isNumeric")),E=D(e("./lib/isPassportNumber")),x=D(e("./lib/isPort")),P=D(e("./lib/isLowercase")),j=D(e("./lib/isUppercase")),T=D(e("./lib/isIMEI")),N=D(e("./lib/isAscii")),L=D(e("./lib/isFullWidth")),F=D(e("./lib/isHalfWidth")),B=D(e("./lib/isVariableWidth")),U=D(e("./lib/isMultibyte")),z=D(e("./lib/isSemVer")),W=D(e("./lib/isSurrogatePair")),q=D(e("./lib/isInt")),A=$(e("./lib/isFloat")),K=D(e("./lib/isDecimal")),V=D(e("./lib/isHexadecimal")),H=D(e("./lib/isOctal")),G=D(e("./lib/isDivisibleBy")),Z=D(e("./lib/isHexColor")),Y=D(e("./lib/isRgbColor")),Q=D(e("./lib/isHSL")),J=D(e("./lib/isISRC")),M=$(e("./lib/isIBAN")),X=D(e("./lib/isBIC")),ee=D(e("./lib/isMD5")),te=D(e("./lib/isHash")),re=D(e("./lib/isJWT")),ne=D(e("./lib/isJSON")),ie=D(e("./lib/isEmpty")),oe=D(e("./lib/isLength")),ae=D(e("./lib/isByteLength")),se=D(e("./lib/isUUID")),ue=D(e("./lib/isMongoId")),ce=D(e("./lib/isAfter")),le=D(e("./lib/isBefore")),de=D(e("./lib/isIn")),fe=D(e("./lib/isLuhnNumber")),pe=D(e("./lib/isCreditCard")),he=D(e("./lib/isIdentityCard")),me=D(e("./lib/isEAN")),ye=D(e("./lib/isISIN")),be=D(e("./lib/isISBN")),ve=D(e("./lib/isISSN")),ge=D(e("./lib/isTaxID")),I=$(e("./lib/isMobilePhone")),_e=D(e("./lib/isEthereumAddress")),we=D(e("./lib/isCurrency")),Oe=D(e("./lib/isBtcAddress")),R=e("./lib/isISO6346"),Se=D(e("./lib/isISO6391")),Ee=D(e("./lib/isISO8601")),xe=D(e("./lib/isRFC3339")),Pe=D(e("./lib/isISO31661Alpha2")),je=D(e("./lib/isISO31661Alpha3")),Ae=D(e("./lib/isISO4217")),Me=D(e("./lib/isBase32")),Ie=D(e("./lib/isBase58")),Re=D(e("./lib/isBase64")),Ce=D(e("./lib/isDataURI")),ke=D(e("./lib/isMagnetURI")),$e=D(e("./lib/isMailtoURI")),De=D(e("./lib/isMimeType")),Te=D(e("./lib/isLatLong")),C=$(e("./lib/isPostalCode")),Ne=D(e("./lib/ltrim")),Le=D(e("./lib/rtrim")),Fe=D(e("./lib/trim")),Be=D(e("./lib/escape")),Ue=D(e("./lib/unescape")),ze=D(e("./lib/stripLow")),We=D(e("./lib/whitelist")),qe=D(e("./lib/blacklist")),Ke=D(e("./lib/isWhitelisted")),Ve=D(e("./lib/normalizeEmail")),He=D(e("./lib/isSlug")),Ge=D(e("./lib/isLicensePlate")),Ze=D(e("./lib/isStrongPassword")),e=D(e("./lib/isVAT"));function k(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,k=function(){return e},e)}function $(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=k();if(t&&t.has(e))return t.get(e);var r,n,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}function D(e){return e&&e.__esModule?e:{default:e}}n={version:"13.11.0",toDate:n.default,toFloat:i.default,toInt:o.default,toBoolean:s.default,equals:u.default,contains:c.default,matches:l.default,isEmail:d.default,isURL:f.default,isMACAddress:p.default,isIP:h.default,isIPRange:m.default,isFQDN:y.default,isBoolean:g.default,isIBAN:M.default,isBIC:X.default,isAlpha:w.default,isAlphaLocales:w.locales,isAlphanumeric:O.default,isAlphanumericLocales:O.locales,isNumeric:S.default,isPassportNumber:E.default,isPort:x.default,isLowercase:P.default,isUppercase:j.default,isAscii:N.default,isFullWidth:L.default,isHalfWidth:F.default,isVariableWidth:B.default,isMultibyte:U.default,isSemVer:z.default,isSurrogatePair:W.default,isInt:q.default,isIMEI:T.default,isFloat:A.default,isFloatLocales:A.locales,isDecimal:K.default,isHexadecimal:V.default,isOctal:H.default,isDivisibleBy:G.default,isHexColor:Z.default,isRgbColor:Y.default,isHSL:Q.default,isISRC:J.default,isMD5:ee.default,isHash:te.default,isJWT:re.default,isJSON:ne.default,isEmpty:ie.default,isLength:oe.default,isLocale:_.default,isByteLength:ae.default,isUUID:se.default,isMongoId:ue.default,isAfter:ce.default,isBefore:le.default,isIn:de.default,isLuhnNumber:fe.default,isCreditCard:pe.default,isIdentityCard:he.default,isEAN:me.default,isISIN:ye.default,isISBN:be.default,isISSN:ve.default,isMobilePhone:I.default,isMobilePhoneLocales:I.locales,isPostalCode:C.default,isPostalCodeLocales:C.locales,isEthereumAddress:_e.default,isCurrency:we.default,isBtcAddress:Oe.default,isISO6346:R.isISO6346,isFreightContainerID:R.isFreightContainerID,isISO6391:Se.default,isISO8601:Ee.default,isRFC3339:xe.default,isISO31661Alpha2:Pe.default,isISO31661Alpha3:je.default,isISO4217:Ae.default,isBase32:Me.default,isBase58:Ie.default,isBase64:Re.default,isDataURI:Ce.default,isMagnetURI:ke.default,isMailtoURI:$e.default,isMimeType:De.default,isLatLong:Te.default,ltrim:Ne.default,rtrim:Le.default,trim:Fe.default,escape:Be.default,unescape:Ue.default,stripLow:ze.default,whitelist:We.default,blacklist:qe.default,isWhitelisted:Ke.default,normalizeEmail:Ve.default,toString:toString,isSlug:He.default,isStrongPassword:Ze.default,isTaxID:ge.default,isDate:b.default,isTime:v.default,isLicensePlate:Ge.default,isVAT:e.default,ibanLocales:M.locales};r.default=n,t.exports=r.default,t.exports.default=r.default},{"./lib/blacklist":786,"./lib/contains":787,"./lib/equals":788,"./lib/escape":789,"./lib/isAfter":790,"./lib/isAlpha":791,"./lib/isAlphanumeric":792,"./lib/isAscii":793,"./lib/isBIC":794,"./lib/isBase32":795,"./lib/isBase58":796,"./lib/isBase64":797,"./lib/isBefore":798,"./lib/isBoolean":799,"./lib/isBtcAddress":800,"./lib/isByteLength":801,"./lib/isCreditCard":802,"./lib/isCurrency":803,"./lib/isDataURI":804,"./lib/isDate":805,"./lib/isDecimal":806,"./lib/isDivisibleBy":807,"./lib/isEAN":808,"./lib/isEmail":809,"./lib/isEmpty":810,"./lib/isEthereumAddress":811,"./lib/isFQDN":812,"./lib/isFloat":813,"./lib/isFullWidth":814,"./lib/isHSL":815,"./lib/isHalfWidth":816,"./lib/isHash":817,"./lib/isHexColor":818,"./lib/isHexadecimal":819,"./lib/isIBAN":820,"./lib/isIMEI":821,"./lib/isIP":822,"./lib/isIPRange":823,"./lib/isISBN":824,"./lib/isISIN":825,"./lib/isISO31661Alpha2":826,"./lib/isISO31661Alpha3":827,"./lib/isISO4217":828,"./lib/isISO6346":829,"./lib/isISO6391":830,"./lib/isISO8601":831,"./lib/isISRC":832,"./lib/isISSN":833,"./lib/isIdentityCard":834,"./lib/isIn":835,"./lib/isInt":836,"./lib/isJSON":837,"./lib/isJWT":838,"./lib/isLatLong":839,"./lib/isLength":840,"./lib/isLicensePlate":841,"./lib/isLocale":842,"./lib/isLowercase":843,"./lib/isLuhnNumber":844,"./lib/isMACAddress":845,"./lib/isMD5":846,"./lib/isMagnetURI":847,"./lib/isMailtoURI":848,"./lib/isMimeType":849,"./lib/isMobilePhone":850,"./lib/isMongoId":851,"./lib/isMultibyte":852,"./lib/isNumeric":853,"./lib/isOctal":854,"./lib/isPassportNumber":855,"./lib/isPort":856,"./lib/isPostalCode":857,"./lib/isRFC3339":858,"./lib/isRgbColor":859,"./lib/isSemVer":860,"./lib/isSlug":861,"./lib/isStrongPassword":862,"./lib/isSurrogatePair":863,"./lib/isTaxID":864,"./lib/isTime":865,"./lib/isURL":866,"./lib/isUUID":867,"./lib/isUppercase":868,"./lib/isVAT":869,"./lib/isVariableWidth":870,"./lib/isWhitelisted":871,"./lib/ltrim":872,"./lib/matches":873,"./lib/normalizeEmail":874,"./lib/rtrim":875,"./lib/stripLow":876,"./lib/toBoolean":877,"./lib/toDate":878,"./lib/toFloat":879,"./lib/toInt":880,"./lib/trim":881,"./lib/unescape":882,"./lib/whitelist":889}],785:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.commaDecimal=r.dotDecimal=r.bengaliLocales=r.farsiLocales=r.arabicLocales=r.englishLocales=r.decimal=r.alphanumeric=r.alpha=void 0;var n={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ώ]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fa-IR":/^[ابپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی]+$/i,"fi-FI":/^[A-ZÅÄÖ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"kk-KZ":/^[А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๐\s]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"vi-VN":/^[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,"ko-KR":/^[ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[א-ת]+$/,fa:/^['آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},i=(r.alpha=n,{"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fi-FI":/^[0-9A-ZÅÄÖ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[0-9０-９ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"kk-KZ":/^[0-9А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๙\s]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ko-KR":/^[0-9ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,"vi-VN":/^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[0-9א-ת]+$/,fa:/^['0-9آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی۱۲۳۴۵۶۷۸۹۰']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣ০১২৩৪৫৬৭৮৯ৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/}),o=(r.alphanumeric=i,{"en-US":".",ar:"٫"}),a=(r.decimal=o,["AU","GB","HK","IN","NZ","ZA","ZM"]);r.englishLocales=a;for(var s,u=0;u<a.length;u++)n[s="en-".concat(a[u])]=n["en-US"],i[s]=i["en-US"],o[s]=o["en-US"];var c=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];r.arabicLocales=c;for(var l,d=0;d<c.length;d++)n[l="ar-".concat(c[d])]=n.ar,i[l]=i.ar,o[l]=o.ar;var f=["IR","AF"];r.farsiLocales=f;for(var p,h=0;h<f.length;h++)i[p="fa-".concat(f[h])]=i.fa,o[p]=o.ar;var m=["BD","IN"];r.bengaliLocales=m;for(var y,b=0;b<m.length;b++)n[y="bn-".concat(m[b])]=n.bn,i[y]=i.bn,o[y]=o["en-US"];var v=["ar-EG","ar-LB","ar-LY"],g=(r.dotDecimal=v,["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"]);r.commaDecimal=g;for(var _=0;_<v.length;_++)o[v[_]]=o["en-US"];for(var w=0;w<g.length;w++)o[g[w]]=",";n["fr-CA"]=n["fr-FR"],i["fr-CA"]=i["fr-FR"],n["pt-BR"]=n["pt-PT"],i["pt-BR"]=i["pt-PT"],o["pt-BR"]=o["pt-PT"],n["pl-Pl"]=n["pl-PL"],i["pl-Pl"]=i["pl-PL"],o["pl-Pl"]=o["pl-PL"],n["fa-AF"]=n.fa},{}],786:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],787:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){if((0,n.default)(e),(r=(0,o.default)(r,s)).ignoreCase)return e.toLowerCase().split((0,i.default)(t).toLowerCase()).length>r.minOccurrences;return e.split((0,i.default)(t)).length>r.minOccurrences};var n=a(e("./util/assertString")),i=a(e("./util/toString")),o=a(e("./util/merge"));function a(e){return e&&e.__esModule?e:{default:e}}var s={ignoreCase:!1,minOccurrences:1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886,"./util/toString":888}],788:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),e===t};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],789:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],790:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){t=(null==t?void 0:t.comparisonDate)||t||Date().toString(),t=(0,n.default)(t),e=(0,n.default)(e);return!!(e&&t&&t<e)};var n=(e=e("./toDate"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./toDate":878}],791:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"en-US",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=((0,n.default)(e),r.ignore);if(r)if(r instanceof RegExp)e=e.replace(r,"");else{if("string"!=typeof r)throw new Error("ignore should be instance of a String or RegExp");e=e.replace(new RegExp("[".concat(r.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(t in i.alpha)return i.alpha[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},r.locales=void 0;var n=(o=e("./util/assertString"))&&o.__esModule?o:{default:o},i=e("./alpha");var o=Object.keys(i.alpha);r.locales=o},{"./alpha":785,"./util/assertString":884}],792:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"en-US",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=((0,n.default)(e),r.ignore);if(r)if(r instanceof RegExp)e=e.replace(r,"");else{if("string"!=typeof r)throw new Error("ignore should be instance of a String or RegExp");e=e.replace(new RegExp("[".concat(r.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(t in i.alphanumeric)return i.alphanumeric[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},r.locales=void 0;var n=(o=e("./util/assertString"))&&o.__esModule?o:{default:o},i=e("./alpha");var o=Object.keys(i.alphanumeric);r.locales=o},{"./alpha":785,"./util/assertString":884}],793:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^[\x00-\x7F]+$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],794:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,i.default)(e);var t=e.slice(4,6).toUpperCase();return!(!o.CountryCodes.has(t)&&"XK"!==t)&&a.test(e)};var n,i=(n=e("./util/assertString"))&&n.__esModule?n:{default:n},o=e("./isISO31661Alpha2");var a=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;t.exports=r.default,t.exports.default=r.default},{"./isISO31661Alpha2":826,"./util/assertString":884}],795:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,n.default)(e),(t=(0,i.default)(t,u)).crockford)return s.test(e);if(e.length%8==0&&a.test(e))return!0;return!1};var n=o(e("./util/assertString")),i=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^[A-Z2-7]+=*$/,s=/^[A-HJKMNP-TV-Z0-9]+$/,u={crockford:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],796:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.default)(e),i.test(e))return!0;return!1};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^[A-HJ-NP-Za-km-z1-9]*$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],797:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e),t=(0,i.default)(t,u);var r=e.length;if(t.urlSafe)return s.test(e);if(r%4!=0||a.test(e))return!1;t=e.indexOf("=");return-1===t||t===r-1||t===r-2&&"="===e[r-1]};var n=o(e("./util/assertString")),i=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var a=/[^A-Z0-9+\/=]/i,s=/^[A-Z0-9_\-]*$/i,u={urlSafe:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],798:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:String(new Date),t=((0,n.default)(e),(0,i.default)(t)),e=(0,i.default)(e);return!!(e&&t&&e<t)};var n=o(e("./util/assertString")),i=o(e("./toDate"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./toDate":878,"./util/assertString":884}],799:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i;if((0,n.default)(e),t.loose)return a.includes(e.toLowerCase());return o.includes(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={loose:!1},o=["true","false","1","0"],a=[].concat(o,["yes","no"]);t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],800:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)||o.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(bc1)[a-z0-9]{25,39}$/,o=/^(1|3)[A-HJ-NP-Za-km-z1-9]{25,39}$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],801:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r;(0,n.default)(e),t="object"===i(t)?(r=t.min||0,t.max):(r=arguments[1],arguments[2]);e=encodeURI(e).split(/%..|./).length-1;return r<=e&&(void 0===t||e<=t)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],802:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=((0,n.default)(e),t.provider),r=e.replace(/[- ]+/g,"");if(t&&t.toLowerCase()in a){if(!a[t.toLowerCase()].test(r))return!1}else{if(t&&!(t.toLowerCase()in a))throw new Error("".concat(t," is not a valid credit card provider."));if(!s.some(function(e){return e.test(r)}))return!1}return(0,i.default)(e)};var n=o(e("./util/assertString")),i=o(e("./isLuhnNumber"));function o(e){return e&&e.__esModule?e:{default:e}}var a={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},s=function(){var e,t=[];for(e in a)a.hasOwnProperty(e)&&t.push(a[e]);return t}();t.exports=r.default,t.exports.default=r.default},{"./isLuhnNumber":844,"./util/assertString":884}],803:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,i.default)(e),function(e){var r="\\d{".concat(e.digits_after_decimal[0],"}"),t=(e.digits_after_decimal.forEach(function(e,t){0!==t&&(r="".concat(r,"|\\d{").concat(e,"}"))}),"(".concat(e.symbol.replace(/\W/,function(e){return"\\".concat(e)}),")").concat(e.require_symbol?"":"?")),n="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),n=["0","[1-9]\\d*",n],n="(".concat(n.join("|"),")?"),i="(\\".concat(e.decimal_separator,"(").concat(r,"))").concat(e.require_decimal?"":"?"),n=n+(e.allow_decimal||e.require_decimal?i:"");e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?n+="-?":e.negative_sign_before_digits&&(n="-?"+n));e.allow_negative_sign_placeholder?n="( (?!\\-))?".concat(n):e.allow_space_after_symbol?n=" ?".concat(n):e.allow_space_after_digits&&(n+="( (?!$))?");e.symbol_after_digits?n+=t:n=t+n;e.allow_negatives&&(e.parens_for_negatives?n="(\\(".concat(n,"\\)|").concat(n,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(n="-?"+n));return new RegExp("^(?!-? )(?=.*\\d)".concat(n,"$"))}(t=(0,n.default)(t,a)).test(e)};var n=o(e("./util/merge")),i=o(e("./util/assertString"));function o(e){return e&&e.__esModule?e:{default:e}}var a={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],804:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,o.default)(e);var t=e.split(",");if(t.length<2)return!1;var r=t.shift().trim().split(";"),e=r.shift();if("data:"!==e.slice(0,5))return!1;e=e.slice(5);if(""!==e&&!a.test(e))return!1;for(var n=0;n<r.length;n++)if((n!==r.length-1||"base64"!==r[n].toLowerCase())&&!s.test(r[n]))return!1;for(var i=0;i<t.length;i++)if(!u.test(t[i]))return!1;return!0};var o=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var a=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,s=/^[a-z\-]+=[a-z0-9\-]+$/i,u=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],805:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r){r="string"==typeof r?(0,d.default)({format:r},p):(0,d.default)(r,p);if("string"==typeof t&&/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(r.format)){var e,n=r.delimiters.find(function(e){return-1!==r.format.indexOf(e)}),i=r.strictMode?n:r.delimiters.find(function(e){return-1!==t.indexOf(e)}),i=function(e,t){for(var r=[],n=Math.min(e.length,t.length),i=0;i<n;i++)r.push([e[i],t[i]]);return r}(t.split(i),r.format.toLowerCase().split(n)),o={},a=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){var n;if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(i);try{for(a.s();!(e=a.n()).done;){var s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.value,2),u=s[0],c=s[1];if(u.length!==c.length)return!1;o[c.charAt(0)]=u}}catch(e){a.e(e)}finally{a.f()}n=o.y;if(2===o.y.length){i=parseInt(o.y,10);if(isNaN(i))return!1;var l=(new Date).getFullYear()%100;n=(i<l?"20":"19").concat(o.y)}return new Date("".concat(n,"-").concat(o.m,"-").concat(o.d)).getDate()===+o.d}return!r.strictMode&&"[object Date]"===Object.prototype.toString.call(t)&&isFinite(t)};var d=(e=e("./util/merge"))&&e.__esModule?e:{default:e};function f(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};t.exports=r.default,t.exports.default=r.default},{"./util/merge":886}],806:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,i.default)(e),(t=(0,n.default)(t,u)).locale in a.decimal)return!(0,o.default)(c,e.replace(/ /g,""))&&function(e){return new RegExp("^[-+]?([0-9]+)?(\\".concat(a.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"))}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var n=s(e("./util/merge")),i=s(e("./util/assertString")),o=s(e("./util/includes")),a=e("./alpha");function s(e){return e&&e.__esModule?e:{default:e}}var u={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},c=["","-","+"];t.exports=r.default,t.exports.default=r.default},{"./alpha":785,"./util/assertString":884,"./util/includes":885,"./util/merge":886}],807:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),(0,i.default)(e)%parseInt(t,10)==0};var n=o(e("./util/assertString")),i=o(e("./toFloat"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./toFloat":879,"./util/assertString":884}],808:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.default)(e);var t=Number(e.slice(-1));return a.test(e)&&t===function(r){var e=10-r.slice(0,-1).split("").map(function(e,t){return Number(e)*(e=r.length,t=t,e!==i&&e!==o?t%2==0?1:3:t%2==0?3:1)}).reduce(function(e,t){return e+t},0)%10;return e<10?e:0}(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=8,o=14,a=/^(\d{8}|\d{13}|\d{14})$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],809:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,c.default)(e),(t=(0,p.default)(t,h)).require_display_name||t.allow_display_name){var r=e.match(m);if(r){r=r[1];if(e=e.replace(r,"").replace(/(^<|>$)/g,""),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return;if(/[\.";<>]/.test(t)){if(t===e)return;if(!(t.split('"').length===t.split('\\"').length))return}return 1}(r=r.endsWith(" ")?r.slice(0,-1):r))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>w)return!1;var r=e.split("@"),e=r.pop(),n=e.toLowerCase();if(t.host_blacklist.includes(n))return!1;if(0<t.host_whitelist.length&&!t.host_whitelist.includes(n))return!1;r=r.join("@");if(t.domain_specific_validation&&("gmail.com"===n||"googlemail.com"===n)){n=(r=r.toLowerCase()).split("+")[0];if(!(0,l.default)(n.replace(/\./g,""),{min:6,max:30}))return!1;for(var i=n.split("."),o=0;o<i.length;o++)if(!b.test(i[o]))return!1}if(!(!1!==t.ignore_max_length||(0,l.default)(r,{max:64})&&(0,l.default)(e,{max:254})))return!1;if(!(0,d.default)(e,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,f.default)(e)){if(!e.startsWith("[")||!e.endsWith("]"))return!1;n=e.slice(1,-1);if(0===n.length||!(0,f.default)(n))return!1}}if('"'===r[0])return r=r.slice(1,r.length-1),(t.allow_utf8_local_part?_:v).test(r);for(var a=t.allow_utf8_local_part?g:y,s=r.split("."),u=0;u<s.length;u++)if(!a.test(s[u]))return!1;if(t.blacklisted_chars&&-1!==r.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var c=n(e("./util/assertString")),l=n(e("./isByteLength")),d=n(e("./isFQDN")),f=n(e("./isIP")),p=n(e("./util/merge"));function n(e){return e&&e.__esModule?e:{default:e}}var h={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},m=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,y=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,b=/^[a-z\d]+$/,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,g=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,_=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,w=254;t.exports=r.default,t.exports.default=r.default},{"./isByteLength":801,"./isFQDN":812,"./isIP":822,"./util/assertString":884,"./util/merge":886}],810:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),0===((t=(0,i.default)(t,a)).ignore_whitespace?e.trim():e).length};var n=o(e("./util/assertString")),i=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var a={ignore_whitespace:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],811:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(0x)[0-9a-f]{40}$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],812:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e),(t=(0,i.default)(t,a)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var e=e.split("."),r=e[e.length-1];if(t.require_tld){if(e.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1;if(/\s/.test(r))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(r))&&e.every(function(e){return!(63<e.length&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))})};var n=o(e("./util/assertString")),i=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],813:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,i.default)(e),t=t||{};var r=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?o.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||","===e||"-"===e||"+"===e)return!1;var n=parseFloat(e.replace(",","."));return r.test(e)&&(!t.hasOwnProperty("min")||n>=t.min)&&(!t.hasOwnProperty("max")||n<=t.max)&&(!t.hasOwnProperty("lt")||n<t.lt)&&(!t.hasOwnProperty("gt")||n>t.gt)},r.locales=void 0;var i=(n=e("./util/assertString"))&&n.__esModule?n:{default:n},o=e("./alpha");var n=Object.keys(o.decimal);r.locales=n},{"./alpha":785,"./util/assertString":884}],814:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)},r.fullWidth=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;r.fullWidth=i},{"./util/assertString":884}],815:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.default)(e);e=e.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/gi,"$1");return(-1===e.indexOf(",")?o:i).test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,o=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],816:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)},r.halfWidth=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;r.halfWidth=i},{"./util/assertString":884}],817:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),new RegExp("^[a-fA-F0-9]{".concat(i[t],"}$")).test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],818:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],819:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(0x|0h)?[0-9A-F]+$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],820:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,n.default)(e),function(e,t){var e=e.replace(/[\s\-]+/gi,"").toUpperCase(),r=e.slice(0,2).toUpperCase(),n=r in i;if(t.whitelist){if(!function(e){if(0<e.filter(function(e){return!(e in i)}).length)return;return 1}(t.whitelist))return!1;if(!t.whitelist.includes(r))return!1}if(t.blacklist)if(t.blacklist.includes(r))return!1;return n&&i[r].test(e)}(e,t)&&function(e){e=e.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(e.slice(4)+e.slice(0,4)).replace(/[A-Z]/g,function(e){return e.charCodeAt(0)-55}).match(/\d{1,7}/g).reduce(function(e,t){return Number(e+t)%97},"")}(e)},r.locales=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};e=Object.keys(i);r.locales=e},{"./util/assertString":884}],821:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,s.default)(e);var r=u;(t=t||{}).allow_hyphens&&(r=c);if(!r.test(e))return!1;e=e.replace(/-/g,"");for(var n=0,i=2,o=0;o<14;o++){var a=e.substring(14-o-1,14-o),a=parseInt(a,10)*i;n+=10<=a?a%10+1:a,1===i?i+=1:--i}return(10-n%10)%10===parseInt(e.substring(14,15),10)};var s=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var u=/^[0-9]{15}$/,c=/^\d{2}-\d{6}-\d{6}-\d{1}$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],822:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(0,n.default)(t);r=String(r);if(!r)return e(t,4)||e(t,6);if("4"===r)return i.test(t);if("6"===r)return a.test(t);return!1};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var e="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",e="(".concat(e,"[.]){3}").concat(e),i=new RegExp("^".concat(e,"$")),o="(?:[0-9a-fA-F]{1,4})",a=new RegExp("^("+"(?:".concat(o,":){7}(?:").concat(o,"|:)|")+"(?:".concat(o,":){6}(?:").concat(e,"|:").concat(o,"|:)|")+"(?:".concat(o,":){5}(?::").concat(e,"|(:").concat(o,"){1,2}|:)|")+"(?:".concat(o,":){4}(?:(:").concat(o,"){0,1}:").concat(e,"|(:").concat(o,"){1,3}|:)|")+"(?:".concat(o,":){3}(?:(:").concat(o,"){0,2}:").concat(e,"|(:").concat(o,"){1,4}|:)|")+"(?:".concat(o,":){2}(?:(:").concat(o,"){0,3}:").concat(e,"|(:").concat(o,"){1,5}|:)|")+"(?:".concat(o,":){1}(?:(:").concat(o,"){0,4}:").concat(e,"|(:").concat(o,"){1,6}|:)|")+"(?::((?::".concat(o,"){0,5}:").concat(e,"|(?::").concat(o,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],823:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=((0,i.default)(e),e.split("/"));if(2!==r.length)return!1;if(!a.test(r[1]))return!1;if(1<r[1].length&&r[1].startsWith("0"))return!1;if(!(0,o.default)(r[0],t))return!1;var n=null;switch(String(t)){case"4":n=s;break;case"6":n=u;break;default:n=(0,o.default)(r[0],"6")?u:s}return r[1]<=n&&0<=r[1]};var i=n(e("./util/assertString")),o=n(e("./isIP"));function n(e){return e&&e.__esModule?e:{default:e}}var a=/^\d{1,3}$/,s=32,u=128;t.exports=r.default,t.exports.default=r.default},{"./isIP":822,"./util/assertString":884}],824:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(t,r){(0,u.default)(t);var n=String((null==r?void 0:r.version)||r);if(!(null!=r&&r.version||r))return e(t,{version:10})||e(t,{version:13});var i=t.replace(/[\s-]+/g,"");var o=0;if("10"===n){if(!c.test(i))return!1;for(var a=0;a<n-1;a++)o+=(a+1)*i.charAt(a);if("X"===i.charAt(9)?o+=100:o+=10*i.charAt(9),o%11==0)return!0}else if("13"===n){if(!l.test(i))return!1;for(var s=0;s<12;s++)o+=d[s%2]*i.charAt(s);if(i.charAt(12)-(10-o%10)%10==0)return!0}return!1};var u=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var c=/^(?:[0-9]{9}X|[0-9]{10})$/,l=/^(?:[0-9]{13})$/,d=[1,3];t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],825:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,l.default)(e),!d.test(e))return!1;for(var t=!0,r=0,n=e.length-2;0<=n;n--)if("A"<=e[n]&&e[n]<="Z")for(var i=e[n].charCodeAt(0)-55,o=i%10,i=Math.trunc(i/10),a=0,s=[o,i];a<s.length;a++){var u=s[a];r+=t?5<=u?1+2*(u-5):2*u:u,t=!t}else{o=e[n].charCodeAt(0)-"0".charCodeAt(0);r+=t?5<=o?1+2*(o-5):2*o:o,t=!t}var c=10*Math.trunc((r+9)/10)-r;return+e[e.length-1]==c};var l=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var d=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],826:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.has(e.toUpperCase())},r.CountryCodes=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);r.CountryCodes=i},{"./util/assertString":884}],827:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.has(e.toUpperCase())};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],828:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.has(e.toUpperCase())},r.CurrencyCodes=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);r.CurrencyCodes=i},{"./util/assertString":884}],829:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isISO6346=n,r.isFreightContainerID=void 0;var o=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var a=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,s=/^[0-9]$/;function n(e){if((0,o.default)(e),e=e.toUpperCase(),!a.test(e))return!1;if(11!==e.length)return!0;for(var t,r=0,n=0;n<e.length-1;n++)s.test(e[n])?r+=e[n]*Math.pow(2,n):r+=((t=e.charCodeAt(n)-55)<11?t:11<=t&&t<=20?12+t%11:21<=t&&t<=30?23+t%21:34+t%31)*Math.pow(2,n);var i=r%11;return Number(e[e.length-1])===i}r.isFreightContainerID=n},{"./util/assertString":884}],830:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.has(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],831:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=((0,n.default)(e),(t.strictSeparator?o:i).test(e));return r&&t.strict?a(e):r};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,a=function(e){var t,r,n,i=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);return i?(t=Number(i[1]),i=Number(i[2]),t%4==0&&t%100!=0||t%400==0?i<=366:i<=365):(i=(t=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number))[1],e=t[2],t=t[3],n=e&&"0".concat(e).slice(-2),r=t&&"0".concat(t).slice(-2),n=new Date("".concat(i,"-").concat(n||"01","-").concat(r||"01")),!e||!t||n.getUTCFullYear()===i&&n.getUTCMonth()+1===e&&n.getUTCDate()===t)};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],832:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],833:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=((0,s.default)(e),u);if(r=t.require_hyphen?r.replace("?",""):r,!(r=t.case_sensitive?new RegExp(r):new RegExp(r,"i")).test(e))return!1;for(var n=e.replace("-","").toUpperCase(),i=0,o=0;o<n.length;o++){var a=n[o];i+=("X"===a?10:+a)*(8-o)}return i%11==0};var s=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var u="^\\d{4}-?\\d{3}[\\dX]$";t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],834:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){{if((0,i.default)(e),t in a)return a[t](e);if("any"===t){for(var r in a)if(a.hasOwnProperty(r))if((0,a[r])(e))return!0;return!1}}throw new Error("Invalid locale '".concat(t,"'"))};var i=n(e("./util/assertString")),o=n(e("./isInt"));function n(e){return e&&e.__esModule?e:{default:e}}var a={PL:function(e){(0,i.default)(e);var n={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(null!=e&&11===e.length&&(0,o.default)(e,{allow_leading_zeroes:!0})){var t=e.split("").slice(0,-1).reduce(function(e,t,r){return e+Number(t)*n[r+1]},0)%10,e=Number(e.charAt(e.length-1));if(0==t&&0===e||e===10-t)return!0}return!1},ES:function(e){(0,i.default)(e);var t,r={X:0,Y:1,Z:2},e=e.trim().toUpperCase();return!!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(e)&&(t=e.slice(0,-1).replace(/[X,Y,Z]/g,function(e){return r[e]}),e.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][t%23]))},FI:function(e){return(0,i.default)(e),11===e.length&&!!e.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/)&&"0123456789ABCDEFHJKLMNPRSTUVWXY"[(1e3*parseInt(e.slice(0,6),10)+parseInt(e.slice(7,10),10))%31]===e.slice(10,11)},IN:function(e){var r,n=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],i=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],e=e.trim();return!!/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/.test(e)&&(r=0,e.replace(/\s/g,"").split("").map(Number).reverse().forEach(function(e,t){r=n[r][i[t%8][e]]}),0===r)},IR:function(e){if(!e.match(/^\d{10}$/))return!1;if(e="0000".concat(e).slice(e.length-6),0===parseInt(e.slice(3,9),10))return!1;for(var t=parseInt(e.slice(9,10),10),r=0,n=0;n<9;n++)r+=parseInt(e.slice(n,n+1),10)*(10-n);return(r%=11)<2&&t===r||2<=r&&t===11-r},IT:function(e){return 9===e.length&&"CA00000AA"!==e&&-1<e.search(/C[A-Z][0-9]{5}[A-Z]{2}/i)},NO:function(e){var t,r,e=e.trim();return!isNaN(Number(e))&&11===e.length&&"00000000000"!==e&&(t=(11-(3*(e=e.split("").map(Number))[0]+7*e[1]+6*e[2]+ +e[3]+8*e[4]+9*e[5]+4*e[6]+5*e[7]+2*e[8])%11)%11,r=(11-(5*e[0]+4*e[1]+3*e[2]+2*e[3]+7*e[4]+6*e[5]+5*e[6]+4*e[7]+3*e[8]+2*t)%11)%11,t===e[9])&&r===e[10]},TH:function(e){if(!e.match(/^[1-8]\d{12}$/))return!1;for(var t=0,r=0;r<12;r++)t+=parseInt(e[r],10)*(13-r);return e[12]===((11-t%11)%10).toString()},LK:function(e){return!(10!==e.length||!/^[1-9]\d{8}[vx]$/i.test(e))||!(12!==e.length||!/^[1-9]\d{11}$/i.test(e))},"he-IL":function(e){e=e.trim();if(!/^\d{9}$/.test(e))return!1;for(var t,r=e,n=0,i=0;i<r.length;i++)n+=9<(t=Number(r[i])*(i%2+1))?t-9:t;return n%10==0},"ar-LY":function(e){e=e.trim();return!!/^(1|2)\d{11}$/.test(e)},"ar-TN":function(e){e=e.trim();return!!/^\d{8}$/.test(e)},"zh-CN":function(e){var t,r,n=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],i=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],o=["1","0","X","9","8","7","6","5","4","3","2"],a=function(e){return n.includes(e)},s=function(e){var t=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),e=parseInt(e.substring(6),10),n=new Date(t,r-1,e);return!(n>new Date)&&n.getFullYear()===t&&n.getMonth()===r-1&&n.getDate()===e},u=function(e){return function(e){for(var t=e.substring(0,17),r=0,n=0;n<17;n++)r+=parseInt(t.charAt(n),10)*parseInt(i[n],10);return o[r%11]}(e)===e.charAt(17).toUpperCase()};return e=e,!!/^\d{15}|(\d{17}(\d|x|X))$/.test(e)&&(15===e.length?!!/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(t=e)&&(r=t.substring(0,2),!!a(r))&&(r="19".concat(t.substring(6,12)),!!s(r)):!!/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(t=e)&&(r=t.substring(0,2),!!a(r))&&(r=t.substring(6,14),!!s(r))&&u(t))},"zh-HK":function(e){var t=/^[0-9]$/;if(e=(e=e.trim()).toUpperCase(),!/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/.test(e))return!1;8===(e=e.replace(/\[|\]|\(|\)/g,"")).length&&(e="3".concat(e));for(var r=0,n=0;n<=7;n++)r+=(t.test(e[n])?e[n]:(e[n].charCodeAt(0)-55)%11)*(9-n);return(0===(r%=11)?"0":1===r?"A":String(11-r))===e[e.length-1]},"zh-TW":function(e){var i={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},e=e.trim().toUpperCase();return!!/^[A-Z][0-9]{9}$/.test(e)&&Array.from(e).reduce(function(e,t,r){var n;return 0===r?(n=i[t])%10*9+Math.floor(n/10):9===r?(10-e%10-Number(t))%10==0:e+Number(t)*(9-r)},0)}};t.exports=r.default,t.exports.default=r.default},{"./isInt":836,"./util/assertString":884}],835:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){{if((0,i.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var r=[];for(var n in t)!{}.hasOwnProperty.call(t,n)||(r[n]=(0,o.default)(t[n]));return 0<=r.indexOf(e)}if("object"===a(t))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return 0<=t.indexOf(e)}return!1};var i=n(e("./util/assertString")),o=n(e("./util/toString"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/toString":888}],836:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,a.default)(e);var r=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?s:u,n=!t.hasOwnProperty("min")||e>=t.min,i=!t.hasOwnProperty("max")||e<=t.max,o=!t.hasOwnProperty("lt")||e<t.lt,t=!t.hasOwnProperty("gt")||e>t.gt;return r.test(e)&&n&&i&&o&&t};var a=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var s=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,u=/^[-+]?[0-9]+$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],837:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,i.default)(e);try{t=(0,o.default)(t,s);var r=[],n=(t.allow_primitives&&(r=[null,!1,!0]),JSON.parse(e));return r.includes(n)||!!n&&"object"===a(n)}catch(e){}return!1};var i=n(e("./util/assertString")),o=n(e("./util/merge"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={allow_primitives:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],838:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.default)(e);e=e.split(".");return 3===e.length&&e.reduce(function(e,t){return e&&(0,i.default)(t,{urlSafe:!0})},!0)};var n=o(e("./util/assertString")),i=o(e("./isBase64"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./isBase64":797,"./util/assertString":884}],839:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,n.default)(e),t=(0,i.default)(t,l),!e.includes(","))return!1;e=e.split(",");if(e[0].startsWith("(")&&!e[1].endsWith(")")||e[1].endsWith(")")&&!e[0].startsWith("("))return!1;if(t.checkDMS)return u.test(e[0])&&c.test(e[1]);return a.test(e[0])&&s.test(e[1])};var n=o(e("./util/assertString")),i=o(e("./util/merge"));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,s=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,u=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,c=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,l={checkDMS:!1};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],840:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r;(0,o.default)(e),t="object"===a(t)?(r=t.min||0,t.max):(r=arguments[1]||0,arguments[2]);var n=e.match(/(\uFE0F|\uFE0E)/g)||[],i=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],e=e.length-n.length-i.length;return r<=e&&(void 0===t||e<=t)};var o=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],841:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){{if((0,n.default)(e),t in i)return i[t](e);if("any"===t){for(var r in i)if((0,i[r])(e))return!0;return!1}}throw new Error("Invalid locale '".concat(t,"'"))};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={"cs-CZ":function(e){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(e)},"de-DE":function(e){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|AÖ|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|BÖ|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|FÜ|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|GÖ|GP|GR|GS|GT|GÜ|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|LÖ|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|MÜ|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|NÖ|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|TÜ|ÜB|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|WÜ|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BÜD|BUL|BÜR|BÜS|BÜZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DÜW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FLÖ|FOR|FRG|FRI|FRW|FTL|FÜS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HMÜ|HOG|HOH|HOL|HOM|HOR|HÖS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JÜL|KEH|KEL|KEM|KIB|KLE|KLZ|KÖN|KÖT|KÖZ|KRU|KÜN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LÖB|LOS|LRO|LSZ|LÜN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MÜB|MÜR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|ÖHR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PLÖ|PRÜ|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RÜD|RÜG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SLÜ|SLZ|SMÜ|SOB|SOG|SOK|SÖM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SÜW|SWA|SZB|TBB|TDO|TET|TIR|TÖL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WÜM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(e)},"de-LI":function(e){return/^FL[- ]?\d{1,5}[UZ]?$/.test(e)},"en-IN":function(e){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(e)},"es-AR":function(e){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(e)},"fi-FI":function(e){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(e)},"hu-HU":function(e){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(e)},"pt-BR":function(e){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(e)},"pt-PT":function(e){return/^([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})$/.test(e)},"sq-AL":function(e){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(e)},"sv-SE":function(e){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-ZÅÄÖ ]{2,7}$)/.test(e.trim())}};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],842:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),u.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var e="(([a-zA-Z]{2,3}(-".concat("([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",")?)|([a-zA-Z]{5,8}))"),i="(".concat("(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])","(-[A-Za-z0-9]{2,8})+)"),o="(x(-[A-Za-z0-9]{1,8})+)",a="(".concat("((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))","|").concat("((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",")"),s="(-|_)",e="".concat(e,"(").concat(s).concat("([A-Za-z]{4})",")?(").concat(s).concat("([A-Za-z]{2}|\\d{3})",")?(").concat(s).concat("([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",")*(").concat(s).concat(i,")*(").concat(s).concat(o,")?"),u=new RegExp("(^".concat(o,"$)|(^").concat(a,"$)|(^").concat(e,"$)"));t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],843:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),e===e.toLowerCase()};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],844:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,a.default)(e);for(var t,r,n=e.replace(/[- ]+/g,""),i=0,o=n.length-1;0<=o;o--)t=n.substring(o,o+1),t=parseInt(t,10),i+=r&&10<=(t*=2)?t%10+1:t,r=!r;return!(i%10!=0||!n)};var a=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],845:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(t,r){(0,n.default)(t);null!=r&&r.eui&&(r.eui=String(r.eui));if(null!=r&&r.no_colons||null!=r&&r.no_separators)return"48"===r.eui?o.test(t):"64"!==r.eui&&o.test(t)||u.test(t);if("48"===(null==r?void 0:r.eui))return i.test(t)||a.test(t);if("64"===(null==r?void 0:r.eui))return s.test(t)||c.test(t);return e(t,{eui:"48"})||e(t,{eui:"64"})};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,o=/^([0-9a-fA-F]){12}$/,a=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,s=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,u=/^([0-9a-fA-F]){16}$/,c=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],846:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^[a-f0-9]{32}$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],847:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),0===e.indexOf("magnet:?")&&i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],848:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,o.default)(e),0!==e.indexOf("mailto:"))return!1;var e=c(e.replace("mailto:","").split("?"),2),r=e[0],r=void 0===r?"":r,e=e[1],e=void 0===e?"":e;return!r&&!e||!!(e=function(e){var t=new Set(["subject","body","cc","bcc"]),r={cc:"",bcc:""},n=!1,e=e.split("&");if(4<e.length)return!1;var i,o=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){var n;if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(e);try{for(o.s();!(i=o.n()).done;){var a=c(i.value.split("="),2),s=a[0],u=a[1];if(s&&!t.has(s)){n=!0;break}!u||"cc"!==s&&"bcc"!==s||(r[s]=u),s&&t.delete(s)}}catch(e){o.e(e)}finally{o.f()}return!n&&r}(e))&&"".concat(r,",").concat(e.cc,",").concat(e.bcc).split(",").every(function(e){return!(e=(0,n.default)(e," "))||(0,i.default)(e,t)})};var n=a(e("./trim")),i=a(e("./isEmail")),o=a(e("./util/assertString"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.exports=r.default,t.exports.default=r.default},{"./isEmail":809,"./trim":881,"./util/assertString":884}],849:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)||o.test(e)||a.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,o=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,a=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],850:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){if((0,i.default)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;{if(Array.isArray(e))return e.some(function(e){if(o.hasOwnProperty(e)&&o[e].test(t))return!0;return!1});if(e in o)return o[e].test(t);if(!e||"any"===e){for(var n in o)if(o.hasOwnProperty(n))if(o[n].test(t))return!0;return!1}}throw new Error("Invalid locale '".concat(e,"'"))},r.locales=void 0;var i=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var o={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};o["en-CA"]=o["en-US"],o["fr-CA"]=o["en-CA"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"],o["zh-MO"]=o["en-MO"],o["ga-IE"]=o["en-IE"],o["fr-CH"]=o["de-CH"],o["it-CH"]=o["fr-CH"];e=Object.keys(o);r.locales=e},{"./util/assertString":884}],851:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),(0,i.default)(e)&&24===e.length};var n=o(e("./util/assertString")),i=o(e("./isHexadecimal"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./isHexadecimal":819,"./util/assertString":884}],852:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/[^\x00-\x7F]/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],853:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,i.default)(e),t&&t.no_symbols)return a.test(e);return new RegExp("^[+-]?([0-9]*[".concat((t||{}).locale?o.decimal[t.locale]:".","])?[0-9]+$")).test(e)};var n,i=(n=e("./util/assertString"))&&n.__esModule?n:{default:n},o=e("./alpha");var a=/^[0-9]+$/;t.exports=r.default,t.exports.default=r.default},{"./alpha":785,"./util/assertString":884}],854:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^(0o)?[0-7]+$/i;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],855:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e);e=e.replace(/\s/g,"").toUpperCase();return t.toUpperCase()in i&&i[t].test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{2,3}\d{7,8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],856:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e,{min:0,max:65535})};var n=(e=e("./isInt"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./isInt":836}],857:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){{if((0,n.default)(e),t in s)return s[t].test(e);if("any"===t){for(var r in s)if(s.hasOwnProperty(r))if(s[r].test(e))return!0;return!1}}throw new Error("Invalid locale '".concat(t,"'"))},r.locales=void 0;var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var e=/^\d{3}$/,i=/^\d{4}$/,o=/^\d{5}$/,a=/^\d{6}$/,s={AD:/^AD\d{3}$/,AT:i,AU:i,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BE:i,BG:i,BR:/^\d{5}-\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:i,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CZ:/^\d{3}\s?\d{2}$/,DE:o,DK:i,DO:o,DZ:o,EE:o,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:o,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:i,ID:o,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:e,IT:o,JP:/^\d{3}\-\d{4}$/,KE:o,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:i,LV:/^LV\-\d{4}$/,LK:o,MG:e,MX:o,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:o,NL:/^\d{4}\s?[a-z]{2}$/i,NO:i,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:i,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:a,RU:a,SA:o,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:a,SI:i,SK:/^\d{3}\s?\d{2}$/,TH:o,TN:i,TW:/^\d{3}(\d{2})?$/,UA:o,US:/^\d{5}(-\d{4})?$/,ZA:i,ZM:o},e=Object.keys(s);r.locales=e},{"./util/assertString":884}],858:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),a.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var e=/([01][0-9]|2[0-3])/,i=/[0-5][0-9]/,o=new RegExp("[-+]".concat(e.source,":").concat(i.source)),o=new RegExp("([zZ]|".concat(o.source,")")),e=new RegExp("".concat(e.source,":").concat(i.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),i=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),e=new RegExp("".concat(e.source).concat(o.source)),a=new RegExp("^".concat(i.source,"[ tT]").concat(e.source,"$"));t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],859:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return(0,n.default)(e),t?i.test(e)||o.test(e)||a.test(e)||s.test(e):i.test(e)||o.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,o=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,a=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,s=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],860:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),o.test(e)};var n=i(e("./util/assertString"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,i(e("./util/multilineRegex")).default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/multilineRegex":887}],861:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],862:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=((0,i.default)(e),function(e){var t=function(e){var t={};return Array.from(e).forEach(function(e){t[e]?t[e]+=1:t[e]=1}),t}(e),r={length:e.length,uniqueChars:Object.keys(t).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(t).forEach(function(e){a.test(e)?r.uppercaseCount+=t[e]:s.test(e)?r.lowercaseCount+=t[e]:u.test(e)?r.numberCount+=t[e]:c.test(e)&&(r.symbolCount+=t[e])}),r}(e));if((t=(0,n.default)(t||{},l)).returnScore)return function(e,t){var r=0;r=(r+=e.uniqueChars*t.pointsPerUnique)+(e.length-e.uniqueChars)*t.pointsPerRepeat,0<e.lowercaseCount&&(r+=t.pointsForContainingLower);0<e.uppercaseCount&&(r+=t.pointsForContainingUpper);0<e.numberCount&&(r+=t.pointsForContainingNumber);0<e.symbolCount&&(r+=t.pointsForContainingSymbol);return r}(e,t);return e.length>=t.minLength&&e.lowercaseCount>=t.minLowercase&&e.uppercaseCount>=t.minUppercase&&e.numberCount>=t.minNumbers&&e.symbolCount>=t.minSymbols};var n=o(e("./util/merge")),i=o(e("./util/assertString"));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^[A-Z]$/,s=/^[a-z]$/,u=/^[0-9]$/,c=/^[-#!$@£%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/,l={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884,"./util/merge":886}],863:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),i.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],864:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"en-US",e=((0,n.default)(e),e.slice(0));if(t in d)return t in p&&(e=e.replace(p[t],"")),!!d[t].test(e)&&(!(t in f)||f[t](e));throw new Error("Invalid locale '".concat(t,"'"))};var n=i(e("./util/assertString")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;Object.prototype.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./util/algorithms")),h=i(e("./isDate"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?c(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function m(e){for(var t=!1,r=!1,n=0;n<3;n++)if(!t&&/[AEIOU]/.test(e[n]))t=!0;else if(!r&&t&&"X"===e[n])r=!0;else if(0<n){if(t&&!r&&!/[AEIOU]/.test(e[n]))return;if(r&&!/X/.test(e[n]))return}return 1}var d={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/},f=(d["lb-LU"]=d["fr-LU"],d["lt-LT"]=d["et-EE"],d["nl-BE"]=d["fr-BE"],d["fr-CA"]=d["en-CA"],{"bg-BG":function(e){var t=e.slice(0,2),r=parseInt(e.slice(2,4),10),t=(40<r?(r-=40,"20"):20<r?(r-=20,"18"):"19").concat(t),t=(r<10&&(r="0".concat(r)),"".concat(t,"/").concat(r,"/").concat(e.slice(4,6)));if(!(0,h.default)(t,"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=[2,4,8,5,10,9,7,3,6],o=0,a=0;a<i.length;a++)o+=n[a]*i[a];return(o=o%11==10?0:o%11)===n[9]},"cs-CZ":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(0,2),10);if(10===e.length)t=(t<54?"20":"19").concat(t);else{if("000"===e.slice(6))return!1;if(!(t<54))return!1;t="19".concat(t)}3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join(""));var r=parseInt(e.slice(2,4),10);if(50<r&&(r-=50),20<r){if(parseInt(t,10)<2004)return!1;r-=20}if(r<10&&(r="0".concat(r)),r="".concat(t,"/").concat(r,"/").concat(e.slice(4,6)),!(0,h.default)(r,"YYYY/MM/DD"))return!1;if(10===e.length&&parseInt(e,10)%11!=0){r=parseInt(e.slice(0,9),10)%11;if(!(parseInt(t,10)<1986&&10==r))return!1;if(0!==parseInt(e.slice(9),10))return!1}return!0},"de-AT":function(e){return u.luhnCheck(e)},"de-DE":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),r=[],n=0;n<t.length-1;n++){r.push("");for(var i=0;i<t.length-1;i++)t[n]===t[i]&&(r[n]+=i)}if(2!==(r=r.filter(function(e){return 1<e.length})).length&&3!==r.length)return!1;if(3===r[0].length){for(var o=r[0].split("").map(function(e){return parseInt(e,10)}),a=0,s=0;s<o.length-1;s++)o[s]+1===o[s+1]&&(a+=1);if(2===a)return!1}return u.iso7064Check(e)},"dk-DK":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(4,6),10);switch(e.slice(6,7)){case"0":case"1":case"2":case"3":t="19".concat(t);break;case"4":case"9":t=(t<37?"20":"19").concat(t);break;default:if(t<37)t="20".concat(t);else{if(!(58<t))return!1;t="18".concat(t)}}3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join(""));var r="".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2));if(!(0,h.default)(r,"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=0,o=4,a=0;a<9;a++)i+=n[a]*o,1===--o&&(o=7);return 1!=(i%=11)&&(0===i?0===n[9]:n[9]===11-i)},"el-CY":function(e){for(var t=e.slice(0,8).split("").map(function(e){return parseInt(e,10)}),r=0,n=1;n<t.length;n+=2)r+=t[n];for(var i=0;i<t.length;i+=2)t[i]<2?r+=1-t[i]:(r+=2*(t[i]-2)+5,4<t[i]&&(r+=2));return String.fromCharCode(r%26+65)===e.charAt(8)},"el-GR":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),r=0,n=0;n<8;n++)r+=t[n]*Math.pow(2,8-n);return r%11%10===t[8]},"en-CA":function(e){var t=(e=e.split("")).filter(function(e,t){return t%2}).map(function(e){return 2*Number(e)}).join("").split("");return e.filter(function(e,t){return!(t%2)}).concat(t).map(function(e){return Number(e)}).reduce(function(e,t){return e+t})%10==0},"en-IE":function(e){var t=u.reverseMultiplyAndSum(e.split("").slice(0,7).map(function(e){return parseInt(e,10)}),8);return 9===e.length&&"W"!==e[8]&&(t+=9*(e[8].charCodeAt(0)-64)),0===(t%=23)?"W"===e[7].toUpperCase():e[7].toUpperCase()===String.fromCharCode(64+t)},"en-US":function(e){return-1!==function(){var e,t=[];for(e in l)l.hasOwnProperty(e)&&t.push.apply(t,o(l[e]));return t}().indexOf(e.slice(0,2))},"es-ES":function(e){var t=e.toUpperCase().split("");if(isNaN(parseInt(t[0],10))&&1<t.length){var r=0;switch(t[0]){case"Y":r=1;break;case"Z":r=2}t.splice(0,1,r)}else for(;t.length<9;)t.unshift(0);return t=t.join(""),e=parseInt(t.slice(0,8),10)%23,t[8]===["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][e]},"et-EE":function(e){var t=e.slice(1,3);switch(e.slice(0,1)){case"1":case"2":t="18".concat(t);break;case"3":case"4":t="19".concat(t);break;default:t="20".concat(t)}var r="".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7));if(!(0,h.default)(r,"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=0,o=1,a=0;a<10;a++)i+=n[a]*o,10===(o+=1)&&(o=1);if(i%11==10){for(var i=0,o=3,s=0;s<10;s++)i+=n[s]*o,10===(o+=1)&&(o=1);if(i%11==10)return 0===n[10]}return i%11===n[10]},"fi-FI":function(e){var t=e.slice(4,6);switch(e.slice(6,7)){case"+":t="18".concat(t);break;case"-":t="19".concat(t);break;default:t="20".concat(t)}var r="".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2));return!!(0,h.default)(r,"YYYY/MM/DD")&&((r=parseInt(e.slice(0,6)+e.slice(7,10),10)%31)<10?r===parseInt(e.slice(10),10):["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"][r-=10]===e.slice(10))},"fr-BE":function(e){if("00"!==e.slice(2,4)||"00"!==e.slice(4,6)){var t="".concat(e.slice(0,2),"/").concat(e.slice(2,4),"/").concat(e.slice(4,6));if(!(0,h.default)(t,"YY/MM/DD"))return!1}var t=97-parseInt(e.slice(0,9),10)%97,r=parseInt(e.slice(9,11),10);return t===r||97-parseInt("2".concat(e.slice(0,9)),10)%97===r},"fr-FR":function(e){return e=e.replace(/\s/g,""),parseInt(e.slice(0,10),10)%511===parseInt(e.slice(10,13),10)},"fr-LU":function(e){var t="".concat(e.slice(0,4),"/").concat(e.slice(4,6),"/").concat(e.slice(6,8));return!!(0,h.default)(t,"YYYY/MM/DD")&&!!u.luhnCheck(e.slice(0,12))&&u.verhoeffCheck("".concat(e.slice(0,11)).concat(e[12]))},"hr-HR":function(e){return u.iso7064Check(e)},"hu-HU":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),r=8,n=1;n<9;n++)r+=t[n]*(n+1);return r%11===t[9]},"it-IT":function(e){var t=e.toUpperCase().split("");if(!m(t.slice(0,3)))return!1;if(!m(t.slice(3,6)))return!1;for(var r={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},n=0,i=[6,7,9,10,12,13,14];n<i.length;n++){var o=i[n];t[o]in r&&t.splice(o,1,r[t[o]])}var e={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"}[t[8]],a=parseInt(t[9]+t[10],10),e=(40<a&&(a-=40),a<10&&(a="0".concat(a)),"".concat(t[6]).concat(t[7],"/").concat(e,"/").concat(a));if(!(0,h.default)(e,"YY/MM/DD"))return!1;for(var s=0,u=1;u<t.length-1;u+=2){var c=parseInt(t[u],10);s+=c=isNaN(c)?t[u].charCodeAt(0)-65:c}for(var l={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},d=0;d<t.length-1;d+=2){var f,p=0;t[d]in l?p=l[t[d]]:(p=2*(f=parseInt(t[d],10))+1,4<f&&(p+=2)),s+=p}return String.fromCharCode(65+s%26)===t[15]},"lv-LV":function(e){var t=(e=e.replace(/\W/,"")).slice(0,2);if("32"===t)return!0;if("00"!==e.slice(2,4)){var r=e.slice(4,6);switch(e[6]){case"0":r="18".concat(r);break;case"1":r="19".concat(r);break;default:r="20".concat(r)}t="".concat(r,"/").concat(e.slice(2,4),"/").concat(t);if(!(0,h.default)(t,"YYYY/MM/DD"))return!1}for(var n=1101,i=[1,6,3,7,9,10,5,8,4,2],o=0;o<e.length-1;o++)n-=parseInt(e[o],10)*i[o];return parseInt(e[10],10)===n%11},"mt-MT":function(e){if(9!==e.length){for(var t=e.toUpperCase().split("");t.length<8;)t.unshift(0);switch(e[7]){case"A":case"P":if(0===parseInt(t[6],10))return!1;break;default:var r=parseInt(t.join("").slice(0,5),10);if(32e3<r)return!1;if(r===parseInt(t.join("").slice(5,7),10))return!1}}return!0},"nl-NL":function(e){return u.reverseMultiplyAndSum(e.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11===parseInt(e[8],10)},"pl-PL":function(e){if(10===e.length){for(var t=[6,5,7,2,3,4,5,6,7],r=0,n=0;n<t.length;n++)r+=parseInt(e[n],10)*t[n];return 10===(r%=11)?!1:r===parseInt(e[9],10)}var i=e.slice(0,2),o=parseInt(e.slice(2,4),10),i=(80<o?(i="18".concat(i),o-=80):60<o?(i="22".concat(i),o-=60):40<o?(i="21".concat(i),o-=40):20<o?(i="20".concat(i),o-=20):i="19".concat(i),o<10&&(o="0".concat(o)),"".concat(i,"/").concat(o,"/").concat(e.slice(4,6)));if(!(0,h.default)(i,"YYYY/MM/DD"))return!1;for(var a=0,s=1,u=0;u<e.length-1;u++)a+=parseInt(e[u],10)*s%10,10<(s+=2)?s=1:5===s&&(s+=2);return(a=10-a%10)===parseInt(e[10],10)},"pt-BR":function(e){if(11===e.length){var t=0;if("11111111111"===e||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555"===e||"66666666666"===e||"77777777777"===e||"88888888888"===e||"99999999999"===e||"00000000000"===e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r),10)*(11-r);if((a=10===(a=10*t%11)?0:a)!==parseInt(e.substring(9,10),10))return!1;t=0;for(var n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n),10)*(12-n);return(a=10===(a=10*t%11)?0:a)!==parseInt(e.substring(10,11),10)?!1:!0}if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var i=e.length-2,o=e.substring(0,i),a=e.substring(i),s=0,u=i-7,c=i;1<=c;c--)s+=o.charAt(i-c)*u,--u<2&&(u=9);if((s%11<2?0:11-s%11)!==parseInt(a.charAt(0),10))return!1;for(var o=e.substring(0,i+=1),s=0,u=i-7,l=i;1<=l;l--)s+=o.charAt(i-l)*u,--u<2&&(u=9);return(s%11<2?0:11-s%11)===parseInt(a.charAt(1),10)},"pt-PT":function(e){var t=11-u.reverseMultiplyAndSum(e.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11;return 9<t?0===parseInt(e[8],10):t===parseInt(e[8],10)},"ro-RO":function(e){if("9000"===e.slice(0,4))return!0;var t=e.slice(1,3);switch(e[0]){case"1":case"2":t="19".concat(t);break;case"3":case"4":t="18".concat(t);break;case"5":case"6":t="20".concat(t)}var r="".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7));if(8===r.length){if(!(0,h.default)(r,"YY/MM/DD"))return!1}else if(!(0,h.default)(r,"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=[2,7,9,1,4,6,3,5,8,2,7,9],o=0,a=0;a<i.length;a++)o+=n[a]*i[a];return o%11==10?1===n[12]:n[12]===o%11},"sk-SK":function(e){if(9===e.length){if("000"===(e=e.replace(/\W/,"")).slice(6))return!1;if(53<(t=parseInt(e.slice(0,2),10)))return!1;var t=(t<10?"190":"19").concat(t),r=parseInt(e.slice(2,4),10),t=(50<r&&(r-=50),r<10&&(r="0".concat(r)),"".concat(t,"/").concat(r,"/").concat(e.slice(4,6)));if(!(0,h.default)(t,"YYYY/MM/DD"))return!1}return!0},"sl-SI":function(e){var t=11-u.reverseMultiplyAndSum(e.split("").slice(0,7).map(function(e){return parseInt(e,10)}),8)%11;return 10==t?0===parseInt(e[7],10):t===parseInt(e[7],10)},"sv-SE":function(e){var t=e.slice(0),r="",n=(t=11<e.length?t.slice(2):t).slice(2,4),t=parseInt(t.slice(4,6),10);if(11<e.length)r=e.slice(0,4);else if(r=e.slice(0,2),11===e.length&&t<60){var i=(new Date).getFullYear().toString(),o=parseInt(i.slice(0,2),10),i=parseInt(i,10);if("-"===e[6])r=(parseInt("".concat(o).concat(r),10)>i?"".concat(o-1):"".concat(o)).concat(r);else if(r="".concat(o-1).concat(r),i-parseInt(r,10)<100)return!1}if(60<t&&(t-=60),t<10&&(t="0".concat(t)),8===(o="".concat(r,"/").concat(n,"/").concat(t)).length){if(!(0,h.default)(o,"YY/MM/DD"))return!1}else if(!(0,h.default)(o,"YYYY/MM/DD"))return!1;return u.luhnCheck(e.replace(/\W/,""))}}),e=(f["lb-LU"]=f["fr-LU"],f["lt-LT"]=f["et-EE"],f["nl-BE"]=f["fr-BE"],f["fr-CA"]=f["en-CA"],/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g),p={"de-AT":e,"de-DE":/[\/\\]/g,"fr-BE":e};p["nl-BE"]=p["fr-BE"],t.exports=r.default,t.exports.default=r.default},{"./isDate":805,"./util/algorithms":883,"./util/assertString":884}],865:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return t=(0,n.default)(t,i),"string"==typeof e&&o[t.hourFormat][t.mode].test(e)};var n=(e=e("./util/merge"))&&e.__esModule?e:{default:e};var i={hourFormat:"hour24",mode:"default"},o={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/}};t.exports=r.default,t.exports.default=r.default},{"./util/merge":886}],866:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,s.default)(e),!e||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;if((t=(0,l.default)(t,f)).validate_length&&2083<=e.length)return!1;if(!t.allow_fragments&&e.includes("#"))return!1;if(!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var r,n,i;if(1<(n=(e=(n=(e=(n=e.split("#")).shift()).split("?")).shift()).split("://")).length){if(o=n.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(o))return!1}else{if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!t.allow_protocol_relative_urls)return!1;n[0]=e.slice(2)}}if(""===(e=n.join("://")))return!1;if(""!==(e=(n=e.split("/")).shift())||t.require_host){if(1<(n=e.split("@")).length){if(t.disallow_auth)return!1;if(""===n[0])return!1;if(0<=(o=n.shift()).indexOf(":")&&2<o.split(":").length)return!1;var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?d(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.split(":"),2),o=e[0],e=e[1];if(""===o&&""===e)return!1}o=n.join("@"),i=e=null;var a=o.match(p);if(a?(r="",i=a[1],e=a[2]||null):(n=o.split(":"),r=n.shift(),n.length&&(e=n.join(":"))),null!==e&&0<e.length){if(a=parseInt(e,10),!/^[0-9]+$/.test(e)||a<=0||65535<a)return!1}else if(t.require_port)return!1;if(t.host_whitelist)return h(r,t.host_whitelist);if(""!==r||t.require_host){if(!((0,c.default)(r)||(0,u.default)(r,t)||i&&(0,c.default)(i,6)))return!1;if(r=r||i,t.host_blacklist&&h(r,t.host_blacklist))return!1}}return!0};var s=n(e("./util/assertString")),u=n(e("./isFQDN")),c=n(e("./isIP")),l=n(e("./util/merge"));function n(e){return e&&e.__esModule?e:{default:e}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},p=/^\[([^\]]+)\](?::([0-9]+))?$/;function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||"[object RegExp]"===Object.prototype.toString.call(n)&&n.test(e))return!0}return!1}t.exports=r.default,t.exports.default=r.default},{"./isFQDN":812,"./isIP":822,"./util/assertString":884,"./util/merge":886}],867:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e);t=i[[void 0,null].includes(t)?"all":t];return!!t&&t.test(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};var i={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],868:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),e===e.toUpperCase()};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],869:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,i.default)(e),(0,i.default)(t),t in u)return u[t](e);throw new Error("Invalid country code: '".concat(t,"'"))},r.vatMatchers=void 0;var n,i=(n=e("./util/assertString"))&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;Object.prototype.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./util/algorithms"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}var u={AT:function(e){return/^(AT)?U\d{8}$/.test(e)},BE:function(e){return/^(BE)?\d{10}$/.test(e)},BG:function(e){return/^(BG)?\d{9,10}$/.test(e)},HR:function(e){return/^(HR)?\d{11}$/.test(e)},CY:function(e){return/^(CY)?\w{9}$/.test(e)},CZ:function(e){return/^(CZ)?\d{8,10}$/.test(e)},DK:function(e){return/^(DK)?\d{8}$/.test(e)},EE:function(e){return/^(EE)?\d{9}$/.test(e)},FI:function(e){return/^(FI)?\d{8}$/.test(e)},FR:function(e){return/^(FR)?\w{2}\d{9}$/.test(e)},DE:function(e){return/^(DE)?\d{9}$/.test(e)},EL:function(e){return/^(EL)?\d{9}$/.test(e)},HU:function(e){return/^(HU)?\d{8}$/.test(e)},IE:function(e){return/^(IE)?\d{7}\w{1}(W)?$/.test(e)},IT:function(e){return/^(IT)?\d{11}$/.test(e)},LV:function(e){return/^(LV)?\d{11}$/.test(e)},LT:function(e){return/^(LT)?\d{9,12}$/.test(e)},LU:function(e){return/^(LU)?\d{8}$/.test(e)},MT:function(e){return/^(MT)?\d{8}$/.test(e)},NL:function(e){return/^(NL)?\d{9}B\d{2}$/.test(e)},PL:function(e){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(e)},PT:function(e){var t,e=e.match(/^(PT)?(\d{9})$/);return!!e&&(e=e[2],9<(t=11-o.reverseMultiplyAndSum(e.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11)?0===parseInt(e[8],10):t===parseInt(e[8],10))},RO:function(e){return/^(RO)?\d{2,10}$/.test(e)},SK:function(e){return/^(SK)?\d{10}$/.test(e)},SI:function(e){return/^(SI)?\d{8}$/.test(e)},ES:function(e){return/^(ES)?\w\d{7}[A-Z]$/.test(e)},SE:function(e){return/^(SE)?\d{12}$/.test(e)},AL:function(e){return/^(AL)?\w{9}[A-Z]$/.test(e)},MK:function(e){return/^(MK)?\d{13}$/.test(e)},AU:function(e){return/^(AU)?\d{11}$/.test(e)},BY:function(e){return/^(УНП )?\d{9}$/.test(e)},CA:function(e){return/^(CA)?\d{9}$/.test(e)},IS:function(e){return/^(IS)?\d{5,6}$/.test(e)},IN:function(e){return/^(IN)?\d{15}$/.test(e)},ID:function(e){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(e)},IL:function(e){return/^(IL)?\d{9}$/.test(e)},KZ:function(e){return/^(KZ)?\d{9}$/.test(e)},NZ:function(e){return/^(NZ)?\d{9}$/.test(e)},NG:function(e){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(e)},NO:function(e){return/^(NO)?\d{9}MVA$/.test(e)},PH:function(e){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(e)},RU:function(e){return/^(RU)?(\d{10}|\d{12})$/.test(e)},SM:function(e){return/^(SM)?\d{5}$/.test(e)},SA:function(e){return/^(SA)?\d{15}$/.test(e)},RS:function(e){return/^(RS)?\d{9}$/.test(e)},CH:function(e){var t,n;return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(e)&&(e=e.match(/\d/g).map(function(e){return+e}),t=e.pop(),n=[5,4,3,2,7,6,5,4],t===(11-e.reduce(function(e,t,r){return e+t*n[r]},0)%11)%11)},TR:function(e){return/^(TR)?\d{10}$/.test(e)},UA:function(e){return/^(UA)?\d{12}$/.test(e)},GB:function(e){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(e)},UZ:function(e){return/^(UZ)?\d{9}$/.test(e)},AR:function(e){return/^(AR)?\d{11}$/.test(e)},BO:function(e){return/^(BO)?\d{7}$/.test(e)},BR:function(e){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(e)},CL:function(e){return/^(CL)?\d{8}-\d{1}$/.test(e)},CO:function(e){return/^(CO)?\d{10}$/.test(e)},CR:function(e){return/^(CR)?\d{9,12}$/.test(e)},EC:function(e){return/^(EC)?\d{13}$/.test(e)},SV:function(e){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(e)},GT:function(e){return/^(GT)?\d{7}-\d{1}$/.test(e)},HN:function(e){return/^(HN)?$/.test(e)},MX:function(e){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(e)},NI:function(e){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(e)},PA:function(e){return/^(PA)?$/.test(e)},PY:function(e){return/^(PY)?\d{6,8}-\d{1}$/.test(e)},PE:function(e){return/^(PE)?\d{11}$/.test(e)},DO:function(e){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(e)},UY:function(e){return/^(UY)?\d{12}$/.test(e)},VE:function(e){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(e)}};r.vatMatchers=u},{"./util/algorithms":883,"./util/assertString":884}],870:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,i.default)(e),o.fullWidth.test(e)&&a.halfWidth.test(e)};var n,i=(n=e("./util/assertString"))&&n.__esModule?n:{default:n},o=e("./isFullWidth"),a=e("./isHalfWidth");t.exports=r.default,t.exports.default=r.default},{"./isFullWidth":814,"./isHalfWidth":816,"./util/assertString":884}],871:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e);for(var r=e.length-1;0<=r;r--)if(-1===t.indexOf(e[r]))return!1;return!0};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],872:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e);t=t?new RegExp("^[".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return e.replace(t,"")};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],873:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){(0,n.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r));return!!e.match(t)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],874:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){t=(0,n.default)(t,i);var e=e.split("@"),r=e.pop(),e=[e.join("@"),r];if(e[1]=e[1].toLowerCase(),"gmail.com"===e[1]||"googlemail.com"===e[1]){if(t.gmail_remove_subaddress&&(e[0]=e[0].split("+")[0]),t.gmail_remove_dots&&(e[0]=e[0].replace(/\.+/g,c)),!e[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(e[0]=e[0].toLowerCase()),e[1]=t.gmail_convert_googlemaildotcom?"gmail.com":e[1]}else if(0<=o.indexOf(e[1])){if(t.icloud_remove_subaddress&&(e[0]=e[0].split("+")[0]),!e[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(e[0]=e[0].toLowerCase())}else if(0<=a.indexOf(e[1])){if(t.outlookdotcom_remove_subaddress&&(e[0]=e[0].split("+")[0]),!e[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(e[0]=e[0].toLowerCase())}else if(0<=s.indexOf(e[1])){if(t.yahoo_remove_subaddress&&(r=e[0].split("-"),e[0]=1<r.length?r.slice(0,-1).join("-"):r[0]),!e[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(e[0]=e[0].toLowerCase())}else 0<=u.indexOf(e[1])?((t.all_lowercase||t.yandex_lowercase)&&(e[0]=e[0].toLowerCase()),e[1]="yandex.ru"):t.all_lowercase&&(e[0]=e[0].toLowerCase());return e.join("@")};var n=(e=e("./util/merge"))&&e.__esModule?e:{default:e};var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},o=["icloud.com","me.com"],a=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],s=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],u=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function c(e){return 1<e.length?e:""}t.exports=r.default,t.exports.default=r.default},{"./util/merge":886}],875:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,n.default)(e),t)return t=new RegExp("[".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g"),e.replace(t,"");var r=e.length-1;for(;/\s/.test(e.charAt(r));)--r;return e.slice(0,r+1)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],876:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,n.default)(e);t=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,i.default)(e,t)};var n=o(e("./util/assertString")),i=o(e("./blacklist"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./blacklist":786,"./util/assertString":884}],877:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,n.default)(e),t)return"1"===e||/^true$/i.test(e);return"0"!==e&&!/^false$/i.test(e)&&""!==e};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],878:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],879:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e)?parseFloat(e):NaN};var n=(e=e("./isFloat"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./isFloat":813}],880:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),parseInt(e,t||10)};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],881:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)((0,i.default)(e,t),t)};var n=o(e("./rtrim")),i=o(e("./ltrim"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default,t.exports.default=r.default},{"./ltrim":872,"./rtrim":875}],882:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return(0,n.default)(e),e.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],883:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.iso7064Check=function(e){for(var t=10,r=0;r<e.length-1;r++)t=(parseInt(e[r],10)+t)%10==0?9:(parseInt(e[r],10)+t)%10*2%11;return(t=1===t?0:11-t)===parseInt(e[10],10)},r.luhnCheck=function(e){for(var t=0,r=!1,n=e.length-1;0<=n;n--){var i;r?(i=2*parseInt(e[n],10),t+=9<i?i.toString().split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t){return e+t},0):i):t+=parseInt(e[n],10),r=!r}return t%10==0},r.reverseMultiplyAndSum=function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n]*(t-n);return r},r.verhoeffCheck=function(e){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],r=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],n=e.split("").reverse().join(""),i=0,o=0;o<n.length;o++)i=t[i][r[o%8][parseInt(n[o],10)]];return 0===i}},{}],884:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){{var t;if(!("string"==typeof e||e instanceof String))throw t=n(e),null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},t.exports=r.default,t.exports.default=r.default},{}],885:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e,t){return e.some(function(e){return t===e})},t.exports=r.default,t.exports.default=r.default},{}],886:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;for(e in r)void 0===t[e]&&(t[e]=r[e]);return t},t.exports=r.default,t.exports.default=r.default},{}],887:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){e=e.join("");return new RegExp(e,t)},t.exports=r.default,t.exports.default=r.default},{}],888:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){"object"===n(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},t.exports=r.default,t.exports.default=r.default},{}],889:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return(0,n.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var n=(e=e("./util/assertString"))&&e.__esModule?e:{default:e};t.exports=r.default,t.exports.default=r.default},{"./util/assertString":884}],890:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}],891:[function(e,t,r){"use strict";t.exports={INVALID_TYPE:"Expected type {0} but found type {1}",INVALID_FORMAT:"Object didn't pass validation for format {0}: {1}",ENUM_MISMATCH:"No enum match for: {0}",ENUM_CASE_MISMATCH:"Enum does not match case for: {0}",ANY_OF_MISSING:"Data does not match any schemas from 'anyOf'",ONE_OF_MISSING:"Data does not match any schemas from 'oneOf'",ONE_OF_MULTIPLE:"Data is valid against more than one schema from 'oneOf'",NOT_PASSED:"Data matches schema from 'not'",ARRAY_LENGTH_SHORT:"Array is too short ({0}), minimum {1}",ARRAY_LENGTH_LONG:"Array is too long ({0}), maximum {1}",ARRAY_UNIQUE:"Array items are not unique (indexes {0} and {1})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",MULTIPLE_OF:"Value {0} is not a multiple of {1}",MINIMUM:"Value {0} is less than minimum {1}",MINIMUM_EXCLUSIVE:"Value {0} is equal or less than exclusive minimum {1}",MAXIMUM:"Value {0} is greater than maximum {1}",MAXIMUM_EXCLUSIVE:"Value {0} is equal or greater than exclusive maximum {1}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({0}), minimum {1}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({0}), maximum {1}",OBJECT_MISSING_REQUIRED_PROPERTY:"Missing required property: {0}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed: {0}",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {0} (due to key: {1})",MIN_LENGTH:"String is too short ({0} chars), minimum {1}",MAX_LENGTH:"String is too long ({0} chars), maximum {1}",PATTERN:"String does not match pattern {0}: {1}",KEYWORD_TYPE_EXPECTED:"Keyword '{0}' is expected to be of type '{1}'",KEYWORD_UNDEFINED_STRICT:"Keyword '{0}' must be defined in strict mode",KEYWORD_UNEXPECTED:"Keyword '{0}' is not expected to appear in the schema",KEYWORD_MUST_BE:"Keyword '{0}' must be {1}",KEYWORD_DEPENDENCY:"Keyword '{0}' requires keyword '{1}'",KEYWORD_PATTERN:"Keyword '{0}' is not a valid RegExp pattern: {1}",KEYWORD_VALUE_TYPE:"Each element of keyword '{0}' array must be a '{1}'",UNKNOWN_FORMAT:"There is no validation function for format '{0}'",CUSTOM_MODE_FORCE_PROPERTIES:"{0} must define at least one property if present",REF_UNRESOLVED:"Reference has not been resolved during compilation: {0}",UNRESOLVABLE_REFERENCE:"Reference could not be resolved: {0}",SCHEMA_NOT_REACHABLE:"Validator was not able to read schema with uri: {0}",SCHEMA_TYPE_EXPECTED:"Schema is expected to be of type 'object'",SCHEMA_NOT_AN_OBJECT:"Schema is not an object: {0}",ASYNC_TIMEOUT:"{0} asynchronous task(s) have timed out after {1} ms",PARENT_SCHEMA_VALIDATION_FAILED:"Schema failed to validate against its parent schema, see inner errors for details.",REMOTE_NOT_VALID:"Remote reference didn't compile successfully: {0}"}},{}],892:[function(e,t,r){var n=e("validator"),i={date:function(e){return"string"!=typeof e||null!==(e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e))&&!(e[2]<"01"||"12"<e[2]||e[3]<"01"||"31"<e[3])},"date-time":function(e){return"string"!=typeof e||(e=e.toLowerCase().split("t"),!!i.date(e[0])&&null!==(e=/^([0-9]{2}):([0-9]{2}):([0-9]{2})(.[0-9]+)?(z|([+-][0-9]{2}:[0-9]{2}))$/.exec(e[1]))&&!("23"<e[1]||"59"<e[2]||"59"<e[3]))},email:function(e){return"string"!=typeof e||n.isEmail(e,{require_tld:!0})},hostname:function(e){if("string"!=typeof e)return!0;var t=/^[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?(\.[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?)*$/.test(e);if(t){if(255<e.length)return!1;for(var r=e.split("."),n=0;n<r.length;n++)if(63<r[n].length)return!1}return t},"host-name":function(e){return i.hostname.call(this,e)},ipv4:function(e){return"string"!=typeof e||n.isIP(e,4)},ipv6:function(e){return"string"!=typeof e||n.isIP(e,6)},regex:function(e){try{return RegExp(e),!0}catch(e){return!1}},uri:function(e){return this.options.strictUris?i["strict-uri"].apply(this,arguments):"string"!=typeof e||RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?").test(e)},"strict-uri":function(e){return"string"!=typeof e||n.isURL(e)}};t.exports=i},{validator:784}],893:[function(e,t,p){"use strict";function h(t,e){return t&&Array.isArray(t.includeErrors)&&0<t.includeErrors.length&&!e.some(function(e){return t.includeErrors.includes(e)})}var o=e("./FormatValidators"),s=e("./Report"),m=e("./Utils"),u={multipleOf:function(e,t,r){var n;h(this.validateOptions,["MULTIPLE_OF"])||"number"==typeof r&&(n=String(t.multipleOf),n=Math.pow(10,n.length-n.indexOf(".")-1),"integer"!==m.whatIs(r*n/(t.multipleOf*n)))&&e.addError("MULTIPLE_OF",[r,t.multipleOf],null,t)},maximum:function(e,t,r){h(this.validateOptions,["MAXIMUM","MAXIMUM_EXCLUSIVE"])||"number"==typeof r&&(!0!==t.exclusiveMaximum?r>t.maximum&&e.addError("MAXIMUM",[r,t.maximum],null,t):r>=t.maximum&&e.addError("MAXIMUM_EXCLUSIVE",[r,t.maximum],null,t))},exclusiveMaximum:function(){},minimum:function(e,t,r){h(this.validateOptions,["MINIMUM","MINIMUM_EXCLUSIVE"])||"number"==typeof r&&(!0!==t.exclusiveMinimum?r<t.minimum&&e.addError("MINIMUM",[r,t.minimum],null,t):r<=t.minimum&&e.addError("MINIMUM_EXCLUSIVE",[r,t.minimum],null,t))},exclusiveMinimum:function(){},maxLength:function(e,t,r){h(this.validateOptions,["MAX_LENGTH"])||"string"==typeof r&&m.ucs2decode(r).length>t.maxLength&&e.addError("MAX_LENGTH",[r.length,t.maxLength],null,t)},minLength:function(e,t,r){h(this.validateOptions,["MIN_LENGTH"])||"string"==typeof r&&m.ucs2decode(r).length<t.minLength&&e.addError("MIN_LENGTH",[r.length,t.minLength],null,t)},pattern:function(e,t,r){h(this.validateOptions,["PATTERN"])||"string"==typeof r&&!1===RegExp(t.pattern).test(r)&&e.addError("PATTERN",[t.pattern,r],null,t)},additionalItems:function(e,t,r){h(this.validateOptions,["ARRAY_ADDITIONAL_ITEMS"])||Array.isArray(r)&&!1===t.additionalItems&&Array.isArray(t.items)&&r.length>t.items.length&&e.addError("ARRAY_ADDITIONAL_ITEMS",null,null,t)},items:function(){},maxItems:function(e,t,r){h(this.validateOptions,["ARRAY_LENGTH_LONG"])||Array.isArray(r)&&r.length>t.maxItems&&e.addError("ARRAY_LENGTH_LONG",[r.length,t.maxItems],null,t)},minItems:function(e,t,r){h(this.validateOptions,["ARRAY_LENGTH_SHORT"])||Array.isArray(r)&&r.length<t.minItems&&e.addError("ARRAY_LENGTH_SHORT",[r.length,t.minItems],null,t)},uniqueItems:function(e,t,r){var n;h(this.validateOptions,["ARRAY_UNIQUE"])||Array.isArray(r)&&!0===t.uniqueItems&&!(n=[])===m.isUniqueArray(r,n)&&e.addError("ARRAY_UNIQUE",n,null,t)},maxProperties:function(e,t,r){h(this.validateOptions,["OBJECT_PROPERTIES_MAXIMUM"])||"object"===m.whatIs(r)&&(r=Object.keys(r).length)>t.maxProperties&&e.addError("OBJECT_PROPERTIES_MAXIMUM",[r,t.maxProperties],null,t)},minProperties:function(e,t,r){h(this.validateOptions,["OBJECT_PROPERTIES_MINIMUM"])||"object"===m.whatIs(r)&&(r=Object.keys(r).length)<t.minProperties&&e.addError("OBJECT_PROPERTIES_MINIMUM",[r,t.minProperties],null,t)},required:function(e,t,r){if(!h(this.validateOptions,["OBJECT_MISSING_REQUIRED_PROPERTY"])&&"object"===m.whatIs(r))for(var n=t.required.length;n--;){var i=t.required[n];void 0===r[i]&&e.addError("OBJECT_MISSING_REQUIRED_PROPERTY",[i],null,t)}},additionalProperties:function(e,t,r){if(void 0===t.properties&&void 0===t.patternProperties)return u.properties.call(this,e,t,r)},patternProperties:function(e,t,r){if(void 0===t.properties)return u.properties.call(this,e,t,r)},properties:function(e,t,r){if(!h(this.validateOptions,["OBJECT_ADDITIONAL_PROPERTIES"])&&"object"===m.whatIs(r)){var n=void 0!==t.properties?t.properties:{},i=void 0!==t.patternProperties?t.patternProperties:{};if(!1===t.additionalProperties){for(var o=Object.keys(r),r=Object.keys(n),a=Object.keys(i),o=m.difference(o,r),s=a.length;s--;)for(var u=RegExp(a[s]),c=o.length;c--;)!0===u.test(o[c])&&o.splice(c,1);if(0<o.length){var l=this.options.assumeAdditional.length;if(l)for(;l--;){var d=o.indexOf(this.options.assumeAdditional[l]);-1!==d&&o.splice(d,1)}var f=o.length;if(f)for(;f--;)e.addError("OBJECT_ADDITIONAL_PROPERTIES",[o[f]],null,t)}}}},dependencies:function(e,t,r){if(!h(this.validateOptions,["OBJECT_DEPENDENCY_KEY"])&&"object"===m.whatIs(r))for(var n=Object.keys(t.dependencies),i=n.length;i--;){var o=n[i];if(r[o]){var a=t.dependencies[o];if("object"===m.whatIs(a))p.validate.call(this,e,a,r);else for(var s=a.length;s--;){var u=a[s];void 0===r[u]&&e.addError("OBJECT_DEPENDENCY_KEY",[u,o],null,t)}}}},enum:function(e,t,r){if(!h(this.validateOptions,["ENUM_CASE_MISMATCH","ENUM_MISMATCH"])){for(var n,i=!1,o=!1,a=t.enum.length;a--;){if(m.areEqual(r,t.enum[a])){i=!0;break}m.areEqual(r,t.enum[a]),o=!0}!1===i&&(n=o&&this.options.enumCaseInsensitiveComparison?"ENUM_CASE_MISMATCH":"ENUM_MISMATCH",e.addError(n,[r],null,t))}},type:function(e,t,r){h(this.validateOptions,["INVALID_TYPE"])||(r=m.whatIs(r),"string"==typeof t.type?r===t.type||"integer"===r&&"number"===t.type||e.addError("INVALID_TYPE",[t.type,r],null,t):-1!==t.type.indexOf(r)||"integer"===r&&-1!==t.type.indexOf("number")||e.addError("INVALID_TYPE",[t.type,r],null,t))},allOf:function(e,t,r){for(var n=t.allOf.length;n--;){var i=p.validate.call(this,e,t.allOf[n],r);if(this.options.breakOnFirstError&&!1===i)break}},anyOf:function(e,t,r){for(var n=[],i=!1,o=t.anyOf.length;o--&&!1===i;){var a=new s(e);n.push(a),i=p.validate.call(this,a,t.anyOf[o],r)}!1===i&&e.addError("ANY_OF_MISSING",void 0,n,t)},oneOf:function(e,t,r){for(var n=0,i=[],o=t.oneOf.length;o--;){var a=new s(e,{maxErrors:1});i.push(a),!0===p.validate.call(this,a,t.oneOf[o],r)&&n++}0===n?e.addError("ONE_OF_MISSING",void 0,i,t):1<n&&e.addError("ONE_OF_MULTIPLE",null,null,t)},not:function(e,t,r){var n=new s(e);!0===p.validate.call(this,n,t.not,r)&&e.addError("NOT_PASSED",null,null,t)},definitions:function(){},format:function(t,r,n){var i,e=o[r.format];"function"==typeof e?h(this.validateOptions,["INVALID_FORMAT"])||(2===e.length?(i=m.clone(t.path),t.addAsyncTask(e,[n],function(e){!0!==e&&(e=t.path,t.path=i,t.addError("INVALID_FORMAT",[r.format,n],null,r),t.path=e)})):!0!==e.call(this,n)&&t.addError("INVALID_FORMAT",[r.format,n],null,r)):!0!==this.options.ignoreUnknownFormats&&t.addError("UNKNOWN_FORMAT",[r.format],null,r)}};p.JsonValidators=u,p.validate=function(e,t,r){e.commonErrorMessage="JSON_OBJECT_VALIDATION_FAILED";var n=m.whatIs(t);if("object"!==n)return e.addError("SCHEMA_NOT_AN_OBJECT",[n],null,t),!1;var i=Object.keys(t);if(0===i.length)return!0;n=!1;if(e.rootSchema||(e.rootSchema=t,n=!0),void 0!==t.$ref){for(var o=99;t.$ref&&0<o;){if(!t.__$refResolved){e.addError("REF_UNRESOLVED",[t.$ref],null,t);break}if(t.__$refResolved===t)break;t=t.__$refResolved,i=Object.keys(t),o--}if(0===o)throw new Error("Circular dependency by $ref references!")}var a=m.whatIs(r);if(t.type&&(i.splice(i.indexOf("type"),1),u.type.call(this,e,t,r),e.errors.length)&&this.options.breakOnFirstError)return!1;for(var s=i.length;s--&&!(u[i[s]]&&(u[i[s]].call(this,e,t,r),e.errors.length)&&this.options.breakOnFirstError););return 0!==e.errors.length&&!1!==this.options.breakOnFirstError||("array"===a?function(e,t,r){var n=r.length;if(Array.isArray(t.items))for(;n--;)n<t.items.length?(e.path.push(n),p.validate.call(this,e,t.items[n],r[n]),e.path.pop()):"object"==typeof t.additionalItems&&(e.path.push(n),p.validate.call(this,e,t.additionalItems,r[n]),e.path.pop());else if("object"==typeof t.items)for(;n--;)e.path.push(n),p.validate.call(this,e,t.items,r[n]),e.path.pop()}.call(this,e,t,r):"object"===a&&function(e,t,r){for(var n=t.additionalProperties,i=(!0!==n&&void 0!==n||(n={}),t.properties?Object.keys(t.properties):[]),o=t.patternProperties?Object.keys(t.patternProperties):[],a=Object.keys(r),s=a.length;s--;){for(var u=a[s],c=r[u],l=[],d=(-1!==i.indexOf(u)&&l.push(t.properties[u]),o.length);d--;){var f=o[d];!0===RegExp(f).test(u)&&l.push(t.patternProperties[f])}for(0===l.length&&!1!==n&&l.push(n),d=l.length;d--;)e.path.push(u),p.validate.call(this,e,l[d],c),e.path.pop()}}.call(this,e,t,r)),"function"==typeof this.options.customValidator&&this.options.customValidator.call(this,e,t,r),n&&(e.rootSchema=void 0),0===e.errors.length}},{"./FormatValidators":892,"./Report":895,"./Utils":899}],894:[function(e,t,r){"function"!=typeof Number.isFinite&&(Number.isFinite=function(e){return"number"==typeof e&&e==e&&e!==1/0&&e!==-1/0})},{}],895:[function(e,t,r){!function(c){!function(){"use strict";var r=e("lodash.get"),i=e("./Errors"),l=e("./Utils");function n(e,t){this.parentReport=e instanceof n?e:void 0,this.options=e instanceof n?e.options:e||{},this.reportOptions=t||{},this.errors=[],this.path=[],this.asyncTasks=[],this.rootSchema=void 0,this.commonErrorMessage=void 0,this.json=void 0}n.prototype.isValid=function(){if(0<this.asyncTasks.length)throw new Error("Async tasks pending, can't answer isValid");return 0===this.errors.length},n.prototype.addAsyncTask=function(e,t,r){this.asyncTasks.push([e,t,r])},n.prototype.getAncestor=function(e){if(this.parentReport)return this.parentReport.getSchemaId()===e?this.parentReport:this.parentReport.getAncestor(e)},n.prototype.processAsyncTasks=function(e,r){var t=e||2e3,n=this.asyncTasks.length,i=n,o=!1,a=this;function s(){c.nextTick(function(){var e=0===a.errors.length,t=e?null:a.errors;r(t,e)})}if(0===n||0<this.errors.length&&this.options.breakOnFirstError)s();else{for(;i--;){var u=this.asyncTasks[i];u[0].apply(null,u[1].concat(function(t){return function(e){o||(t(e),0==--n&&s())}}(u[2])))}setTimeout(function(){0<n&&(o=!0,a.addError("ASYNC_TIMEOUT",[n,t]),r(a.errors,!1))},t)}},n.prototype.getPath=function(e){var t=[],t=(t=this.parentReport?t.concat(this.parentReport.path):t).concat(this.path);return t=!0!==e?"#/"+t.map(function(e){return e=e.toString(),l.isAbsoluteUri(e)?"uri("+e+")":e.replace(/\~/g,"~0").replace(/\//g,"~1")}).join("/"):t},n.prototype.getSchemaId=function(){if(!this.rootSchema)return null;for(var e=[],e=(e=this.parentReport?e.concat(this.parentReport.path):e).concat(this.path);0<e.length;){var t=r(this.rootSchema,e);if(t&&t.id)return t.id;e.pop()}return this.rootSchema.id},n.prototype.hasError=function(e,t){for(var r=this.errors.length;r--;)if(this.errors[r].code===e){for(var n=!0,i=this.errors[r].params.length;i--;)this.errors[r].params[i]!==t[i]&&(n=!1);if(n)return n}return!1},n.prototype.addError=function(e,t,r,n){if(!e)throw new Error("No errorCode passed into addError()");this.addCustomError(e,i[e],t,r,n)},n.prototype.getJson=function(){for(var e=this;void 0===e.json;)if(void 0===(e=e.parentReport))return;return e.json},n.prototype.addCustomError=function(e,t,r,n,i){if(!(this.errors.length>=this.reportOptions.maxErrors)){if(!t)throw new Error("No errorMessage known for code "+e);for(var o=(r=r||[]).length;o--;){var a=l.whatIs(r[o]),a="object"===a||"null"===a?JSON.stringify(r[o]):r[o];t=t.replace("{"+o+"}",a)}var s={code:e,params:r,message:t,path:this.getPath(this.options.reportPathAsArray),schemaId:this.getSchemaId()};if(s[l.schemaSymbol]=i,s[l.jsonSymbol]=this.getJson(),i&&"string"==typeof i?s.description=i:i&&"object"==typeof i&&(i.title&&(s.title=i.title),i.description)&&(s.description=i.description),null!=n){for(Array.isArray(n)||(n=[n]),s.inner=[],o=n.length;o--;)for(var u=n[o],c=u.errors.length;c--;)s.inner.push(u.errors[c]);0===s.inner.length&&(s.inner=void 0)}this.errors.push(s)}},t.exports=n}.call(this)}.call(this,e("_process"))},{"./Errors":891,"./Utils":899,_process:930,"lodash.get":153}],896:[function(e,t,r){"use strict";var i=e("lodash.isequal"),f=e("./Report"),p=e("./SchemaCompilation"),h=e("./SchemaValidation"),o=e("./Utils");function m(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}r.cacheSchemaByUri=function(e,t){e=m(e);e&&(this.cache[e]=t)},r.removeFromCacheByUri=function(e){e=m(e);e&&delete this.cache[e]},r.checkCacheForUri=function(e){e=m(e);return!!e&&null!=this.cache[e]},r.getSchema=function(e,t){return t="string"==typeof(t="object"==typeof t?r.getSchemaByReference.call(this,e,t):t)?r.getSchemaByUri.call(this,e,t):t},r.getSchemaByReference=function(e,t){for(var r=this.referenceCache.length;r--;)if(i(this.referenceCache[r][0],t))return this.referenceCache[r][1];var n=o.cloneDeep(t);return this.referenceCache.push([t,n]),n},r.getSchemaByUri=function(e,t,r){var n=m(t),i=-1===(s=(i=t).indexOf("#"))?void 0:i.slice(s+1),o=n?this.cache[n]:r;if(o&&n&&o!==r){e.path.push(n);var a,s=e.getAncestor(o.id);if(s)a=s;else if(a=new f(e),p.compileSchema.call(this,a,o)){r=this.options;try{this.options=o.__$validationOptions||this.options,h.validateSchema.call(this,a,o)}finally{this.options=r}}n=a.isValid();if(n||e.addError("REMOTE_NOT_VALID",[t],a),e.path.pop(),!n)return}if(o&&i)for(var u=i.split("/"),c=0,l=u.length;o&&c<l;c++){d=u[c];var d=decodeURIComponent(d).replace(/~[0-1]/g,function(e){return"~1"===e?"/":"~"}),o=0===c?function e(t,r){if("object"==typeof t&&null!==t){if(!r)return t;if(t.id&&(t.id===r||"#"===t.id[0]&&t.id.substring(1)===r))return t;var n;if(Array.isArray(t)){for(o=t.length;o--;)if(n=e(t[o],r))return n}else for(var i=Object.keys(t),o=i.length;o--;){var a=i[o];if(0!==a.indexOf("__$")&&(n=e(t[a],r)))return n}}}(o,d):o[d]}return o},r.getRemotePath=m},{"./Report":895,"./SchemaCompilation":897,"./SchemaValidation":898,"./Utils":899,"lodash.isequal":154}],897:[function(e,t,p){"use strict";var h=e("./Report"),m=e("./SchemaCache"),y=e("./Utils");function b(e,t){var r,n,i,o;return y.isAbsoluteUri(t)?t:(e=e.join(""),r=y.isAbsoluteUri(e),n=y.isRelativeUri(e),i=y.isRelativeUri(t),r&&i?(o=e.match(/\/[^\/]*$/))&&(e=e.slice(0,o.index+1)):n&&i?e="":(o=e.match(/[^#/]+$/))&&(e=e.slice(0,o.index)),(e+t).replace(/##/,"#"))}function c(e,t){for(var r=t.length,n=0;r--;){var i=new h(e);p.compileSchema.call(this,i,t[r])&&n++,e.errors=e.errors.concat(i.errors)}return n}function v(e,t){var r,n=0;do{for(var i=e.errors.length;i--;)"UNRESOLVABLE_REFERENCE"===e.errors[i].code&&e.errors.splice(i,1);for(r=n,n=c.call(this,e,t),i=t.length;i--;){var o=t[i];if(o.__$missingReferences){for(var a=o.__$missingReferences.length;a--;){var s=o.__$missingReferences[a],u=function(e,t){for(var r=e.length;r--;)if(e[r].id===t)return e[r];return null}(t,s.ref);u&&(s.obj["__"+s.key+"Resolved"]=u,o.__$missingReferences.splice(a,1))}0===o.__$missingReferences.length&&delete o.__$missingReferences}}}while(n!==t.length&&n!==r);return e.isValid()}p.compileSchema=function(e,t){if(e.commonErrorMessage="SCHEMA_COMPILATION_FAILED","string"==typeof t){var r=m.getSchemaByUri.call(this,e,t);if(!r)return e.addError("SCHEMA_NOT_REACHABLE",[t]),!1;t=r}if(Array.isArray(t))return v.call(this,e,t);if(t.__$compiled&&t.id&&!1===m.checkCacheForUri.call(this,t.id)&&(t.__$compiled=void 0),t.__$compiled)return!0;t.id&&"string"==typeof t.id&&m.cacheSchemaByUri.call(this,t.id,t);for(var r=!1,n=(e.rootSchema||(e.rootSchema=t,r=!0),e.isValid()),i=(delete t.__$missingReferences,function e(t,r,n,i){if(r=r||[],n=n||[],i=i||[],"object"==typeof t&&null!==t){if("string"==typeof t.id&&n.push(t.id),"string"==typeof t.$ref&&void 0===t.__$refResolved&&r.push({ref:b(n,t.$ref),key:"$ref",obj:t,path:i.slice(0)}),"string"==typeof t.$schema&&void 0===t.__$schemaResolved&&r.push({ref:b(n,t.$schema),key:"$schema",obj:t,path:i.slice(0)}),Array.isArray(t))for(a=t.length;a--;)i.push(a.toString()),e(t[a],r,n,i),i.pop();else for(var o=Object.keys(t),a=o.length;a--;)0!==o[a].indexOf("__$")&&(i.push(o[a]),e(t[o[a]],r,n,i),i.pop());"string"==typeof t.id&&n.pop()}return r}.call(this,t)),o=i.length;o--;){var a,s,u,c,l=i[o],d=m.getSchemaByUri.call(this,e,l.ref,t);d||(a=this.getSchemaReader())&&(a=a(l.ref))&&(a.id=l.ref,s=new h(e),p.compileSchema.call(this,s,a)?d=m.getSchemaByUri.call(this,e,l.ref,t):e.errors=e.errors.concat(s.errors)),d||(a=e.hasError("REMOTE_NOT_VALID",[l.ref]),s=y.isAbsoluteUri(l.ref),c=!(u=!1)===this.options.ignoreUnresolvableReferences,s&&(u=m.checkCacheForUri.call(this,l.ref)),a)||c&&s||u||(Array.prototype.push.apply(e.path,l.path),e.addError("UNRESOLVABLE_REFERENCE",[l.ref]),e.path=e.path.slice(0,-l.path.length),n&&(t.__$missingReferences=t.__$missingReferences||[],t.__$missingReferences.push(l))),l.obj["__"+l.key+"Resolved"]=d}var f=e.isValid();return f?t.__$compiled=!0:t.id&&"string"==typeof t.id&&m.removeFromCacheByUri.call(this,t.id),r&&(e.rootSchema=void 0),f}},{"./Report":895,"./SchemaCache":896,"./Utils":899}],898:[function(e,t,u){"use strict";var r=e("./FormatValidators"),c=e("./JsonValidation"),l=e("./Report"),d=e("./Utils"),f={$ref:function(e,t){"string"!=typeof t.$ref&&e.addError("KEYWORD_TYPE_EXPECTED",["$ref","string"])},$schema:function(e,t){"string"!=typeof t.$schema&&e.addError("KEYWORD_TYPE_EXPECTED",["$schema","string"])},multipleOf:function(e,t){"number"!=typeof t.multipleOf?e.addError("KEYWORD_TYPE_EXPECTED",["multipleOf","number"]):t.multipleOf<=0&&e.addError("KEYWORD_MUST_BE",["multipleOf","strictly greater than 0"])},maximum:function(e,t){"number"!=typeof t.maximum&&e.addError("KEYWORD_TYPE_EXPECTED",["maximum","number"])},exclusiveMaximum:function(e,t){"boolean"!=typeof t.exclusiveMaximum?e.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMaximum","boolean"]):void 0===t.maximum&&e.addError("KEYWORD_DEPENDENCY",["exclusiveMaximum","maximum"])},minimum:function(e,t){"number"!=typeof t.minimum&&e.addError("KEYWORD_TYPE_EXPECTED",["minimum","number"])},exclusiveMinimum:function(e,t){"boolean"!=typeof t.exclusiveMinimum?e.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMinimum","boolean"]):void 0===t.minimum&&e.addError("KEYWORD_DEPENDENCY",["exclusiveMinimum","minimum"])},maxLength:function(e,t){"integer"!==d.whatIs(t.maxLength)?e.addError("KEYWORD_TYPE_EXPECTED",["maxLength","integer"]):t.maxLength<0&&e.addError("KEYWORD_MUST_BE",["maxLength","greater than, or equal to 0"])},minLength:function(e,t){"integer"!==d.whatIs(t.minLength)?e.addError("KEYWORD_TYPE_EXPECTED",["minLength","integer"]):t.minLength<0&&e.addError("KEYWORD_MUST_BE",["minLength","greater than, or equal to 0"])},pattern:function(t,r){if("string"!=typeof r.pattern)t.addError("KEYWORD_TYPE_EXPECTED",["pattern","string"]);else try{RegExp(r.pattern)}catch(e){t.addError("KEYWORD_PATTERN",["pattern",r.pattern])}},additionalItems:function(e,t){var r=d.whatIs(t.additionalItems);"boolean"!==r&&"object"!==r?e.addError("KEYWORD_TYPE_EXPECTED",["additionalItems",["boolean","object"]]):"object"===r&&(e.path.push("additionalItems"),u.validateSchema.call(this,e,t.additionalItems),e.path.pop())},items:function(e,t){var r=d.whatIs(t.items);if("object"===r)e.path.push("items"),u.validateSchema.call(this,e,t.items),e.path.pop();else if("array"===r)for(var n=t.items.length;n--;)e.path.push("items"),e.path.push(n.toString()),u.validateSchema.call(this,e,t.items[n]),e.path.pop(),e.path.pop();else e.addError("KEYWORD_TYPE_EXPECTED",["items",["array","object"]]);!0===this.options.forceAdditional&&void 0===t.additionalItems&&Array.isArray(t.items)&&e.addError("KEYWORD_UNDEFINED_STRICT",["additionalItems"]),this.options.assumeAdditional&&void 0===t.additionalItems&&Array.isArray(t.items)&&(t.additionalItems=!1)},maxItems:function(e,t){"number"!=typeof t.maxItems?e.addError("KEYWORD_TYPE_EXPECTED",["maxItems","integer"]):t.maxItems<0&&e.addError("KEYWORD_MUST_BE",["maxItems","greater than, or equal to 0"])},minItems:function(e,t){"integer"!==d.whatIs(t.minItems)?e.addError("KEYWORD_TYPE_EXPECTED",["minItems","integer"]):t.minItems<0&&e.addError("KEYWORD_MUST_BE",["minItems","greater than, or equal to 0"])},uniqueItems:function(e,t){"boolean"!=typeof t.uniqueItems&&e.addError("KEYWORD_TYPE_EXPECTED",["uniqueItems","boolean"])},maxProperties:function(e,t){"integer"!==d.whatIs(t.maxProperties)?e.addError("KEYWORD_TYPE_EXPECTED",["maxProperties","integer"]):t.maxProperties<0&&e.addError("KEYWORD_MUST_BE",["maxProperties","greater than, or equal to 0"])},minProperties:function(e,t){"integer"!==d.whatIs(t.minProperties)?e.addError("KEYWORD_TYPE_EXPECTED",["minProperties","integer"]):t.minProperties<0&&e.addError("KEYWORD_MUST_BE",["minProperties","greater than, or equal to 0"])},required:function(e,t){if("array"!==d.whatIs(t.required))e.addError("KEYWORD_TYPE_EXPECTED",["required","array"]);else if(0===t.required.length)e.addError("KEYWORD_MUST_BE",["required","an array with at least one element"]);else{for(var r=t.required.length;r--;)"string"!=typeof t.required[r]&&e.addError("KEYWORD_VALUE_TYPE",["required","string"]);!1===d.isUniqueArray(t.required)&&e.addError("KEYWORD_MUST_BE",["required","an array with unique items"])}},additionalProperties:function(e,t){var r=d.whatIs(t.additionalProperties);"boolean"!==r&&"object"!==r?e.addError("KEYWORD_TYPE_EXPECTED",["additionalProperties",["boolean","object"]]):"object"===r&&(e.path.push("additionalProperties"),u.validateSchema.call(this,e,t.additionalProperties),e.path.pop())},properties:function(e,t){if("object"!==d.whatIs(t.properties))e.addError("KEYWORD_TYPE_EXPECTED",["properties","object"]);else{for(var r=Object.keys(t.properties),n=r.length;n--;){var i=r[n],o=t.properties[i];e.path.push("properties"),e.path.push(i),u.validateSchema.call(this,e,o),e.path.pop(),e.path.pop()}!0===this.options.forceAdditional&&void 0===t.additionalProperties&&e.addError("KEYWORD_UNDEFINED_STRICT",["additionalProperties"]),this.options.assumeAdditional&&void 0===t.additionalProperties&&(t.additionalProperties=!1),!0===this.options.forceProperties&&0===r.length&&e.addError("CUSTOM_MODE_FORCE_PROPERTIES",["properties"])}},patternProperties:function(t,e){if("object"!==d.whatIs(e.patternProperties))t.addError("KEYWORD_TYPE_EXPECTED",["patternProperties","object"]);else{for(var r=Object.keys(e.patternProperties),n=r.length;n--;){var i=r[n],o=e.patternProperties[i];try{RegExp(i)}catch(e){t.addError("KEYWORD_PATTERN",["patternProperties",i])}t.path.push("patternProperties"),t.path.push(i.toString()),u.validateSchema.call(this,t,o),t.path.pop(),t.path.pop()}!0===this.options.forceProperties&&0===r.length&&t.addError("CUSTOM_MODE_FORCE_PROPERTIES",["patternProperties"])}},dependencies:function(e,t){if("object"!==d.whatIs(t.dependencies))e.addError("KEYWORD_TYPE_EXPECTED",["dependencies","object"]);else for(var r=Object.keys(t.dependencies),n=r.length;n--;){var i=r[n],o=t.dependencies[i],a=d.whatIs(o);if("object"===a)e.path.push("dependencies"),e.path.push(i),u.validateSchema.call(this,e,o),e.path.pop(),e.path.pop();else if("array"===a){var s=o.length;for(0===s&&e.addError("KEYWORD_MUST_BE",["dependencies","not empty array"]);s--;)"string"!=typeof o[s]&&e.addError("KEYWORD_VALUE_TYPE",["dependensices","string"]);!1===d.isUniqueArray(o)&&e.addError("KEYWORD_MUST_BE",["dependencies","an array with unique items"])}else e.addError("KEYWORD_VALUE_TYPE",["dependencies","object or array"])}},enum:function(e,t){!1===Array.isArray(t.enum)?e.addError("KEYWORD_TYPE_EXPECTED",["enum","array"]):0===t.enum.length?e.addError("KEYWORD_MUST_BE",["enum","an array with at least one element"]):!1===d.isUniqueArray(t.enum)&&e.addError("KEYWORD_MUST_BE",["enum","an array with unique elements"])},type:function(e,t){var r=["array","boolean","integer","number","null","object","string"],n=r.join(","),i=Array.isArray(t.type);if(i){for(var o=t.type.length;o--;)-1===r.indexOf(t.type[o])&&e.addError("KEYWORD_TYPE_EXPECTED",["type",n]);!1===d.isUniqueArray(t.type)&&e.addError("KEYWORD_MUST_BE",["type","an object with unique properties"])}else"string"==typeof t.type?-1===r.indexOf(t.type)&&e.addError("KEYWORD_TYPE_EXPECTED",["type",n]):e.addError("KEYWORD_TYPE_EXPECTED",["type",["string","array"]]);!0===this.options.noEmptyStrings&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.minLength&&void 0===t.enum&&void 0===t.format&&(t.minLength=1),!0===this.options.noEmptyArrays&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.minItems&&(t.minItems=1),!0===this.options.forceProperties&&("object"===t.type||i&&-1!==t.type.indexOf("object"))&&void 0===t.properties&&void 0===t.patternProperties&&e.addError("KEYWORD_UNDEFINED_STRICT",["properties"]),!0===this.options.forceItems&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.items&&e.addError("KEYWORD_UNDEFINED_STRICT",["items"]),!0===this.options.forceMinItems&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.minItems&&e.addError("KEYWORD_UNDEFINED_STRICT",["minItems"]),!0===this.options.forceMaxItems&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.maxItems&&e.addError("KEYWORD_UNDEFINED_STRICT",["maxItems"]),!0===this.options.forceMinLength&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.minLength&&void 0===t.format&&void 0===t.enum&&void 0===t.pattern&&e.addError("KEYWORD_UNDEFINED_STRICT",["minLength"]),!0===this.options.forceMaxLength&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.maxLength&&void 0===t.format&&void 0===t.enum&&void 0===t.pattern&&e.addError("KEYWORD_UNDEFINED_STRICT",["maxLength"])},allOf:function(e,t){if(!1===Array.isArray(t.allOf))e.addError("KEYWORD_TYPE_EXPECTED",["allOf","array"]);else if(0===t.allOf.length)e.addError("KEYWORD_MUST_BE",["allOf","an array with at least one element"]);else for(var r=t.allOf.length;r--;)e.path.push("allOf"),e.path.push(r.toString()),u.validateSchema.call(this,e,t.allOf[r]),e.path.pop(),e.path.pop()},anyOf:function(e,t){if(!1===Array.isArray(t.anyOf))e.addError("KEYWORD_TYPE_EXPECTED",["anyOf","array"]);else if(0===t.anyOf.length)e.addError("KEYWORD_MUST_BE",["anyOf","an array with at least one element"]);else for(var r=t.anyOf.length;r--;)e.path.push("anyOf"),e.path.push(r.toString()),u.validateSchema.call(this,e,t.anyOf[r]),e.path.pop(),e.path.pop()},oneOf:function(e,t){if(!1===Array.isArray(t.oneOf))e.addError("KEYWORD_TYPE_EXPECTED",["oneOf","array"]);else if(0===t.oneOf.length)e.addError("KEYWORD_MUST_BE",["oneOf","an array with at least one element"]);else for(var r=t.oneOf.length;r--;)e.path.push("oneOf"),e.path.push(r.toString()),u.validateSchema.call(this,e,t.oneOf[r]),e.path.pop(),e.path.pop()},not:function(e,t){"object"!==d.whatIs(t.not)?e.addError("KEYWORD_TYPE_EXPECTED",["not","object"]):(e.path.push("not"),u.validateSchema.call(this,e,t.not),e.path.pop())},definitions:function(e,t){if("object"!==d.whatIs(t.definitions))e.addError("KEYWORD_TYPE_EXPECTED",["definitions","object"]);else for(var r=Object.keys(t.definitions),n=r.length;n--;){var i=r[n],o=t.definitions[i];e.path.push("definitions"),e.path.push(i),u.validateSchema.call(this,e,o),e.path.pop(),e.path.pop()}},format:function(e,t){"string"!=typeof t.format?e.addError("KEYWORD_TYPE_EXPECTED",["format","string"]):void 0===r[t.format]&&!0!==this.options.ignoreUnknownFormats&&e.addError("UNKNOWN_FORMAT",[t.format])},id:function(e,t){"string"!=typeof t.id&&e.addError("KEYWORD_TYPE_EXPECTED",["id","string"])},title:function(e,t){"string"!=typeof t.title&&e.addError("KEYWORD_TYPE_EXPECTED",["title","string"])},description:function(e,t){"string"!=typeof t.description&&e.addError("KEYWORD_TYPE_EXPECTED",["description","string"])},default:function(){}};u.validateSchema=function(e,t){if(e.commonErrorMessage="SCHEMA_VALIDATION_FAILED",Array.isArray(t))return function(e,t){for(var r=t.length;r--;)u.validateSchema.call(this,e,t[r]);return e.isValid()}.call(this,e,t);if(t.__$validated)return!0;for(var r=t.$schema&&t.id!==t.$schema,n=(r&&(t.__$schemaResolved&&t.__$schemaResolved!==t?(s=new l(e),!1===c.validate.call(this,s,t.__$schemaResolved,t)&&e.addError("PARENT_SCHEMA_VALIDATION_FAILED",null,s)):!0!==this.options.ignoreUnresolvableReferences&&e.addError("REF_UNRESOLVED",[t.$schema])),!0===this.options.noTypeless&&(void 0!==t.type&&(s=[],Array.isArray(t.anyOf)&&(s=s.concat(t.anyOf)),Array.isArray(t.oneOf)&&(s=s.concat(t.oneOf)),(s=Array.isArray(t.allOf)?s.concat(t.allOf):s).forEach(function(e){e.type||(e.type=t.type)})),void 0===t.enum)&&void 0===t.type&&void 0===t.anyOf&&void 0===t.oneOf&&void 0===t.not&&void 0===t.$ref&&e.addError("KEYWORD_UNDEFINED_STRICT",["type"]),Object.keys(t)),i=n.length;i--;){var o=n[i];0!==o.indexOf("__")&&(void 0!==f[o]?f[o].call(this,e,t):r||!0===this.options.noExtraKeywords&&e.addError("KEYWORD_UNEXPECTED",[o]))}if(!0===this.options.pedanticCheck){if(t.enum){var a=d.clone(t);for(delete a.enum,delete a.default,e.path.push("enum"),i=t.enum.length;i--;)e.path.push(i.toString()),c.validate.call(this,e,a,t.enum[i]),e.path.pop();e.path.pop()}t.default&&(e.path.push("default"),c.validate.call(this,e,t,t.default),e.path.pop())}var s=e.isValid();return s&&(t.__$validated=!0),s}},{"./FormatValidators":892,"./JsonValidation":893,"./Report":895,"./Utils":899}],899:[function(e,t,u){"use strict";u.jsonSymbol=Symbol.for("z-schema/json"),u.schemaSymbol=Symbol.for("z-schema/schema");var c=u.sortedKeys=function(e){return Object.keys(e).sort()};u.isAbsoluteUri=function(e){return/^https?:\/\//.test(e)},u.isRelativeUri=function(e){return/.+#/.test(e)},u.whatIs=function(e){var t=typeof e;return"object"==t?null===e?"null":Array.isArray(e)?"array":"object":"number"==t?Number.isFinite(e)?e%1==0?"integer":"number":Number.isNaN(e)?"not-a-number":"unknown-number":t},u.areEqual=function e(t,r,n){var i,o,a=(n=n||{}).caseInsensitiveComparison||!1;if(t!==r&&(!0!==a||"string"!=typeof t||"string"!=typeof r||t.toUpperCase()!==r.toUpperCase()))if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(o=t.length,i=0;i<o;i++)if(!e(t[i],r[i],{caseInsensitiveComparison:a}))return!1}else{if("object"!==u.whatIs(t)||"object"!==u.whatIs(r))return!1;var s=c(t);if(!e(s,c(r),{caseInsensitiveComparison:a}))return!1;for(o=s.length,i=0;i<o;i++)if(!e(t[s[i]],r[s[i]],{caseInsensitiveComparison:a}))return!1}return!0},u.isUniqueArray=function(e,t){for(var r,n=e.length,i=0;i<n;i++)for(r=i+1;r<n;r++)if(u.areEqual(e[i],e[r]))return t&&t.push(i,r),!1;return!0},u.difference=function(e,t){for(var r=[],n=e.length;n--;)-1===t.indexOf(e[n])&&r.push(e[n]);return r},u.clone=function(e){if(void 0!==e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))for(t=[],n=e.length;n--;)t[n]=e[n];else for(var t={},r=Object.keys(e),n=r.length;n--;){var i=r[n];t[i]=e[i]}return t}},u.cloneDeep=function(e){var s=0,u=new Map,c=[];return function e(t){if("object"!=typeof t||null===t)return t;var r,n=u.get(t);if(void 0!==n)return c[n];if(u.set(t,s++),Array.isArray(t))for(c.push(r=[]),o=t.length;o--;)r[o]=e(t[o]);else{c.push(r={});for(var i=Object.keys(t),o=i.length;o--;){var a=i[o];r[a]=e(t[a])}}return r}(e)},u.ucs2decode=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}},{}],900:[function(e,s,t){!function(m){!function(){"use strict";e("./Polyfills");var u=e("lodash.get"),c=e("./Report"),r=e("./FormatValidators"),l=e("./JsonValidation"),d=e("./SchemaCache"),f=e("./SchemaCompilation"),p=e("./SchemaValidation"),h=e("./Utils"),t=e("./schemas/schema.json"),n=e("./schemas/hyper-schema.json"),o={asyncTimeout:2e3,forceAdditional:!1,assumeAdditional:!1,enumCaseInsensitiveComparison:!1,forceItems:!1,forceMinItems:!1,forceMaxItems:!1,forceMinLength:!1,forceMaxLength:!1,forceProperties:!1,ignoreUnresolvableReferences:!1,noExtraKeywords:!1,noTypeless:!1,noEmptyStrings:!1,noEmptyArrays:!1,strictUris:!1,strictMode:!1,reportPathAsArray:!1,breakOnFirstError:!1,pedanticCheck:!1,ignoreUnknownFormats:!1,customValidator:null};function i(e){var t;if("object"==typeof e){for(var r,n=Object.keys(e),i=n.length;i--;)if(r=n[i],void 0===o[r])throw new Error("Unexpected option passed to constructor: "+r);for(i=(n=Object.keys(o)).length;i--;)void 0===e[r=n[i]]&&(e[r]=h.clone(o[r]));t=e}else t=h.clone(o);return!0===t.strictMode&&(t.forceAdditional=!0,t.forceItems=!0,t.forceMaxLength=!0,t.forceProperties=!0,t.noExtraKeywords=!0,t.noTypeless=!0,t.noEmptyStrings=!0,t.noEmptyArrays=!0),t}function a(e){this.cache={},this.referenceCache=[],this.validateOptions={},this.options=i(e);e=i({});this.setRemoteReference("http://json-schema.org/draft-04/schema",t,e),this.setRemoteReference("http://json-schema.org/draft-04/hyper-schema",n,e)}a.prototype.compileSchema=function(e){var t=new c(this.options);return e=d.getSchema.call(this,t,e),f.compileSchema.call(this,t,e),(this.lastReport=t).isValid()},a.prototype.validateSchema=function(e){if(Array.isArray(e)&&0===e.length)throw new Error(".validateSchema was called with an empty array");var t=new c(this.options);return e=d.getSchema.call(this,t,e),f.compileSchema.call(this,t,e)&&p.validateSchema.call(this,t,e),(this.lastReport=t).isValid()},a.prototype.validate=function(e,t,r,n){"function"===h.whatIs(r)&&(n=r,r={}),this.validateOptions=r=r||{};var i=h.whatIs(t);if("string"!==i&&"object"!==i){var o=new Error("Invalid .validate call - schema must be a string or object but "+i+" was passed!");if(n)return void m.nextTick(function(){n(o,!1)});throw o}var i=!1,a=new c(this.options);if(a.json=e,"string"==typeof t){var s=t;if(!(t=d.getSchema.call(this,a,s)))throw new Error("Schema with id '"+s+"' wasn't found in the validator cache!")}else t=d.getSchema.call(this,a,t);s=!1,(s=i?s:f.compileSchema.call(this,a,t))||(this.lastReport=a,i=!0),s=!1;if((s=i?s:p.validateSchema.call(this,a,t))||(this.lastReport=a,i=!0),r.schemaPath&&(a.rootSchema=t,!(t=u(t,r.schemaPath))))throw new Error("Schema path '"+r.schemaPath+"' wasn't found in the schema!");if(i||l.validate.call(this,a,t,e),!n){if(0<a.asyncTasks.length)throw new Error("This validation has async tasks and cannot be done in sync mode, please provide callback argument.");return(this.lastReport=a).isValid()}a.processAsyncTasks(this.options.asyncTimeout,n)},a.prototype.getLastError=function(){var e;return 0===this.lastReport.errors.length?null:((e=new Error).name="z-schema validation error",e.message=this.lastReport.commonErrorMessage,e.details=this.lastReport.errors,e)},a.prototype.getLastErrors=function(){return this.lastReport&&0<this.lastReport.errors.length?this.lastReport.errors:null},a.prototype.getMissingReferences=function(e){for(var t=[],r=(e=e||this.lastReport.errors).length;r--;){var n,i=e[r];"UNRESOLVABLE_REFERENCE"===i.code&&(n=i.params[0],-1===t.indexOf(n))&&t.push(n),i.inner&&(t=t.concat(this.getMissingReferences(i.inner)))}return t},a.prototype.getMissingRemoteReferences=function(){for(var e=this.getMissingReferences(),t=[],r=e.length;r--;){var n=d.getRemotePath(e[r]);n&&-1===t.indexOf(n)&&t.push(n)}return t},a.prototype.setRemoteReference=function(e,t,r){t="string"==typeof t?JSON.parse(t):h.cloneDeep(t),r&&(t.__$validationOptions=i(r)),d.cacheSchemaByUri.call(this,e,t)},a.prototype.getResolvedSchema=function(e){var t=new c(this.options),o=(e=d.getSchema.call(this,t,e),e=h.cloneDeep(e),[]),a=function(e){var t,r=h.whatIs(e);if(("object"===r||"array"===r)&&!e.___$visited){if(e.___$visited=!0,o.push(e),e.$ref&&e.__$refResolved){var n=e.__$refResolved,i=e;for(t in delete e.$ref,delete e.__$refResolved,n)n.hasOwnProperty(t)&&(i[t]=n[t])}for(t in e)e.hasOwnProperty(t)&&(0===t.indexOf("__$")?delete e[t]:a(e[t]))}};if(a(e),o.forEach(function(e){delete e.___$visited}),(this.lastReport=t).isValid())return e;throw this.getLastError()},a.prototype.setSchemaReader=function(e){return a.setSchemaReader(e)},a.prototype.getSchemaReader=function(){return a.schemaReader},a.schemaReader=void 0,a.setSchemaReader=function(e){a.schemaReader=e},a.registerFormat=function(e,t){r[e]=t},a.unregisterFormat=function(e){delete r[e]},a.getRegisteredFormats=function(){return Object.keys(r)},a.getDefaultOptions=function(){return h.cloneDeep(o)},a.schemaSymbol=h.schemaSymbol,a.jsonSymbol=h.jsonSymbol,s.exports=a}.call(this)}.call(this,e("_process"))},{"./FormatValidators":892,"./JsonValidation":893,"./Polyfills":894,"./Report":895,"./SchemaCache":896,"./SchemaCompilation":897,"./SchemaValidation":898,"./Utils":899,"./schemas/hyper-schema.json":901,"./schemas/schema.json":902,_process:930,"lodash.get":153}],901:[function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-04/hyper-schema#",id:"http://json-schema.org/draft-04/hyper-schema#",title:"JSON Hyper-Schema",allOf:[{$ref:"http://json-schema.org/draft-04/schema#"}],properties:{additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}]},dependencies:{additionalProperties:{anyOf:[{$ref:"#"},{type:"array"}]}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}]},definitions:{additionalProperties:{$ref:"#"}},patternProperties:{additionalProperties:{$ref:"#"}},properties:{additionalProperties:{$ref:"#"}},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},links:{type:"array",items:{$ref:"#/definitions/linkDescription"}},fragmentResolution:{type:"string"},media:{type:"object",properties:{type:{description:"A media type, as described in RFC 2046",type:"string"},binaryEncoding:{description:"A content encoding scheme, as described in RFC 2045",type:"string"}}},pathStart:{description:"Instances' URIs must start with this value for this schema to apply to them",type:"string",format:"uri"}},definitions:{schemaArray:{type:"array",items:{$ref:"#"}},linkDescription:{title:"Link Description Object",type:"object",required:["href","rel"],properties:{href:{description:"a URI template, as defined by RFC 6570, with the addition of the $, ( and ) characters for pre-processing",type:"string"},rel:{description:"relation to the target resource of the link",type:"string"},title:{description:"a title for the link",type:"string"},targetSchema:{description:"JSON Schema describing the link target",$ref:"#"},mediaType:{description:"media type (as defined by RFC 2046) describing the link target",type:"string"},method:{description:'method for requesting the target of the link (e.g. for HTTP this might be "GET" or "DELETE")',type:"string"},encType:{description:"The media type in which to submit data along with the request",type:"string",default:"application/json"},schema:{description:"Schema describing the data to submit along with the request",$ref:"#"}}}}}},{}],902:[function(e,t,r){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}},{}],903:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=P(e("rxdb")),i=P(e("rxdb/plugins/dev-mode")),o=P(e("rxdb/plugins/update")),s=P(e("rxdb/plugins/json-dump")),u=P(e("rxdb/plugins/migration")),c=P(e("rxdb/plugins/cleanup")),l=P(e("rxdb/plugins/backup")),d=P(e("rxdb/plugins/local-documents")),f=P(e("rxdb/plugins/leader-election")),p=P(e("rxdb/plugins/attachments-compression")),h=P(e("rxdb/plugins/encryption-crypto-js")),m=P(e("rxdb/plugins/key-compression")),y=P(e("rxdb/plugins/crdt")),b=P(e("rxdb/plugins/validate-ajv")),v=P(e("rxdb/plugins/validate-z-schema")),g=P(e("rxdb/plugins/validate-is-my-json-valid")),_=P(e("rxdb/plugins/query-builder")),w=P(e("rxdb/plugins/storage-dexie")),O=P(e("rxdb/plugins/storage-lokijs")),S=P(e("rxdb/plugins/storage-memory")),E=P(e("rxdb/plugins/storage-remote"));function x(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(x=function(e){return e?r:t})(e))}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=x(t);if(t&&t.has(e))return t.get(e);var r,n,i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}e=e("lokijs/src/incremental-indexeddb-adapter");window.RxDBLib={RxDBCore:n,RxDBPluginsDevMode:i,RxDBPluginsUpdate:o,RxDBPluginsJsonDump:s,RxDBPluginsMigration:u,RxDBPluginsCleanup:c,RxDBPluginsBackup:l,RxDBPluginsLocalDocuments:d,RxDBPluginsLeaderElection:f,RxDBPluginsAttachmentsCompression:p,RxDBPluginsEncryptionCryptoJS:h,RxDBPluginsKeyCompression:m,RxDBPluginsCRDT:y,RxDBPluginsValidateAJV:b,RxDBPluginsValidateZSchema:v,RxDBPluginsValidateIsMyJsonValid:g,RxDBPluginsStorageDexie:w,RxDBPluginsStorageLokijs:O,RxDBPluginsStorageMemory:S,RxDBPluginsStorageRemote:E,RxDBPluginsQueryBuilder:_,LokiIncrementalIndexedDBAdapter:e}},{"lokijs/src/incremental-indexeddb-adapter":155,rxdb:434,"rxdb/plugins/attachments-compression":438,"rxdb/plugins/backup":440,"rxdb/plugins/cleanup":443,"rxdb/plugins/crdt":444,"rxdb/plugins/dev-mode":452,"rxdb/plugins/encryption-crypto-js":454,"rxdb/plugins/json-dump":455,"rxdb/plugins/key-compression":456,"rxdb/plugins/leader-election":457,"rxdb/plugins/local-documents":458,"rxdb/plugins/migration":463,"rxdb/plugins/query-builder":466,"rxdb/plugins/storage-dexie":473,"rxdb/plugins/storage-lokijs":476,"rxdb/plugins/storage-memory":482,"rxdb/plugins/storage-remote":487,"rxdb/plugins/update":493,"rxdb/plugins/validate-ajv":512,"rxdb/plugins/validate-is-my-json-valid":513,"rxdb/plugins/validate-z-schema":514}],904:[function(e,t,r){},{}],905:[function(e,t,r){!function(e){!function(){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof n[r[t]]&&(e[e.length]=r[t]);return e}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],906:[function(e,t,r){"use strict";r.byteLength=function(e){var e=l(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=l(e),i=n[0],n=n[1],o=new c(function(e,t){return 3*(e+t)/4-t}(i,n)),a=0,s=0<n?i-4:i;for(r=0;r<s;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,o[a++]=255&t);1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t);return o},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(n));return i.join("")}(e,o,a<o+16383?a:o+16383));1==n?(t=e[r-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)s[i]=n[i],u[n.charCodeAt(i)]=i;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],907:[function(e,t,r){arguments[4][904][0].apply(r,arguments)},{dup:904}],908:[function(R,e,C){!function(e){!function(){"use strict";var E=R("base64-js"),o=R("ieee754"),t=(C.Buffer=d,C.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},C.INSPECT_MAX_BYTES=50,2147483647);function u(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=d.prototype,e}function d(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function n(e,t,r){if("string"==typeof e){var n=e,i=t;if(d.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|f(n,i),a=u(o),a=(n=a.write(n,i))!==o?a.slice(0,n):a;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer)){var o=e,n=t,a=r;if(n<0||o.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<n+(a||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===n&&void 0===a?new Uint8Array(o):void 0===a?new Uint8Array(o,n):new Uint8Array(o,n,a)).__proto__=d.prototype,o}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return d.from(i,t,r);var s=function(e){{var t,r;if(d.isBuffer(e))return t=0|l(e.length),0!==(r=u(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||I(e.length)?u(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return i(e),u(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=u(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:P(e).length;t=(""+t).toLowerCase(),i=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,a=t,s=r,u=o.length;(!s||s<0||u<s)&&(s=u);for(var c="",l=a=!a||a<0?0:a;l<s;++l)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(o[l]);return c;case"utf8":case"utf-8":return x(this,t,r);case"ascii":var d=this,u=t,f=r,p="";f=Math.min(d.length,f);for(var h=u;h<f;++h)p+=String.fromCharCode(127&d[h]);return p;case"latin1":case"binary":var m=this,a=t,y=r,b="";y=Math.min(m.length,y);for(var v=a;v<y;++v)b+=String.fromCharCode(m[v]);return b;case"base64":return g=this,n=r,0===(_=t)&&n===g.length?E.fromByteArray(g):E.fromByteArray(g.slice(_,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var g=t,_=r,w=this.slice(g,_),O="",S=0;S<w.length;S+=2)O+=String.fromCharCode(w[S]+256*w[S+1]);return O;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function s(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=I(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=d.from(t,n)),d.isBuffer(t))return 0===t.length?-1:h(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):h(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function h(e,t,r,n,i){var o=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=r;l<a;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===s)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=r=a<r+s?a-s:r;0<=l;l--){for(var d=!0,f=0;f<s;f++)if(u(e,l+f)!==u(t,f)){d=!1;break}if(d)return l}return-1}function y(e,t,r,n){return A(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return A(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,c=e[i],l=null,d=239<c?4:223<c?3:191<c?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(l=u)}null===l?(l=65533,d=1):65535<l&&(n.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}var f=n,p=f.length;if(p<=v)return String.fromCharCode.apply(String,f);for(var h="",m=0;m<p;)h+=String.fromCharCode.apply(String,f.slice(m,m+=v));return h}C.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=n,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)},d.allocUnsafe=a,d.allocUnsafeSlow=a,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(M(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=d.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(M(o,Uint8Array)&&(o=d.from(o)),!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)s(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)s(this,t,t+3),s(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)s(this,t,t+7),s(this,t+1,t+6),s(this,t+2,t+5),s(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):r.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var e="",t=C.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,r,n,i){if(M(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){o=u[l],a=c[l];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},d.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},d.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},d.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,a,s,u=!1;;)switch(n){case"hex":var c=this,l=e,d=t,f=r,p=(d=Number(d)||0,c.length-d);(!f||p<(f=Number(f)))&&(f=p),(p=l.length)/2<f&&(f=p/2);for(var h=0;h<f;++h){var m=parseInt(l.substr(2*h,2),16);if(I(m))return h;c[d+h]=m}return h;case"utf8":case"utf-8":return p=t,s=r,A(P(e,(a=this).length-p),a,p,s);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return y(this,e,t,r);case"base64":return a=this,s=t,o=r,A(j(e),a,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function m(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function g(e,t,r,n,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function O(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,8),o.write(e,t,r,n,52,8),r+8}d.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=d.prototype,r},d.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},d.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},d.prototype.readUInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},d.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||m(e,4,this.length),o.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||m(e,4,this.length),o.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||m(e,8,this.length),o.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||m(e,8,this.length),o.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||g(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},d.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||g(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},d.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||g(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},d.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||g(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},d.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},d.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},d.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},d.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},d.prototype.copy=function(e,t,r,n){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;0<=o;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},d.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===n&&i<128||"latin1"===n)&&(e=i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var o;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var a=d.isBuffer(e)?e:d.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var S=/[^+/0-9A-Za-z-_]/g;function P(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(e){return E.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function I(e){return e!=e}}.call(this)}.call(this,R("buffer").Buffer)},{"base64-js":906,buffer:908,ieee754:923}],909:[function(e,t,r){arguments[4][98][0].apply(r,arguments)},{"./":910,dup:98,"get-intrinsic":915}],910:[function(e,t,r){arguments[4][99][0].apply(r,arguments)},{dup:99,"function-bind":914,"get-intrinsic":915,"set-function-length":931}],911:[function(e,t,r){arguments[4][113][0].apply(r,arguments)},{dup:113,"get-intrinsic":915,gopd:916,"has-property-descriptors":917}],912:[function(e,t,r){"use strict";var v=e("is-callable"),g=Object.prototype.toString,_=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){if(!v(t))throw new TypeError("iterator must be a function");var n;if(3<=arguments.length&&(n=r),"[object Array]"===g.call(e))for(var i=e,o=t,a=n,s=0,u=i.length;s<u;s++)_.call(i,s)&&(null==a?o(i[s],s,i):o.call(a,i[s],s,i));else if("string"==typeof e)for(var c=e,l=t,d=n,f=0,p=c.length;f<p;f++)null==d?l(c.charAt(f),f,c):l.call(d,c.charAt(f),f,c);else{var h,m=e,y=t,b=n;for(h in m)_.call(m,h)&&(null==b?y(m[h],h,m):y.call(b,m[h],h,m))}}},{"is-callable":926}],913:[function(e,t,r){arguments[4][124][0].apply(r,arguments)},{dup:124}],914:[function(e,t,r){arguments[4][125][0].apply(r,arguments)},{"./implementation":913,dup:125}],915:[function(e,t,r){arguments[4][129][0].apply(r,arguments)},{dup:129,"function-bind":914,"has-proto":918,"has-symbols":919,hasown:922}],916:[function(e,t,r){arguments[4][130][0].apply(r,arguments)},{dup:130,"get-intrinsic":915}],917:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{dup:131,"get-intrinsic":915}],918:[function(e,t,r){arguments[4][132][0].apply(r,arguments)},{dup:132}],919:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{"./shams":920,dup:133}],920:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{dup:134}],921:[function(e,t,r){arguments[4][135][0].apply(r,arguments)},{dup:135,"has-symbols/shams":920}],922:[function(e,t,r){arguments[4][136][0].apply(r,arguments)},{dup:136,"function-bind":914}],923:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,d=r?i-1:0,f=r?-1:1,i=e[t+d];for(d+=f,o=i&(1<<-l)-1,i>>=-l,l+=s;0<l;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;0<l;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,n),o-=c}return(i?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u=8*o-i-1,c=(1<<u)-1,l=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+l?d/n:d*Math.pow(2,1-l))*n&&(a++,n/=2),c<=a+l?(s=0,a=c):1<=a+l?(s=(t*n-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));8<=i;e[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[r+f]=255&a,f+=p,a/=256,u-=8);e[r+f-p]|=128*o}},{}],924:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],925:[function(e,t,r){arguments[4][137][0].apply(r,arguments)},{"call-bind/callBound":909,dup:137,"has-tostringtag/shams":921}],926:[function(e,t,r){"use strict";var n,i,o=Function.prototype.toString,a="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw i}}),i={},a(function(){throw 42},null,n)}catch(e){e!==i&&(a=null)}else a=null;function s(e){try{var t=o.call(e);return c.test(t)}catch(e){return}}function u(e){try{return s(e)?!1:(o.call(e),!0)}catch(e){return!1}}var c=/^\s*class\b/,l=Object.prototype.toString,d="function"==typeof Symbol&&!!Symbol.toStringTag,f=!(0 in[,]),p=function(){return!1};"object"==typeof document&&l.call(document.all)===l.call(document.all)&&(p=function(e){if(!(!f&&e||void 0!==e&&"object"!=typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1}),t.exports=a?function(e){if(p(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{a(e,null,n)}catch(e){if(e!==i)return!1}return!s(e)&&u(e)}:function(e){var t;return!!p(e)||!!e&&!("function"!=typeof e&&"object"!=typeof e||!d&&(s(e)||"[object Function]"!==(t=l.call(e))&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t)))&&u(e)}},{}],927:[function(e,t,r){"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=e("has-tostringtag/shams")(),u=Object.getPrototypeOf;t.exports=function(e){var t;return!("function"!=typeof e||!a.test(o.call(e))&&(s?!u||(void 0===n&&(t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}(),n=!!t&&u(t)),u(e)!==n):"[object GeneratorFunction]"!==i.call(e)))}},{"has-tostringtag/shams":921}],928:[function(e,t,r){"use strict";var n=e("which-typed-array");t.exports=function(e){return!!n(e)}},{"which-typed-array":936}],929:[function(e,t,r){!function(a){!function(){"use strict";function f(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o!==s-1&&1!==a)if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){var u=n.lastIndexOf("/");if(u!==n.length-1){i=-1===u?(n="",0):(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",o=s,a=i=0;continue}t&&(0<n.length?n+="/..":n="..",i=2)}else 0<n.length?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var p={resolve:function(){for(var e,t="",r=!1,n=arguments.length-1;-1<=n&&!r;n--){var i=0<=n?arguments[n]:e=void 0===e?a.cwd():e;f(i),0!==i.length&&(t=i+"/"+t,r=47===i.charCodeAt(0))}return t=o(t,!r),r?0<t.length?"/"+t:"/":0<t.length?t:"."},normalize:function(e){var t,r;return f(e),0===e.length?".":(t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1),0<(e=0!==(e=o(e,!t)).length||t?e:".").length&&r&&(e+="/"),t?"/"+e:e)},isAbsolute:function(e){return f(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];f(r),0<r.length&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":p.normalize(e)},relative:function(e,t){if(f(e),f(t),e===t)return"";if((e=p.resolve(e))===(t=p.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,i=n-r,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var a=t.length-o,s=i<a?i:a,u=-1,c=0;c<=s;++c){if(c===s){if(s<a){if(47===t.charCodeAt(o+c))return t.slice(o+c+1);if(0===c)return t.slice(o+c)}else s<i&&(47===e.charCodeAt(r+c)?u=c:0===c&&(u=0));break}var l=e.charCodeAt(r+c);if(l!==t.charCodeAt(o+c))break;47===l&&(u=c)}for(var d="",c=r+u+1;c<=n;++c)c!==n&&47!==e.charCodeAt(c)||(0===d.length?d+="..":d+="/..");return 0<d.length?d+t.slice(o+u):(47===t.charCodeAt(o+=u)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(f(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),r=-1,n=!0,i=e.length-1;1<=i;--i)if(47===e.charCodeAt(i)){if(!n){r=i;break}}else n=!1;return-1===r?t?"/":".":t&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');f(e);var r=0,n=-1,i=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var o=t.length-1,a=-1,s=e.length-1;0<=s;--s){var u=e.charCodeAt(s);if(47===u){if(!i){r=s+1;break}}else-1===a&&(i=!1,a=s+1),0<=o&&(u===t.charCodeAt(o)?-1==--o&&(n=s):(o=-1,n=a))}return r===n?n=a:-1===n&&(n=e.length),e.slice(r,n)}for(s=e.length-1;0<=s;--s)if(47===e.charCodeAt(s)){if(!i){r=s+1;break}}else-1===n&&(i=!1,n=s+1);return-1===n?"":e.slice(r,n)},extname:function(e){f(e);for(var t=-1,r=0,n=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(i)continue;r=a+1;break}-1===n&&(i=!1,n=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t="/",r=(e=e).dir||e.root,n=e.base||(e.name||"")+(e.ext||""),r?r===e.root?r+n:r+t+n:n;var t,r,n},parse:function(e){f(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0!==e.length){for(var r,n=47===e.charCodeAt(0),i=n?(t.root="/",1):0,o=-1,a=0,s=-1,u=!0,c=e.length-1,l=0;i<=c;--c){if(47===(r=e.charCodeAt(c))){if(u)continue;a=c+1;break}-1===s&&(u=!1,s=c+1),46===r?-1===o?o=c:1!==l&&(l=1):-1!==o&&(l=-1)}-1===o||-1===s||0===l||1===l&&o===s-1&&o===a+1?-1!==s&&(t.base=t.name=0===a&&n?e.slice(1,s):e.slice(a,s)):(0===a&&n?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(a,o),t.base=e.slice(a,s)),t.ext=e.slice(o,s)),0<a?t.dir=e.slice(0,a-1):n&&(t.dir="/")}return t},sep:"/",delimiter:":",win32:null,posix:null};p.posix=p,t.exports=p}.call(this)}.call(this,e("_process"))},{_process:930}],930:[function(e,t,r){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length)&&p()}function p(){if(!l){for(var e=s(f),t=(l=!0,c.length);t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],931:[function(e,t,r){arguments[4][778][0].apply(r,arguments)},{"define-data-property":911,dup:778,"get-intrinsic":915,gopd:916,"has-property-descriptors":917}],932:[function(u,e,c){!function(r,s){!function(){var n=u("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof r?r:function(e){var t=a++,r=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,n(function(){o[t]&&(r?e.apply(null,r):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete o[e]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":930,timers:932}],933:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],934:[function(e,t,r){"use strict";var n=e("is-arguments"),i=e("is-generator-function"),o=e("which-typed-array"),a=e("is-typed-array");function s(e){return e.call.bind(e)}var u,c,l="undefined"!=typeof BigInt,d="undefined"!=typeof Symbol,f=s(Object.prototype.toString),p=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),m=s(Boolean.prototype.valueOf);function y(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function b(e){return"[object Map]"===f(e)}function v(e){return"[object Set]"===f(e)}function g(e){return"[object WeakMap]"===f(e)}function _(e){return"[object WeakSet]"===f(e)}function w(e){return"[object ArrayBuffer]"===f(e)}function O(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===f(e)}function E(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}l&&(u=s(BigInt.prototype.valueOf)),d&&(c=s(Symbol.prototype.valueOf)),r.isArgumentsObject=n,r.isGeneratorFunction=i,r.isTypedArray=a,r.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},r.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||E(e)},r.isUint8Array=function(e){return"Uint8Array"===o(e)},r.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},r.isUint16Array=function(e){return"Uint16Array"===o(e)},r.isUint32Array=function(e){return"Uint32Array"===o(e)},r.isInt8Array=function(e){return"Int8Array"===o(e)},r.isInt16Array=function(e){return"Int16Array"===o(e)},r.isInt32Array=function(e){return"Int32Array"===o(e)},r.isFloat32Array=function(e){return"Float32Array"===o(e)},r.isFloat64Array=function(e){return"Float64Array"===o(e)},r.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},r.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},b.working="undefined"!=typeof Map&&b(new Map),r.isMap=function(e){return"undefined"!=typeof Map&&(b.working?b(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),r.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},g.working="undefined"!=typeof WeakMap&&g(new WeakMap),r.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(g.working?g(e):e instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),r.isWeakSet=_,w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),r.isArrayBuffer=O,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),r.isDataView=E;var x="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function P(e){return"[object SharedArrayBuffer]"===f(e)}function j(e){return void 0!==x&&((P.working=void 0===P.working?P(new x):P.working)?P(e):e instanceof x)}function A(e){return y(e,p)}function M(e){return y(e,h)}function I(e){return y(e,m)}function R(e){return l&&y(e,u)}function C(e){return d&&y(e,c)}r.isSharedArrayBuffer=j,r.isAsyncFunction=function(e){return"[object AsyncFunction]"===f(e)},r.isMapIterator=function(e){return"[object Map Iterator]"===f(e)},r.isSetIterator=function(e){return"[object Set Iterator]"===f(e)},r.isGeneratorObject=function(e){return"[object Generator]"===f(e)},r.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===f(e)},r.isNumberObject=A,r.isStringObject=M,r.isBooleanObject=I,r.isBigIntObject=R,r.isSymbolObject=C,r.isBoxedPrimitive=function(e){return A(e)||M(e)||I(e)||R(e)||C(e)},r.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(O(e)||j(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(r,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})},{"is-arguments":925,"is-generator-function":927,"is-typed-array":928,"which-typed-array":936}],935:[function(A,e,M){!function(j){!function(){var e,t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},s=/%[sdj%]/g,n=(M.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])m(a)||!c(a)?o+=" "+a:o+=" "+u(a);return o},M.deprecate=function(e,t){var r;return void 0!==j&&!0===j.noDeprecation?e:void 0===j?function(){return M.deprecate(e,t).apply(this,arguments)}:(r=!1,function(){if(!r){if(j.throwDeprecation)throw new Error(t);j.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)})},{}),i=/^$/;function u(e,t){var r={seen:[],stylize:a};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),h(t)?r.showHidden=t:t&&M._extend(r,t),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),l(r,e,r.depth)}function o(e,t){t=u.styles[t];return t?"["+u.colors[t][0]+"m"+e+"["+u.colors[t][1]+"m":e}function a(e,t){return e}function l(t,r,n){if(t.customInspect&&r&&O(r.inspect)&&r.inspect!==M.inspect&&(!r.constructor||r.constructor.prototype!==r))return b(e=r.inspect(n,t))?e:l(t,e,n);var e=function(e,t){if(v(t))return e.stylize("undefined","undefined");{var r;if(b(t))return r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(t,r);if(e)return e;var i,e=Object.keys(r),o=(i={},e.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(e=Object.getOwnPropertyNames(r)),w(r)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return d(r);if(0===e.length){if(O(r))return a=r.name?": "+r.name:"",t.stylize("[Function"+a+"]","special");if(g(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return t.stylize(Date.prototype.toString.call(r),"date");if(w(r))return d(r)}var a="",s=!1,u=["{","}"];if(p(r)&&(s=!0,u=["[","]"]),O(r)&&(a=" [Function"+(r.name?": "+r.name:"")+"]"),g(r)&&(a=" "+RegExp.prototype.toString.call(r)),_(r)&&(a=" "+Date.prototype.toUTCString.call(r)),w(r)&&(a=" "+d(r)),0===e.length&&(!s||0==r.length))return u[0]+a+u[1];if(n<0)return g(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r),c=s?function(t,r,n,i,e){for(var o=[],a=0,s=r.length;a<s;++a)x(r,String(a))?o.push(f(t,r,n,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(f(t,r,n,i,e,!0))}),o}(t,r,n,o,e):e.map(function(e){return f(t,r,n,o,e,s)}),t.seen.pop();var c;return 60<c.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?u[0]+(""===a?"":a+"\n ")+" "+c.join(",\n  ")+" "+u[1]:u[0]+a+" "+c.join(", ")+" "+u[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i,o){var a,s,t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),x(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=m(r)?l(e,t.value,null):l(e,t.value,r-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function g(e){return c(e)&&"[object RegExp]"===r(e)}function c(e){return"object"==typeof e&&null!==e}function _(e){return c(e)&&"[object Date]"===r(e)}function w(e){return c(e)&&("[object Error]"===r(e)||e instanceof Error)}function O(e){return"function"==typeof e}function r(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}j.env.NODE_DEBUG&&(e=(e=j.env.NODE_DEBUG).replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+e+"$","i")),M.debuglog=function(t){var r;return t=t.toUpperCase(),n[t]||(i.test(t)?(r=j.pid,n[t]=function(){var e=M.format.apply(M,arguments);console.error("%s %d: %s",t,r,e)}):n[t]=function(){}),n[t]},(M.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},M.types=A("./support/types"),M.isArray=p,M.isBoolean=h,M.isNull=m,M.isNullOrUndefined=function(e){return null==e},M.isNumber=y,M.isString=b,M.isSymbol=function(e){return"symbol"==typeof e},M.isUndefined=v,M.isRegExp=g,M.types.isRegExp=g,M.isObject=c,M.isDate=_,M.types.isDate=_,M.isError=w,M.types.isNativeError=w,M.isFunction=O,M.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},M.isBuffer=A("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}M.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),E[e.getMonth()],t].join(" ")),M.format.apply(M,arguments))},M.inherits=A("inherits"),M._extend=function(e,t){if(t&&c(t))for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;M.promisify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');if(P&&o[P]){var e;if("function"!=typeof(e=o[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var r,n,e=new Promise(function(e,t){r=e,n=t}),t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);t.push(function(e,t){e?n(e):r(t)});try{o.apply(this,t)}catch(e){n(e)}return e}return Object.setPrototypeOf(e,Object.getPrototypeOf(o)),P&&Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,t(o))},M.promisify.custom=P,M.callbackify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");function n(){return r.apply(i,arguments)}var i=this;o.apply(this,e).then(function(e){j.nextTick(n.bind(null,null,e))},function(e){j.nextTick(function(e,t){var r;return e||((r=new Error("Promise was rejected with a falsy value")).reason=e,e=r),t(e)}.bind(null,e,n))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(o)),Object.defineProperties(e,t(o)),e}}.call(this)}.call(this,A("_process"))},{"./support/isBuffer":933,"./support/types":934,_process:930,inherits:924}],936:[function(h,m,e){!function(r){!function(){"use strict";var a=h("for-each"),e=h("available-typed-arrays"),n=h("call-bind"),t=h("call-bind/callBound"),s=h("gopd"),u=t("Object.prototype.toString"),c=h("has-tostringtag/shams")(),i="undefined"==typeof globalThis?r:globalThis,l=e(),d=t("String.prototype.slice"),o=Object.getPrototypeOf,f=t("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},p={__proto__:null};a(l,c&&s&&o?function(e){var t,r=new i[e];Symbol.toStringTag in r&&(r=o(r),(t=s(r,Symbol.toStringTag))||(r=o(r),t=s(r,Symbol.toStringTag)),p["$"+e]=n(t.get))}:function(e){var t=new i[e],t=t.slice||t.set;t&&(p["$"+e]=n(t))});m.exports=function(e){var t,r,n,i,o;return!(!e||"object"!=typeof e)&&(c?s?(i=e,o=!1,a(p,function(e,t){if(!o)try{"$"+e(i)===t&&(o=d(t,1))}catch(e){}}),o):null:(t=d(u(e),8,-1),-1<f(l,t)?t:"Object"===t&&(r=e,n=!1,a(p,function(e,t){if(!n)try{e(r),n=d(t,1)}catch(e){}}),n)))}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":905,"call-bind":910,"call-bind/callBound":909,"for-each":912,gopd:916,"has-tostringtag/shams":921}]},{},[903]);
